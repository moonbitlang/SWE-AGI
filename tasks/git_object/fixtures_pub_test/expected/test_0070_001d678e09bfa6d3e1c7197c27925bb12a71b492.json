{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdkaWZmIGZ1bmN0aW9uIGNvbnRleHQnCgouIC4vdGVzdC1saWIuc2gKLiAiJFRFU1RfRElSRUNUT1JZIi9kaWZmLWxpYi5zaAoKCmNhdCA8PFxFT0YgPmhlbGxvLmMKI2luY2x1ZGUgPHN0ZGlvLmg+CgpzdGF0aWMgaW50IGEodm9pZCkKewoJLyoKCSAqIER1bW15LgoJICovCn0KCnN0YXRpYyBpbnQgaGVsbG9fd29ybGQodm9pZCkKewoJLyogQ2xhc3NpYy4gKi8KCXByaW50ZigiSGVsbG8gd29ybGQuXG4iKTsKCgkvKiBTdWNjZXNzISAqLwoJcmV0dXJuIDA7Cn0Kc3RhdGljIGludCBiKHZvaWQpCnsKCS8qCgkgKiBEdW1teSwgdG9vLgoJICovCn0KCmludCBtYWluKGludCBhcmdjLCBjaGFyICoqYXJndikKewoJYSgpOwoJYigpOwoJcmV0dXJuIGhlbGxvX3dvcmxkKCk7Cn0KRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCcgJwoJZ2l0IGFkZCBoZWxsby5jICYmCgl0ZXN0X3RpY2sgJiYKCWdpdCBjb21taXQgLW0gaW5pdGlhbCAmJgoKCWdyZXAgLXYgQ2xhc3NpYyA8aGVsbG8uYyA+aGVsbG8uYy5uZXcgJiYKCW12IGhlbGxvLmMubmV3IGhlbGxvLmMKJwoKY2F0IDw8XEVPRiA+ZXhwZWN0ZWQKZGlmZiAtLWdpdCBhL2hlbGxvLmMgYi9oZWxsby5jCi0tLSBhL2hlbGxvLmMKKysrIGIvaGVsbG8uYwpAQCAtMTAsOCArMTAsNyBAQCBzdGF0aWMgaW50IGEodm9pZCkKIHN0YXRpYyBpbnQgaGVsbG9fd29ybGQodm9pZCkKIHsKLQkvKiBDbGFzc2ljLiAqLwogCXByaW50ZigiSGVsbG8gd29ybGQuXG4iKTsKIAogCS8qIFN1Y2Nlc3MhICovCiAJcmV0dXJuIDA7CiB9CkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZGlmZiAtVTAgLVcnICcKCWdpdCBkaWZmIC1VMCAtVyA+YWN0dWFsICYmCgljb21wYXJlX2RpZmZfcGF0Y2ggYWN0dWFsIGV4cGVjdGVkCicKCmNhdCA8PFxFT0YgPmV4cGVjdGVkCmRpZmYgLS1naXQgYS9oZWxsby5jIGIvaGVsbG8uYwotLS0gYS9oZWxsby5jCisrKyBiL2hlbGxvLmMKQEAgLTksOSArOSw4IEBAIHN0YXRpYyBpbnQgYSh2b2lkKQogCiBzdGF0aWMgaW50IGhlbGxvX3dvcmxkKHZvaWQpCiB7Ci0JLyogQ2xhc3NpYy4gKi8KIAlwcmludGYoIkhlbGxvIHdvcmxkLlxuIik7CiAKIAkvKiBTdWNjZXNzISAqLwogCXJldHVybiAwOwogfQpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2RpZmYgLVcnICcKCWdpdCBkaWZmIC1XID5hY3R1YWwgJiYKCWNvbXBhcmVfZGlmZl9wYXRjaCBhY3R1YWwgZXhwZWN0ZWQKJwoKdGVzdF9kb25lCg==",
    "text": "#!/bin/sh\n\ntest_description='diff function context'\n\n. ./test-lib.sh\n. \"$TEST_DIRECTORY\"/diff-lib.sh\n\n\ncat <<\\EOF >hello.c\n#include <stdio.h>\n\nstatic int a(void)\n{\n\t/*\n\t * Dummy.\n\t */\n}\n\nstatic int hello_world(void)\n{\n\t/* Classic. */\n\tprintf(\"Hello world.\\n\");\n\n\t/* Success! */\n\treturn 0;\n}\nstatic int b(void)\n{\n\t/*\n\t * Dummy, too.\n\t */\n}\n\nint main(int argc, char **argv)\n{\n\ta();\n\tb();\n\treturn hello_world();\n}\nEOF\n\ntest_expect_success 'setup' '\n\tgit add hello.c &&\n\ttest_tick &&\n\tgit commit -m initial &&\n\n\tgrep -v Classic <hello.c >hello.c.new &&\n\tmv hello.c.new hello.c\n'\n\ncat <<\\EOF >expected\ndiff --git a/hello.c b/hello.c\n--- a/hello.c\n+++ b/hello.c\n@@ -10,8 +10,7 @@ static int a(void)\n static int hello_world(void)\n {\n-\t/* Classic. */\n \tprintf(\"Hello world.\\n\");\n \n \t/* Success! */\n \treturn 0;\n }\nEOF\n\ntest_expect_success 'diff -U0 -W' '\n\tgit diff -U0 -W >actual &&\n\tcompare_diff_patch actual expected\n'\n\ncat <<\\EOF >expected\ndiff --git a/hello.c b/hello.c\n--- a/hello.c\n+++ b/hello.c\n@@ -9,9 +9,8 @@ static int a(void)\n \n static int hello_world(void)\n {\n-\t/* Classic. */\n \tprintf(\"Hello world.\\n\");\n \n \t/* Success! */\n \treturn 0;\n }\nEOF\n\ntest_expect_success 'diff -W' '\n\tgit diff -W >actual &&\n\tcompare_diff_patch actual expected\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "001d678e09bfa6d3e1c7197c27925bb12a71b492",
  "sha1_ok": true,
  "size": 1252
}
