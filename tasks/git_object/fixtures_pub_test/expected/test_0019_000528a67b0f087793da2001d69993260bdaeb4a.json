{
  "content": {
    "base64": "I2lmbmRlZiBDT01NSVRfSAojZGVmaW5lIENPTU1JVF9ICgojaW5jbHVkZSAib2JqZWN0LmgiCiNpbmNsdWRlICJ0cmVlLmgiCiNpbmNsdWRlICJzdHJidWYuaCIKI2luY2x1ZGUgImRlY29yYXRlLmgiCgpzdHJ1Y3QgY29tbWl0X2xpc3QgewoJc3RydWN0IGNvbW1pdCAqaXRlbTsKCXN0cnVjdCBjb21taXRfbGlzdCAqbmV4dDsKfTsKCnN0cnVjdCBjb21taXQgewoJc3RydWN0IG9iamVjdCBvYmplY3Q7Cgl2b2lkICp1dGlsOwoJdW5zaWduZWQgaW50IGluZGVncmVlOwoJdW5zaWduZWQgbG9uZyBkYXRlOwoJc3RydWN0IGNvbW1pdF9saXN0ICpwYXJlbnRzOwoJc3RydWN0IHRyZWUgKnRyZWU7CgljaGFyICpidWZmZXI7Cn07CgpleHRlcm4gaW50IHNhdmVfY29tbWl0X2J1ZmZlcjsKZXh0ZXJuIGNvbnN0IGNoYXIgKmNvbW1pdF90eXBlOwoKLyogV2hpbGUgd2UgY2FuIGRlY29yYXRlIGFueSBvYmplY3Qgd2l0aCBhIG5hbWUsIGl0J3Mgb25seSB1c2VkIGZvciBjb21taXRzLi4gKi8KZXh0ZXJuIHN0cnVjdCBkZWNvcmF0aW9uIG5hbWVfZGVjb3JhdGlvbjsKc3RydWN0IG5hbWVfZGVjb3JhdGlvbiB7CglzdHJ1Y3QgbmFtZV9kZWNvcmF0aW9uICpuZXh0OwoJY2hhciBuYW1lWzFdOwp9OwoKc3RydWN0IGNvbW1pdCAqbG9va3VwX2NvbW1pdChjb25zdCB1bnNpZ25lZCBjaGFyICpzaGExKTsKc3RydWN0IGNvbW1pdCAqbG9va3VwX2NvbW1pdF9yZWZlcmVuY2UoY29uc3QgdW5zaWduZWQgY2hhciAqc2hhMSk7CnN0cnVjdCBjb21taXQgKmxvb2t1cF9jb21taXRfcmVmZXJlbmNlX2dlbnRseShjb25zdCB1bnNpZ25lZCBjaGFyICpzaGExLAoJCQkJCSAgICAgIGludCBxdWlldCk7CgppbnQgcGFyc2VfY29tbWl0X2J1ZmZlcihzdHJ1Y3QgY29tbWl0ICppdGVtLCB2b2lkICpidWZmZXIsIHVuc2lnbmVkIGxvbmcgc2l6ZSk7CgppbnQgcGFyc2VfY29tbWl0KHN0cnVjdCBjb21taXQgKml0ZW0pOwoKc3RydWN0IGNvbW1pdF9saXN0ICogY29tbWl0X2xpc3RfaW5zZXJ0KHN0cnVjdCBjb21taXQgKml0ZW0sIHN0cnVjdCBjb21taXRfbGlzdCAqKmxpc3RfcCk7CnN0cnVjdCBjb21taXRfbGlzdCAqIGluc2VydF9ieV9kYXRlKHN0cnVjdCBjb21taXQgKml0ZW0sIHN0cnVjdCBjb21taXRfbGlzdCAqKmxpc3QpOwoKdm9pZCBmcmVlX2NvbW1pdF9saXN0KHN0cnVjdCBjb21taXRfbGlzdCAqbGlzdCk7Cgp2b2lkIHNvcnRfYnlfZGF0ZShzdHJ1Y3QgY29tbWl0X2xpc3QgKipsaXN0KTsKCi8qIENvbW1pdCBmb3JtYXRzICovCmVudW0gY21pdF9mbXQgewoJQ01JVF9GTVRfUkFXLAoJQ01JVF9GTVRfTUVESVVNLAoJQ01JVF9GTVRfREVGQVVMVCA9IENNSVRfRk1UX01FRElVTSwKCUNNSVRfRk1UX1NIT1JULAoJQ01JVF9GTVRfRlVMTCwKCUNNSVRfRk1UX0ZVTExFUiwKCUNNSVRfRk1UX09ORUxJTkUsCglDTUlUX0ZNVF9FTUFJTCwKCUNNSVRfRk1UX1VTRVJGT1JNQVQsCgoJQ01JVF9GTVRfVU5TUEVDSUZJRUQsCn07CgpleHRlcm4gaW50IG5vbl9hc2NpaShpbnQpOwpleHRlcm4gZW51bSBjbWl0X2ZtdCBnZXRfY29tbWl0X2Zvcm1hdChjb25zdCBjaGFyICphcmcpOwpleHRlcm4gdm9pZCBmb3JtYXRfY29tbWl0X21lc3NhZ2UoY29uc3Qgc3RydWN0IGNvbW1pdCAqY29tbWl0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgdm9pZCAqZm9ybWF0LCBzdHJ1Y3Qgc3RyYnVmICpzYik7CmV4dGVybiB2b2lkIHByZXR0eV9wcmludF9jb21taXQoZW51bSBjbWl0X2ZtdCBmbXQsIGNvbnN0IHN0cnVjdCBjb21taXQqLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cnVjdCBzdHJidWYgKiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgYWJicmV2LCBjb25zdCBjaGFyICpzdWJqZWN0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgKmFmdGVyX3N1YmplY3QsIGVudW0gZGF0ZV9tb2RlLAoJCQkJaW50IG5lZWRfOGJpdF9jdGUpOwoKLyoqIFJlbW92ZXMgdGhlIGZpcnN0IGNvbW1pdCBmcm9tIGEgbGlzdCBzb3J0ZWQgYnkgZGF0ZSwgYW5kIGFkZHMgYWxsCiAqIG9mIGl0cyBwYXJlbnRzLgogKiovCnN0cnVjdCBjb21taXQgKnBvcF9tb3N0X3JlY2VudF9jb21taXQoc3RydWN0IGNvbW1pdF9saXN0ICoqbGlzdCwKCQkJCSAgICAgIHVuc2lnbmVkIGludCBtYXJrKTsKCnN0cnVjdCBjb21taXQgKnBvcF9jb21taXQoc3RydWN0IGNvbW1pdF9saXN0ICoqc3RhY2spOwoKdm9pZCBjbGVhcl9jb21taXRfbWFya3Moc3RydWN0IGNvbW1pdCAqY29tbWl0LCB1bnNpZ25lZCBpbnQgbWFyayk7CgovKgogKiBQZXJmb3JtcyBhbiBpbi1wbGFjZSB0b3BvbG9naWNhbCBzb3J0IG9mIGxpc3Qgc3VwcGxpZWQuCiAqCiAqICAgaW52YXJpYW50IG9mIHJlc3VsdGluZyBsaXN0IGlzOgogKiAgICAgIGEgcmVhY2hhYmxlIGZyb20gYiA9PiBvcmQoYikgPCBvcmQoYSkKICogICBpbiBhZGRpdGlvbiwgd2hlbiBsaWZvID09IDAsIGNvbW1pdHMgb24gcGFyYWxsZWwgdHJhY2tzIGFyZQogKiAgIHNvcnRlZCBpbiB0aGUgZGF0ZXMgb3JkZXIuCiAqLwp2b2lkIHNvcnRfaW5fdG9wb2xvZ2ljYWxfb3JkZXIoc3RydWN0IGNvbW1pdF9saXN0ICoqIGxpc3QsIGludCBsaWZvKTsKCnN0cnVjdCBjb21taXRfZ3JhZnQgewoJdW5zaWduZWQgY2hhciBzaGExWzIwXTsKCWludCBucl9wYXJlbnQ7IC8qIDwgMCBpZiBzaGFsbG93IGNvbW1pdCAqLwoJdW5zaWduZWQgY2hhciBwYXJlbnRbRkxFWF9BUlJBWV1bMjBdOyAvKiBtb3JlICovCn07CgpzdHJ1Y3QgY29tbWl0X2dyYWZ0ICpyZWFkX2dyYWZ0X2xpbmUoY2hhciAqYnVmLCBpbnQgbGVuKTsKaW50IHJlZ2lzdGVyX2NvbW1pdF9ncmFmdChzdHJ1Y3QgY29tbWl0X2dyYWZ0ICosIGludCk7CmludCByZWFkX2dyYWZ0X2ZpbGUoY29uc3QgY2hhciAqZ3JhZnRfZmlsZSk7CgpleHRlcm4gc3RydWN0IGNvbW1pdF9saXN0ICpnZXRfbWVyZ2VfYmFzZXMoc3RydWN0IGNvbW1pdCAqcmV2MSwgc3RydWN0IGNvbW1pdCAqcmV2MiwgaW50IGNsZWFudXApOwoKZXh0ZXJuIGludCByZWdpc3Rlcl9zaGFsbG93KGNvbnN0IHVuc2lnbmVkIGNoYXIgKnNoYTEpOwpleHRlcm4gaW50IHVucmVnaXN0ZXJfc2hhbGxvdyhjb25zdCB1bnNpZ25lZCBjaGFyICpzaGExKTsKZXh0ZXJuIGludCB3cml0ZV9zaGFsbG93X2NvbW1pdHMoaW50IGZkLCBpbnQgdXNlX3BhY2tfcHJvdG9jb2wpOwpleHRlcm4gaW50IGlzX3JlcG9zaXRvcnlfc2hhbGxvdyh2b2lkKTsKZXh0ZXJuIHN0cnVjdCBjb21taXRfbGlzdCAqZ2V0X3NoYWxsb3dfY29tbWl0cyhzdHJ1Y3Qgb2JqZWN0X2FycmF5ICpoZWFkcywKCQlpbnQgZGVwdGgsIGludCBzaGFsbG93X2ZsYWcsIGludCBub3Rfc2hhbGxvd19mbGFnKTsKCmludCBpbl9tZXJnZV9iYXNlcyhzdHJ1Y3QgY29tbWl0ICosIHN0cnVjdCBjb21taXQgKiosIGludCk7CgpleHRlcm4gaW50IGludGVyYWN0aXZlX2FkZChpbnQgYXJnYywgY29uc3QgY2hhciAqKmFyZ3YsIGNvbnN0IGNoYXIgKnByZWZpeCk7CmV4dGVybiBpbnQgcmVyZXJlKHZvaWQpOwoKc3RhdGljIGlubGluZSBpbnQgc2luZ2xlX3BhcmVudChzdHJ1Y3QgY29tbWl0ICpjb21taXQpCnsKCXJldHVybiBjb21taXQtPnBhcmVudHMgJiYgIWNvbW1pdC0+cGFyZW50cy0+bmV4dDsKfQoKI2VuZGlmIC8qIENPTU1JVF9IICovCg==",
    "text": "#ifndef COMMIT_H\n#define COMMIT_H\n\n#include \"object.h\"\n#include \"tree.h\"\n#include \"strbuf.h\"\n#include \"decorate.h\"\n\nstruct commit_list {\n\tstruct commit *item;\n\tstruct commit_list *next;\n};\n\nstruct commit {\n\tstruct object object;\n\tvoid *util;\n\tunsigned int indegree;\n\tunsigned long date;\n\tstruct commit_list *parents;\n\tstruct tree *tree;\n\tchar *buffer;\n};\n\nextern int save_commit_buffer;\nextern const char *commit_type;\n\n/* While we can decorate any object with a name, it's only used for commits.. */\nextern struct decoration name_decoration;\nstruct name_decoration {\n\tstruct name_decoration *next;\n\tchar name[1];\n};\n\nstruct commit *lookup_commit(const unsigned char *sha1);\nstruct commit *lookup_commit_reference(const unsigned char *sha1);\nstruct commit *lookup_commit_reference_gently(const unsigned char *sha1,\n\t\t\t\t\t      int quiet);\n\nint parse_commit_buffer(struct commit *item, void *buffer, unsigned long size);\n\nint parse_commit(struct commit *item);\n\nstruct commit_list * commit_list_insert(struct commit *item, struct commit_list **list_p);\nstruct commit_list * insert_by_date(struct commit *item, struct commit_list **list);\n\nvoid free_commit_list(struct commit_list *list);\n\nvoid sort_by_date(struct commit_list **list);\n\n/* Commit formats */\nenum cmit_fmt {\n\tCMIT_FMT_RAW,\n\tCMIT_FMT_MEDIUM,\n\tCMIT_FMT_DEFAULT = CMIT_FMT_MEDIUM,\n\tCMIT_FMT_SHORT,\n\tCMIT_FMT_FULL,\n\tCMIT_FMT_FULLER,\n\tCMIT_FMT_ONELINE,\n\tCMIT_FMT_EMAIL,\n\tCMIT_FMT_USERFORMAT,\n\n\tCMIT_FMT_UNSPECIFIED,\n};\n\nextern int non_ascii(int);\nextern enum cmit_fmt get_commit_format(const char *arg);\nextern void format_commit_message(const struct commit *commit,\n                                  const void *format, struct strbuf *sb);\nextern void pretty_print_commit(enum cmit_fmt fmt, const struct commit*,\n                                struct strbuf *,\n                                int abbrev, const char *subject,\n                                const char *after_subject, enum date_mode,\n\t\t\t\tint need_8bit_cte);\n\n/** Removes the first commit from a list sorted by date, and adds all\n * of its parents.\n **/\nstruct commit *pop_most_recent_commit(struct commit_list **list,\n\t\t\t\t      unsigned int mark);\n\nstruct commit *pop_commit(struct commit_list **stack);\n\nvoid clear_commit_marks(struct commit *commit, unsigned int mark);\n\n/*\n * Performs an in-place topological sort of list supplied.\n *\n *   invariant of resulting list is:\n *      a reachable from b => ord(b) < ord(a)\n *   in addition, when lifo == 0, commits on parallel tracks are\n *   sorted in the dates order.\n */\nvoid sort_in_topological_order(struct commit_list ** list, int lifo);\n\nstruct commit_graft {\n\tunsigned char sha1[20];\n\tint nr_parent; /* < 0 if shallow commit */\n\tunsigned char parent[FLEX_ARRAY][20]; /* more */\n};\n\nstruct commit_graft *read_graft_line(char *buf, int len);\nint register_commit_graft(struct commit_graft *, int);\nint read_graft_file(const char *graft_file);\n\nextern struct commit_list *get_merge_bases(struct commit *rev1, struct commit *rev2, int cleanup);\n\nextern int register_shallow(const unsigned char *sha1);\nextern int unregister_shallow(const unsigned char *sha1);\nextern int write_shallow_commits(int fd, int use_pack_protocol);\nextern int is_repository_shallow(void);\nextern struct commit_list *get_shallow_commits(struct object_array *heads,\n\t\tint depth, int shallow_flag, int not_shallow_flag);\n\nint in_merge_bases(struct commit *, struct commit **, int);\n\nextern int interactive_add(int argc, const char **argv, const char *prefix);\nextern int rerere(void);\n\nstatic inline int single_parent(struct commit *commit)\n{\n\treturn commit->parents && !commit->parents->next;\n}\n\n#endif /* COMMIT_H */\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "000528a67b0f087793da2001d69993260bdaeb4a",
  "sha1_ok": false,
  "size": 3670
}
