{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMTMgUmFta3VtYXIgUmFtYWNoYW5kcmEKIwoKdGVzdF9kZXNjcmlwdGlvbj0nZ2l0IHJlYmFzZSAtLWF1dG9zdGFzaCB0ZXN0cycKLiAuL3Rlc3QtbGliLnNoCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIHNldHVwICcKCWVjaG8gaGVsbG8td29ybGQgPmZpbGUwICYmCglnaXQgYWRkIC4gJiYKCXRlc3RfdGljayAmJgoJZ2l0IGNvbW1pdCAtbSAiaW5pdGlhbCBjb21taXQiICYmCglnaXQgY2hlY2tvdXQgLWIgZmVhdHVyZS1icmFuY2ggJiYKCWVjaG8gYW5vdGhlci1oZWxsbyA+ZmlsZTEgJiYKCWVjaG8gZ29vZGJ5ZSA+ZmlsZTIgJiYKCWdpdCBhZGQgLiAmJgoJdGVzdF90aWNrICYmCglnaXQgY29tbWl0IC1tICJzZWNvbmQgY29tbWl0IiAmJgoJZWNobyBmaW5hbC1nb29kYnllID5maWxlMyAmJgoJZ2l0IGFkZCAuICYmCgl0ZXN0X3RpY2sgJiYKCWdpdCBjb21taXQgLW0gInRoaXJkIGNvbW1pdCIgJiYKCWdpdCBjaGVja291dCAtYiB1bnJlbGF0ZWQtb250by1icmFuY2ggbWFzdGVyICYmCgllY2hvIHVucmVsYXRlZCA+ZmlsZTQgJiYKCWdpdCBhZGQgLiAmJgoJdGVzdF90aWNrICYmCglnaXQgY29tbWl0IC1tICJ1bnJlbGF0ZWQgY29tbWl0IiAmJgoJZ2l0IGNoZWNrb3V0IC1iIHJlbGF0ZWQtb250by1icmFuY2ggbWFzdGVyICYmCgllY2hvIGNvbmZsaWN0aW5nLWNoYW5nZSA+ZmlsZTIgJiYKCWdpdCBhZGQgLiAmJgoJdGVzdF90aWNrICYmCglnaXQgY29tbWl0IC1tICJyZWxhdGVkIGNvbW1pdCIKJwoKY3JlYXRlX2V4cGVjdGVkX3N1Y2Nlc3NfYW0gKCkgewoJY2F0ID5leHBlY3RlZCA8PC1FT0YKCSQoZ3JlcCAiXkNyZWF0ZWQgYXV0b3N0YXNoOiBbMC05YS1mXVswLTlhLWZdKlwkIiBhY3R1YWwpCglIRUFEIGlzIG5vdyBhdCAkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCBmZWF0dXJlLWJyYW5jaCkgdGhpcmQgY29tbWl0CglGaXJzdCwgcmV3aW5kaW5nIGhlYWQgdG8gcmVwbGF5IHlvdXIgd29yayBvbiB0b3Agb2YgaXQuLi4KCUFwcGx5aW5nOiBzZWNvbmQgY29tbWl0CglBcHBseWluZzogdGhpcmQgY29tbWl0CglBcHBsaWVkIGF1dG9zdGFzaC4KCUVPRgp9CgpjcmVhdGVfZXhwZWN0ZWRfc3VjY2Vzc19pbnRlcmFjdGl2ZSAoKSB7CglxX3RvX2NyID5leHBlY3RlZCA8PC1FT0YKCSQoZ3JlcCAiXkNyZWF0ZWQgYXV0b3N0YXNoOiBbMC05YS1mXVswLTlhLWZdKlwkIiBhY3R1YWwpCglIRUFEIGlzIG5vdyBhdCAkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCBmZWF0dXJlLWJyYW5jaCkgdGhpcmQgY29tbWl0CglSZWJhc2luZyAoMS8yKVFSZWJhc2luZyAoMi8yKVFBcHBsaWVkIGF1dG9zdGFzaC4KCVN1Y2Nlc3NmdWxseSByZWJhc2VkIGFuZCB1cGRhdGVkIHJlZnMvaGVhZHMvcmViYXNlZC1mZWF0dXJlLWJyYW5jaC4KCUVPRgp9CgpjcmVhdGVfZXhwZWN0ZWRfc3VjY2Vzc19tZXJnZSAoKSB7CgljYXQgPmV4cGVjdGVkIDw8LUVPRgoJJChncmVwICJeQ3JlYXRlZCBhdXRvc3Rhc2g6IFswLTlhLWZdWzAtOWEtZl0qXCQiIGFjdHVhbCkKCUhFQUQgaXMgbm93IGF0ICQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoKSB0aGlyZCBjb21taXQKCUZpcnN0LCByZXdpbmRpbmcgaGVhZCB0byByZXBsYXkgeW91ciB3b3JrIG9uIHRvcCBvZiBpdC4uLgoJTWVyZ2luZyB1bnJlbGF0ZWQtb250by1icmFuY2ggd2l0aCBIRUFEfjEKCU1lcmdpbmc6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCB1bnJlbGF0ZWQtb250by1icmFuY2gpIHVucmVsYXRlZCBjb21taXQKCSQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoXikgc2Vjb25kIGNvbW1pdAoJZm91bmQgMSBjb21tb24gYW5jZXN0b3I6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCBmZWF0dXJlLWJyYW5jaH4yKSBpbml0aWFsIGNvbW1pdAoJW2RldGFjaGVkIEhFQUQgJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgcmViYXNlZC1mZWF0dXJlLWJyYW5jaH4xKV0gc2Vjb25kIGNvbW1pdAoJIEF1dGhvcjogQSBVIFRob3IgPGF1dGhvckBleGFtcGxlLmNvbT4KCSBEYXRlOiBUaHUgQXByIDcgMTU6MTQ6MTMgMjAwNSAtMDcwMAoJIDIgZmlsZXMgY2hhbmdlZCwgMiBpbnNlcnRpb25zKCspCgkgY3JlYXRlIG1vZGUgMTAwNjQ0IGZpbGUxCgkgY3JlYXRlIG1vZGUgMTAwNjQ0IGZpbGUyCglDb21taXR0ZWQ6IDAwMDEgc2Vjb25kIGNvbW1pdAoJTWVyZ2luZyB1bnJlbGF0ZWQtb250by1icmFuY2ggd2l0aCBIRUFEfjAKCU1lcmdpbmc6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCByZWJhc2VkLWZlYXR1cmUtYnJhbmNofjEpIHNlY29uZCBjb21taXQKCSQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoKSB0aGlyZCBjb21taXQKCWZvdW5kIDEgY29tbW9uIGFuY2VzdG9yOgoJJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgZmVhdHVyZS1icmFuY2h+MSkgc2Vjb25kIGNvbW1pdAoJW2RldGFjaGVkIEhFQUQgJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCldIHRoaXJkIGNvbW1pdAoJIEF1dGhvcjogQSBVIFRob3IgPGF1dGhvckBleGFtcGxlLmNvbT4KCSBEYXRlOiBUaHUgQXByIDcgMTU6MTU6MTMgMjAwNSAtMDcwMAoJIDEgZmlsZSBjaGFuZ2VkLCAxIGluc2VydGlvbigrKQoJIGNyZWF0ZSBtb2RlIDEwMDY0NCBmaWxlMwoJQ29tbWl0dGVkOiAwMDAyIHRoaXJkIGNvbW1pdAoJQWxsIGRvbmUuCglBcHBsaWVkIGF1dG9zdGFzaC4KCUVPRgp9CgpjcmVhdGVfZXhwZWN0ZWRfZmFpbHVyZV9hbSAoKSB7CgljYXQgPmV4cGVjdGVkIDw8LUVPRgoJJChncmVwICJeQ3JlYXRlZCBhdXRvc3Rhc2g6IFswLTlhLWZdWzAtOWEtZl0qXCQiIGFjdHVhbCkKCUhFQUQgaXMgbm93IGF0ICQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoKSB0aGlyZCBjb21taXQKCUZpcnN0LCByZXdpbmRpbmcgaGVhZCB0byByZXBsYXkgeW91ciB3b3JrIG9uIHRvcCBvZiBpdC4uLgoJQXBwbHlpbmc6IHNlY29uZCBjb21taXQKCUFwcGx5aW5nOiB0aGlyZCBjb21taXQKCUFwcGx5aW5nIGF1dG9zdGFzaCByZXN1bHRlZCBpbiBjb25mbGljdHMuCglZb3VyIGNoYW5nZXMgYXJlIHNhZmUgaW4gdGhlIHN0YXNoLgoJWW91IGNhbiBydW4gImdpdCBzdGFzaCBwb3AiIG9yICJnaXQgc3Rhc2ggZHJvcCIgYXQgYW55IHRpbWUuCglFT0YKfQoKY3JlYXRlX2V4cGVjdGVkX2ZhaWx1cmVfaW50ZXJhY3RpdmUgKCkgewoJcV90b19jciA+ZXhwZWN0ZWQgPDwtRU9GCgkkKGdyZXAgIl5DcmVhdGVkIGF1dG9zdGFzaDogWzAtOWEtZl1bMC05YS1mXSpcJCIgYWN0dWFsKQoJSEVBRCBpcyBub3cgYXQgJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgZmVhdHVyZS1icmFuY2gpIHRoaXJkIGNvbW1pdAoJUmViYXNpbmcgKDEvMilRUmViYXNpbmcgKDIvMilRQXBwbHlpbmcgYXV0b3N0YXNoIHJlc3VsdGVkIGluIGNvbmZsaWN0cy4KCVlvdXIgY2hhbmdlcyBhcmUgc2FmZSBpbiB0aGUgc3Rhc2guCglZb3UgY2FuIHJ1biAiZ2l0IHN0YXNoIHBvcCIgb3IgImdpdCBzdGFzaCBkcm9wIiBhdCBhbnkgdGltZS4KCVN1Y2Nlc3NmdWxseSByZWJhc2VkIGFuZCB1cGRhdGVkIHJlZnMvaGVhZHMvcmViYXNlZC1mZWF0dXJlLWJyYW5jaC4KCUVPRgp9CgpjcmVhdGVfZXhwZWN0ZWRfZmFpbHVyZV9tZXJnZSAoKSB7CgljYXQgPmV4cGVjdGVkIDw8LUVPRgoJJChncmVwICJeQ3JlYXRlZCBhdXRvc3Rhc2g6IFswLTlhLWZdWzAtOWEtZl0qXCQiIGFjdHVhbCkKCUhFQUQgaXMgbm93IGF0ICQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoKSB0aGlyZCBjb21taXQKCUZpcnN0LCByZXdpbmRpbmcgaGVhZCB0byByZXBsYXkgeW91ciB3b3JrIG9uIHRvcCBvZiBpdC4uLgoJTWVyZ2luZyB1bnJlbGF0ZWQtb250by1icmFuY2ggd2l0aCBIRUFEfjEKCU1lcmdpbmc6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCB1bnJlbGF0ZWQtb250by1icmFuY2gpIHVucmVsYXRlZCBjb21taXQKCSQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoXikgc2Vjb25kIGNvbW1pdAoJZm91bmQgMSBjb21tb24gYW5jZXN0b3I6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCBmZWF0dXJlLWJyYW5jaH4yKSBpbml0aWFsIGNvbW1pdAoJW2RldGFjaGVkIEhFQUQgJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgcmViYXNlZC1mZWF0dXJlLWJyYW5jaH4xKV0gc2Vjb25kIGNvbW1pdAoJIEF1dGhvcjogQSBVIFRob3IgPGF1dGhvckBleGFtcGxlLmNvbT4KCSBEYXRlOiBUaHUgQXByIDcgMTU6MTQ6MTMgMjAwNSAtMDcwMAoJIDIgZmlsZXMgY2hhbmdlZCwgMiBpbnNlcnRpb25zKCspCgkgY3JlYXRlIG1vZGUgMTAwNjQ0IGZpbGUxCgkgY3JlYXRlIG1vZGUgMTAwNjQ0IGZpbGUyCglDb21taXR0ZWQ6IDAwMDEgc2Vjb25kIGNvbW1pdAoJTWVyZ2luZyB1bnJlbGF0ZWQtb250by1icmFuY2ggd2l0aCBIRUFEfjAKCU1lcmdpbmc6CgkkKGdpdCByZXYtcGFyc2UgLS1zaG9ydCByZWJhc2VkLWZlYXR1cmUtYnJhbmNofjEpIHNlY29uZCBjb21taXQKCSQoZ2l0IHJldi1wYXJzZSAtLXNob3J0IGZlYXR1cmUtYnJhbmNoKSB0aGlyZCBjb21taXQKCWZvdW5kIDEgY29tbW9uIGFuY2VzdG9yOgoJJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgZmVhdHVyZS1icmFuY2h+MSkgc2Vjb25kIGNvbW1pdAoJW2RldGFjaGVkIEhFQUQgJChnaXQgcmV2LXBhcnNlIC0tc2hvcnQgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCldIHRoaXJkIGNvbW1pdAoJIEF1dGhvcjogQSBVIFRob3IgPGF1dGhvckBleGFtcGxlLmNvbT4KCSBEYXRlOiBUaHUgQXByIDcgMTU6MTU6MTMgMjAwNSAtMDcwMAoJIDEgZmlsZSBjaGFuZ2VkLCAxIGluc2VydGlvbigrKQoJIGNyZWF0ZSBtb2RlIDEwMDY0NCBmaWxlMwoJQ29tbWl0dGVkOiAwMDAyIHRoaXJkIGNvbW1pdAoJQWxsIGRvbmUuCglBcHBseWluZyBhdXRvc3Rhc2ggcmVzdWx0ZWQgaW4gY29uZmxpY3RzLgoJWW91ciBjaGFuZ2VzIGFyZSBzYWZlIGluIHRoZSBzdGFzaC4KCVlvdSBjYW4gcnVuICJnaXQgc3Rhc2ggcG9wIiBvciAiZ2l0IHN0YXNoIGRyb3AiIGF0IGFueSB0aW1lLgoJRU9GCn0KCnRlc3RyZWJhc2UgKCkgewoJdHlwZT0kMQoJZG90ZXN0PSQyCgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAicmViYXNlJHR5cGU6IGRpcnR5IHdvcmt0cmVlLCAtLW5vLWF1dG9zdGFzaCIgJwoJCXRlc3RfY29uZmlnIHJlYmFzZS5hdXRvc3Rhc2ggdHJ1ZSAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgLWIgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggJiYKCQl0ZXN0X3doZW5fZmluaXNoZWQgZ2l0IGNoZWNrb3V0IGZlYXR1cmUtYnJhbmNoICYmCgkJZWNobyBkaXJ0eSA+PmZpbGUzICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IHJlYmFzZSR0eXBlIC0tbm8tYXV0b3N0YXNoIHVucmVsYXRlZC1vbnRvLWJyYW5jaAoJJwoKCXRlc3RfZXhwZWN0X3N1Y2Nlc3MgInJlYmFzZSR0eXBlOiBkaXJ0eSB3b3JrdHJlZSwgbm9uLWNvbmZsaWN0aW5nIHJlYmFzZSIgJwoJCXRlc3RfY29uZmlnIHJlYmFzZS5hdXRvc3Rhc2ggdHJ1ZSAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgLWIgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJCWVjaG8gZGlydHkgPj5maWxlMyAmJgoJCWdpdCByZWJhc2UkdHlwZSB1bnJlbGF0ZWQtb250by1icmFuY2ggPmFjdHVhbCAyPiYxICYmCgkJZ3JlcCB1bnJlbGF0ZWQgZmlsZTQgJiYKCQlncmVwIGRpcnR5IGZpbGUzICYmCgkJZ2l0IGNoZWNrb3V0IGZlYXR1cmUtYnJhbmNoCgknCgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAicmViYXNlJHR5cGUgLS1hdXRvc3Rhc2g6IGNoZWNrIG91dHB1dCIgJwoJCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggJiYKCQlzdWZmaXg9JHt0eXBlI1wgLS19ICYmIHN1ZmZpeD0ke3N1ZmZpeDotYW19ICYmCgkJY3JlYXRlX2V4cGVjdGVkX3N1Y2Nlc3NfJHN1ZmZpeCAmJgoJCXRlc3RfaTE4bmNtcCBleHBlY3RlZCBhY3R1YWwKCScKCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJyZWJhc2UkdHlwZTogZGlydHkgaW5kZXgsIG5vbi1jb25mbGljdGluZyByZWJhc2UiICcKCQl0ZXN0X2NvbmZpZyByZWJhc2UuYXV0b3N0YXNoIHRydWUgJiYKCQlnaXQgcmVzZXQgLS1oYXJkICYmCgkJZ2l0IGNoZWNrb3V0IC1iIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggZmVhdHVyZS1icmFuY2ggJiYKCQl0ZXN0X3doZW5fZmluaXNoZWQgZ2l0IGJyYW5jaCAtRCByZWJhc2VkLWZlYXR1cmUtYnJhbmNoICYmCgkJZWNobyBkaXJ0eSA+PmZpbGUzICYmCgkJZ2l0IGFkZCBmaWxlMyAmJgoJCWdpdCByZWJhc2UkdHlwZSB1bnJlbGF0ZWQtb250by1icmFuY2ggJiYKCQlncmVwIHVucmVsYXRlZCBmaWxlNCAmJgoJCWdyZXAgZGlydHkgZmlsZTMgJiYKCQlnaXQgY2hlY2tvdXQgZmVhdHVyZS1icmFuY2gKCScKCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJyZWJhc2UkdHlwZTogY29uZmxpY3RpbmcgcmViYXNlIiAnCgkJdGVzdF9jb25maWcgcmViYXNlLmF1dG9zdGFzaCB0cnVlICYmCgkJZ2l0IHJlc2V0IC0taGFyZCAmJgoJCWdpdCBjaGVja291dCAtYiByZWJhc2VkLWZlYXR1cmUtYnJhbmNoIGZlYXR1cmUtYnJhbmNoICYmCgkJdGVzdF93aGVuX2ZpbmlzaGVkIGdpdCBicmFuY2ggLUQgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCAmJgoJCWVjaG8gZGlydHkgPj5maWxlMyAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCByZWJhc2UkdHlwZSByZWxhdGVkLW9udG8tYnJhbmNoICYmCgkJdGVzdF9wYXRoX2lzX2ZpbGUgJGRvdGVzdC9hdXRvc3Rhc2ggJiYKCQkhIGdyZXAgZGlydHkgZmlsZTMgJiYKCQlybSAtcmYgJGRvdGVzdCAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgZmVhdHVyZS1icmFuY2gKCScKCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJyZWJhc2UkdHlwZTogLS1jb250aW51ZSIgJwoJCXRlc3RfY29uZmlnIHJlYmFzZS5hdXRvc3Rhc2ggdHJ1ZSAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgLWIgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggJiYKCQllY2hvIGRpcnR5ID4+ZmlsZTMgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgcmViYXNlJHR5cGUgcmVsYXRlZC1vbnRvLWJyYW5jaCAmJgoJCXRlc3RfcGF0aF9pc19maWxlICRkb3Rlc3QvYXV0b3N0YXNoICYmCgkJISBncmVwIGRpcnR5IGZpbGUzICYmCgkJZWNobyAiY29uZmxpY3RpbmctcGx1cy1nb29kYnllIiA+ZmlsZTIgJiYKCQlnaXQgYWRkIGZpbGUyICYmCgkJZ2l0IHJlYmFzZSAtLWNvbnRpbnVlICYmCgkJdGVzdF9wYXRoX2lzX21pc3NpbmcgJGRvdGVzdC9hdXRvc3Rhc2ggJiYKCQlncmVwIGRpcnR5IGZpbGUzICYmCgkJZ2l0IGNoZWNrb3V0IGZlYXR1cmUtYnJhbmNoCgknCgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAicmViYXNlJHR5cGU6IC0tc2tpcCIgJwoJCXRlc3RfY29uZmlnIHJlYmFzZS5hdXRvc3Rhc2ggdHJ1ZSAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgLWIgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggJiYKCQllY2hvIGRpcnR5ID4+ZmlsZTMgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgcmViYXNlJHR5cGUgcmVsYXRlZC1vbnRvLWJyYW5jaCAmJgoJCXRlc3RfcGF0aF9pc19maWxlICRkb3Rlc3QvYXV0b3N0YXNoICYmCgkJISBncmVwIGRpcnR5IGZpbGUzICYmCgkJZ2l0IHJlYmFzZSAtLXNraXAgJiYKCQl0ZXN0X3BhdGhfaXNfbWlzc2luZyAkZG90ZXN0L2F1dG9zdGFzaCAmJgoJCWdyZXAgZGlydHkgZmlsZTMgJiYKCQlnaXQgY2hlY2tvdXQgZmVhdHVyZS1icmFuY2gKCScKCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJyZWJhc2UkdHlwZTogLS1hYm9ydCIgJwoJCXRlc3RfY29uZmlnIHJlYmFzZS5hdXRvc3Rhc2ggdHJ1ZSAmJgoJCWdpdCByZXNldCAtLWhhcmQgJiYKCQlnaXQgY2hlY2tvdXQgLWIgcmViYXNlZC1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIHJlYmFzZWQtZmVhdHVyZS1icmFuY2ggJiYKCQllY2hvIGRpcnR5ID4+ZmlsZTMgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgcmViYXNlJHR5cGUgcmVsYXRlZC1vbnRvLWJyYW5jaCAmJgoJCXRlc3RfcGF0aF9pc19maWxlICRkb3Rlc3QvYXV0b3N0YXNoICYmCgkJISBncmVwIGRpcnR5IGZpbGUzICYmCgkJZ2l0IHJlYmFzZSAtLWFib3J0ICYmCgkJdGVzdF9wYXRoX2lzX21pc3NpbmcgJGRvdGVzdC9hdXRvc3Rhc2ggJiYKCQlncmVwIGRpcnR5IGZpbGUzICYmCgkJZ2l0IGNoZWNrb3V0IGZlYXR1cmUtYnJhbmNoCgknCgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAicmViYXNlJHR5cGU6IG5vbi1jb25mbGljdGluZyByZWJhc2UsIGNvbmZsaWN0aW5nIHN0YXNoIiAnCgkJdGVzdF9jb25maWcgcmViYXNlLmF1dG9zdGFzaCB0cnVlICYmCgkJZ2l0IHJlc2V0IC0taGFyZCAmJgoJCWdpdCBjaGVja291dCAtYiByZWJhc2VkLWZlYXR1cmUtYnJhbmNoIGZlYXR1cmUtYnJhbmNoICYmCgkJZWNobyBkaXJ0eSA+ZmlsZTQgJiYKCQlnaXQgYWRkIGZpbGU0ICYmCgkJZ2l0IHJlYmFzZSR0eXBlIHVucmVsYXRlZC1vbnRvLWJyYW5jaCA+YWN0dWFsIDI+JjEgJiYKCQl0ZXN0X3BhdGhfaXNfbWlzc2luZyAkZG90ZXN0ICYmCgkJZ2l0IHJlc2V0IC0taGFyZCAmJgoJCWdyZXAgdW5yZWxhdGVkIGZpbGU0ICYmCgkJISBncmVwIGRpcnR5IGZpbGU0ICYmCgkJZ2l0IGNoZWNrb3V0IGZlYXR1cmUtYnJhbmNoICYmCgkJZ2l0IHN0YXNoIHBvcCAmJgoJCWdyZXAgZGlydHkgZmlsZTQKCScKCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJyZWJhc2UkdHlwZTogY2hlY2sgb3V0cHV0IHdpdGggY29uZmxpY3Rpbmcgc3Rhc2giICcKCQl0ZXN0X3doZW5fZmluaXNoZWQgZ2l0IGJyYW5jaCAtRCByZWJhc2VkLWZlYXR1cmUtYnJhbmNoICYmCgkJc3VmZml4PSR7dHlwZSNcIC0tfSAmJiBzdWZmaXg9JHtzdWZmaXg6LWFtfSAmJgoJCWNyZWF0ZV9leHBlY3RlZF9mYWlsdXJlXyRzdWZmaXggJiYKCQl0ZXN0X2kxOG5jbXAgZXhwZWN0ZWQgYWN0dWFsCgknCn0KCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgInJlYmFzZTogZmFzdC1mb3J3YXJkIHJlYmFzZSIgJwoJdGVzdF9jb25maWcgcmViYXNlLmF1dG9zdGFzaCB0cnVlICYmCglnaXQgcmVzZXQgLS1oYXJkICYmCglnaXQgY2hlY2tvdXQgLWIgYmVoaW5kLWZlYXR1cmUtYnJhbmNoIGZlYXR1cmUtYnJhbmNofjEgJiYKCXRlc3Rfd2hlbl9maW5pc2hlZCBnaXQgYnJhbmNoIC1EIGJlaGluZC1mZWF0dXJlLWJyYW5jaCAmJgoJZWNobyBkaXJ0eSA+PmZpbGUxICYmCglnaXQgcmViYXNlIGZlYXR1cmUtYnJhbmNoICYmCglncmVwIGRpcnR5IGZpbGUxICYmCglnaXQgY2hlY2tvdXQgZmVhdHVyZS1icmFuY2gKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAicmViYXNlOiBub29wIHJlYmFzZSIgJwoJdGVzdF9jb25maWcgcmViYXNlLmF1dG9zdGFzaCB0cnVlICYmCglnaXQgcmVzZXQgLS1oYXJkICYmCglnaXQgY2hlY2tvdXQgLWIgc2FtZS1mZWF0dXJlLWJyYW5jaCBmZWF0dXJlLWJyYW5jaCAmJgoJdGVzdF93aGVuX2ZpbmlzaGVkIGdpdCBicmFuY2ggLUQgc2FtZS1mZWF0dXJlLWJyYW5jaCAmJgoJZWNobyBkaXJ0eSA+PmZpbGUxICYmCglnaXQgcmViYXNlIGZlYXR1cmUtYnJhbmNoICYmCglncmVwIGRpcnR5IGZpbGUxICYmCglnaXQgY2hlY2tvdXQgZmVhdHVyZS1icmFuY2gKJwoKdGVzdHJlYmFzZSAiIiAuZ2l0L3JlYmFzZS1hcHBseQp0ZXN0cmViYXNlICIgLS1tZXJnZSIgLmdpdC9yZWJhc2UtbWVyZ2UKdGVzdHJlYmFzZSAiIC0taW50ZXJhY3RpdmUiIC5naXQvcmViYXNlLW1lcmdlCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhYm9ydCByZWJhc2UgLWkgd2l0aCAtLWF1dG9zdGFzaCcgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJnaXQgcmVzZXQgLS1oYXJkIiAmJgoJZWNobyB1bmNvbW1pdHRlZC1jb250ZW50ID5maWxlMCAmJgoJKAoJCXdyaXRlX3NjcmlwdCBhYm9ydC1lZGl0b3Iuc2ggPDwtXEVPRiAmJgoJCQllY2hvID4iJDEiCgkJRU9GCgkJdGVzdF9zZXRfZWRpdG9yICIkKHB3ZCkvYWJvcnQtZWRpdG9yLnNoIiAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCByZWJhc2UgLWkgLS1hdXRvc3Rhc2ggSEVBRF4gJiYKCQlybSAtZiBhYm9ydC1lZGl0b3Iuc2gKCSkgJiYKCWVjaG8gdW5jb21taXR0ZWQtY29udGVudCA+ZXhwZWN0ZWQgJiYKCXRlc3RfY21wIGV4cGVjdGVkIGZpbGUwCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3Jlc3RvcmUgYXV0b3N0YXNoIG9uIGVkaXRvciBmYWlsdXJlJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgImdpdCByZXNldCAtLWhhcmQiICYmCgllY2hvIHVuY29tbWl0dGVkLWNvbnRlbnQgPmZpbGUwICYmCgkoCgkJdGVzdF9zZXRfZWRpdG9yICJmYWxzZSIgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgcmViYXNlIC1pIC0tYXV0b3N0YXNoIEhFQUReCgkpICYmCgllY2hvIHVuY29tbWl0dGVkLWNvbnRlbnQgPmV4cGVjdGVkICYmCgl0ZXN0X2NtcCBleHBlY3RlZCBmaWxlMAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhdXRvc3Rhc2ggaXMgc2F2ZWQgb24gZWRpdG9yIGZhaWx1cmUgd2l0aCBjb25mbGljdCcgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJnaXQgcmVzZXQgLS1oYXJkIiAmJgoJZWNobyB1bmNvbW1pdHRlZC1jb250ZW50ID5maWxlMCAmJgoJKAoJCXdyaXRlX3NjcmlwdCBhYm9ydC1lZGl0b3Iuc2ggPDwtXEVPRiAmJgoJCQllY2hvIGNvbmZsaWN0aW5nLWNvbnRlbnQgPmZpbGUwCgkJCWV4aXQgMQoJCUVPRgoJCXRlc3Rfc2V0X2VkaXRvciAiJChwd2QpL2Fib3J0LWVkaXRvci5zaCIgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgcmViYXNlIC1pIC0tYXV0b3N0YXNoIEhFQUReICYmCgkJcm0gLWYgYWJvcnQtZWRpdG9yLnNoCgkpICYmCgllY2hvIGNvbmZsaWN0aW5nLWNvbnRlbnQgPmV4cGVjdGVkICYmCgl0ZXN0X2NtcCBleHBlY3RlZCBmaWxlMCAmJgoJZ2l0IGNoZWNrb3V0IGZpbGUwICYmCglnaXQgc3Rhc2ggcG9wICYmCgllY2hvIHVuY29tbWl0dGVkLWNvbnRlbnQgPmV4cGVjdGVkICYmCgl0ZXN0X2NtcCBleHBlY3RlZCBmaWxlMAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhdXRvc3Rhc2ggd2l0aCBkaXJ0eSBzdWJtb2R1bGVzJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgImdpdCByZXNldCAtLWhhcmQgJiYgZ2l0IGNoZWNrb3V0IG1hc3RlciIgJiYKCWdpdCBjaGVja291dCAtYiB3aXRoLXN1Ym1vZHVsZSAmJgoJZ2l0IHN1Ym1vZHVsZSBhZGQgLi8gc3ViICYmCgl0ZXN0X3RpY2sgJiYKCWdpdCBjb21taXQgLW0gYWRkLXN1Ym1vZHVsZSAmJgoJZWNobyBjaGFuZ2VkID5zdWIvZmlsZTAgJiYKCWdpdCByZWJhc2UgLWkgLS1hdXRvc3Rhc2ggSEVBRAonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2013 Ramkumar Ramachandra\n#\n\ntest_description='git rebase --autostash tests'\n. ./test-lib.sh\n\ntest_expect_success setup '\n\techo hello-world >file0 &&\n\tgit add . &&\n\ttest_tick &&\n\tgit commit -m \"initial commit\" &&\n\tgit checkout -b feature-branch &&\n\techo another-hello >file1 &&\n\techo goodbye >file2 &&\n\tgit add . &&\n\ttest_tick &&\n\tgit commit -m \"second commit\" &&\n\techo final-goodbye >file3 &&\n\tgit add . &&\n\ttest_tick &&\n\tgit commit -m \"third commit\" &&\n\tgit checkout -b unrelated-onto-branch master &&\n\techo unrelated >file4 &&\n\tgit add . &&\n\ttest_tick &&\n\tgit commit -m \"unrelated commit\" &&\n\tgit checkout -b related-onto-branch master &&\n\techo conflicting-change >file2 &&\n\tgit add . &&\n\ttest_tick &&\n\tgit commit -m \"related commit\"\n'\n\ncreate_expected_success_am () {\n\tcat >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tFirst, rewinding head to replay your work on top of it...\n\tApplying: second commit\n\tApplying: third commit\n\tApplied autostash.\n\tEOF\n}\n\ncreate_expected_success_interactive () {\n\tq_to_cr >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tRebasing (1/2)QRebasing (2/2)QApplied autostash.\n\tSuccessfully rebased and updated refs/heads/rebased-feature-branch.\n\tEOF\n}\n\ncreate_expected_success_merge () {\n\tcat >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tFirst, rewinding head to replay your work on top of it...\n\tMerging unrelated-onto-branch with HEAD~1\n\tMerging:\n\t$(git rev-parse --short unrelated-onto-branch) unrelated commit\n\t$(git rev-parse --short feature-branch^) second commit\n\tfound 1 common ancestor:\n\t$(git rev-parse --short feature-branch~2) initial commit\n\t[detached HEAD $(git rev-parse --short rebased-feature-branch~1)] second commit\n\t Author: A U Thor <author@example.com>\n\t Date: Thu Apr 7 15:14:13 2005 -0700\n\t 2 files changed, 2 insertions(+)\n\t create mode 100644 file1\n\t create mode 100644 file2\n\tCommitted: 0001 second commit\n\tMerging unrelated-onto-branch with HEAD~0\n\tMerging:\n\t$(git rev-parse --short rebased-feature-branch~1) second commit\n\t$(git rev-parse --short feature-branch) third commit\n\tfound 1 common ancestor:\n\t$(git rev-parse --short feature-branch~1) second commit\n\t[detached HEAD $(git rev-parse --short rebased-feature-branch)] third commit\n\t Author: A U Thor <author@example.com>\n\t Date: Thu Apr 7 15:15:13 2005 -0700\n\t 1 file changed, 1 insertion(+)\n\t create mode 100644 file3\n\tCommitted: 0002 third commit\n\tAll done.\n\tApplied autostash.\n\tEOF\n}\n\ncreate_expected_failure_am () {\n\tcat >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tFirst, rewinding head to replay your work on top of it...\n\tApplying: second commit\n\tApplying: third commit\n\tApplying autostash resulted in conflicts.\n\tYour changes are safe in the stash.\n\tYou can run \"git stash pop\" or \"git stash drop\" at any time.\n\tEOF\n}\n\ncreate_expected_failure_interactive () {\n\tq_to_cr >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tRebasing (1/2)QRebasing (2/2)QApplying autostash resulted in conflicts.\n\tYour changes are safe in the stash.\n\tYou can run \"git stash pop\" or \"git stash drop\" at any time.\n\tSuccessfully rebased and updated refs/heads/rebased-feature-branch.\n\tEOF\n}\n\ncreate_expected_failure_merge () {\n\tcat >expected <<-EOF\n\t$(grep \"^Created autostash: [0-9a-f][0-9a-f]*\\$\" actual)\n\tHEAD is now at $(git rev-parse --short feature-branch) third commit\n\tFirst, rewinding head to replay your work on top of it...\n\tMerging unrelated-onto-branch with HEAD~1\n\tMerging:\n\t$(git rev-parse --short unrelated-onto-branch) unrelated commit\n\t$(git rev-parse --short feature-branch^) second commit\n\tfound 1 common ancestor:\n\t$(git rev-parse --short feature-branch~2) initial commit\n\t[detached HEAD $(git rev-parse --short rebased-feature-branch~1)] second commit\n\t Author: A U Thor <author@example.com>\n\t Date: Thu Apr 7 15:14:13 2005 -0700\n\t 2 files changed, 2 insertions(+)\n\t create mode 100644 file1\n\t create mode 100644 file2\n\tCommitted: 0001 second commit\n\tMerging unrelated-onto-branch with HEAD~0\n\tMerging:\n\t$(git rev-parse --short rebased-feature-branch~1) second commit\n\t$(git rev-parse --short feature-branch) third commit\n\tfound 1 common ancestor:\n\t$(git rev-parse --short feature-branch~1) second commit\n\t[detached HEAD $(git rev-parse --short rebased-feature-branch)] third commit\n\t Author: A U Thor <author@example.com>\n\t Date: Thu Apr 7 15:15:13 2005 -0700\n\t 1 file changed, 1 insertion(+)\n\t create mode 100644 file3\n\tCommitted: 0002 third commit\n\tAll done.\n\tApplying autostash resulted in conflicts.\n\tYour changes are safe in the stash.\n\tYou can run \"git stash pop\" or \"git stash drop\" at any time.\n\tEOF\n}\n\ntestrebase () {\n\ttype=$1\n\tdotest=$2\n\n\ttest_expect_success \"rebase$type: dirty worktree, --no-autostash\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\ttest_when_finished git checkout feature-branch &&\n\t\techo dirty >>file3 &&\n\t\ttest_must_fail git rebase$type --no-autostash unrelated-onto-branch\n\t'\n\n\ttest_expect_success \"rebase$type: dirty worktree, non-conflicting rebase\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\techo dirty >>file3 &&\n\t\tgit rebase$type unrelated-onto-branch >actual 2>&1 &&\n\t\tgrep unrelated file4 &&\n\t\tgrep dirty file3 &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type --autostash: check output\" '\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\tsuffix=${type#\\ --} && suffix=${suffix:-am} &&\n\t\tcreate_expected_success_$suffix &&\n\t\ttest_i18ncmp expected actual\n\t'\n\n\ttest_expect_success \"rebase$type: dirty index, non-conflicting rebase\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\techo dirty >>file3 &&\n\t\tgit add file3 &&\n\t\tgit rebase$type unrelated-onto-branch &&\n\t\tgrep unrelated file4 &&\n\t\tgrep dirty file3 &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type: conflicting rebase\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\techo dirty >>file3 &&\n\t\ttest_must_fail git rebase$type related-onto-branch &&\n\t\ttest_path_is_file $dotest/autostash &&\n\t\t! grep dirty file3 &&\n\t\trm -rf $dotest &&\n\t\tgit reset --hard &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type: --continue\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\techo dirty >>file3 &&\n\t\ttest_must_fail git rebase$type related-onto-branch &&\n\t\ttest_path_is_file $dotest/autostash &&\n\t\t! grep dirty file3 &&\n\t\techo \"conflicting-plus-goodbye\" >file2 &&\n\t\tgit add file2 &&\n\t\tgit rebase --continue &&\n\t\ttest_path_is_missing $dotest/autostash &&\n\t\tgrep dirty file3 &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type: --skip\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\techo dirty >>file3 &&\n\t\ttest_must_fail git rebase$type related-onto-branch &&\n\t\ttest_path_is_file $dotest/autostash &&\n\t\t! grep dirty file3 &&\n\t\tgit rebase --skip &&\n\t\ttest_path_is_missing $dotest/autostash &&\n\t\tgrep dirty file3 &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type: --abort\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\techo dirty >>file3 &&\n\t\ttest_must_fail git rebase$type related-onto-branch &&\n\t\ttest_path_is_file $dotest/autostash &&\n\t\t! grep dirty file3 &&\n\t\tgit rebase --abort &&\n\t\ttest_path_is_missing $dotest/autostash &&\n\t\tgrep dirty file3 &&\n\t\tgit checkout feature-branch\n\t'\n\n\ttest_expect_success \"rebase$type: non-conflicting rebase, conflicting stash\" '\n\t\ttest_config rebase.autostash true &&\n\t\tgit reset --hard &&\n\t\tgit checkout -b rebased-feature-branch feature-branch &&\n\t\techo dirty >file4 &&\n\t\tgit add file4 &&\n\t\tgit rebase$type unrelated-onto-branch >actual 2>&1 &&\n\t\ttest_path_is_missing $dotest &&\n\t\tgit reset --hard &&\n\t\tgrep unrelated file4 &&\n\t\t! grep dirty file4 &&\n\t\tgit checkout feature-branch &&\n\t\tgit stash pop &&\n\t\tgrep dirty file4\n\t'\n\n\ttest_expect_success \"rebase$type: check output with conflicting stash\" '\n\t\ttest_when_finished git branch -D rebased-feature-branch &&\n\t\tsuffix=${type#\\ --} && suffix=${suffix:-am} &&\n\t\tcreate_expected_failure_$suffix &&\n\t\ttest_i18ncmp expected actual\n\t'\n}\n\ntest_expect_success \"rebase: fast-forward rebase\" '\n\ttest_config rebase.autostash true &&\n\tgit reset --hard &&\n\tgit checkout -b behind-feature-branch feature-branch~1 &&\n\ttest_when_finished git branch -D behind-feature-branch &&\n\techo dirty >>file1 &&\n\tgit rebase feature-branch &&\n\tgrep dirty file1 &&\n\tgit checkout feature-branch\n'\n\ntest_expect_success \"rebase: noop rebase\" '\n\ttest_config rebase.autostash true &&\n\tgit reset --hard &&\n\tgit checkout -b same-feature-branch feature-branch &&\n\ttest_when_finished git branch -D same-feature-branch &&\n\techo dirty >>file1 &&\n\tgit rebase feature-branch &&\n\tgrep dirty file1 &&\n\tgit checkout feature-branch\n'\n\ntestrebase \"\" .git/rebase-apply\ntestrebase \" --merge\" .git/rebase-merge\ntestrebase \" --interactive\" .git/rebase-merge\n\ntest_expect_success 'abort rebase -i with --autostash' '\n\ttest_when_finished \"git reset --hard\" &&\n\techo uncommitted-content >file0 &&\n\t(\n\t\twrite_script abort-editor.sh <<-\\EOF &&\n\t\t\techo >\"$1\"\n\t\tEOF\n\t\ttest_set_editor \"$(pwd)/abort-editor.sh\" &&\n\t\ttest_must_fail git rebase -i --autostash HEAD^ &&\n\t\trm -f abort-editor.sh\n\t) &&\n\techo uncommitted-content >expected &&\n\ttest_cmp expected file0\n'\n\ntest_expect_success 'restore autostash on editor failure' '\n\ttest_when_finished \"git reset --hard\" &&\n\techo uncommitted-content >file0 &&\n\t(\n\t\ttest_set_editor \"false\" &&\n\t\ttest_must_fail git rebase -i --autostash HEAD^\n\t) &&\n\techo uncommitted-content >expected &&\n\ttest_cmp expected file0\n'\n\ntest_expect_success 'autostash is saved on editor failure with conflict' '\n\ttest_when_finished \"git reset --hard\" &&\n\techo uncommitted-content >file0 &&\n\t(\n\t\twrite_script abort-editor.sh <<-\\EOF &&\n\t\t\techo conflicting-content >file0\n\t\t\texit 1\n\t\tEOF\n\t\ttest_set_editor \"$(pwd)/abort-editor.sh\" &&\n\t\ttest_must_fail git rebase -i --autostash HEAD^ &&\n\t\trm -f abort-editor.sh\n\t) &&\n\techo conflicting-content >expected &&\n\ttest_cmp expected file0 &&\n\tgit checkout file0 &&\n\tgit stash pop &&\n\techo uncommitted-content >expected &&\n\ttest_cmp expected file0\n'\n\ntest_expect_success 'autostash with dirty submodules' '\n\ttest_when_finished \"git reset --hard && git checkout master\" &&\n\tgit checkout -b with-submodule &&\n\tgit submodule add ./ sub &&\n\ttest_tick &&\n\tgit commit -m add-submodule &&\n\techo changed >sub/file0 &&\n\tgit rebase -i --autostash HEAD\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "001d6243c9afd5368f6c4e38a7cb221df6810995",
  "sha1_ok": true,
  "size": 11583
}
