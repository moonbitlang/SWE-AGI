{
  "content": {
    "base64": "IyBDcmVhdGUgYSBzdWJtb2R1bGUgbGF5b3V0IHVzZWQgZm9yIGFsbCB0ZXN0cyBiZWxvdy4KIwojIFRoZSBmb2xsb3dpbmcgdXNlIGNhc2VzIGFyZSBjb3ZlcmVkOgojIC0gTmV3IHN1Ym1vZHVsZSAobm9fc3VibW9kdWxlID0+IGFkZF9zdWIxKQojIC0gUmVtb3ZlZCBzdWJtb2R1bGUgKGFkZF9zdWIxID0+IHJlbW92ZV9zdWIxKQojIC0gVXBkYXRlZCBzdWJtb2R1bGUgKGFkZF9zdWIxID0+IG1vZGlmeV9zdWIxKQojIC0gU3VibW9kdWxlIHVwZGF0ZWQgdG8gaW52YWxpZCBjb21taXQgKGFkZF9zdWIxID0+IGludmFsaWRfc3ViMSkKIyAtIFN1Ym1vZHVsZSB1cGRhdGVkIGZyb20gaW52YWxpZCBjb21taXQgKGludmFsaWRfc3ViMSA9PiB2YWxpZF9zdWIxKQojIC0gU3VibW9kdWxlIHJlcGxhY2VkIGJ5IHRyYWNrZWQgZmlsZXMgaW4gZGlyZWN0b3J5IChhZGRfc3ViMSA9PgojICAgcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5KQojIC0gRGlyZWN0b3J5IGNvbnRhaW5pbmcgdHJhY2tlZCBmaWxlcyByZXBsYWNlZCBieSBzdWJtb2R1bGUKIyAgIChyZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkgPT4gcmVwbGFjZV9kaXJlY3Rvcnlfd2l0aF9zdWIxKQojIC0gU3VibW9kdWxlIHJlcGxhY2VkIGJ5IHRyYWNrZWQgZmlsZSB3aXRoIHRoZSBzYW1lIG5hbWUgKGFkZF9zdWIxID0+CiMgICByZXBsYWNlX3N1YjFfd2l0aF9maWxlKQojIC0gVHJhY2tlZCBmaWxlIHJlcGxhY2VkIGJ5IHN1Ym1vZHVsZSAocmVwbGFjZV9zdWIxX3dpdGhfZmlsZSA9PgojICAgcmVwbGFjZV9maWxlX3dpdGhfc3ViMSkKIwojICAgICAgICAgICAgICAgICAgICAgLS0tLU8KIyAgICAgICAgICAgICAgICAgICAgLyAgICBeCiMgICAgICAgICAgICAgICAgICAgLyAgICAgcmVtb3ZlX3N1YjEKIyAgICAgICAgICAgICAgICAgIC8KIyAgICAgICBhZGRfc3ViMSAgLy0tLS0tLS1PCiMgICAgICAgICAgICAgfCAgLyAgICAgICAgXgojICAgICAgICAgICAgIHwgLyAgICAgICAgIG1vZGlmeV9zdWIxCiMgICAgICAgICAgICAgdi8KIyAgICAgIE8tLS0tLS1PLS0tLS0tLS0tLS1PLS0tLS0tLS0tTwojICAgICAgXiAgICAgICBcICAgICAgICAgIF4gICAgICAgICByZXBsYWNlX2RpcmVjdG9yeV93aXRoX3N1YjEKIyAgICAgIHwgICAgICAgIFwgICAgICAgICByZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkKIyBub19zdWJtb2R1bGUgICBcCiMgICAgICAgICAgICAgICAgIC0tLS0tLS0tTy0tLS0tLS0tLU8KIyAgICAgICAgICAgICAgICAgIFwgICAgICBeICAgICAgICAgcmVwbGFjZV9maWxlX3dpdGhfc3ViMQojICAgICAgICAgICAgICAgICAgIFwgICAgIHJlcGxhY2Vfc3ViMV93aXRoX2ZpbGUKIyAgICAgICAgICAgICAgICAgICAgXAojICAgICAgICAgICAgICAgICAgICAgLS0tLU8tLS0tLS0tLS1PCiMgICAgICAgICAgICAgICAgICAgICAgICAgXiAgICAgICAgIHZhbGlkX3N1YjEKIyAgICAgICAgICAgICAgICAgICAgICAgICBpbnZhbGlkX3N1YjEKIwoKY3JlYXRlX2xpYl9zdWJtb2R1bGVfcmVwbyAoKSB7CglnaXQgaW5pdCBzdWJtb2R1bGVfdXBkYXRlX3N1YjEgJiYKCSgKCQljZCBzdWJtb2R1bGVfdXBkYXRlX3N1YjEgJiYKCQllY2hvICJleHBlY3QiID4+LmdpdGlnbm9yZSAmJgoJCWVjaG8gImFjdHVhbCIgPj4uZ2l0aWdub3JlICYmCgkJZWNobyAieCIgPmZpbGUxICYmCgkJZWNobyAieSIgPmZpbGUyICYmCgkJZ2l0IGFkZCAuZ2l0aWdub3JlIGZpbGUxIGZpbGUyICYmCgkJZ2l0IGNvbW1pdCAtbSAiQmFzZSBpbnNpZGUgZmlyc3Qgc3VibW9kdWxlIiAmJgoJCWdpdCBicmFuY2ggIm5vX3N1Ym1vZHVsZSIKCSkgJiYKCWdpdCBpbml0IHN1Ym1vZHVsZV91cGRhdGVfcmVwbyAmJgoJKAoJCWNkIHN1Ym1vZHVsZV91cGRhdGVfcmVwbyAmJgoJCWVjaG8gImV4cGVjdCIgPj4uZ2l0aWdub3JlICYmCgkJZWNobyAiYWN0dWFsIiA+Pi5naXRpZ25vcmUgJiYKCQllY2hvICJ4IiA+ZmlsZTEgJiYKCQllY2hvICJ5IiA+ZmlsZTIgJiYKCQlnaXQgYWRkIC5naXRpZ25vcmUgZmlsZTEgZmlsZTIgJiYKCQlnaXQgY29tbWl0IC1tICJCYXNlIiAmJgoJCWdpdCBicmFuY2ggIm5vX3N1Ym1vZHVsZSIgJiYKCgkJZ2l0IGNoZWNrb3V0IC1iICJhZGRfc3ViMSIgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAuLi9zdWJtb2R1bGVfdXBkYXRlX3N1YjEgc3ViMSAmJgoJCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLnN1YjEuaWdub3JlIGFsbCAmJgoJCWdpdCBjb25maWcgc3VibW9kdWxlLnN1YjEuaWdub3JlIGFsbCAmJgoJCWdpdCBhZGQgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29tbWl0IC1tICJBZGQgc3ViMSIgJiYKCgkJZ2l0IGNoZWNrb3V0IC1iIHJlbW92ZV9zdWIxIGFkZF9zdWIxICYmCgkJZ2l0IHJldmVydCBIRUFEICYmCgoJCWdpdCBjaGVja291dCAtYiBtb2RpZnlfc3ViMSBhZGRfc3ViMSAmJgoJCWdpdCBzdWJtb2R1bGUgdXBkYXRlICYmCgkJKAoJCQljZCBzdWIxICYmCgkJCWdpdCBmZXRjaCAmJgoJCQlnaXQgY2hlY2tvdXQgLWIgIm1vZGlmaWNhdGlvbnMiICYmCgkJCWVjaG8gInoiID5maWxlMiAmJgoJCQllY2hvICJ4IiA+ZmlsZTMgJiYKCQkJZ2l0IGFkZCBmaWxlMiBmaWxlMyAmJgoJCQlnaXQgY29tbWl0IC1tICJtb2RpZmllZCBmaWxlMiBhbmQgYWRkZWQgZmlsZTMiICYmCgkJCWdpdCBwdXNoIG9yaWdpbiBtb2RpZmljYXRpb25zCgkJKSAmJgoJCWdpdCBhZGQgc3ViMSAmJgoJCWdpdCBjb21taXQgLW0gIk1vZGlmeSBzdWIxIiAmJgoKCQlnaXQgY2hlY2tvdXQgLWIgcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5IGFkZF9zdWIxICYmCgkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgJiYKCQlnaXQgLUMgc3ViMSBjaGVja291dCBtb2RpZmljYXRpb25zICYmCgkJZ2l0IHJtIC0tY2FjaGVkIHN1YjEgJiYKCQlybSBzdWIxLy5naXQqICYmCgkJZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyAtLXJlbW92ZS1zZWN0aW9uICJzdWJtb2R1bGUuc3ViMSIgJiYKCQlnaXQgYWRkIC5naXRtb2R1bGVzIHN1YjEvKiAmJgoJCWdpdCBjb21taXQgLW0gIlJlcGxhY2Ugc3ViMSB3aXRoIGRpcmVjdG9yeSIgJiYKCgkJZ2l0IGNoZWNrb3V0IC1iIHJlcGxhY2VfZGlyZWN0b3J5X3dpdGhfc3ViMSAmJgoJCWdpdCByZXZlcnQgSEVBRCAmJgoKCQlnaXQgY2hlY2tvdXQgLWIgcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSBhZGRfc3ViMSAmJgoJCWdpdCBybSBzdWIxICYmCgkJZWNobyAiY29udGVudCIgPnN1YjEgJiYKCQlnaXQgYWRkIHN1YjEgJiYKCQlnaXQgY29tbWl0IC1tICJSZXBsYWNlIHN1YjEgd2l0aCBmaWxlIiAmJgoKCQlnaXQgY2hlY2tvdXQgLWIgcmVwbGFjZV9maWxlX3dpdGhfc3ViMSAmJgoJCWdpdCByZXZlcnQgSEVBRCAmJgoKCQlnaXQgY2hlY2tvdXQgLWIgaW52YWxpZF9zdWIxIGFkZF9zdWIxICYmCgkJZ2l0IHVwZGF0ZS1pbmRleCAtLWNhY2hlaW5mbyAxNjAwMDAgMDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OSBzdWIxICYmCgkJZ2l0IGNvbW1pdCAtbSAiSW52YWxpZCBzdWIxIGNvbW1pdCIgJiYKCQlnaXQgY2hlY2tvdXQgLWIgdmFsaWRfc3ViMSAmJgoJCWdpdCByZXZlcnQgSEVBRCAmJgoKCQlnaXQgY2hlY2tvdXQgbWFzdGVyCgkpCn0KCiMgSGVscGVyIGZ1bmN0aW9uIHRvIHJlcGxhY2UgZ2l0ZmlsZSB3aXRoIC5naXQgZGlyZWN0b3J5CnJlcGxhY2VfZ2l0ZmlsZV93aXRoX2dpdF9kaXIgKCkgewoJKAoJCWNkICIkMSIgJiYKCQlnaXRfZGlyPSIkKGdpdCByZXYtcGFyc2UgLS1naXQtZGlyKSIgJiYKCQlybSAtZiAuZ2l0ICYmCgkJY3AgLVIgIiRnaXRfZGlyIiAuZ2l0ICYmCgkJR0lUX1dPUktfVFJFRT0uIGdpdCBjb25maWcgLS11bnNldCBjb3JlLndvcmt0cmVlCgkpCn0KCiMgVGVzdCB0aGF0IHRoZSAuZ2l0IGRpcmVjdG9yeSBpbiB0aGUgc3VibW9kdWxlIGlzIHVuY2hhbmdlZCAoZXhjZXB0IGZvciB0aGUKIyBjb3JlLndvcmt0cmVlIHNldHRpbmcsIHdoaWNoIGFwcGVhcnMgb25seSBpbiAkR0lUX0RJUi9tb2R1bGVzLyQxL2NvbmZpZykuCiMgQ2FsbCB0aGlzIGZ1bmN0aW9uIGJlZm9yZSB0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IGFzIHRoZSBsYXR0ZXIgbWlnaHQKIyB3cml0ZSB0aGUgaW5kZXggZmlsZSBsZWFkaW5nIHRvIGZhbHNlIHBvc2l0aXZlIGluZGV4IGRpZmZlcmVuY2VzLgojCiMgTm90ZSB0aGF0IHRoaXMgb25seSBzdXBwb3J0cyBzdWJtb2R1bGVzIGF0IHRoZSByb290IGxldmVsIG9mIHRoZQojIHN1cGVycHJvamVjdCwgd2l0aCB0aGUgZGVmYXVsdCBuYW1lLCBpLmUuIHNhbWUgYXMgaXRzIHBhdGguCnRlc3RfZ2l0X2RpcmVjdG9yeV9pc191bmNoYW5nZWQgKCkgewoJKAoJCWNkICIuZ2l0L21vZHVsZXMvJDEiICYmCgkJIyBkb2VzIGNvcmUud29ya3RyZWUgcG9pbnQgYXQgdGhlIHJpZ2h0IHBsYWNlPwoJCXRlc3QgIiQoZ2l0IGNvbmZpZyBjb3JlLndvcmt0cmVlKSIgPSAiLi4vLi4vLi4vJDEiICYmCgkJIyByZW1vdmUgaXQgdGVtcG9yYXJpbHkgYmVmb3JlIGNvbXBhcmluZywgYXMKCQkjICIkMS8uZ2l0L2NvbmZpZyIgbGFja3MgaXQuLi4KCQlnaXQgY29uZmlnIC0tdW5zZXQgY29yZS53b3JrdHJlZQoJKSAmJgoJZGlmZiAtciAiLmdpdC9tb2R1bGVzLyQxIiAiJDEvLmdpdCIgJiYKCSgKCQkjIC4uLiBhbmQgdGhlbiByZXN0b3JlLgoJCWNkICIuZ2l0L21vZHVsZXMvJDEiICYmCgkJZ2l0IGNvbmZpZyBjb3JlLndvcmt0cmVlICIuLi8uLi8uLi8kMSIKCSkKfQoKIyBIZWxwZXIgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYXQgdGhlIHN0YXJ0IG9mIGV2ZXJ5IHRlc3QgYmVsb3csIGl0IHNldHMgdXAKIyB0aGUgc3VibW9kdWxlIHJlcG8gaWYgaXQgZG9lc24ndCBleGlzdCBhbmQgY29uZmlndXJlcyB0aGUgbW9zdCBwcm9ibGVtYXRpYwojIHNldHRpbmdzIGZvciBkaWZmLmlnbm9yZVN1Ym1vZHVsZXMuCnByb2xvZyAoKSB7CgkodGVzdCAtZCBzdWJtb2R1bGVfdXBkYXRlX3JlcG8gfHwgY3JlYXRlX2xpYl9zdWJtb2R1bGVfcmVwbykgJiYKCXRlc3RfY29uZmlnX2dsb2JhbCBkaWZmLmlnbm9yZVN1Ym1vZHVsZXMgYWxsICYmCgl0ZXN0X2NvbmZpZyBkaWZmLmlnbm9yZVN1Ym1vZHVsZXMgYWxsCn0KCiMgSGVscGVyIGZ1bmN0aW9uIHRvIGJyaW5nIHdvcmsgdHJlZSBiYWNrIGludG8gdGhlIHN0YXRlIGdpdmVuIGJ5IHRoZQojIGNvbW1pdC4gVGhpcyBpbmNsdWRlcyB0cnlpbmcgdG8gcG9wdWxhdGUgc3ViMSBhY2NvcmRpbmdseSBpZiBpdCBleGlzdHMgYW5kCiMgc2hvdWxkIGJlIHVwZGF0ZWQgdG8gYW4gZXhpc3RpbmcgY29tbWl0LgpyZXNldF93b3JrX3RyZWVfdG8gKCkgewoJcm0gLXJmIHN1Ym1vZHVsZV91cGRhdGUgJiYKCWdpdCBjbG9uZSBzdWJtb2R1bGVfdXBkYXRlX3JlcG8gc3VibW9kdWxlX3VwZGF0ZSAmJgoJKAoJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQlybSAtcmYgc3ViMSAmJgoJCWdpdCBjaGVja291dCAtZiAiJDEiICYmCgkJZ2l0IHN0YXR1cyAtdSAtcyA+YWN0dWFsICYmCgkJdGVzdF9tdXN0X2JlX2VtcHR5IGFjdHVhbCAmJgoJCXNoYTE9JChnaXQgcmV2LXBhcnNlIC0tcmV2cy1vbmx5IEhFQUQ6c3ViMSkgJiYKCQlpZiB0ZXN0IC1uICIkc2hhMSIgJiYKCQkgICB0ZXN0ICQoY2QgIi4uL3N1Ym1vZHVsZV91cGRhdGVfc3ViMSIgJiYgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSAiJHNoYTFee2NvbW1pdH0iKQoJCXRoZW4KCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICJzdWIxIgoJCWZpCgkpCn0KCiMgVGVzdCB0aGF0IHRoZSBzdXBlcnByb2plY3QgY29udGFpbnMgdGhlIGNvbnRlbnQgYWNjb3JkaW5nIHRvIGNvbW1pdCAiJDEiCiMgKHRoZSB3b3JrIHRyZWUgbXVzdCBtYXRjaCB0aGUgaW5kZXggZm9yIGV2ZXJ5dGhpbmcgYnV0IHN1Ym1vZHVsZXMgYnV0IHRoZQojIGluZGV4IG11c3QgZXhhY3RseSBtYXRjaCB0aGUgZ2l2ZW4gY29tbWl0IGluY2x1ZGluZyBhbnkgc3VibW9kdWxlIFNIQS0xcykuCnRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgKCkgewoJZ2l0IGRpZmYtaW5kZXggLS1jYWNoZWQgIiQxIiA+YWN0dWFsICYmCgl0ZXN0X211c3RfYmVfZW1wdHkgYWN0dWFsICYmCglnaXQgZGlmZi1maWxlcyAtLWlnbm9yZS1zdWJtb2R1bGVzID5hY3R1YWwgJiYKCXRlc3RfbXVzdF9iZV9lbXB0eSBhY3R1YWwKfQoKIyBUZXN0IHRoYXQgdGhlIGdpdmVuIHN1Ym1vZHVsZSBhdCBwYXRoICIkMSIgY29udGFpbnMgdGhlIGNvbnRlbnQgYWNjb3JkaW5nCiMgdG8gdGhlIHN1Ym1vZHVsZSBjb21taXQgcmVjb3JkZWQgaW4gdGhlIHN1cGVycHJvamVjdCdzIGNvbW1pdCAiJDIiCnRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgKCkgewoJaWYgdGVzdCB4IiQxIiA9ICJ4LUMiCgl0aGVuCgkJY2QgIiQyIgoJCXNoaWZ0OyBzaGlmdDsKCWZpCglpZiB0ZXN0ICQjICE9IDIKCXRoZW4KCQllY2hvICJ0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IG5lZWRzIHR3byBhcmd1bWVudHMiCgkJcmV0dXJuIDEKCWZpICYmCglzdWJtb2R1bGU9IiQxIiAmJgoJY29tbWl0PSIkMiIgJiYKCXRlc3QgLWQgIiRzdWJtb2R1bGUiLyAmJgoJaWYgISB0ZXN0IC1mICIkc3VibW9kdWxlIi8uZ2l0ICYmICEgdGVzdCAtZCAiJHN1Ym1vZHVsZSIvLmdpdAoJdGhlbgoJCWVjaG8gIlN1Ym1vZHVsZSAkc3VibW9kdWxlIGlzIG5vdCBwb3B1bGF0ZWQiCgkJcmV0dXJuIDEKCWZpICYmCglzaGExPSQoZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSAiJGNvbW1pdDokc3VibW9kdWxlIikgJiYKCWlmIHRlc3QgLXogIiRzaGExIgoJdGhlbgoJCWVjaG8gIkNvdWxkbid0IHJldHJpZXZlIFNIQS0xIG9mICRzdWJtb2R1bGUgZm9yICRjb21taXQiCgkJcmV0dXJuIDEKCWZpICYmCgkoCgkJY2QgIiRzdWJtb2R1bGUiICYmCgkJZ2l0IHN0YXR1cyAtdSAtcyA+YWN0dWFsICYmCgkJdGVzdF9tdXN0X2JlX2VtcHR5IGFjdHVhbCAmJgoJCWdpdCBkaWZmICIkc2hhMSIgPmFjdHVhbCAmJgoJCXRlc3RfbXVzdF9iZV9lbXB0eSBhY3R1YWwKCSkKfQoKIyBUZXN0IHRoYXQgdGhlIGZvbGxvd2luZyB0cmFuc2l0aW9ucyBhcmUgY29ycmVjdGx5IGhhbmRsZWQ6CiMgLSBVcGRhdGVkIHN1Ym1vZHVsZQojIC0gTmV3IHN1Ym1vZHVsZQojIC0gUmVtb3ZlZCBzdWJtb2R1bGUKIyAtIERpcmVjdG9yeSBjb250YWluaW5nIHRyYWNrZWQgZmlsZXMgcmVwbGFjZWQgYnkgc3VibW9kdWxlCiMgLSBTdWJtb2R1bGUgcmVwbGFjZWQgYnkgdHJhY2tlZCBmaWxlcyBpbiBkaXJlY3RvcnkKIyAtIFN1Ym1vZHVsZSByZXBsYWNlZCBieSB0cmFja2VkIGZpbGUgd2l0aCB0aGUgc2FtZSBuYW1lCiMgLSB0cmFja2VkIGZpbGUgcmVwbGFjZWQgYnkgc3VibW9kdWxlCiMKIyBUaGUgZGVmYXVsdCBpcyB0aGF0IHN1Ym1vZHVsZSBjb250ZW50cyBhcmVuJ3QgY2hhbmdlZCB1bnRpbCAiZ2l0IHN1Ym1vZHVsZQojIHVwZGF0ZSIgaXMgcnVuLiBBbmQgZXZlbiB0aGVuIHRoYXQgY29tbWFuZCBkb2Vzbid0IGRlbGV0ZSB0aGUgd29yayB0cmVlIG9mCiMgYSByZW1vdmVkIHN1Ym1vZHVsZS4KIwojIFJlbW92aW5nIGEgc3VibW9kdWxlIGNvbnRhaW5pbmcgYSAuZ2l0IGRpcmVjdG9yeSBtdXN0IGZhaWwgZXZlbiB3aGVuIGZvcmNlZAojIHRvIHByb3RlY3QgdGhlIGhpc3RvcnkhCiMKCiMgVGVzdCB0aGF0IHN1Ym1vZHVsZSBjb250ZW50cyBhcmUgY3VycmVudGx5IG5vdCB1cGRhdGVkIHdoZW4gc3dpdGNoaW5nCiMgYmV0d2VlbiBjb21taXRzIHRoYXQgY2hhbmdlIGEgc3VibW9kdWxlLgp0ZXN0X3N1Ym1vZHVsZV9zd2l0Y2ggKCkgewoJY29tbWFuZD0iJDEiCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEFwcGVhcmluZyBzdWJtb2R1bGUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBTd2l0Y2hpbmcgdG8gYSBjb21taXQgbGV0dGluZyBhIHN1Ym1vZHVsZSBhcHBlYXIgY3JlYXRlcyBlbXB0eSBkaXIgLi4uCglpZiB0ZXN0ICIkS05PV05fRkFJTFVSRV9TVEFTSF9ET0VTX0lHTk9SRV9TVUJNT0RVTEVfQ0hBTkdFUyIgPSAxCgl0aGVuCgkJIyBSZXN0b3Jpbmcgc3Rhc2ggZmFpbHMgdG8gcmVzdG9yZSBzdWJtb2R1bGUgaW5kZXggZW50cnkKCQlSRVNVTFQ9ImZhaWx1cmUiCgllbHNlCgkJUkVTVUxUPSJzdWNjZXNzIgoJZmkKCXRlc3RfZXhwZWN0XyRSRVNVTFQgIiRjb21tYW5kOiBhZGRlZCBzdWJtb2R1bGUgY3JlYXRlcyBlbXB0eSBkaXJlY3RvcnkiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gbm9fc3VibW9kdWxlICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgYWRkX3N1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCSRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEKCQkpCgknCgkjIC4uLiBhbmQgZG9lc24ndCBjYXJlIGlmIGl0IGFscmVhZHkgZXhpc3RzIC4uLgoJdGVzdF9leHBlY3RfJFJFU1VMVCAiJGNvbW1hbmQ6IGFkZGVkIHN1Ym1vZHVsZSBsZWF2ZXMgZXhpc3RpbmcgZW1wdHkgZGlyZWN0b3J5IGFsb25lIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIG5vX3N1Ym1vZHVsZSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlta2RpciBzdWIxICYmCgkJCWdpdCBicmFuY2ggLXQgYWRkX3N1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCSRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEKCQkpCgknCgkjIC4uLiB1bmxlc3MgdGhlcmUgaXMgYW4gdW50cmFja2VkIGZpbGUgaW4gaXRzIHBsYWNlLgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiJGNvbW1hbmQ6IGFkZGVkIHN1Ym1vZHVsZSBkb2Vzbid0IHJlbW92ZSB1bnRyYWNrZWQgdW5pZ25vcmVkIGZpbGUgd2l0aCBzYW1lIG5hbWUiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gbm9fc3VibW9kdWxlICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgYWRkX3N1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCT5zdWIxICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL25vX3N1Ym1vZHVsZSAmJgoJCQl0ZXN0X211c3RfYmVfZW1wdHkgc3ViMQoJCSkKCScKCSMgUmVwbGFjaW5nIGEgdHJhY2tlZCBmaWxlIHdpdGggYSBzdWJtb2R1bGUgcHJvZHVjZXMgYW4gZW1wdHkKCSMgZGlyZWN0b3J5IC4uLgoJdGVzdF9leHBlY3RfJFJFU1VMVCAiJGNvbW1hbmQ6IHJlcGxhY2UgdHJhY2tlZCBmaWxlIHdpdGggc3VibW9kdWxlIGNyZWF0ZXMgZW1wdHkgZGlyZWN0b3J5IiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIHJlcGxhY2Vfc3ViMV93aXRoX2ZpbGUgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZXBsYWNlX2ZpbGVfd2l0aF9zdWIxIG9yaWdpbi9yZXBsYWNlX2ZpbGVfd2l0aF9zdWIxICYmCgkJCSRjb21tYW5kIHJlcGxhY2VfZmlsZV93aXRoX3N1YjEgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vcmVwbGFjZV9maWxlX3dpdGhfc3ViMSAmJgoJCQl0ZXN0X2Rpcl9pc19lbXB0eSBzdWIxICYmCgkJCWdpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAtLXJlY3Vyc2l2ZSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL3JlcGxhY2VfZmlsZV93aXRoX3N1YjEKCQkpCgknCgkjIC4uLiBhcyBkb2VzIHJlbW92aW5nIGEgZGlyZWN0b3J5IHdpdGggdHJhY2tlZCBmaWxlcyB3aXRoIGEKCSMgc3VibW9kdWxlLgoJaWYgdGVzdCAiJEtOT1dOX0ZBSUxVUkVfTk9GRl9NRVJHRV9ET0VTTlRfQ1JFQVRFX0VNUFRZX1NVQk1PRFVMRV9ESVIiID0gMQoJdGhlbgoJCSMgTm9uIGZhc3QtZm9yd2FyZCBtZXJnZXMgZmFpbCB3aXRoICJEaXJlY3Rvcnkgc3ViMSBkb2Vzbid0CgkJIyBleGlzdC4gc3ViMSIgYmVjYXVzZSB0aGUgZW1wdHkgc3VibW9kdWxlIGRpcmVjdG9yeSBpcyBub3QKCQkjIGNyZWF0ZWQKCQlSRVNVTFQ9ImZhaWx1cmUiCgllbHNlCgkJUkVTVUxUPSJzdWNjZXNzIgoJZmkKCXRlc3RfZXhwZWN0XyRSRVNVTFQgIiRjb21tYW5kOiByZXBsYWNlIGRpcmVjdG9yeSB3aXRoIHN1Ym1vZHVsZSIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byByZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZXBsYWNlX2RpcmVjdG9yeV93aXRoX3N1YjEgb3JpZ2luL3JlcGxhY2VfZGlyZWN0b3J5X3dpdGhfc3ViMSAmJgoJCQkkY29tbWFuZCByZXBsYWNlX2RpcmVjdG9yeV93aXRoX3N1YjEgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vcmVwbGFjZV9kaXJlY3Rvcnlfd2l0aF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vcmVwbGFjZV9kaXJlY3Rvcnlfd2l0aF9zdWIxCgkJKQoJJwoKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBEaXNhcHBlYXJpbmcgc3VibW9kdWxlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIFJlbW92aW5nIGEgc3VibW9kdWxlIGRvZXNuJ3QgcmVtb3ZlIGl0cyB3b3JrIHRyZWUgLi4uCglpZiB0ZXN0ICIkS05PV05fRkFJTFVSRV9TVEFTSF9ET0VTX0lHTk9SRV9TVUJNT0RVTEVfQ0hBTkdFUyIgPSAxCgl0aGVuCgkJUkVTVUxUPSJmYWlsdXJlIgoJZWxzZQoJCVJFU1VMVD0ic3VjY2VzcyIKCWZpCgl0ZXN0X2V4cGVjdF8kUkVTVUxUICIkY29tbWFuZDogcmVtb3ZlZCBzdWJtb2R1bGUgbGVhdmVzIHN1Ym1vZHVsZSBkaXJlY3RvcnkgYW5kIGl0cyBjb250ZW50cyBpbiBwbGFjZSIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byBhZGRfc3ViMSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IHJlbW92ZV9zdWIxIG9yaWdpbi9yZW1vdmVfc3ViMSAmJgoJCQkkY29tbWFuZCByZW1vdmVfc3ViMSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9yZW1vdmVfc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyAuLi4gZXNwZWNpYWxseSB3aGVuIGl0IGNvbnRhaW5zIGEgLmdpdCBkaXJlY3RvcnkuCgl0ZXN0X2V4cGVjdF8kUkVTVUxUICIkY29tbWFuZDogcmVtb3ZlZCBzdWJtb2R1bGUgbGVhdmVzIHN1Ym1vZHVsZSBjb250YWluaW5nIGEgLmdpdCBkaXJlY3RvcnkgYWxvbmUiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZW1vdmVfc3ViMSBvcmlnaW4vcmVtb3ZlX3N1YjEgJiYKCQkJcmVwbGFjZV9naXRmaWxlX3dpdGhfZ2l0X2RpciBzdWIxICYmCgkJCSRjb21tYW5kIHJlbW92ZV9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL3JlbW92ZV9zdWIxICYmCgkJCXRlc3RfZ2l0X2RpcmVjdG9yeV9pc191bmNoYW5nZWQgc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyBSZXBsYWNpbmcgYSBzdWJtb2R1bGUgd2l0aCBmaWxlcyBpbiBhIGRpcmVjdG9yeSBtdXN0IGZhaWwgYXMgdGhlCgkjIHN1Ym1vZHVsZSB3b3JrIHRyZWUgaXNuJ3QgcmVtb3ZlZCAuLi4KCWlmIHRlc3QgIiRLTk9XTl9GQUlMVVJFX05PRkZfTUVSR0VfQVRURU1QVFNfVE9fTUVSR0VfUkVNT1ZFRF9TVUJNT0RVTEVfRklMRVMiID0gMQoJdGhlbgoJCSMgTm9uIGZhc3QtZm9yd2FyZCBtZXJnZXMgYXR0ZW1wdCB0byBtZXJnZSB0aGUgZm9ybWVyCgkJIyBzdWJtb2R1bGUgZmlsZXMgd2l0aCB0aGUgbmV3bHkgY2hlY2tlZCBvdXQgb25lcyBpbiB0aGUKCQkjIGRpcmVjdG9yeSBvZiB0aGUgc2FtZSBuYW1lIHdoaWxlIGl0IHNob3VsZG4ndC4KCQlSRVNVTFQ9ImZhaWx1cmUiCgllbHNlCgkJUkVTVUxUPSJzdWNjZXNzIgoJZmkKCXRlc3RfZXhwZWN0XyRSRVNVTFQgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSB3aXRoIGEgZGlyZWN0b3J5IG11c3QgZmFpbCIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byBhZGRfc3ViMSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSBvcmlnaW4vcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5ICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyAuLi4gZXNwZWNpYWxseSB3aGVuIGl0IGNvbnRhaW5zIGEgLmdpdCBkaXJlY3RvcnkuCgl0ZXN0X2V4cGVjdF8kUkVTVUxUICIkY29tbWFuZDogcmVwbGFjZSBzdWJtb2R1bGUgY29udGFpbmluZyBhIC5naXQgZGlyZWN0b3J5IHdpdGggYSBkaXJlY3RvcnkgbXVzdCBmYWlsIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5IG9yaWdpbi9yZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkgJiYKCQkJcmVwbGFjZV9naXRmaWxlX3dpdGhfZ2l0X2RpciBzdWIxICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X2dpdF9kaXJlY3RvcnlfaXNfdW5jaGFuZ2VkIHN1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCSMgUmVwbGFjaW5nIGl0IHdpdGggYSBmaWxlIG11c3QgZmFpbCBhcyBpdCBjb3VsZCB0aHJvdyBhd2F5IGFueSBsb2NhbAoJIyB3b3JrIHRyZWUgY2hhbmdlcyAuLi4KCXRlc3RfZXhwZWN0X2ZhaWx1cmUgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSB3aXRoIGEgZmlsZSBtdXN0IGZhaWwiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZXBsYWNlX3N1YjFfd2l0aF9maWxlIG9yaWdpbi9yZXBsYWNlX3N1YjFfd2l0aF9maWxlICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2ZpbGUgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vYWRkX3N1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCSMgLi4uIG9yIGV2ZW4gZGVzdHJveSB1bnB1c2hlZCBwYXJ0cyBvZiBzdWJtb2R1bGUgaGlzdG9yeSBpZiB0aGF0CgkjIHN0aWxsIHVzZXMgYSAuZ2l0IGRpcmVjdG9yeS4KCXRlc3RfZXhwZWN0X2ZhaWx1cmUgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSBjb250YWluaW5nIGEgLmdpdCBkaXJlY3Rvcnkgd2l0aCBhIGZpbGUgbXVzdCBmYWlsIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSBvcmlnaW4vcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSAmJgoJCQlyZXBsYWNlX2dpdGZpbGVfd2l0aF9naXRfZGlyIHN1YjEgJiYKCQkJdGVzdF9tdXN0X2ZhaWwgJGNvbW1hbmQgcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X2dpdF9kaXJlY3RvcnlfaXNfdW5jaGFuZ2VkIHN1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNb2RpZmllZCBzdWJtb2R1bGUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBVcGRhdGluZyBhIHN1Ym1vZHVsZSBzaGExIGRvZXNuJ3QgdXBkYXRlIHRoZSBzdWJtb2R1bGUncyB3b3JrIHRyZWUKCWlmIHRlc3QgIiRLTk9XTl9GQUlMVVJFX0NIRVJSWV9QSUNLX1NFRVNfRU1QVFlfQ09NTUlUIiA9IDEKCXRoZW4KCQkjIFdoZW4gY2hlcnJ5IHBpY2tpbmcgYSBTSEEtMSB1cGRhdGUgZm9yIGFuIGlnbm9yZWQgc3VibW9kdWxlCgkJIyB0aGUgY29tbWl0IGluY29ycmVjdGx5IGZhaWxzIHdpdGggIlRoZSBwcmV2aW91cyBjaGVycnktcGljawoJCSMgaXMgbm93IGVtcHR5LCBwb3NzaWJseSBkdWUgdG8gY29uZmxpY3QgcmVzb2x1dGlvbi4iCgkJUkVTVUxUPSJmYWlsdXJlIgoJZWxzZQoJCVJFU1VMVD0ic3VjY2VzcyIKCWZpCgl0ZXN0X2V4cGVjdF8kUkVTVUxUICIkY29tbWFuZDogbW9kaWZpZWQgc3VibW9kdWxlIGRvZXMgbm90IHVwZGF0ZSBzdWJtb2R1bGUgd29yayB0cmVlIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgbW9kaWZ5X3N1YjEgb3JpZ2luL21vZGlmeV9zdWIxICYmCgkJCSRjb21tYW5kIG1vZGlmeV9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL21vZGlmeV9zdWIxICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9tb2RpZnlfc3ViMQoJCSkKCScKCgkjIFVwZGF0aW5nIGEgc3VibW9kdWxlIHRvIGFuIGludmFsaWQgc2hhMSBkb2Vzbid0IHVwZGF0ZSB0aGUKCSMgc3VibW9kdWxlJ3Mgd29yayB0cmVlLCBzdWJzZXF1ZW50IHVwZGF0ZSB3aWxsIGZhaWwKCXRlc3RfZXhwZWN0XyRSRVNVTFQgIiRjb21tYW5kOiBtb2RpZmllZCBzdWJtb2R1bGUgZG9lcyBub3QgdXBkYXRlIHN1Ym1vZHVsZSB3b3JrIHRyZWUgdG8gaW52YWxpZCBjb21taXQiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCBpbnZhbGlkX3N1YjEgb3JpZ2luL2ludmFsaWRfc3ViMSAmJgoJCQkkY29tbWFuZCBpbnZhbGlkX3N1YjEgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vaW52YWxpZF9zdWIxICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEgJiYKCQkJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCSMgVXBkYXRpbmcgYSBzdWJtb2R1bGUgZnJvbSBhbiBpbnZhbGlkIHNoYTEgZG9lc24ndCB1cGRhdGUgdGhlCgkjIHN1Ym1vZHVsZSdzIHdvcmsgdHJlZSwgc3Vic2VxdWVudCB1cGRhdGUgd2lsbCBzdWNjZWVkCgl0ZXN0X2V4cGVjdF8kUkVTVUxUICIkY29tbWFuZDogbW9kaWZpZWQgc3VibW9kdWxlIGRvZXMgbm90IHVwZGF0ZSBzdWJtb2R1bGUgd29yayB0cmVlIGZyb20gaW52YWxpZCBjb21taXQiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gaW52YWxpZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgdmFsaWRfc3ViMSBvcmlnaW4vdmFsaWRfc3ViMSAmJgoJCQkkY29tbWFuZCB2YWxpZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL3ZhbGlkX3N1YjEgJiYKCQkJdGVzdF9kaXJfaXNfZW1wdHkgc3ViMSAmJgoJCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgLS1yZWN1cnNpdmUgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi92YWxpZF9zdWIxCgkJKQoJJwp9CgojIFRlc3QgdGhhdCBzdWJtb2R1bGUgY29udGVudHMgYXJlIGN1cnJlbnRseSBub3QgdXBkYXRlZCB3aGVuIHN3aXRjaGluZwojIGJldHdlZW4gY29tbWl0cyB0aGF0IGNoYW5nZSBhIHN1Ym1vZHVsZSwgYnV0IHRocm93aW5nIGF3YXkgbG9jYWwgY2hhbmdlcyBpbgojIHRoZSBzdXBlcnByb2plY3QgaXMgYWxsb3dlZC4KdGVzdF9zdWJtb2R1bGVfZm9yY2VkX3N3aXRjaCAoKSB7Cgljb21tYW5kPSIkMSIKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgQXBwZWFyaW5nIHN1Ym1vZHVsZSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIFN3aXRjaGluZyB0byBhIGNvbW1pdCBsZXR0aW5nIGEgc3VibW9kdWxlIGFwcGVhciBjcmVhdGVzIGVtcHR5IGRpciAuLi4KCXRlc3RfZXhwZWN0X3N1Y2Nlc3MgIiRjb21tYW5kOiBhZGRlZCBzdWJtb2R1bGUgY3JlYXRlcyBlbXB0eSBkaXJlY3RvcnkiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gbm9fc3VibW9kdWxlICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgYWRkX3N1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCSRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEKCQkpCgknCgkjIC4uLiBhbmQgZG9lc24ndCBjYXJlIGlmIGl0IGFscmVhZHkgZXhpc3RzIC4uLgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiJGNvbW1hbmQ6IGFkZGVkIHN1Ym1vZHVsZSBsZWF2ZXMgZXhpc3RpbmcgZW1wdHkgZGlyZWN0b3J5IGFsb25lIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIG5vX3N1Ym1vZHVsZSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IGFkZF9zdWIxIG9yaWdpbi9hZGRfc3ViMSAmJgoJCQlta2RpciBzdWIxICYmCgkJCSRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEKCQkpCgknCgkjIC4uLiB1bmxlc3MgdGhlcmUgaXMgYW4gdW50cmFja2VkIGZpbGUgaW4gaXRzIHBsYWNlLgoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiJGNvbW1hbmQ6IGFkZGVkIHN1Ym1vZHVsZSBkb2VzIHJlbW92ZSB1bnRyYWNrZWQgdW5pZ25vcmVkIGZpbGUgd2l0aCBzYW1lIG5hbWUgd2hlbiBmb3JjZWQiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gbm9fc3VibW9kdWxlICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgYWRkX3N1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCT5zdWIxICYmCgkJCSRjb21tYW5kIGFkZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEKCQkpCgknCgkjIFJlcGxhY2luZyBhIHRyYWNrZWQgZmlsZSB3aXRoIGEgc3VibW9kdWxlIHByb2R1Y2VzIGFuIGVtcHR5CgkjIGRpcmVjdG9yeSAuLi4KCXRlc3RfZXhwZWN0X3N1Y2Nlc3MgIiRjb21tYW5kOiByZXBsYWNlIHRyYWNrZWQgZmlsZSB3aXRoIHN1Ym1vZHVsZSBjcmVhdGVzIGVtcHR5IGRpcmVjdG9yeSIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byByZXBsYWNlX3N1YjFfd2l0aF9maWxlICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgcmVwbGFjZV9maWxlX3dpdGhfc3ViMSBvcmlnaW4vcmVwbGFjZV9maWxlX3dpdGhfc3ViMSAmJgoJCQkkY29tbWFuZCByZXBsYWNlX2ZpbGVfd2l0aF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL3JlcGxhY2VfZmlsZV93aXRoX3N1YjEgJiYKCQkJdGVzdF9kaXJfaXNfZW1wdHkgc3ViMSAmJgoJCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgLS1yZWN1cnNpdmUgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9yZXBsYWNlX2ZpbGVfd2l0aF9zdWIxCgkJKQoJJwoJIyAuLi4gYXMgZG9lcyByZW1vdmluZyBhIGRpcmVjdG9yeSB3aXRoIHRyYWNrZWQgZmlsZXMgd2l0aCBhCgkjIHN1Ym1vZHVsZS4KCXRlc3RfZXhwZWN0X3N1Y2Nlc3MgIiRjb21tYW5kOiByZXBsYWNlIGRpcmVjdG9yeSB3aXRoIHN1Ym1vZHVsZSIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byByZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZXBsYWNlX2RpcmVjdG9yeV93aXRoX3N1YjEgb3JpZ2luL3JlcGxhY2VfZGlyZWN0b3J5X3dpdGhfc3ViMSAmJgoJCQkkY29tbWFuZCByZXBsYWNlX2RpcmVjdG9yeV93aXRoX3N1YjEgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vcmVwbGFjZV9kaXJlY3Rvcnlfd2l0aF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vcmVwbGFjZV9kaXJlY3Rvcnlfd2l0aF9zdWIxCgkJKQoJJwoKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBEaXNhcHBlYXJpbmcgc3VibW9kdWxlICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIFJlbW92aW5nIGEgc3VibW9kdWxlIGRvZXNuJ3QgcmVtb3ZlIGl0cyB3b3JrIHRyZWUgLi4uCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICIkY29tbWFuZDogcmVtb3ZlZCBzdWJtb2R1bGUgbGVhdmVzIHN1Ym1vZHVsZSBkaXJlY3RvcnkgYW5kIGl0cyBjb250ZW50cyBpbiBwbGFjZSIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byBhZGRfc3ViMSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IHJlbW92ZV9zdWIxIG9yaWdpbi9yZW1vdmVfc3ViMSAmJgoJCQkkY29tbWFuZCByZW1vdmVfc3ViMSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9yZW1vdmVfc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyAuLi4gZXNwZWNpYWxseSB3aGVuIGl0IGNvbnRhaW5zIGEgLmdpdCBkaXJlY3RvcnkuCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICIkY29tbWFuZDogcmVtb3ZlZCBzdWJtb2R1bGUgbGVhdmVzIHN1Ym1vZHVsZSBjb250YWluaW5nIGEgLmdpdCBkaXJlY3RvcnkgYWxvbmUiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZW1vdmVfc3ViMSBvcmlnaW4vcmVtb3ZlX3N1YjEgJiYKCQkJcmVwbGFjZV9naXRmaWxlX3dpdGhfZ2l0X2RpciBzdWIxICYmCgkJCSRjb21tYW5kIHJlbW92ZV9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL3JlbW92ZV9zdWIxICYmCgkJCXRlc3RfZ2l0X2RpcmVjdG9yeV9pc191bmNoYW5nZWQgc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyBSZXBsYWNpbmcgYSBzdWJtb2R1bGUgd2l0aCBmaWxlcyBpbiBhIGRpcmVjdG9yeSBtdXN0IGZhaWwgYXMgdGhlCgkjIHN1Ym1vZHVsZSB3b3JrIHRyZWUgaXNuJ3QgcmVtb3ZlZCAuLi4KCXRlc3RfZXhwZWN0X2ZhaWx1cmUgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSB3aXRoIGEgZGlyZWN0b3J5IG11c3QgZmFpbCIgJwoJCXByb2xvZyAmJgoJCXJlc2V0X3dvcmtfdHJlZV90byBhZGRfc3ViMSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSBvcmlnaW4vcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5ICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxCgkJKQoJJwoJIyAuLi4gZXNwZWNpYWxseSB3aGVuIGl0IGNvbnRhaW5zIGEgLmdpdCBkaXJlY3RvcnkuCgl0ZXN0X2V4cGVjdF9mYWlsdXJlICIkY29tbWFuZDogcmVwbGFjZSBzdWJtb2R1bGUgY29udGFpbmluZyBhIC5naXQgZGlyZWN0b3J5IHdpdGggYSBkaXJlY3RvcnkgbXVzdCBmYWlsIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgcmVwbGFjZV9zdWIxX3dpdGhfZGlyZWN0b3J5IG9yaWdpbi9yZXBsYWNlX3N1YjFfd2l0aF9kaXJlY3RvcnkgJiYKCQkJcmVwbGFjZV9naXRmaWxlX3dpdGhfZ2l0X2RpciBzdWIxICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2RpcmVjdG9yeSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X2dpdF9kaXJlY3RvcnlfaXNfdW5jaGFuZ2VkIHN1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCSMgUmVwbGFjaW5nIGl0IHdpdGggYSBmaWxlIG11c3QgZmFpbCBhcyBpdCBjb3VsZCB0aHJvdyBhd2F5IGFueSBsb2NhbAoJIyB3b3JrIHRyZWUgY2hhbmdlcyAuLi4KCXRlc3RfZXhwZWN0X2ZhaWx1cmUgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSB3aXRoIGEgZmlsZSBtdXN0IGZhaWwiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCByZXBsYWNlX3N1YjFfd2l0aF9maWxlIG9yaWdpbi9yZXBsYWNlX3N1YjFfd2l0aF9maWxlICYmCgkJCXRlc3RfbXVzdF9mYWlsICRjb21tYW5kIHJlcGxhY2Vfc3ViMV93aXRoX2ZpbGUgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vYWRkX3N1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCSMgLi4uIG9yIGV2ZW4gZGVzdHJveSB1bnB1c2hlZCBwYXJ0cyBvZiBzdWJtb2R1bGUgaGlzdG9yeSBpZiB0aGF0CgkjIHN0aWxsIHVzZXMgYSAuZ2l0IGRpcmVjdG9yeS4KCXRlc3RfZXhwZWN0X2ZhaWx1cmUgIiRjb21tYW5kOiByZXBsYWNlIHN1Ym1vZHVsZSBjb250YWluaW5nIGEgLmdpdCBkaXJlY3Rvcnkgd2l0aCBhIGZpbGUgbXVzdCBmYWlsIiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSBvcmlnaW4vcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSAmJgoJCQlyZXBsYWNlX2dpdGZpbGVfd2l0aF9naXRfZGlyIHN1YjEgJiYKCQkJdGVzdF9tdXN0X2ZhaWwgJGNvbW1hbmQgcmVwbGFjZV9zdWIxX3dpdGhfZmlsZSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi9hZGRfc3ViMSAmJgoJCQl0ZXN0X2dpdF9kaXJlY3RvcnlfaXNfdW5jaGFuZ2VkIHN1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMQoJCSkKCScKCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNb2RpZmllZCBzdWJtb2R1bGUgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBVcGRhdGluZyBhIHN1Ym1vZHVsZSBzaGExIGRvZXNuJ3QgdXBkYXRlIHRoZSBzdWJtb2R1bGUncyB3b3JrIHRyZWUKCXRlc3RfZXhwZWN0X3N1Y2Nlc3MgIiRjb21tYW5kOiBtb2RpZmllZCBzdWJtb2R1bGUgZG9lcyBub3QgdXBkYXRlIHN1Ym1vZHVsZSB3b3JrIHRyZWUiICcKCQlwcm9sb2cgJiYKCQlyZXNldF93b3JrX3RyZWVfdG8gYWRkX3N1YjEgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZV91cGRhdGUgJiYKCQkJZ2l0IGJyYW5jaCAtdCBtb2RpZnlfc3ViMSBvcmlnaW4vbW9kaWZ5X3N1YjEgJiYKCQkJJGNvbW1hbmQgbW9kaWZ5X3N1YjEgJiYKCQkJdGVzdF9zdXBlcnByb2plY3RfY29udGVudCBvcmlnaW4vbW9kaWZ5X3N1YjEgJiYKCQkJdGVzdF9zdWJtb2R1bGVfY29udGVudCBzdWIxIG9yaWdpbi9hZGRfc3ViMSAmJgoJCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL21vZGlmeV9zdWIxCgkJKQoJJwoJIyBVcGRhdGluZyBhIHN1Ym1vZHVsZSB0byBhbiBpbnZhbGlkIHNoYTEgZG9lc24ndCB1cGRhdGUgdGhlCgkjIHN1Ym1vZHVsZSdzIHdvcmsgdHJlZSwgc3Vic2VxdWVudCB1cGRhdGUgd2lsbCBmYWlsCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICIkY29tbWFuZDogbW9kaWZpZWQgc3VibW9kdWxlIGRvZXMgbm90IHVwZGF0ZSBzdWJtb2R1bGUgd29yayB0cmVlIHRvIGludmFsaWQgY29tbWl0IiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGFkZF9zdWIxICYmCgkJKAoJCQljZCBzdWJtb2R1bGVfdXBkYXRlICYmCgkJCWdpdCBicmFuY2ggLXQgaW52YWxpZF9zdWIxIG9yaWdpbi9pbnZhbGlkX3N1YjEgJiYKCQkJJGNvbW1hbmQgaW52YWxpZF9zdWIxICYmCgkJCXRlc3Rfc3VwZXJwcm9qZWN0X2NvbnRlbnQgb3JpZ2luL2ludmFsaWRfc3ViMSAmJgoJCQl0ZXN0X3N1Ym1vZHVsZV9jb250ZW50IHN1YjEgb3JpZ2luL2FkZF9zdWIxICYmCgkJCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgdXBkYXRlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vYWRkX3N1YjEKCQkpCgknCgkjIFVwZGF0aW5nIGEgc3VibW9kdWxlIGZyb20gYW4gaW52YWxpZCBzaGExIGRvZXNuJ3QgdXBkYXRlIHRoZQoJIyBzdWJtb2R1bGUncyB3b3JrIHRyZWUsIHN1YnNlcXVlbnQgdXBkYXRlIHdpbGwgc3VjY2VlZAoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiJGNvbW1hbmQ6IG1vZGlmaWVkIHN1Ym1vZHVsZSBkb2VzIG5vdCB1cGRhdGUgc3VibW9kdWxlIHdvcmsgdHJlZSBmcm9tIGludmFsaWQgY29tbWl0IiAnCgkJcHJvbG9nICYmCgkJcmVzZXRfd29ya190cmVlX3RvIGludmFsaWRfc3ViMSAmJgoJCSgKCQkJY2Qgc3VibW9kdWxlX3VwZGF0ZSAmJgoJCQlnaXQgYnJhbmNoIC10IHZhbGlkX3N1YjEgb3JpZ2luL3ZhbGlkX3N1YjEgJiYKCQkJJGNvbW1hbmQgdmFsaWRfc3ViMSAmJgoJCQl0ZXN0X3N1cGVycHJvamVjdF9jb250ZW50IG9yaWdpbi92YWxpZF9zdWIxICYmCgkJCXRlc3RfZGlyX2lzX2VtcHR5IHN1YjEgJiYKCQkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC0tcmVjdXJzaXZlICYmCgkJCXRlc3Rfc3VibW9kdWxlX2NvbnRlbnQgc3ViMSBvcmlnaW4vdmFsaWRfc3ViMQoJCSkKCScKfQo=",
    "text": "# Create a submodule layout used for all tests below.\n#\n# The following use cases are covered:\n# - New submodule (no_submodule => add_sub1)\n# - Removed submodule (add_sub1 => remove_sub1)\n# - Updated submodule (add_sub1 => modify_sub1)\n# - Submodule updated to invalid commit (add_sub1 => invalid_sub1)\n# - Submodule updated from invalid commit (invalid_sub1 => valid_sub1)\n# - Submodule replaced by tracked files in directory (add_sub1 =>\n#   replace_sub1_with_directory)\n# - Directory containing tracked files replaced by submodule\n#   (replace_sub1_with_directory => replace_directory_with_sub1)\n# - Submodule replaced by tracked file with the same name (add_sub1 =>\n#   replace_sub1_with_file)\n# - Tracked file replaced by submodule (replace_sub1_with_file =>\n#   replace_file_with_sub1)\n#\n#                     ----O\n#                    /    ^\n#                   /     remove_sub1\n#                  /\n#       add_sub1  /-------O\n#             |  /        ^\n#             | /         modify_sub1\n#             v/\n#      O------O-----------O---------O\n#      ^       \\          ^         replace_directory_with_sub1\n#      |        \\         replace_sub1_with_directory\n# no_submodule   \\\n#                 --------O---------O\n#                  \\      ^         replace_file_with_sub1\n#                   \\     replace_sub1_with_file\n#                    \\\n#                     ----O---------O\n#                         ^         valid_sub1\n#                         invalid_sub1\n#\n\ncreate_lib_submodule_repo () {\n\tgit init submodule_update_sub1 &&\n\t(\n\t\tcd submodule_update_sub1 &&\n\t\techo \"expect\" >>.gitignore &&\n\t\techo \"actual\" >>.gitignore &&\n\t\techo \"x\" >file1 &&\n\t\techo \"y\" >file2 &&\n\t\tgit add .gitignore file1 file2 &&\n\t\tgit commit -m \"Base inside first submodule\" &&\n\t\tgit branch \"no_submodule\"\n\t) &&\n\tgit init submodule_update_repo &&\n\t(\n\t\tcd submodule_update_repo &&\n\t\techo \"expect\" >>.gitignore &&\n\t\techo \"actual\" >>.gitignore &&\n\t\techo \"x\" >file1 &&\n\t\techo \"y\" >file2 &&\n\t\tgit add .gitignore file1 file2 &&\n\t\tgit commit -m \"Base\" &&\n\t\tgit branch \"no_submodule\" &&\n\n\t\tgit checkout -b \"add_sub1\" &&\n\t\tgit submodule add ../submodule_update_sub1 sub1 &&\n\t\tgit config -f .gitmodules submodule.sub1.ignore all &&\n\t\tgit config submodule.sub1.ignore all &&\n\t\tgit add .gitmodules &&\n\t\tgit commit -m \"Add sub1\" &&\n\n\t\tgit checkout -b remove_sub1 add_sub1 &&\n\t\tgit revert HEAD &&\n\n\t\tgit checkout -b modify_sub1 add_sub1 &&\n\t\tgit submodule update &&\n\t\t(\n\t\t\tcd sub1 &&\n\t\t\tgit fetch &&\n\t\t\tgit checkout -b \"modifications\" &&\n\t\t\techo \"z\" >file2 &&\n\t\t\techo \"x\" >file3 &&\n\t\t\tgit add file2 file3 &&\n\t\t\tgit commit -m \"modified file2 and added file3\" &&\n\t\t\tgit push origin modifications\n\t\t) &&\n\t\tgit add sub1 &&\n\t\tgit commit -m \"Modify sub1\" &&\n\n\t\tgit checkout -b replace_sub1_with_directory add_sub1 &&\n\t\tgit submodule update &&\n\t\tgit -C sub1 checkout modifications &&\n\t\tgit rm --cached sub1 &&\n\t\trm sub1/.git* &&\n\t\tgit config -f .gitmodules --remove-section \"submodule.sub1\" &&\n\t\tgit add .gitmodules sub1/* &&\n\t\tgit commit -m \"Replace sub1 with directory\" &&\n\n\t\tgit checkout -b replace_directory_with_sub1 &&\n\t\tgit revert HEAD &&\n\n\t\tgit checkout -b replace_sub1_with_file add_sub1 &&\n\t\tgit rm sub1 &&\n\t\techo \"content\" >sub1 &&\n\t\tgit add sub1 &&\n\t\tgit commit -m \"Replace sub1 with file\" &&\n\n\t\tgit checkout -b replace_file_with_sub1 &&\n\t\tgit revert HEAD &&\n\n\t\tgit checkout -b invalid_sub1 add_sub1 &&\n\t\tgit update-index --cacheinfo 160000 0123456789012345678901234567890123456789 sub1 &&\n\t\tgit commit -m \"Invalid sub1 commit\" &&\n\t\tgit checkout -b valid_sub1 &&\n\t\tgit revert HEAD &&\n\n\t\tgit checkout master\n\t)\n}\n\n# Helper function to replace gitfile with .git directory\nreplace_gitfile_with_git_dir () {\n\t(\n\t\tcd \"$1\" &&\n\t\tgit_dir=\"$(git rev-parse --git-dir)\" &&\n\t\trm -f .git &&\n\t\tcp -R \"$git_dir\" .git &&\n\t\tGIT_WORK_TREE=. git config --unset core.worktree\n\t)\n}\n\n# Test that the .git directory in the submodule is unchanged (except for the\n# core.worktree setting, which appears only in $GIT_DIR/modules/$1/config).\n# Call this function before test_submodule_content as the latter might\n# write the index file leading to false positive index differences.\n#\n# Note that this only supports submodules at the root level of the\n# superproject, with the default name, i.e. same as its path.\ntest_git_directory_is_unchanged () {\n\t(\n\t\tcd \".git/modules/$1\" &&\n\t\t# does core.worktree point at the right place?\n\t\ttest \"$(git config core.worktree)\" = \"../../../$1\" &&\n\t\t# remove it temporarily before comparing, as\n\t\t# \"$1/.git/config\" lacks it...\n\t\tgit config --unset core.worktree\n\t) &&\n\tdiff -r \".git/modules/$1\" \"$1/.git\" &&\n\t(\n\t\t# ... and then restore.\n\t\tcd \".git/modules/$1\" &&\n\t\tgit config core.worktree \"../../../$1\"\n\t)\n}\n\n# Helper function to be executed at the start of every test below, it sets up\n# the submodule repo if it doesn't exist and configures the most problematic\n# settings for diff.ignoreSubmodules.\nprolog () {\n\t(test -d submodule_update_repo || create_lib_submodule_repo) &&\n\ttest_config_global diff.ignoreSubmodules all &&\n\ttest_config diff.ignoreSubmodules all\n}\n\n# Helper function to bring work tree back into the state given by the\n# commit. This includes trying to populate sub1 accordingly if it exists and\n# should be updated to an existing commit.\nreset_work_tree_to () {\n\trm -rf submodule_update &&\n\tgit clone submodule_update_repo submodule_update &&\n\t(\n\t\tcd submodule_update &&\n\t\trm -rf sub1 &&\n\t\tgit checkout -f \"$1\" &&\n\t\tgit status -u -s >actual &&\n\t\ttest_must_be_empty actual &&\n\t\tsha1=$(git rev-parse --revs-only HEAD:sub1) &&\n\t\tif test -n \"$sha1\" &&\n\t\t   test $(cd \"../submodule_update_sub1\" && git rev-parse --verify \"$sha1^{commit}\")\n\t\tthen\n\t\t\tgit submodule update --init --recursive \"sub1\"\n\t\tfi\n\t)\n}\n\n# Test that the superproject contains the content according to commit \"$1\"\n# (the work tree must match the index for everything but submodules but the\n# index must exactly match the given commit including any submodule SHA-1s).\ntest_superproject_content () {\n\tgit diff-index --cached \"$1\" >actual &&\n\ttest_must_be_empty actual &&\n\tgit diff-files --ignore-submodules >actual &&\n\ttest_must_be_empty actual\n}\n\n# Test that the given submodule at path \"$1\" contains the content according\n# to the submodule commit recorded in the superproject's commit \"$2\"\ntest_submodule_content () {\n\tif test x\"$1\" = \"x-C\"\n\tthen\n\t\tcd \"$2\"\n\t\tshift; shift;\n\tfi\n\tif test $# != 2\n\tthen\n\t\techo \"test_submodule_content needs two arguments\"\n\t\treturn 1\n\tfi &&\n\tsubmodule=\"$1\" &&\n\tcommit=\"$2\" &&\n\ttest -d \"$submodule\"/ &&\n\tif ! test -f \"$submodule\"/.git && ! test -d \"$submodule\"/.git\n\tthen\n\t\techo \"Submodule $submodule is not populated\"\n\t\treturn 1\n\tfi &&\n\tsha1=$(git rev-parse --verify \"$commit:$submodule\") &&\n\tif test -z \"$sha1\"\n\tthen\n\t\techo \"Couldn't retrieve SHA-1 of $submodule for $commit\"\n\t\treturn 1\n\tfi &&\n\t(\n\t\tcd \"$submodule\" &&\n\t\tgit status -u -s >actual &&\n\t\ttest_must_be_empty actual &&\n\t\tgit diff \"$sha1\" >actual &&\n\t\ttest_must_be_empty actual\n\t)\n}\n\n# Test that the following transitions are correctly handled:\n# - Updated submodule\n# - New submodule\n# - Removed submodule\n# - Directory containing tracked files replaced by submodule\n# - Submodule replaced by tracked files in directory\n# - Submodule replaced by tracked file with the same name\n# - tracked file replaced by submodule\n#\n# The default is that submodule contents aren't changed until \"git submodule\n# update\" is run. And even then that command doesn't delete the work tree of\n# a removed submodule.\n#\n# Removing a submodule containing a .git directory must fail even when forced\n# to protect the history!\n#\n\n# Test that submodule contents are currently not updated when switching\n# between commits that change a submodule.\ntest_submodule_switch () {\n\tcommand=\"$1\"\n\t######################### Appearing submodule #########################\n\t# Switching to a commit letting a submodule appear creates empty dir ...\n\tif test \"$KNOWN_FAILURE_STASH_DOES_IGNORE_SUBMODULE_CHANGES\" = 1\n\tthen\n\t\t# Restoring stash fails to restore submodule index entry\n\t\tRESULT=\"failure\"\n\telse\n\t\tRESULT=\"success\"\n\tfi\n\ttest_expect_$RESULT \"$command: added submodule creates empty directory\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\t$command add_sub1 &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... and doesn't care if it already exists ...\n\ttest_expect_$RESULT \"$command: added submodule leaves existing empty directory alone\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tmkdir sub1 &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\t$command add_sub1 &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... unless there is an untracked file in its place.\n\ttest_expect_success \"$command: added submodule doesn't remove untracked unignored file with same name\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\t>sub1 &&\n\t\t\ttest_must_fail $command add_sub1 &&\n\t\t\ttest_superproject_content origin/no_submodule &&\n\t\t\ttest_must_be_empty sub1\n\t\t)\n\t'\n\t# Replacing a tracked file with a submodule produces an empty\n\t# directory ...\n\ttest_expect_$RESULT \"$command: replace tracked file with submodule creates empty directory\" '\n\t\tprolog &&\n\t\treset_work_tree_to replace_sub1_with_file &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_file_with_sub1 origin/replace_file_with_sub1 &&\n\t\t\t$command replace_file_with_sub1 &&\n\t\t\ttest_superproject_content origin/replace_file_with_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/replace_file_with_sub1\n\t\t)\n\t'\n\t# ... as does removing a directory with tracked files with a\n\t# submodule.\n\tif test \"$KNOWN_FAILURE_NOFF_MERGE_DOESNT_CREATE_EMPTY_SUBMODULE_DIR\" = 1\n\tthen\n\t\t# Non fast-forward merges fail with \"Directory sub1 doesn't\n\t\t# exist. sub1\" because the empty submodule directory is not\n\t\t# created\n\t\tRESULT=\"failure\"\n\telse\n\t\tRESULT=\"success\"\n\tfi\n\ttest_expect_$RESULT \"$command: replace directory with submodule\" '\n\t\tprolog &&\n\t\treset_work_tree_to replace_sub1_with_directory &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_directory_with_sub1 origin/replace_directory_with_sub1 &&\n\t\t\t$command replace_directory_with_sub1 &&\n\t\t\ttest_superproject_content origin/replace_directory_with_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/replace_directory_with_sub1\n\t\t)\n\t'\n\n\t######################## Disappearing submodule #######################\n\t# Removing a submodule doesn't remove its work tree ...\n\tif test \"$KNOWN_FAILURE_STASH_DOES_IGNORE_SUBMODULE_CHANGES\" = 1\n\tthen\n\t\tRESULT=\"failure\"\n\telse\n\t\tRESULT=\"success\"\n\tfi\n\ttest_expect_$RESULT \"$command: removed submodule leaves submodule directory and its contents in place\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t remove_sub1 origin/remove_sub1 &&\n\t\t\t$command remove_sub1 &&\n\t\t\ttest_superproject_content origin/remove_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... especially when it contains a .git directory.\n\ttest_expect_$RESULT \"$command: removed submodule leaves submodule containing a .git directory alone\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t remove_sub1 origin/remove_sub1 &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\t$command remove_sub1 &&\n\t\t\ttest_superproject_content origin/remove_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Replacing a submodule with files in a directory must fail as the\n\t# submodule work tree isn't removed ...\n\tif test \"$KNOWN_FAILURE_NOFF_MERGE_ATTEMPTS_TO_MERGE_REMOVED_SUBMODULE_FILES\" = 1\n\tthen\n\t\t# Non fast-forward merges attempt to merge the former\n\t\t# submodule files with the newly checked out ones in the\n\t\t# directory of the same name while it shouldn't.\n\t\tRESULT=\"failure\"\n\telse\n\t\tRESULT=\"success\"\n\tfi\n\ttest_expect_$RESULT \"$command: replace submodule with a directory must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_directory origin/replace_sub1_with_directory &&\n\t\t\ttest_must_fail $command replace_sub1_with_directory &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... especially when it contains a .git directory.\n\ttest_expect_$RESULT \"$command: replace submodule containing a .git directory with a directory must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_directory origin/replace_sub1_with_directory &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\ttest_must_fail $command replace_sub1_with_directory &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Replacing it with a file must fail as it could throw away any local\n\t# work tree changes ...\n\ttest_expect_failure \"$command: replace submodule with a file must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_file origin/replace_sub1_with_file &&\n\t\t\ttest_must_fail $command replace_sub1_with_file &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... or even destroy unpushed parts of submodule history if that\n\t# still uses a .git directory.\n\ttest_expect_failure \"$command: replace submodule containing a .git directory with a file must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_file origin/replace_sub1_with_file &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\ttest_must_fail $command replace_sub1_with_file &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\n\t########################## Modified submodule #########################\n\t# Updating a submodule sha1 doesn't update the submodule's work tree\n\tif test \"$KNOWN_FAILURE_CHERRY_PICK_SEES_EMPTY_COMMIT\" = 1\n\tthen\n\t\t# When cherry picking a SHA-1 update for an ignored submodule\n\t\t# the commit incorrectly fails with \"The previous cherry-pick\n\t\t# is now empty, possibly due to conflict resolution.\"\n\t\tRESULT=\"failure\"\n\telse\n\t\tRESULT=\"success\"\n\tfi\n\ttest_expect_$RESULT \"$command: modified submodule does not update submodule work tree\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t modify_sub1 origin/modify_sub1 &&\n\t\t\t$command modify_sub1 &&\n\t\t\ttest_superproject_content origin/modify_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1 &&\n\t\t\tgit submodule update &&\n\t\t\ttest_submodule_content sub1 origin/modify_sub1\n\t\t)\n\t'\n\n\t# Updating a submodule to an invalid sha1 doesn't update the\n\t# submodule's work tree, subsequent update will fail\n\ttest_expect_$RESULT \"$command: modified submodule does not update submodule work tree to invalid commit\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t invalid_sub1 origin/invalid_sub1 &&\n\t\t\t$command invalid_sub1 &&\n\t\t\ttest_superproject_content origin/invalid_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1 &&\n\t\t\ttest_must_fail git submodule update &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Updating a submodule from an invalid sha1 doesn't update the\n\t# submodule's work tree, subsequent update will succeed\n\ttest_expect_$RESULT \"$command: modified submodule does not update submodule work tree from invalid commit\" '\n\t\tprolog &&\n\t\treset_work_tree_to invalid_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t valid_sub1 origin/valid_sub1 &&\n\t\t\t$command valid_sub1 &&\n\t\t\ttest_superproject_content origin/valid_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/valid_sub1\n\t\t)\n\t'\n}\n\n# Test that submodule contents are currently not updated when switching\n# between commits that change a submodule, but throwing away local changes in\n# the superproject is allowed.\ntest_submodule_forced_switch () {\n\tcommand=\"$1\"\n\t######################### Appearing submodule #########################\n\t# Switching to a commit letting a submodule appear creates empty dir ...\n\ttest_expect_success \"$command: added submodule creates empty directory\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\t$command add_sub1 &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... and doesn't care if it already exists ...\n\ttest_expect_success \"$command: added submodule leaves existing empty directory alone\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\tmkdir sub1 &&\n\t\t\t$command add_sub1 &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... unless there is an untracked file in its place.\n\ttest_expect_success \"$command: added submodule does remove untracked unignored file with same name when forced\" '\n\t\tprolog &&\n\t\treset_work_tree_to no_submodule &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t add_sub1 origin/add_sub1 &&\n\t\t\t>sub1 &&\n\t\t\t$command add_sub1 &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_dir_is_empty sub1\n\t\t)\n\t'\n\t# Replacing a tracked file with a submodule produces an empty\n\t# directory ...\n\ttest_expect_success \"$command: replace tracked file with submodule creates empty directory\" '\n\t\tprolog &&\n\t\treset_work_tree_to replace_sub1_with_file &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_file_with_sub1 origin/replace_file_with_sub1 &&\n\t\t\t$command replace_file_with_sub1 &&\n\t\t\ttest_superproject_content origin/replace_file_with_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/replace_file_with_sub1\n\t\t)\n\t'\n\t# ... as does removing a directory with tracked files with a\n\t# submodule.\n\ttest_expect_success \"$command: replace directory with submodule\" '\n\t\tprolog &&\n\t\treset_work_tree_to replace_sub1_with_directory &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_directory_with_sub1 origin/replace_directory_with_sub1 &&\n\t\t\t$command replace_directory_with_sub1 &&\n\t\t\ttest_superproject_content origin/replace_directory_with_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/replace_directory_with_sub1\n\t\t)\n\t'\n\n\t######################## Disappearing submodule #######################\n\t# Removing a submodule doesn't remove its work tree ...\n\ttest_expect_success \"$command: removed submodule leaves submodule directory and its contents in place\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t remove_sub1 origin/remove_sub1 &&\n\t\t\t$command remove_sub1 &&\n\t\t\ttest_superproject_content origin/remove_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... especially when it contains a .git directory.\n\ttest_expect_success \"$command: removed submodule leaves submodule containing a .git directory alone\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t remove_sub1 origin/remove_sub1 &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\t$command remove_sub1 &&\n\t\t\ttest_superproject_content origin/remove_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Replacing a submodule with files in a directory must fail as the\n\t# submodule work tree isn't removed ...\n\ttest_expect_failure \"$command: replace submodule with a directory must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_directory origin/replace_sub1_with_directory &&\n\t\t\ttest_must_fail $command replace_sub1_with_directory &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... especially when it contains a .git directory.\n\ttest_expect_failure \"$command: replace submodule containing a .git directory with a directory must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_directory origin/replace_sub1_with_directory &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\ttest_must_fail $command replace_sub1_with_directory &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Replacing it with a file must fail as it could throw away any local\n\t# work tree changes ...\n\ttest_expect_failure \"$command: replace submodule with a file must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_file origin/replace_sub1_with_file &&\n\t\t\ttest_must_fail $command replace_sub1_with_file &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# ... or even destroy unpushed parts of submodule history if that\n\t# still uses a .git directory.\n\ttest_expect_failure \"$command: replace submodule containing a .git directory with a file must fail\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t replace_sub1_with_file origin/replace_sub1_with_file &&\n\t\t\treplace_gitfile_with_git_dir sub1 &&\n\t\t\ttest_must_fail $command replace_sub1_with_file &&\n\t\t\ttest_superproject_content origin/add_sub1 &&\n\t\t\ttest_git_directory_is_unchanged sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\n\t########################## Modified submodule #########################\n\t# Updating a submodule sha1 doesn't update the submodule's work tree\n\ttest_expect_success \"$command: modified submodule does not update submodule work tree\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t modify_sub1 origin/modify_sub1 &&\n\t\t\t$command modify_sub1 &&\n\t\t\ttest_superproject_content origin/modify_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1 &&\n\t\t\tgit submodule update &&\n\t\t\ttest_submodule_content sub1 origin/modify_sub1\n\t\t)\n\t'\n\t# Updating a submodule to an invalid sha1 doesn't update the\n\t# submodule's work tree, subsequent update will fail\n\ttest_expect_success \"$command: modified submodule does not update submodule work tree to invalid commit\" '\n\t\tprolog &&\n\t\treset_work_tree_to add_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t invalid_sub1 origin/invalid_sub1 &&\n\t\t\t$command invalid_sub1 &&\n\t\t\ttest_superproject_content origin/invalid_sub1 &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1 &&\n\t\t\ttest_must_fail git submodule update &&\n\t\t\ttest_submodule_content sub1 origin/add_sub1\n\t\t)\n\t'\n\t# Updating a submodule from an invalid sha1 doesn't update the\n\t# submodule's work tree, subsequent update will succeed\n\ttest_expect_success \"$command: modified submodule does not update submodule work tree from invalid commit\" '\n\t\tprolog &&\n\t\treset_work_tree_to invalid_sub1 &&\n\t\t(\n\t\t\tcd submodule_update &&\n\t\t\tgit branch -t valid_sub1 origin/valid_sub1 &&\n\t\t\t$command valid_sub1 &&\n\t\t\ttest_superproject_content origin/valid_sub1 &&\n\t\t\ttest_dir_is_empty sub1 &&\n\t\t\tgit submodule update --init --recursive &&\n\t\t\ttest_submodule_content sub1 origin/valid_sub1\n\t\t)\n\t'\n}\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00128f28b5a0f4df0d8ac97b19dcf3e7c316d38d",
  "sha1_ok": true,
  "size": 24026
}
