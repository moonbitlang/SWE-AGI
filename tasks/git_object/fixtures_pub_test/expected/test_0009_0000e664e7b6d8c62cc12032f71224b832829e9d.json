{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdUZXN0IHdhY2t5IGlucHV0IHRvIGdpdCBjb25maWcnCi4gLi90ZXN0LWxpYi5zaAoKIyBMZWF2aW5nIG9mZiB0aGUgbmV3bGluZSBpcyBpbnRlbnRpb25hbCEKc2V0dXAoKSB7CgkocHJpbnRmICJbc2VjdGlvbl1cbiIgJiYKCXByaW50ZiAiICBrZXkgPSBmb28iKSA+LmdpdC9jb25maWcKfQoKIyAnY2hlY2sgc2VjdGlvbi5rZXkgdmFsdWUnIHZlcmlmaWVzIHRoYXQgdGhlIGVudHJ5IGZvciBzZWN0aW9uLmtleSBpcwojICd2YWx1ZScKY2hlY2soKSB7CgllY2hvICIkMiIgPmV4cGVjdGVkCglnaXQgY29uZmlnIC0tZ2V0ICIkMSIgPmFjdHVhbCAyPiYxCgl0ZXN0X2NtcCBleHBlY3RlZCBhY3R1YWwKfQoKIyAnY2hlY2sgc2VjdGlvbi5rZXkgcmVnZXggdmFsdWUnIHZlcmlmaWVzIHRoYXQgdGhlIGVudHJ5IGZvcgojIHNlY3Rpb24ua2V5ICp0aGF0IG1hdGNoZXMgJ3JlZ2V4JyogaXMgJ3ZhbHVlJwpjaGVja19yZWdleCgpIHsKCWVjaG8gIiQzIiA+ZXhwZWN0ZWQKCWdpdCBjb25maWcgLS1nZXQgIiQxIiAiJDIiID5hY3R1YWwgMj4mMQoJdGVzdF9jbXAgZXhwZWN0ZWQgYWN0dWFsCn0KCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ21vZGlmeSBzYW1lIGtleScgJwoJc2V0dXAgJiYKCWdpdCBjb25maWcgc2VjdGlvbi5rZXkgYmFyICYmCgljaGVjayBzZWN0aW9uLmtleSBiYXIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWRkIGtleSBpbiBzYW1lIHNlY3Rpb24nICcKCXNldHVwICYmCglnaXQgY29uZmlnIHNlY3Rpb24ub3RoZXIgYmFyICYmCgljaGVjayBzZWN0aW9uLmtleSBmb28gJiYKCWNoZWNrIHNlY3Rpb24ub3RoZXIgYmFyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FkZCBrZXkgaW4gZGlmZmVyZW50IHNlY3Rpb24nICcKCXNldHVwICYmCglnaXQgY29uZmlnIHNlY3Rpb24yLmtleSBiYXIgJiYKCWNoZWNrIHNlY3Rpb24ua2V5IGZvbyAmJgoJY2hlY2sgc2VjdGlvbjIua2V5IGJhcgonCgpTRUNUSU9OPSJ0ZXN0LnFcInNcXHNxJ3NwIGUua2V5Igp0ZXN0X2V4cGVjdF9zdWNjZXNzICdtYWtlIHN1cmUgZ2l0IGNvbmZpZyBlc2NhcGVzIHNlY3Rpb24gbmFtZXMgcHJvcGVybHknICcKCWdpdCBjb25maWcgIiRTRUNUSU9OIiBiYXIgJiYKCWNoZWNrICIkU0VDVElPTiIgYmFyCicKCkxPTkdfVkFMVUU9JChwcmludGYgInglMDEwMjFkeCBhIiA3KQp0ZXN0X2V4cGVjdF9zdWNjZXNzICdkbyBub3QgY3Jhc2ggb24gc3BlY2lhbCBsb25nIGNvbmZpZyBsaW5lJyAnCglzZXR1cCAmJgoJZ2l0IGNvbmZpZyBzZWN0aW9uLmtleSAiJExPTkdfVkFMVUUiICYmCgljaGVjayBzZWN0aW9uLmtleSAiJExPTkdfVkFMVUUiCicKCnNldHVwX21hbnkoKSB7CglzZXR1cCAmJgoJIyBUaGlzIHRpbWUgd2Ugd2FudCB0aGUgbmV3bGluZSBzbyB0aGF0IHdlIGNhbiB0YWNrIG9uIG1vcmUKCSMgZW50cmllcy4KCWVjaG8gPj4uZ2l0L2NvbmZpZyAmJgoJIyBTZW1pLWVmZmljaWVudCB3YXkgb2YgY29uY2F0ZW5hdGluZyA1XjUgPSAzMTI1IGxpbmVzLiBOb3RlCgkjIHRoYXQgYmVjYXVzZSAnc2V0dXAnIGFscmVhZHkgcHV0IG9uZSBsaW5lLCB0aGlzIG1lYW5zIDMxMjYKCSMgZW50cmllcyBmb3Igc2VjdGlvbi5rZXkgaW4gdGhlIGNvbmZpZyBmaWxlLgoJY2F0ID41dG8xIDw8LVxFT0YgJiYKCSAga2V5ID0gZm9vCgkgIGtleSA9IGZvbwoJICBrZXkgPSBmb28KCSAga2V5ID0gZm9vCgkgIGtleSA9IGZvbwoJRU9GCgljYXQgNXRvMSA1dG8xIDV0bzEgNXRvMSA1dG8xID41dG8yICYmCSAgICMgMjUKCWNhdCA1dG8yIDV0bzIgNXRvMiA1dG8yIDV0bzIgPjV0bzMgJiYJICAgIyAxMjUKCWNhdCA1dG8zIDV0bzMgNXRvMyA1dG8zIDV0bzMgPjV0bzQgJiYJICAgIyA2MzUKCWNhdCA1dG80IDV0bzQgNXRvNCA1dG80IDV0bzQgPj4uZ2l0L2NvbmZpZyAjIDMxMjUKfQoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZ2V0IG1hbnkgZW50cmllcycgJwoJc2V0dXBfbWFueSAmJgoJZ2l0IGNvbmZpZyAtLWdldC1hbGwgc2VjdGlvbi5rZXkgPmFjdHVhbCAmJgoJdGVzdF9saW5lX2NvdW50ID0gMzEyNiBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZ2V0IG1hbnkgZW50cmllcyBieSByZWdleCcgJwoJc2V0dXBfbWFueSAmJgoJZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInNlYy4qa2UuIiA+YWN0dWFsICYmCgl0ZXN0X2xpbmVfY291bnQgPSAzMTI2IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhZGQgYW5kIHJlcGxhY2Ugb25lIG9mIG1hbnkgZW50cmllcycgJwoJc2V0dXBfbWFueSAmJgoJZ2l0IGNvbmZpZyAtLWFkZCBzZWN0aW9uLmtleSBiYXIgJiYKCWNoZWNrX3JlZ2V4IHNlY3Rpb24ua2V5ICJiLipyIiBiYXIgJiYKCWdpdCBjb25maWcgc2VjdGlvbi5rZXkgYmVlciAiYi4qciIgJiYKCWNoZWNrX3JlZ2V4IHNlY3Rpb24ua2V5ICJiLipyIiBiZWVyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcGxhY2UgbWFueSBlbnRyaWVzJyAnCglzZXR1cF9tYW55ICYmCglnaXQgY29uZmlnIC0tcmVwbGFjZS1hbGwgc2VjdGlvbi5rZXkgYmFyICYmCgljaGVjayBzZWN0aW9uLmtleSBiYXIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndW5zZXQgbWFueSBlbnRyaWVzJyAnCglzZXR1cF9tYW55ICYmCglnaXQgY29uZmlnIC0tdW5zZXQtYWxsIHNlY3Rpb24ua2V5ICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgY29uZmlnIHNlY3Rpb24ua2V5CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJy0tYWRkIGFwcGVuZHMgbmV3IHZhbHVlIGFmdGVyIGV4aXN0aW5nIGVtcHR5IHZhbHVlJyAnCgljYXQgPmV4cGVjdCA8PC1cRU9GICYmCgoKCWZvb2wKCXJvbGwKCUVPRgoJY3AgLmdpdC9jb25maWcgLmdpdC9jb25maWcub2xkICYmCgl0ZXN0X3doZW5fZmluaXNoZWQgIm12IC5naXQvY29uZmlnLm9sZCAuZ2l0L2NvbmZpZyIgJiYKCWNhdCA+LmdpdC9jb25maWcgPDwtXEVPRiAmJgoJW2Zvb10KCQliYXoKCQliYXogPQoJCWJheiA9IGZvb2wKCUVPRgoJZ2l0IGNvbmZpZyAtLWFkZCBmb28uYmF6IHJvbGwgJiYKCWdpdCBjb25maWcgLS1nZXQtYWxsIGZvby5iYXogPm91dHB1dCAmJgoJdGVzdF9jbXAgZXhwZWN0IG91dHB1dAonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n\ntest_description='Test wacky input to git config'\n. ./test-lib.sh\n\n# Leaving off the newline is intentional!\nsetup() {\n\t(printf \"[section]\\n\" &&\n\tprintf \"  key = foo\") >.git/config\n}\n\n# 'check section.key value' verifies that the entry for section.key is\n# 'value'\ncheck() {\n\techo \"$2\" >expected\n\tgit config --get \"$1\" >actual 2>&1\n\ttest_cmp expected actual\n}\n\n# 'check section.key regex value' verifies that the entry for\n# section.key *that matches 'regex'* is 'value'\ncheck_regex() {\n\techo \"$3\" >expected\n\tgit config --get \"$1\" \"$2\" >actual 2>&1\n\ttest_cmp expected actual\n}\n\ntest_expect_success 'modify same key' '\n\tsetup &&\n\tgit config section.key bar &&\n\tcheck section.key bar\n'\n\ntest_expect_success 'add key in same section' '\n\tsetup &&\n\tgit config section.other bar &&\n\tcheck section.key foo &&\n\tcheck section.other bar\n'\n\ntest_expect_success 'add key in different section' '\n\tsetup &&\n\tgit config section2.key bar &&\n\tcheck section.key foo &&\n\tcheck section2.key bar\n'\n\nSECTION=\"test.q\\\"s\\\\sq'sp e.key\"\ntest_expect_success 'make sure git config escapes section names properly' '\n\tgit config \"$SECTION\" bar &&\n\tcheck \"$SECTION\" bar\n'\n\nLONG_VALUE=$(printf \"x%01021dx a\" 7)\ntest_expect_success 'do not crash on special long config line' '\n\tsetup &&\n\tgit config section.key \"$LONG_VALUE\" &&\n\tcheck section.key \"$LONG_VALUE\"\n'\n\nsetup_many() {\n\tsetup &&\n\t# This time we want the newline so that we can tack on more\n\t# entries.\n\techo >>.git/config &&\n\t# Semi-efficient way of concatenating 5^5 = 3125 lines. Note\n\t# that because 'setup' already put one line, this means 3126\n\t# entries for section.key in the config file.\n\tcat >5to1 <<-\\EOF &&\n\t  key = foo\n\t  key = foo\n\t  key = foo\n\t  key = foo\n\t  key = foo\n\tEOF\n\tcat 5to1 5to1 5to1 5to1 5to1 >5to2 &&\t   # 25\n\tcat 5to2 5to2 5to2 5to2 5to2 >5to3 &&\t   # 125\n\tcat 5to3 5to3 5to3 5to3 5to3 >5to4 &&\t   # 635\n\tcat 5to4 5to4 5to4 5to4 5to4 >>.git/config # 3125\n}\n\ntest_expect_success 'get many entries' '\n\tsetup_many &&\n\tgit config --get-all section.key >actual &&\n\ttest_line_count = 3126 actual\n'\n\ntest_expect_success 'get many entries by regex' '\n\tsetup_many &&\n\tgit config --get-regexp \"sec.*ke.\" >actual &&\n\ttest_line_count = 3126 actual\n'\n\ntest_expect_success 'add and replace one of many entries' '\n\tsetup_many &&\n\tgit config --add section.key bar &&\n\tcheck_regex section.key \"b.*r\" bar &&\n\tgit config section.key beer \"b.*r\" &&\n\tcheck_regex section.key \"b.*r\" beer\n'\n\ntest_expect_success 'replace many entries' '\n\tsetup_many &&\n\tgit config --replace-all section.key bar &&\n\tcheck section.key bar\n'\n\ntest_expect_success 'unset many entries' '\n\tsetup_many &&\n\tgit config --unset-all section.key &&\n\ttest_must_fail git config section.key\n'\n\ntest_expect_success '--add appends new value after existing empty value' '\n\tcat >expect <<-\\EOF &&\n\n\n\tfool\n\troll\n\tEOF\n\tcp .git/config .git/config.old &&\n\ttest_when_finished \"mv .git/config.old .git/config\" &&\n\tcat >.git/config <<-\\EOF &&\n\t[foo]\n\t\tbaz\n\t\tbaz =\n\t\tbaz = fool\n\tEOF\n\tgit config --add foo.baz roll &&\n\tgit config --get-all foo.baz >output &&\n\ttest_cmp expect output\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "0000e664e7b6d8c62cc12032f71224b832829e9d",
  "sha1_ok": false,
  "size": 3093
}
