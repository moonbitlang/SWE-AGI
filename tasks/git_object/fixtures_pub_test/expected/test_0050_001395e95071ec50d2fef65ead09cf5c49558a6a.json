{
  "content": {
    "base64": "R2l0IENvbW1pdCBHcmFwaCBEZXNpZ24gTm90ZXMKPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCkdpdCB3YWxrcyB0aGUgY29tbWl0IGdyYXBoIGZvciBtYW55IHJlYXNvbnMsIGluY2x1ZGluZzoKCjEuIExpc3RpbmcgYW5kIGZpbHRlcmluZyBjb21taXQgaGlzdG9yeS4KMi4gQ29tcHV0aW5nIG1lcmdlIGJhc2VzLgoKVGhlc2Ugb3BlcmF0aW9ucyBjYW4gYmVjb21lIHNsb3cgYXMgdGhlIGNvbW1pdCBjb3VudCBncm93cy4gVGhlIG1lcmdlCmJhc2UgY2FsY3VsYXRpb24gc2hvd3MgdXAgaW4gbWFueSB1c2VyLWZhY2luZyBjb21tYW5kcywgc3VjaCBhcyAnbWVyZ2UtYmFzZScKb3IgJ3N0YXR1cycgYW5kIGNhbiB0YWtlIG1pbnV0ZXMgdG8gY29tcHV0ZSBkZXBlbmRpbmcgb24gaGlzdG9yeSBzaGFwZS4KClRoZXJlIGFyZSB0d28gbWFpbiBjb3N0cyBoZXJlOgoKMS4gRGVjb21wcmVzc2luZyBhbmQgcGFyc2luZyBjb21taXRzLgoyLiBXYWxraW5nIHRoZSBlbnRpcmUgZ3JhcGggdG8gc2F0aXNmeSB0b3BvbG9naWNhbCBvcmRlciBjb25zdHJhaW50cy4KClRoZSBjb21taXQgZ3JhcGggZmlsZSBpcyBhIHN1cHBsZW1lbnRhbCBkYXRhIHN0cnVjdHVyZSB0aGF0IGFjY2VsZXJhdGVzCmNvbW1pdCBncmFwaCB3YWxrcy4gSWYgYSB1c2VyIGRvd25ncmFkZXMgb3IgZGlzYWJsZXMgdGhlICdjb3JlLmNvbW1pdEdyYXBoJwpjb25maWcgc2V0dGluZywgdGhlbiB0aGUgZXhpc3RpbmcgT0RCIGlzIHN1ZmZpY2llbnQuIFRoZSBmaWxlIGlzIHN0b3JlZAphcyAiY29tbWl0LWdyYXBoIiBlaXRoZXIgaW4gdGhlIC5naXQvb2JqZWN0cy9pbmZvIGRpcmVjdG9yeSBvciBpbiB0aGUgaW5mbwpkaXJlY3Rvcnkgb2YgYW4gYWx0ZXJuYXRlLgoKVGhlIGNvbW1pdCBncmFwaCBmaWxlIHN0b3JlcyB0aGUgY29tbWl0IGdyYXBoIHN0cnVjdHVyZSBhbG9uZyB3aXRoIHNvbWUKZXh0cmEgbWV0YWRhdGEgdG8gc3BlZWQgdXAgZ3JhcGggd2Fsa3MuIEJ5IGxpc3RpbmcgY29tbWl0IE9JRHMgaW4gbGV4aS0KY29ncmFwaGljIG9yZGVyLCB3ZSBjYW4gaWRlbnRpZnkgYW4gaW50ZWdlciBwb3NpdGlvbiBmb3IgZWFjaCBjb21taXQgYW5kCnJlZmVyIHRvIHRoZSBwYXJlbnRzIG9mIGEgY29tbWl0IHVzaW5nIHRob3NlIGludGVnZXIgcG9zaXRpb25zLiBXZSB1c2UKYmluYXJ5IHNlYXJjaCB0byBmaW5kIGluaXRpYWwgY29tbWl0cyBhbmQgdGhlbiB1c2UgdGhlIGludGVnZXIgcG9zaXRpb25zCmZvciBmYXN0IGxvb2t1cHMgZHVyaW5nIHRoZSB3YWxrLgoKQSBjb25zdW1lciBtYXkgbG9hZCB0aGUgZm9sbG93aW5nIGluZm8gZm9yIGEgY29tbWl0IGZyb20gdGhlIGdyYXBoOgoKMS4gVGhlIGNvbW1pdCBPSUQuCjIuIFRoZSBsaXN0IG9mIHBhcmVudHMsIGFsb25nIHdpdGggdGhlaXIgaW50ZWdlciBwb3NpdGlvbi4KMy4gVGhlIGNvbW1pdCBkYXRlLgo0LiBUaGUgcm9vdCB0cmVlIE9JRC4KNS4gVGhlIGdlbmVyYXRpb24gbnVtYmVyIChzZWUgZGVmaW5pdGlvbiBiZWxvdykuCgpWYWx1ZXMgMS00IHNhdGlzZnkgdGhlIHJlcXVpcmVtZW50cyBvZiBwYXJzZV9jb21taXRfZ2VudGx5KCkuCgpEZWZpbmUgdGhlICJnZW5lcmF0aW9uIG51bWJlciIgb2YgYSBjb21taXQgcmVjdXJzaXZlbHkgYXMgZm9sbG93czoKCiAqIEEgY29tbWl0IHdpdGggbm8gcGFyZW50cyAoYSByb290IGNvbW1pdCkgaGFzIGdlbmVyYXRpb24gbnVtYmVyIG9uZS4KCiAqIEEgY29tbWl0IHdpdGggYXQgbGVhc3Qgb25lIHBhcmVudCBoYXMgZ2VuZXJhdGlvbiBudW1iZXIgb25lIG1vcmUgdGhhbgogICB0aGUgbGFyZ2VzdCBnZW5lcmF0aW9uIG51bWJlciBhbW9uZyBpdHMgcGFyZW50cy4KCkVxdWl2YWxlbnRseSwgdGhlIGdlbmVyYXRpb24gbnVtYmVyIG9mIGEgY29tbWl0IEEgaXMgb25lIG1vcmUgdGhhbiB0aGUKbGVuZ3RoIG9mIGEgbG9uZ2VzdCBwYXRoIGZyb20gQSB0byBhIHJvb3QgY29tbWl0LiBUaGUgcmVjdXJzaXZlIGRlZmluaXRpb24KaXMgZWFzaWVyIHRvIHVzZSBmb3IgY29tcHV0YXRpb24gYW5kIG9ic2VydmluZyB0aGUgZm9sbG93aW5nIHByb3BlcnR5OgoKICAgIElmIEEgYW5kIEIgYXJlIGNvbW1pdHMgd2l0aCBnZW5lcmF0aW9uIG51bWJlcnMgTiBhbmQgTSwgcmVzcGVjdGl2ZWx5LAogICAgYW5kIE4gPD0gTSwgdGhlbiBBIGNhbm5vdCByZWFjaCBCLiBUaGF0IGlzLCB3ZSBrbm93IHdpdGhvdXQgc2VhcmNoaW5nCiAgICB0aGF0IEIgaXMgbm90IGFuIGFuY2VzdG9yIG9mIEEgYmVjYXVzZSBpdCBpcyBmdXJ0aGVyIGZyb20gYSByb290IGNvbW1pdAogICAgdGhhbiBBLgoKICAgIENvbnZlcnNlbHksIHdoZW4gY2hlY2tpbmcgaWYgQSBpcyBhbiBhbmNlc3RvciBvZiBCLCB0aGVuIHdlIG9ubHkgbmVlZAogICAgdG8gd2FsayBjb21taXRzIHVudGlsIGFsbCBjb21taXRzIG9uIHRoZSB3YWxrIGJvdW5kYXJ5IGhhdmUgZ2VuZXJhdGlvbgogICAgbnVtYmVyIGF0IG1vc3QgTi4gSWYgd2Ugd2FsayBjb21taXRzIHVzaW5nIGEgcHJpb3JpdHkgcXVldWUgc2VlZGVkIGJ5CiAgICBnZW5lcmF0aW9uIG51bWJlcnMsIHRoZW4gd2UgYWx3YXlzIGV4cGFuZCB0aGUgYm91bmRhcnkgY29tbWl0IHdpdGggaGlnaGVzdAogICAgZ2VuZXJhdGlvbiBudW1iZXIgYW5kIGNhbiBlYXNpbHkgZGV0ZWN0IHRoZSBzdG9wcGluZyBjb25kaXRpb24uCgpUaGlzIHByb3BlcnR5IGNhbiBiZSB1c2VkIHRvIHNpZ25pZmljYW50bHkgcmVkdWNlIHRoZSB0aW1lIGl0IHRha2VzIHRvCndhbGsgY29tbWl0cyBhbmQgZGV0ZXJtaW5lIHRvcG9sb2dpY2FsIHJlbGF0aW9uc2hpcHMuIFdpdGhvdXQgZ2VuZXJhdGlvbgpudW1iZXJzLCB0aGUgZ2VuZXJhbCBoZXVyaXN0aWMgaXMgdGhlIGZvbGxvd2luZzoKCiAgICBJZiBBIGFuZCBCIGFyZSBjb21taXRzIHdpdGggY29tbWl0IHRpbWUgWCBhbmQgWSwgcmVzcGVjdGl2ZWx5LCBhbmQKICAgIFggPCBZLCB0aGVuIEEgX3Byb2JhYmx5XyBjYW5ub3QgcmVhY2ggQi4KClRoaXMgaGV1cmlzdGljIGlzIGN1cnJlbnRseSB1c2VkIHdoZW5ldmVyIHRoZSBjb21wdXRhdGlvbiBpcyBhbGxvd2VkIHRvCnZpb2xhdGUgdG9wb2xvZ2ljYWwgcmVsYXRpb25zaGlwcyBkdWUgdG8gY2xvY2sgc2tldyAoc3VjaCBhcyAiZ2l0IGxvZyIKd2l0aCBkZWZhdWx0IG9yZGVyKSwgYnV0IGlzIG5vdCB1c2VkIHdoZW4gdGhlIHRvcG9sb2dpY2FsIG9yZGVyIGlzCnJlcXVpcmVkIChzdWNoIGFzIG1lcmdlIGJhc2UgY2FsY3VsYXRpb25zLCAiZ2l0IGxvZyAtLWdyYXBoIikuCgpJbiBwcmFjdGljZSwgd2UgZXhwZWN0IHNvbWUgY29tbWl0cyB0byBiZSBjcmVhdGVkIHJlY2VudGx5IGFuZCBub3Qgc3RvcmVkCmluIHRoZSBjb21taXQgZ3JhcGguIFdlIGNhbiB0cmVhdCB0aGVzZSBjb21taXRzIGFzIGhhdmluZyAiaW5maW5pdGUiCmdlbmVyYXRpb24gbnVtYmVyIGFuZCB3YWxrIHVudGlsIHJlYWNoaW5nIGNvbW1pdHMgd2l0aCBrbm93biBnZW5lcmF0aW9uCm51bWJlci4KCldlIHVzZSB0aGUgbWFjcm8gR0VORVJBVElPTl9OVU1CRVJfSU5GSU5JVFkgPSAweEZGRkZGRkZGIHRvIG1hcmsgY29tbWl0cyBub3QKaW4gdGhlIGNvbW1pdC1ncmFwaCBmaWxlLiBJZiBhIGNvbW1pdC1ncmFwaCBmaWxlIHdhcyB3cml0dGVuIGJ5IGEgdmVyc2lvbgpvZiBHaXQgdGhhdCBkaWQgbm90IGNvbXB1dGUgZ2VuZXJhdGlvbiBudW1iZXJzLCB0aGVuIHRob3NlIGNvbW1pdHMgd2lsbApoYXZlIGdlbmVyYXRpb24gbnVtYmVyIHJlcHJlc2VudGVkIGJ5IHRoZSBtYWNybyBHRU5FUkFUSU9OX05VTUJFUl9aRVJPID0gMC4KClNpbmNlIHRoZSBjb21taXQtZ3JhcGggZmlsZSBpcyBjbG9zZWQgdW5kZXIgcmVhY2hhYmlsaXR5LCB3ZSBjYW4gZ3VhcmFudGVlCnRoZSBmb2xsb3dpbmcgd2Vha2VyIGNvbmRpdGlvbiBvbiBhbGwgY29tbWl0czoKCiAgICBJZiBBIGFuZCBCIGFyZSBjb21taXRzIHdpdGggZ2VuZXJhdGlvbiBudW1iZXJzIE4gYW1kIE0sIHJlc3BlY3RpdmVseSwKICAgIGFuZCBOIDwgTSwgdGhlbiBBIGNhbm5vdCByZWFjaCBCLgoKTm90ZSBob3cgdGhlIHN0cmljdCBpbmVxdWFsaXR5IGRpZmZlcnMgZnJvbSB0aGUgaW5lcXVhbGl0eSB3aGVuIHdlIGhhdmUKZnVsbHktY29tcHV0ZWQgZ2VuZXJhdGlvbiBudW1iZXJzLiBVc2luZyBzdHJpY3QgaW5lcXVhbGl0eSBtYXkgcmVzdWx0IGluCndhbGtpbmcgYSBmZXcgZXh0cmEgY29tbWl0cywgYnV0IHRoZSBzaW1wbGljaXR5IGluIGRlYWxpbmcgd2l0aCBjb21taXRzCndpdGggZ2VuZXJhdGlvbiBudW1iZXIgKl9JTkZJTklUWSBvciAqX1pFUk8gaXMgdmFsdWFibGUuCgpXZSB1c2UgdGhlIG1hY3JvIEdFTkVSQVRJT05fTlVNQkVSX01BWCA9IDB4M0ZGRkZGRkYgdG8gZm9yIGNvbW1pdHMgd2hvc2UKZ2VuZXJhdGlvbiBudW1iZXJzIGFyZSBjb21wdXRlZCB0byBiZSBhdCBsZWFzdCB0aGlzIHZhbHVlLiBXZSBsaW1pdCBhdAp0aGlzIHZhbHVlIHNpbmNlIGl0IGlzIHRoZSBsYXJnZXN0IHZhbHVlIHRoYXQgY2FuIGJlIHN0b3JlZCBpbiB0aGUKY29tbWl0LWdyYXBoIGZpbGUgdXNpbmcgdGhlIDMwIGJpdHMgYXZhaWxhYmxlIHRvIGdlbmVyYXRpb24gbnVtYmVycy4gVGhpcwpwcmVzZW50cyBhbm90aGVyIGNhc2Ugd2hlcmUgYSBjb21taXQgY2FuIGhhdmUgZ2VuZXJhdGlvbiBudW1iZXIgZXF1YWwgdG8KdGhhdCBvZiBhIHBhcmVudC4KCkRlc2lnbiBEZXRhaWxzCi0tLS0tLS0tLS0tLS0tCgotIFRoZSBjb21taXQgZ3JhcGggZmlsZSBpcyBzdG9yZWQgaW4gYSBmaWxlIG5hbWVkICdjb21taXQtZ3JhcGgnIGluIHRoZQogIC5naXQvb2JqZWN0cy9pbmZvIGRpcmVjdG9yeS4gVGhpcyBjb3VsZCBiZSBzdG9yZWQgaW4gdGhlIGluZm8gZGlyZWN0b3J5CiAgb2YgYW4gYWx0ZXJuYXRlLgoKLSBUaGUgY29yZS5jb21taXRHcmFwaCBjb25maWcgc2V0dGluZyBtdXN0IGJlIG9uIHRvIGNvbnN1bWUgZ3JhcGggZmlsZXMuCgotIFRoZSBmaWxlIGZvcm1hdCBpbmNsdWRlcyBwYXJhbWV0ZXJzIGZvciB0aGUgb2JqZWN0IElEIGhhc2ggZnVuY3Rpb24sCiAgc28gYSBmdXR1cmUgY2hhbmdlIG9mIGhhc2ggYWxnb3JpdGhtIGRvZXMgbm90IHJlcXVpcmUgYSBjaGFuZ2UgaW4gZm9ybWF0LgoKLSBDb21taXQgZ3JhZnRzIGFuZCByZXBsYWNlIG9iamVjdHMgY2FuIGNoYW5nZSB0aGUgc2hhcGUgb2YgdGhlIGNvbW1pdAogIGhpc3RvcnkuIFRoZSBsYXR0ZXIgY2FuIGFsc28gYmUgZW5hYmxlZC9kaXNhYmxlZCBvbiB0aGUgZmx5IHVzaW5nCiAgYC0tbm8tcmVwbGFjZS1vYmplY3RzYC4gVGhpcyBsZWFkcyB0byBkaWZmaWN1bHRseSBzdG9yaW5nIGJvdGggcG9zc2libGUKICBpbnRlcnByZXRhdGlvbnMgb2YgYSBjb21taXQgaWQsIGVzcGVjaWFsbHkgd2hlbiBjb21wdXRpbmcgZ2VuZXJhdGlvbgogIG51bWJlcnMuIFRoZSBjb21taXQtZ3JhcGggd2lsbCBub3QgYmUgcmVhZCBvciB3cml0dGVuIHdoZW4KICByZXBsYWNlLW9iamVjdHMgb3IgZ3JhZnRzIGFyZSBwcmVzZW50LgoKLSBTaGFsbG93IGNsb25lcyBjcmVhdGUgZ3JhZnRzIG9mIGNvbW1pdHMgYnkgZHJvcHBpbmcgdGhlaXIgcGFyZW50cy4gVGhpcwogIGxlYWRzIHRoZSBjb21taXQtZ3JhcGggdG8gdGhpbmsgdGhvc2UgY29tbWl0cyBoYXZlIGdlbmVyYXRpb24gbnVtYmVyIDEuCiAgSWYgYW5kIHdoZW4gdGhvc2UgY29tbWl0cyBhcmUgbWFkZSB1bnNoYWxsb3csIHRob3NlIGdlbmVyYXRpb24gbnVtYmVycwogIGJlY29tZSBpbnZhbGlkLiBTaW5jZSBzaGFsbG93IGNsb25lcyBhcmUgaW50ZW5kZWQgdG8gcmVzdHJpY3QgdGhlIGNvbW1pdAogIGhpc3RvcnkgdG8gYSB2ZXJ5IHNtYWxsIHNldCBvZiBjb21taXRzLCB0aGUgY29tbWl0LWdyYXBoIGZlYXR1cmUgaXMgbGVzcwogIGhlbHBmdWwgZm9yIHRoZXNlIGNsb25lcywgYW55d2F5LiBUaGUgY29tbWl0LWdyYXBoIHdpbGwgbm90IGJlIHJlYWQgb3IKICB3cml0dGVuIHdoZW4gc2hhbGxvdyBjb21taXRzIGFyZSBwcmVzZW50LgoKRnV0dXJlIFdvcmsKLS0tLS0tLS0tLS0KCi0gQWZ0ZXIgY29tcHV0aW5nIGFuZCBzdG9yaW5nIGdlbmVyYXRpb24gbnVtYmVycywgd2UgbXVzdCBtYWtlIGdyYXBoCiAgd2Fsa3MgYXdhcmUgb2YgZ2VuZXJhdGlvbiBudW1iZXJzIHRvIGdhaW4gdGhlIHBlcmZvcm1hbmNlIGJlbmVmaXRzIHRoZXkKICBlbmFibGUuIFRoaXMgd2lsbCBtb3N0bHkgYmUgYWNjb21wbGlzaGVkIGJ5IHN3YXBwaW5nIGEgY29tbWl0LWRhdGUtb3JkZXJlZAogIHByaW9yaXR5IHF1ZXVlIHdpdGggb25lIG9yZGVyZWQgYnkgZ2VuZXJhdGlvbiBudW1iZXIuIFRoZSBmb2xsb3dpbmcKICBvcGVyYXRpb25zIGFyZSBpbXBvcnRhbnQgY2FuZGlkYXRlczoKCiAgICAtICdsb2cgLS10b3BvLW9yZGVyJwogICAgLSAndGFnIC0tbWVyZ2VkJwoKLSBBIHNlcnZlciBjb3VsZCBwcm92aWRlIGEgY29tbWl0IGdyYXBoIGZpbGUgYXMgcGFydCBvZiB0aGUgbmV0d29yayBwcm90b2NvbAogIHRvIGF2b2lkIGV4dHJhIGNhbGN1bGF0aW9ucyBieSBjbGllbnRzLiBUaGlzIGZlYXR1cmUgaXMgb25seSBvZiBiZW5lZml0IGlmCiAgdGhlIHVzZXIgaXMgd2lsbGluZyB0byB0cnVzdCB0aGUgZmlsZSwgYmVjYXVzZSB2ZXJpZnlpbmcgdGhlIGZpbGUgaXMgY29ycmVjdAogIGlzIGFzIGhhcmQgYXMgY29tcHV0aW5nIGl0IGZyb20gc2NyYXRjaC4KClJlbGF0ZWQgTGlua3MKLS0tLS0tLS0tLS0tLQpbMF0gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2dpdC9pc3N1ZXMvZGV0YWlsP2lkPTgKICAgIENocm9taXVtIHdvcmsgaXRlbSBmb3I6IFNlcmlhbGl6ZWQgQ29tbWl0IEdyYXBoCgpbMV0gaHR0cHM6Ly9wdWJsaWMtaW5ib3gub3JnL2dpdC8yMDExMDcxMzA3MDUxNy5HQzE4NTY2QHNpZ2lsbC5pbnRyYS5wZWZmLm5ldC8KICAgIEFuIGFiYW5kb25lZCBwYXRjaCB0aGF0IGludHJvZHVjZWQgZ2VuZXJhdGlvbiBudW1iZXJzLgoKWzJdIGh0dHBzOi8vcHVibGljLWluYm94Lm9yZy9naXQvMjAxNzA5MDgwMzM0MDMucTdlNmRqN2JlbmFzcmplc0BzaWdpbGwuaW50cmEucGVmZi5uZXQvCiAgICBEaXNjdXNzaW9uIGFib3V0IGdlbmVyYXRpb24gbnVtYmVycyBvbiBjb21taXRzIGFuZCBob3cgdGhleSBpbnRlcmFjdAogICAgd2l0aCBmc2NrLgoKWzNdIGh0dHBzOi8vcHVibGljLWluYm94Lm9yZy9naXQvMjAxNzA5MDgwMzQ3MzkuNG9wM3c0ZjJtYTVzNjVrdUBzaWdpbGwuaW50cmEucGVmZi5uZXQvCiAgICBNb3JlIGRpc2N1c3Npb24gYWJvdXQgZ2VuZXJhdGlvbiBudW1iZXJzIGFuZCBub3Qgc3RvcmluZyB0aGVtIGluc2lkZQogICAgY29tbWl0IG9iamVjdHMuIEEgdmFsdWFibGUgcXVvdGU6CgogICAgIkkgdGhpbmsgd2Ugc2hvdWxkIGJlIG1vdmluZyBtb3JlIGluIHRoZSBkaXJlY3Rpb24gb2Yga2VlcGluZwogICAgIHJlcG8tbG9jYWwgY2FjaGVzIGZvciBvcHRpbWl6YXRpb25zLiBSZWFjaGFiaWxpdHkgYml0bWFwcyBoYXZlIGJlZW4KICAgICBhIGJpZyBwZXJmb3JtYW5jZSB3aW4uIEkgdGhpbmsgd2Ugc2hvdWxkIGJlIGRvaW5nIHRoZSBzYW1lIHdpdGggb3VyCiAgICAgcHJvcGVydGllcyBvZiBjb21taXRzLiBOb3QganVzdCBnZW5lcmF0aW9uIG51bWJlcnMsIGJ1dCBtYWtpbmcgaXQKICAgICBjaGVhcCB0byBhY2Nlc3MgdGhlIGdyYXBoIHN0cnVjdHVyZSB3aXRob3V0IHpsaWItaW5mbGF0aW5nIHdob2xlCiAgICAgY29tbWl0IG9iamVjdHMgKGkuZS4sIHBhY2t2NCBvciBzb21ldGhpbmcgbGlrZSB0aGUgIm1ldGFwYWNrcyIgSQogICAgIHByb3Bvc2VkIGEgZmV3IHllYXJzIGFnbykuIgoKWzRdIGh0dHBzOi8vcHVibGljLWluYm94Lm9yZy9naXQvMjAxODAxMDgxNTQ4MjIuNTQ4MjktMS1naXRAamVmZmhvc3RldGxlci5jb20vVC8jdQogICAgQSBwYXRjaCB0byByZW1vdmUgdGhlIGFoZWFkLWJlaGluZCBjYWxjdWxhdGlvbiBmcm9tICdzdGF0dXMnLgo=",
    "text": "Git Commit Graph Design Notes\n=============================\n\nGit walks the commit graph for many reasons, including:\n\n1. Listing and filtering commit history.\n2. Computing merge bases.\n\nThese operations can become slow as the commit count grows. The merge\nbase calculation shows up in many user-facing commands, such as 'merge-base'\nor 'status' and can take minutes to compute depending on history shape.\n\nThere are two main costs here:\n\n1. Decompressing and parsing commits.\n2. Walking the entire graph to satisfy topological order constraints.\n\nThe commit graph file is a supplemental data structure that accelerates\ncommit graph walks. If a user downgrades or disables the 'core.commitGraph'\nconfig setting, then the existing ODB is sufficient. The file is stored\nas \"commit-graph\" either in the .git/objects/info directory or in the info\ndirectory of an alternate.\n\nThe commit graph file stores the commit graph structure along with some\nextra metadata to speed up graph walks. By listing commit OIDs in lexi-\ncographic order, we can identify an integer position for each commit and\nrefer to the parents of a commit using those integer positions. We use\nbinary search to find initial commits and then use the integer positions\nfor fast lookups during the walk.\n\nA consumer may load the following info for a commit from the graph:\n\n1. The commit OID.\n2. The list of parents, along with their integer position.\n3. The commit date.\n4. The root tree OID.\n5. The generation number (see definition below).\n\nValues 1-4 satisfy the requirements of parse_commit_gently().\n\nDefine the \"generation number\" of a commit recursively as follows:\n\n * A commit with no parents (a root commit) has generation number one.\n\n * A commit with at least one parent has generation number one more than\n   the largest generation number among its parents.\n\nEquivalently, the generation number of a commit A is one more than the\nlength of a longest path from A to a root commit. The recursive definition\nis easier to use for computation and observing the following property:\n\n    If A and B are commits with generation numbers N and M, respectively,\n    and N <= M, then A cannot reach B. That is, we know without searching\n    that B is not an ancestor of A because it is further from a root commit\n    than A.\n\n    Conversely, when checking if A is an ancestor of B, then we only need\n    to walk commits until all commits on the walk boundary have generation\n    number at most N. If we walk commits using a priority queue seeded by\n    generation numbers, then we always expand the boundary commit with highest\n    generation number and can easily detect the stopping condition.\n\nThis property can be used to significantly reduce the time it takes to\nwalk commits and determine topological relationships. Without generation\nnumbers, the general heuristic is the following:\n\n    If A and B are commits with commit time X and Y, respectively, and\n    X < Y, then A _probably_ cannot reach B.\n\nThis heuristic is currently used whenever the computation is allowed to\nviolate topological relationships due to clock skew (such as \"git log\"\nwith default order), but is not used when the topological order is\nrequired (such as merge base calculations, \"git log --graph\").\n\nIn practice, we expect some commits to be created recently and not stored\nin the commit graph. We can treat these commits as having \"infinite\"\ngeneration number and walk until reaching commits with known generation\nnumber.\n\nWe use the macro GENERATION_NUMBER_INFINITY = 0xFFFFFFFF to mark commits not\nin the commit-graph file. If a commit-graph file was written by a version\nof Git that did not compute generation numbers, then those commits will\nhave generation number represented by the macro GENERATION_NUMBER_ZERO = 0.\n\nSince the commit-graph file is closed under reachability, we can guarantee\nthe following weaker condition on all commits:\n\n    If A and B are commits with generation numbers N amd M, respectively,\n    and N < M, then A cannot reach B.\n\nNote how the strict inequality differs from the inequality when we have\nfully-computed generation numbers. Using strict inequality may result in\nwalking a few extra commits, but the simplicity in dealing with commits\nwith generation number *_INFINITY or *_ZERO is valuable.\n\nWe use the macro GENERATION_NUMBER_MAX = 0x3FFFFFFF to for commits whose\ngeneration numbers are computed to be at least this value. We limit at\nthis value since it is the largest value that can be stored in the\ncommit-graph file using the 30 bits available to generation numbers. This\npresents another case where a commit can have generation number equal to\nthat of a parent.\n\nDesign Details\n--------------\n\n- The commit graph file is stored in a file named 'commit-graph' in the\n  .git/objects/info directory. This could be stored in the info directory\n  of an alternate.\n\n- The core.commitGraph config setting must be on to consume graph files.\n\n- The file format includes parameters for the object ID hash function,\n  so a future change of hash algorithm does not require a change in format.\n\n- Commit grafts and replace objects can change the shape of the commit\n  history. The latter can also be enabled/disabled on the fly using\n  `--no-replace-objects`. This leads to difficultly storing both possible\n  interpretations of a commit id, especially when computing generation\n  numbers. The commit-graph will not be read or written when\n  replace-objects or grafts are present.\n\n- Shallow clones create grafts of commits by dropping their parents. This\n  leads the commit-graph to think those commits have generation number 1.\n  If and when those commits are made unshallow, those generation numbers\n  become invalid. Since shallow clones are intended to restrict the commit\n  history to a very small set of commits, the commit-graph feature is less\n  helpful for these clones, anyway. The commit-graph will not be read or\n  written when shallow commits are present.\n\nFuture Work\n-----------\n\n- After computing and storing generation numbers, we must make graph\n  walks aware of generation numbers to gain the performance benefits they\n  enable. This will mostly be accomplished by swapping a commit-date-ordered\n  priority queue with one ordered by generation number. The following\n  operations are important candidates:\n\n    - 'log --topo-order'\n    - 'tag --merged'\n\n- A server could provide a commit graph file as part of the network protocol\n  to avoid extra calculations by clients. This feature is only of benefit if\n  the user is willing to trust the file, because verifying the file is correct\n  is as hard as computing it from scratch.\n\nRelated Links\n-------------\n[0] https://bugs.chromium.org/p/git/issues/detail?id=8\n    Chromium work item for: Serialized Commit Graph\n\n[1] https://public-inbox.org/git/20110713070517.GC18566@sigill.intra.peff.net/\n    An abandoned patch that introduced generation numbers.\n\n[2] https://public-inbox.org/git/20170908033403.q7e6dj7benasrjes@sigill.intra.peff.net/\n    Discussion about generation numbers on commits and how they interact\n    with fsck.\n\n[3] https://public-inbox.org/git/20170908034739.4op3w4f2ma5s65ku@sigill.intra.peff.net/\n    More discussion about generation numbers and not storing them inside\n    commit objects. A valuable quote:\n\n    \"I think we should be moving more in the direction of keeping\n     repo-local caches for optimizations. Reachability bitmaps have been\n     a big performance win. I think we should be doing the same with our\n     properties of commits. Not just generation numbers, but making it\n     cheap to access the graph structure without zlib-inflating whole\n     commit objects (i.e., packv4 or something like the \"metapacks\" I\n     proposed a few years ago).\"\n\n[4] https://public-inbox.org/git/20180108154822.54829-1-git@jeffhostetler.com/T/#u\n    A patch to remove the ahead-behind calculation from 'status'.\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "001395e95071ec50d2fef65ead09cf5c49558a6a",
  "sha1_ok": true,
  "size": 7889
}
