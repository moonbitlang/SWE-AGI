{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSd0ZXN0IGxvZyAtTCcKLiAuL3Rlc3QtbGliLnNoCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCAoaW1wb3J0IGhpc3RvcnkpJyAnCglnaXQgZmFzdC1pbXBvcnQgPCAiJFRFU1RfRElSRUNUT1JZIi90NDIxMS9oaXN0b3J5LmV4cG9ydCAmJgoJZ2l0IHJlc2V0IC0taGFyZAonCgpjYW5uZWRfdGVzdF8xICgpIHsKCXRlc3RfZXhwZWN0XyQxICIkMiIgIgoJCWdpdCBsb2cgJDIgPmFjdHVhbCAmJgoJCXRlc3RfY21wIFwiXCRURVNUX0RJUkVDVE9SWVwiL3Q0MjExL2V4cGVjdC4kMyBhY3R1YWwKCSIKfQoKY2FubmVkX3Rlc3QgKCkgewoJY2FubmVkX3Rlc3RfMSBzdWNjZXNzICIkQCIKfQpjYW5uZWRfdGVzdF9mYWlsdXJlICgpIHsKCWNhbm5lZF90ZXN0XzEgZmFpbHVyZSAiJEAiCn0KCnRlc3RfYmFkX29wdHMgKCkgewoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiaW52YWxpZCBhcmdzOiAkMSIgIgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBsb2cgJDEgMj5lcnJvcnMgJiYKCQlncmVwICckMicgZXJyb3JzCgkiCn0KCmNhbm5lZF90ZXN0ICItTCA0LDEyOmEuYyBzaW1wbGUiIHNpbXBsZS1mCmNhbm5lZF90ZXN0ICItTCA0LCs5OmEuYyBzaW1wbGUiIHNpbXBsZS1mCmNhbm5lZF90ZXN0ICItTCAnL2xvbmcgZi8sL159LzphLmMnIHNpbXBsZSIgc2ltcGxlLWYKY2FubmVkX3Rlc3QgIi1MIDpmOmEuYyBzaW1wbGUiIHNpbXBsZS1mLXRvLW1haW4KCmNhbm5lZF90ZXN0ICItTCAnL21haW4vLC9efS86YS5jJyBzaW1wbGUiIHNpbXBsZS1tYWluCmNhbm5lZF90ZXN0ICItTCA6bWFpbjphLmMgc2ltcGxlIiBzaW1wbGUtbWFpbi10by1lbmQKCmNhbm5lZF90ZXN0ICItTCAxLCs0OmEuYyBzaW1wbGUiIGJlZ2lubmluZy1vZi1maWxlCgpjYW5uZWRfdGVzdCAiLUwgMjA6YS5jIHNpbXBsZSIgZW5kLW9mLWZpbGUKCmNhbm5lZF90ZXN0ICItTCAnL2xvbmcgZi8nLC9efS86YS5jIC1MIC9tYWluLywvXn0vOmEuYyBzaW1wbGUiIHR3by1yYW5nZXMKY2FubmVkX3Rlc3QgIi1MIDI0LCsxOmEuYyBzaW1wbGUiIHZhbmlzaGVzLWVhcmx5CgpjYW5uZWRfdGVzdCAiLU0gLUwgJy9sb25nIGYvLC9efS86Yi5jJyBtb3ZlLXN1cHBvcnQiIG1vdmUtc3VwcG9ydC1mCmNhbm5lZF90ZXN0ICItTSAtTCAnOmY6Yi5jJyBwYXJhbGxlbC1jaGFuZ2UiIHBhcmFsbGVsLWNoYW5nZS1mLXRvLW1haW4KCmNhbm5lZF90ZXN0ICItTCA0LDEyOmEuYyAtTCA6bWFpbjphLmMgc2ltcGxlIiBtdWx0aXBsZQpjYW5uZWRfdGVzdCAiLUwgNCwxODphLmMgLUwgOm1haW46YS5jIHNpbXBsZSIgbXVsdGlwbGUtb3ZlcmxhcHBpbmcKY2FubmVkX3Rlc3QgIi1MIDptYWluOmEuYyAtTCA0LDE4OmEuYyBzaW1wbGUiIG11bHRpcGxlLW92ZXJsYXBwaW5nCmNhbm5lZF90ZXN0ICItTCA0OmEuYyAtTCA4LDEyOmEuYyBzaW1wbGUiIG11bHRpcGxlLXN1cGVyc2V0CmNhbm5lZF90ZXN0ICItTCA4LDEyOmEuYyAtTCA0OmEuYyBzaW1wbGUiIG11bHRpcGxlLXN1cGVyc2V0Cgp0ZXN0X2JhZF9vcHRzICItTCIgInN3aXRjaC4qcmVxdWlyZXMgYSB2YWx1ZSIKdGVzdF9iYWRfb3B0cyAiLUwgYi5jIiAiYXJndW1lbnQuKm5vdCBvZiB0aGUgZm9ybSIKdGVzdF9iYWRfb3B0cyAiLUwgMToiICJhcmd1bWVudC4qbm90IG9mIHRoZSBmb3JtIgp0ZXN0X2JhZF9vcHRzICItTCAxOm5vbmV4aXN0ZW50IiAiVGhlcmUgaXMgbm8gcGF0aCIKdGVzdF9iYWRfb3B0cyAiLUwgMTpzaW1wbGUiICJUaGVyZSBpcyBubyBwYXRoIgp0ZXN0X2JhZF9vcHRzICItTCAnL2ZvbzpiLmMnIiAiYXJndW1lbnQuKm5vdCBvZiB0aGUgZm9ybSIKdGVzdF9iYWRfb3B0cyAiLUwgMTAwMDpiLmMiICJoYXMgb25seS4qbGluZXMiCnRlc3RfYmFkX29wdHMgIi1MIDEsMTAwMDpiLmMiICJoYXMgb25seS4qbGluZXMiCnRlc3RfYmFkX29wdHMgIi1MIDpiLmMiICJhcmd1bWVudC4qbm90IG9mIHRoZSBmb3JtIgp0ZXN0X2JhZF9vcHRzICItTCA6Zm9vOmIuYyIgIm5vIG1hdGNoIgoKIyBUaGVyZSBpcyBhIHNlcGFyYXRlIGJ1ZyB3aGVuIGFuIGVtcHR5IC1MIHJhbmdlIGlzIHRoZSBmaXJzdCAtTCBlbmNvdW50ZXJlZCwKIyB0aHVzIHRvIGRlbW9uc3RyYXRlIHRoaXMgcGFydGljdWxhciBidWcsIHRoZSBlbXB0eSAtTCByYW5nZSBtdXN0IGZvbGxvdyBhCiMgbm9uLWVtcHR5IC1MIHJhbmdlLgp0ZXN0X2V4cGVjdF9zdWNjZXNzICctTCB7ZW1wdHktcmFuZ2V9IChhbnkgLUwpJyAnCgluPSQoZXhwciAkKGNhdCBiLmMgfCB3YyAtbCkgKyAxKSAmJgoJbj0kKGV4cHIgJCh3YyAtbCA8Yi5jKSArIDEpICYmCglnaXQgbG9nIC1MMSwxOmIuYyAtTCRuOmIuYwonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICctTCB7ZW1wdHktcmFuZ2V9IChmaXJzdCAtTCknICcKCW49JChleHByICQod2MgLWwgPGIuYykgKyAxKSAmJgoJZ2l0IGxvZyAtTCRuOmIuYwonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n\ntest_description='test log -L'\n. ./test-lib.sh\n\ntest_expect_success 'setup (import history)' '\n\tgit fast-import < \"$TEST_DIRECTORY\"/t4211/history.export &&\n\tgit reset --hard\n'\n\ncanned_test_1 () {\n\ttest_expect_$1 \"$2\" \"\n\t\tgit log $2 >actual &&\n\t\ttest_cmp \\\"\\$TEST_DIRECTORY\\\"/t4211/expect.$3 actual\n\t\"\n}\n\ncanned_test () {\n\tcanned_test_1 success \"$@\"\n}\ncanned_test_failure () {\n\tcanned_test_1 failure \"$@\"\n}\n\ntest_bad_opts () {\n\ttest_expect_success \"invalid args: $1\" \"\n\t\ttest_must_fail git log $1 2>errors &&\n\t\tgrep '$2' errors\n\t\"\n}\n\ncanned_test \"-L 4,12:a.c simple\" simple-f\ncanned_test \"-L 4,+9:a.c simple\" simple-f\ncanned_test \"-L '/long f/,/^}/:a.c' simple\" simple-f\ncanned_test \"-L :f:a.c simple\" simple-f-to-main\n\ncanned_test \"-L '/main/,/^}/:a.c' simple\" simple-main\ncanned_test \"-L :main:a.c simple\" simple-main-to-end\n\ncanned_test \"-L 1,+4:a.c simple\" beginning-of-file\n\ncanned_test \"-L 20:a.c simple\" end-of-file\n\ncanned_test \"-L '/long f/',/^}/:a.c -L /main/,/^}/:a.c simple\" two-ranges\ncanned_test \"-L 24,+1:a.c simple\" vanishes-early\n\ncanned_test \"-M -L '/long f/,/^}/:b.c' move-support\" move-support-f\ncanned_test \"-M -L ':f:b.c' parallel-change\" parallel-change-f-to-main\n\ncanned_test \"-L 4,12:a.c -L :main:a.c simple\" multiple\ncanned_test \"-L 4,18:a.c -L :main:a.c simple\" multiple-overlapping\ncanned_test \"-L :main:a.c -L 4,18:a.c simple\" multiple-overlapping\ncanned_test \"-L 4:a.c -L 8,12:a.c simple\" multiple-superset\ncanned_test \"-L 8,12:a.c -L 4:a.c simple\" multiple-superset\n\ntest_bad_opts \"-L\" \"switch.*requires a value\"\ntest_bad_opts \"-L b.c\" \"argument.*not of the form\"\ntest_bad_opts \"-L 1:\" \"argument.*not of the form\"\ntest_bad_opts \"-L 1:nonexistent\" \"There is no path\"\ntest_bad_opts \"-L 1:simple\" \"There is no path\"\ntest_bad_opts \"-L '/foo:b.c'\" \"argument.*not of the form\"\ntest_bad_opts \"-L 1000:b.c\" \"has only.*lines\"\ntest_bad_opts \"-L 1,1000:b.c\" \"has only.*lines\"\ntest_bad_opts \"-L :b.c\" \"argument.*not of the form\"\ntest_bad_opts \"-L :foo:b.c\" \"no match\"\n\n# There is a separate bug when an empty -L range is the first -L encountered,\n# thus to demonstrate this particular bug, the empty -L range must follow a\n# non-empty -L range.\ntest_expect_success '-L {empty-range} (any -L)' '\n\tn=$(expr $(cat b.c | wc -l) + 1) &&\n\tn=$(expr $(wc -l <b.c) + 1) &&\n\tgit log -L1,1:b.c -L$n:b.c\n'\n\ntest_expect_success '-L {empty-range} (first -L)' '\n\tn=$(expr $(wc -l <b.c) + 1) &&\n\tgit log -L$n:b.c\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00a850d61166aae6caaa61385b826cba73519b90",
  "sha1_ok": true,
  "size": 2439
}
