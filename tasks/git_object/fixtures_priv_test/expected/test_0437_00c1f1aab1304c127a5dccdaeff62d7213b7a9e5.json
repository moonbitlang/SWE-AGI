{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDcgTGFycyBIamVtbGkKIwoKdGVzdF9kZXNjcmlwdGlvbj0nQmFzaWMgcG9yY2VsYWluIHN1cHBvcnQgZm9yIHN1Ym1vZHVsZXMKClRoaXMgdGVzdCB0cmllcyB0byB2ZXJpZnkgYmFzaWMgc2FuaXR5IG9mIHRoZSBpbml0LCB1cGRhdGUgYW5kIHN0YXR1cwpzdWJjb21tYW5kcyBvZiBnaXQgc3VibW9kdWxlLgonCgpHSVRfVEVTVF9ERUZBVUxUX0lOSVRJQUxfQlJBTkNIX05BTUU9bWFpbgpleHBvcnQgR0lUX1RFU1RfREVGQVVMVF9JTklUSUFMX0JSQU5DSF9OQU1FCgouIC4vdGVzdC1saWIuc2gKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwIC0gZW5hYmxlIGxvY2FsIHN1Ym1vZHVsZXMnICcKCWdpdCBjb25maWcgLS1nbG9iYWwgcHJvdG9jb2wuZmlsZS5hbGxvdyBhbHdheXMKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIHVzYWdlOiAtaCcgJwoJZ2l0IHN1Ym1vZHVsZSAtaCA+b3V0IDI+ZXJyICYmCglncmVwICJedXNhZ2U6IGdpdCBzdWJtb2R1bGUiIG91dCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IGVycgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgdXNhZ2U6IC0tcmVjdXJzaXZlJyAnCgl0ZXN0X2V4cGVjdF9jb2RlIDEgZ2l0IHN1Ym1vZHVsZSAtLXJlY3Vyc2l2ZSA+b3V0IDI+ZXJyICYmCglncmVwICJedXNhZ2U6IGdpdCBzdWJtb2R1bGUiIGVyciAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IG91dAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgdXNhZ2U6IHN0YXR1cyAtLScgJwoJdGVzdF9leHBlY3RfY29kZSAxIGdpdCBzdWJtb2R1bGUgLS0gJiYKCXRlc3RfZXhwZWN0X2NvZGUgMSBnaXQgc3VibW9kdWxlIC0tZW5kLW9mLW9wdGlvbnMKJwoKZm9yIG9wdCBpbiAnLS1xdWlldCcgJy0tY2FjaGVkJwpkbwoJdGVzdF9leHBlY3Rfc3VjY2VzcyAic3VibW9kdWxlIHVzYWdlOiBzdGF0dXMgJG9wdCIgJwoJCWdpdCBzdWJtb2R1bGUgJG9wdCAmJgoJCWdpdCBzdWJtb2R1bGUgc3RhdHVzICRvcHQgJiYKCQlnaXQgc3VibW9kdWxlICRvcHQgc3RhdHVzCgknCmRvbmUKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgd29ya3Mgb24gZW1wdHkgcmVwb3NpdG9yeScgJwoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLS1hbGwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgLSBpbml0aWFsIGNvbW1pdCcgJwoJPnQgJiYKCWdpdCBhZGQgdCAmJgoJZ2l0IGNvbW1pdCAtbSAiaW5pdGlhbCBjb21taXQiICYmCglnaXQgYnJhbmNoIGluaXRpYWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGluaXQgYWJvcnRzIG9uIG1pc3NpbmcgLmdpdG1vZHVsZXMgZmlsZScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJnaXQgdXBkYXRlLWluZGV4IC0tcmVtb3ZlIHN1YiIgJiYKCWdpdCB1cGRhdGUtaW5kZXggLS1hZGQgLS1jYWNoZWluZm8gMTYwMDAwLCQoZ2l0IHJldi1wYXJzZSBIRUFEKSxzdWIgJiYKCSMgbWlzc2luZyB0aGUgLmdpdG1vZHVsZXMgZmlsZSBoZXJlCgl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIGluaXQgMj5hY3R1YWwgJiYKCXRlc3RfZ3JlcCAiTm8gdXJsIGZvdW5kIGZvciBzdWJtb2R1bGUgcGF0aCIgYWN0dWFsCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSB1cGRhdGUgYWJvcnRzIG9uIG1pc3NpbmcgLmdpdG1vZHVsZXMgZmlsZScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJnaXQgdXBkYXRlLWluZGV4IC0tcmVtb3ZlIHN1YiIgJiYKCWdpdCB1cGRhdGUtaW5kZXggLS1hZGQgLS1jYWNoZWluZm8gMTYwMDAwLCQoZ2l0IHJldi1wYXJzZSBIRUFEKSxzdWIgJiYKCSMgbWlzc2luZyB0aGUgLmdpdG1vZHVsZXMgZmlsZSBoZXJlCglnaXQgc3VibW9kdWxlIHVwZGF0ZSBzdWIgMj5hY3R1YWwgJiYKCXRlc3RfZ3JlcCAiU3VibW9kdWxlIHBhdGggLnN1Yi4gbm90IGluaXRpYWxpemVkIiBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIHVwZGF0ZSBhYm9ydHMgb24gbWlzc2luZyBnaXRtb2R1bGVzIHVybCcgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJnaXQgdXBkYXRlLWluZGV4IC0tcmVtb3ZlIHN1YiIgJiYKCWdpdCB1cGRhdGUtaW5kZXggLS1hZGQgLS1jYWNoZWluZm8gMTYwMDAwLCQoZ2l0IHJldi1wYXJzZSBIRUFEKSxzdWIgJiYKCXRlc3Rfd2hlbl9maW5pc2hlZCAicm0gLWYgLmdpdG1vZHVsZXMiICYmCglnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS5zLnBhdGggc3ViICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIGluaXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWRkIGFib3J0cyBvbiByZXBvc2l0b3J5IHdpdGggbm8gY29tbWl0cycgJwoJY2F0ID5leHBlY3QgPDwtXEVPRiAmJgoJZmF0YWw6ICciJ3JlcG8tbm8tY29tbWl0cyciJyBkb2VzIG5vdCBoYXZlIGEgY29tbWl0IGNoZWNrZWQgb3V0CglFT0YKCWdpdCBpbml0IHJlcG8tbm8tY29tbWl0cyAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSBhZGQgLi4vYSAuL3JlcG8tbm8tY29tbWl0cyAyPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdGF0dXMgc2hvdWxkIGlnbm9yZSBpbm5lciBnaXQgcmVwbyB3aGVuIG5vdCBhZGRlZCcgJwoJcm0gLWZyIGlubmVyICYmCglta2RpciBpbm5lciAmJgoJKAoJCWNkIGlubmVyICYmCgkJZ2l0IGluaXQgJiYKCQk+dCAmJgoJCWdpdCBhZGQgdCAmJgoJCWdpdCBjb21taXQgLW0gImluaXRpYWwiCgkpICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIHN0YXR1cyBpbm5lciAyPm91dHB1dC5lcnIgJiYKCXJtIC1mciBpbm5lciAmJgoJdGVzdF9ncmVwICJeZXJyb3I6IC4qZGlkIG5vdCBtYXRjaCBhbnkgZmlsZShzKSBrbm93biB0byBnaXQiIG91dHB1dC5lcnIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgLSByZXBvc2l0b3J5IGluIGluaXQgc3ViZGlyZWN0b3J5JyAnCglta2RpciBpbml0ICYmCgkoCgkJY2QgaW5pdCAmJgoJCWdpdCBpbml0ICYmCgkJZWNobyBhID5hICYmCgkJZ2l0IGFkZCBhICYmCgkJZ2l0IGNvbW1pdCAtbSAic3VibW9kdWxlIGNvbW1pdCAxIiAmJgoJCWdpdCB0YWcgLWEgLW0gInJldi0xIiByZXYtMQoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCAtIGNvbW1pdCB3aXRoIGdpdGxpbmsnICcKCWVjaG8gYSA+YSAmJgoJZWNobyB6ID56ICYmCglnaXQgYWRkIGEgaW5pdCB6ICYmCglnaXQgY29tbWl0IC1tICJzdXBlciBjb21taXQgMSIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgLSBoaWRlIGluaXQgc3ViZGlyZWN0b3J5JyAnCgltdiBpbml0IC5zdWJyZXBvCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwIC0gcmVwb3NpdG9yeSB0byBhZGQgc3VibW9kdWxlcyB0bycgJwoJZ2l0IGluaXQgYWRkdGVzdCAmJgoJZ2l0IGluaXQgYWRkdGVzdC1pZ25vcmUKJwoKIyBUaGUgJ3N1Ym1vZHVsZSBhZGQnIHRlc3RzIG5lZWQgc29tZSByZXBvc2l0b3J5IHRvIGFkZCBhcyBhIHN1Ym1vZHVsZS4KIyBUaGUgdHJhc2ggZGlyZWN0b3J5IGlzIGEgZ29vZCBvbmUgYXMgYW55LiBXZSBuZWVkIHRvIGNhbm9uaWNhbGl6ZQojIHRoZSBuYW1lLCB0aG91Z2gsIGFzIHNvbWUgdGVzdHMgY29tcGFyZSBpdCB0byB0aGUgYWJzb2x1dGUgcGF0aCBnaXQKIyBnZW5lcmF0ZXMsIHdoaWNoIHdpbGwgZXhwYW5kIHN5bWJvbGljIGxpbmtzLgpzdWJtb2R1cmw9JChwd2QgLVApCgpsaXN0YnJhbmNoZXMoKSB7CglnaXQgZm9yLWVhY2gtcmVmIC0tZm9ybWF0PSclKHJlZm5hbWUpJyAncmVmcy9oZWFkcy8qJwp9CgppbnNwZWN0KCkgewoJZGlyPSQxICYmCglkb3Rkb3Q9IiR7MjotLi59IiAmJgoKCSgKCQljZCAiJGRpciIgJiYKCQlsaXN0YnJhbmNoZXMgPiIkZG90ZG90L2hlYWRzIiAmJgoJCXsgZ2l0IHN5bWJvbGljLXJlZiBIRUFEIHx8IDo7IH0gPiIkZG90ZG90L2hlYWQiICYmCgkJZ2l0IHJldi1wYXJzZSBIRUFEID4iJGRvdGRvdC9oZWFkLXNoYTEiICYmCgkJZ2l0IHVwZGF0ZS1pbmRleCAtLXJlZnJlc2ggJiYKCQlnaXQgZGlmZi1maWxlcyAtLWV4aXQtY29kZSAmJgoJCWdpdCBjbGVhbiAtbiAtZCAteCA+IiRkb3Rkb3QvdW50cmFja2VkIgoJKQp9Cgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkJyAnCgllY2hvICJyZWZzL2hlYWRzL21haW4iID5leHBlY3QgJiYKCgkoCgkJY2QgYWRkdGVzdCAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC1xICIkc3VibW9kdXJsIiBzdWJtb2QgPmFjdHVhbCAmJgoJCXRlc3RfbXVzdF9iZV9lbXB0eSBhY3R1YWwgJiYKCQllY2hvICJnaXRkaXI6IC4uLy5naXQvbW9kdWxlcy9zdWJtb2QiID5leHBlY3QgJiYKCQl0ZXN0X2NtcCBleHBlY3Qgc3VibW9kLy5naXQgJiYKCQkoCgkJCWNkIHN1Ym1vZCAmJgoJCQlnaXQgY29uZmlnIGNvcmUud29ya3RyZWUgPmFjdHVhbCAmJgoJCQllY2hvICIuLi8uLi8uLi9zdWJtb2QiID5leHBlY3QgJiYKCQkJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbCAmJgoJCQlybSAtZiBhY3R1YWwgZXhwZWN0CgkJKSAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdAoJKSAmJgoKCXJtIC1mIGhlYWRzIGhlYWQgdW50cmFja2VkICYmCglpbnNwZWN0IGFkZHRlc3Qvc3VibW9kIC4uLy4uICYmCgl0ZXN0X2NtcCBleHBlY3QgaGVhZHMgJiYKCXRlc3RfY21wIGV4cGVjdCBoZWFkICYmCgl0ZXN0X211c3RfYmVfZW1wdHkgdW50cmFja2VkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgIVdJTkRPV1MgJ3N1Ym1vZHVsZSBhZGQgKGFic29sdXRlIHBhdGgpJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgImdpdCByZXNldCAtLWhhcmQiICYmCglnaXQgc3VibW9kdWxlIGFkZCAiJHN1Ym1vZHVybCIgIiRzdWJtb2R1cmwvYWRkLWFicyIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgcGFyZW50IGFuZCBvbmUgcmVwb3NpdG9yeScgJwoJdGVzdF9jcmVhdGVfcmVwbyBwYXJlbnQgJiYKCXRlc3RfY29tbWl0IC1DIHBhcmVudCBvbmUKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncmVkaXJlY3RlZCBzdWJtb2R1bGUgYWRkIGRvZXMgbm90IHNob3cgcHJvZ3Jlc3MnICcKCWdpdCAtQyBhZGR0ZXN0IHN1Ym1vZHVsZSBhZGQgImZpbGU6Ly8kc3VibW9kdXJsL3BhcmVudCIgc3VibW9kLXJlZGlyZWN0ZWQgXAoJCTI+ZXJyICYmCgkhIGdyZXAgJSBlcnIgJiYKCXRlc3RfZ3JlcCAhICJDaGVja2luZyBjb25uZWN0aXZpdHkiIGVycgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdyZWRpcmVjdGVkIHN1Ym1vZHVsZSBhZGQgLS1wcm9ncmVzcyBkb2VzIHNob3cgcHJvZ3Jlc3MnICcKCWdpdCAtQyBhZGR0ZXN0IHN1Ym1vZHVsZSBhZGQgLS1wcm9ncmVzcyAiZmlsZTovLyRzdWJtb2R1cmwvcGFyZW50IiBcCgkJc3VibW9kLXJlZGlyZWN0ZWQtcHJvZ3Jlc3MgMj5lcnIgJiYgXAoJZ3JlcCAlIGVycgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIHRvIC5naXRpZ25vcmVkIHBhdGggZmFpbHMnICcKCSgKCQljZCBhZGR0ZXN0LWlnbm9yZSAmJgoJCWNhdCA8PC1cRU9GID5leHBlY3QgJiYKCQlUaGUgZm9sbG93aW5nIHBhdGhzIGFyZSBpZ25vcmVkIGJ5IG9uZSBvZiB5b3VyIC5naXRpZ25vcmUgZmlsZXM6CgkJc3VibW9kCgkJaGludDogVXNlIC1mIGlmIHlvdSByZWFsbHkgd2FudCB0byBhZGQgdGhlbS4KCQloaW50OiBUdXJuIHRoaXMgbWVzc2FnZSBvZmYgYnkgcnVubmluZwoJCWhpbnQ6ICJnaXQgY29uZmlnIGFkdmljZS5hZGRJZ25vcmVkRmlsZSBmYWxzZSIKCQlFT0YKCQkjIERvZXMgbm90IHVzZSB0ZXN0X2NvbW1pdCBkdWUgdG8gdGhlIGlnbm9yZQoJCWVjaG8gIioiID4gLmdpdGlnbm9yZSAmJgoJCWdpdCBhZGQgLS1mb3JjZSAuZ2l0aWdub3JlICYmCgkJZ2l0IGNvbW1pdCAtbSJJZ25vcmUgZXZlcnl0aGluZyIgJiYKCQkhIGdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiBzdWJtb2QgPmFjdHVhbCAyPiYxICYmCgkJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIHRvIC5naXRpZ25vcmVkIHBhdGggd2l0aCAtLWZvcmNlJyAnCgkoCgkJY2QgYWRkdGVzdC1pZ25vcmUgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAtLWZvcmNlICIkc3VibW9kdXJsIiBzdWJtb2QKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGFkZCB0byBwYXRoIHdpdGggdHJhY2tlZCBjb250ZW50IGZhaWxzJyAnCgkoCgkJY2QgYWRkdGVzdCAmJgoJCWVjaG8gImZhdGFsOiAnXCcnZGlyLXRyYWNrZWQnXCcnIGFscmVhZHkgZXhpc3RzIGluIHRoZSBpbmRleCIgPmV4cGVjdCAmJgoJCW1rZGlyIGRpci10cmFja2VkICYmCgkJdGVzdF9jb21taXQgZm9vIGRpci10cmFja2VkL2JhciAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiBkaXItdHJhY2tlZCA+YWN0dWFsIDI+JjEgJiYKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBhZGQgdG8gcmVjb25maWd1cmUgZXhpc3Rpbmcgc3VibW9kdWxlIHdpdGggLS1mb3JjZScgJwoJKAoJCWNkIGFkZHRlc3QtaWdub3JlICYmCgkJYm9ndXNfdXJsPSIkKHB3ZCkvYm9ndXMtdXJsIiAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC0tZm9yY2UgIiRib2d1c191cmwiIHN1Ym1vZCAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC0tZm9yY2UgLWIgaW5pdGlhbCAiJHN1Ym1vZHVybCIgc3VibW9kLWJyYW5jaCAmJgoJCXRlc3QgIiRib2d1c191cmwiID0gIiQoZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUuc3VibW9kLnVybCkiICYmCgkJdGVzdCAiJGJvZ3VzX3VybCIgPSAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWJtb2QudXJsKSIgJiYKCQkjIFJlc3RvcmUgdGhlIHVybAoJCWdpdCBzdWJtb2R1bGUgYWRkIC0tZm9yY2UgIiRzdWJtb2R1cmwiIHN1Ym1vZCAmJgoJCXRlc3QgIiRzdWJtb2R1cmwiID0gIiQoZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUuc3VibW9kLnVybCkiICYmCgkJdGVzdCAiJHN1Ym1vZHVybCIgPSAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWJtb2QudXJsKSIKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGFkZCByZWxheXMgYWRkIC0tZHJ5LXJ1biBzdGRlcnInICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicm0gLXJmIGFkZHRlc3QvLmdpdC9pbmRleC5sb2NrIiAmJgoJKAoJCWNkIGFkZHRlc3QgJiYKCQk6ID4uZ2l0L2luZGV4LmxvY2sgJiYKCQkhIGdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiBzdWItd2hpbGUtbG9ja2VkIDI+b3V0cHV0LmVyciAmJgoJCXRlc3RfZ3JlcCAiXmZhdGFsOiAuKmluZGV4XC5sb2NrIiBvdXRwdXQuZXJyICYmCgkJdGVzdF9wYXRoX2lzX21pc3Npbmcgc3ViLXdoaWxlLWxvY2tlZAoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIC0tYnJhbmNoJyAnCgllY2hvICJyZWZzL2hlYWRzL2luaXRpYWwiID5leHBlY3QtaGVhZCAmJgoJY2F0IDw8LVxFT0YgPmV4cGVjdC1oZWFkcyAmJgoJcmVmcy9oZWFkcy9pbml0aWFsCglyZWZzL2hlYWRzL21haW4KCUVPRgoKCSgKCQljZCBhZGR0ZXN0ICYmCgkJZ2l0IHN1Ym1vZHVsZSBhZGQgLWIgaW5pdGlhbCAiJHN1Ym1vZHVybCIgc3VibW9kLWJyYW5jaCAmJgoJCXRlc3QgImluaXRpYWwiID0gIiQoZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUuc3VibW9kLWJyYW5jaC5icmFuY2gpIiAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdAoJKSAmJgoKCXJtIC1mIGhlYWRzIGhlYWQgdW50cmFja2VkICYmCglpbnNwZWN0IGFkZHRlc3Qvc3VibW9kLWJyYW5jaCAuLi8uLiAmJgoJdGVzdF9jbXAgZXhwZWN0LWhlYWRzIGhlYWRzICYmCgl0ZXN0X2NtcCBleHBlY3QtaGVhZCBoZWFkICYmCgl0ZXN0X211c3RfYmVfZW1wdHkgdW50cmFja2VkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBhZGQgd2l0aCAuLyBpbiBwYXRoJyAnCgllY2hvICJyZWZzL2hlYWRzL21haW4iID5leHBlY3QgJiYKCgkoCgkJY2QgYWRkdGVzdCAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiAuLy4vZG90c3VibW9kLy4vZnJvdHovLi8gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQKCSkgJiYKCglybSAtZiBoZWFkcyBoZWFkIHVudHJhY2tlZCAmJgoJaW5zcGVjdCBhZGR0ZXN0L2RvdHN1Ym1vZC9mcm90eiAuLi8uLi8uLiAmJgoJdGVzdF9jbXAgZXhwZWN0IGhlYWRzICYmCgl0ZXN0X2NtcCBleHBlY3QgaGVhZCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IHVudHJhY2tlZAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIHdpdGggLy4vLi8gaW4gcGF0aCcgJwoJZWNobyAicmVmcy9oZWFkcy9tYWluIiA+ZXhwZWN0ICYmCgoJKAoJCWNkIGFkZHRlc3QgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAiJHN1Ym1vZHVybCIgZG90c2xhc2hkb3RzdWJtb2QvLi8uL2Zyb3R6Ly4vICYmCgkJZ2l0IHN1Ym1vZHVsZSBpbml0CgkpICYmCgoJcm0gLWYgaGVhZHMgaGVhZCB1bnRyYWNrZWQgJiYKCWluc3BlY3QgYWRkdGVzdC9kb3RzbGFzaGRvdHN1Ym1vZC9mcm90eiAuLi8uLi8uLiAmJgoJdGVzdF9jbXAgZXhwZWN0IGhlYWRzICYmCgl0ZXN0X2NtcCBleHBlY3QgaGVhZCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IHVudHJhY2tlZAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIHdpdGggLy8gaW4gcGF0aCcgJwoJZWNobyAicmVmcy9oZWFkcy9tYWluIiA+ZXhwZWN0ICYmCgoJKAoJCWNkIGFkZHRlc3QgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAiJHN1Ym1vZHVybCIgc2xhc2hzbGFzaHN1Ym1vZC8vL2Zyb3R6Ly8gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQKCSkgJiYKCglybSAtZiBoZWFkcyBoZWFkIHVudHJhY2tlZCAmJgoJaW5zcGVjdCBhZGR0ZXN0L3NsYXNoc2xhc2hzdWJtb2QvZnJvdHogLi4vLi4vLi4gJiYKCXRlc3RfY21wIGV4cGVjdCBoZWFkcyAmJgoJdGVzdF9jbXAgZXhwZWN0IGhlYWQgJiYKCXRlc3RfbXVzdF9iZV9lbXB0eSB1bnRyYWNrZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGFkZCB3aXRoIC8uLiBpbiBwYXRoJyAnCgllY2hvICJyZWZzL2hlYWRzL21haW4iID5leHBlY3QgJiYKCgkoCgkJY2QgYWRkdGVzdCAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiBkb3Rkb3RzdWJtb2QvLi4vcmVhbHN1Ym1vZC9mcm90ei8uLiAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdAoJKSAmJgoKCXJtIC1mIGhlYWRzIGhlYWQgdW50cmFja2VkICYmCglpbnNwZWN0IGFkZHRlc3QvcmVhbHN1Ym1vZCAuLi8uLiAmJgoJdGVzdF9jbXAgZXhwZWN0IGhlYWRzICYmCgl0ZXN0X2NtcCBleHBlY3QgaGVhZCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IHVudHJhY2tlZAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIHdpdGggLi8sIC8uLiBhbmQgLy8gaW4gcGF0aCcgJwoJZWNobyAicmVmcy9oZWFkcy9tYWluIiA+ZXhwZWN0ICYmCgoJKAoJCWNkIGFkZHRlc3QgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAiJHN1Ym1vZHVybCIgZG90L2RvdHNsYXNoc3VibW9kLy4vLi4vLi4vLy8vcmVhbHN1Ym1vZDIvYS9iL2MvZC8uLi8uLi8uLi8uLi9mcm90ei8vLi4gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQKCSkgJiYKCglybSAtZiBoZWFkcyBoZWFkIHVudHJhY2tlZCAmJgoJaW5zcGVjdCBhZGR0ZXN0L3JlYWxzdWJtb2QyIC4uLy4uICYmCgl0ZXN0X2NtcCBleHBlY3QgaGVhZHMgJiYKCXRlc3RfY21wIGV4cGVjdCBoZWFkICYmCgl0ZXN0X211c3RfYmVfZW1wdHkgdW50cmFja2VkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgIUNZR1dJTiAnc3VibW9kdWxlIGFkZCB3aXRoIFxcIGluIHBhdGgnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicm0gLXJmIHBhcmVudCBzdWJcXHdpdGhcXGJhY2tzbGFzaCIgJiYKCgkjIEluaXRpYWxpemUgYSByZXBvIHdpdGggYSBiYWNrc2xhc2ggaW4gaXRzIG5hbWUKCWdpdCBpbml0IHN1Ylxcd2l0aFxcYmFja3NsYXNoICYmCgl0b3VjaCBzdWJcXHdpdGhcXGJhY2tzbGFzaC9lbXB0eS5maWxlICYmCglnaXQgLUMgc3ViXFx3aXRoXFxiYWNrc2xhc2ggYWRkIGVtcHR5LmZpbGUgJiYKCWdpdCAtQyBzdWJcXHdpdGhcXGJhY2tzbGFzaCBjb21taXQgLW0gIkFkZGVkIGVtcHR5LmZpbGUiICYmCgoJIyBBZGQgdGhhdCByZXBvc2l0b3J5IGFzIGEgc3VibW9kdWxlCglnaXQgaW5pdCBwYXJlbnQgJiYKCWdpdCAtQyBwYXJlbnQgc3VibW9kdWxlIGFkZCAuLi9zdWJcXHdpdGhcXGJhY2tzbGFzaAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIGluIHN1YmRpcmVjdG9yeScgJwoJZWNobyAicmVmcy9oZWFkcy9tYWluIiA+ZXhwZWN0ICYmCgoJbWtkaXIgYWRkdGVzdC9zdWIgJiYKCSgKCQljZCBhZGR0ZXN0L3N1YiAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsIiAuLi9yZWFsc3VibW9kMyAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdAoJKSAmJgoKCXJtIC1mIGhlYWRzIGhlYWQgdW50cmFja2VkICYmCglpbnNwZWN0IGFkZHRlc3QvcmVhbHN1Ym1vZDMgLi4vLi4gJiYKCXRlc3RfY21wIGV4cGVjdCBoZWFkcyAmJgoJdGVzdF9jbXAgZXhwZWN0IGhlYWQgJiYKCXRlc3RfbXVzdF9iZV9lbXB0eSB1bnRyYWNrZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGFkZCBpbiBzdWJkaXJlY3Rvcnkgd2l0aCByZWxhdGl2ZSBwYXRoIHNob3VsZCBmYWlsJyAnCgkoCgkJY2QgYWRkdGVzdC9zdWIgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIGFkZCAuLi8uLi8gc3VibW9kMyAyPi4uLy4uL291dHB1dC5lcnIKCSkgJiYKCXRlc3RfZ3JlcCB0b3BsZXZlbCBvdXRwdXQuZXJyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwIC0gYWRkIGFuIGV4YW1wbGUgZW50cnkgdG8gLmdpdG1vZHVsZXMnICcKCWdpdCBjb25maWcgLS1maWxlPS5naXRtb2R1bGVzIHN1Ym1vZHVsZS5leGFtcGxlLnVybCBnaXQ6Ly9leGFtcGxlLmNvbS9pbml0LmdpdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdGF0dXMgc2hvdWxkIGZhaWwgZm9yIHVubWFwcGVkIHBhdGhzJyAnCgl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIHN0YXR1cwonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCAtIG1hcCBwYXRoIGluIC5naXRtb2R1bGVzJyAnCgljYXQgPDxcRU9GID5leHBlY3QgJiYKW3N1Ym1vZHVsZSAiZXhhbXBsZSJdCgl1cmwgPSBnaXQ6Ly9leGFtcGxlLmNvbS9pbml0LmdpdAoJcGF0aCA9IGluaXQKRU9GCgoJZ2l0IGNvbmZpZyAtLWZpbGU9LmdpdG1vZHVsZXMgc3VibW9kdWxlLmV4YW1wbGUucGF0aCBpbml0ICYmCgoJdGVzdF9jbXAgZXhwZWN0IC5naXRtb2R1bGVzCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N0YXR1cyBzaG91bGQgb25seSBwcmludCBvbmUgbGluZScgJwoJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPmxpbmVzICYmCgl0ZXN0X2xpbmVfY291bnQgPSAxIGxpbmVzCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N0YXR1cyBmcm9tIHN1YmRpcmVjdG9yeSBzaG91bGQgaGF2ZSB0aGUgc2FtZSBTSEExJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtZGlyIGFkZHRlc3Qvc3ViZGlyIiAmJgoJKAoJCWNkIGFkZHRlc3QgJiYKCQlta2RpciBzdWJkaXIgJiYKCQlnaXQgc3VibW9kdWxlIHN0YXR1cyA+b3V0cHV0ICYmCgkJYXdrICJ7cHJpbnQgXCQxfSIgPG91dHB1dCA+ZXhwZWN0ICYmCgkJY2Qgc3ViZGlyICYmCgkJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPi4uL291dHB1dCAmJgoJCWF3ayAie3ByaW50IFwkMX0iIDwuLi9vdXRwdXQgPi4uL2FjdHVhbCAmJgoJCXRlc3RfY21wIC4uL2V4cGVjdCAuLi9hY3R1YWwgJiYKCQlnaXQgLUMgLi4vc3VibW9kIGNoZWNrb3V0IEhFQUReICYmCgkJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPi4uL291dHB1dCAmJgoJCWF3ayAie3ByaW50IFwkMX0iIDwuLi9vdXRwdXQgPi4uL2FjdHVhbDIgJiYKCQljZCAuLiAmJgoJCWdpdCBzdWJtb2R1bGUgc3RhdHVzID5vdXRwdXQgJiYKCQlhd2sgIntwcmludCBcJDF9IiA8b3V0cHV0ID5leHBlY3QyICYmCgkJdGVzdF9jbXAgZXhwZWN0MiBhY3R1YWwyICYmCgkJISB0ZXN0X2NtcCBhY3R1YWwgYWN0dWFsMgoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCAtIGZldGNoIGNvbW1pdCBuYW1lIGZyb20gc3VibW9kdWxlJyAnCglyZXYxPSQoY2QgLnN1YnJlcG8gJiYgZ2l0IHJldi1wYXJzZSBIRUFEKSAmJgoJcHJpbnRmICJyZXYxOiAlc1xuIiAiJHJldjEiICYmCgl0ZXN0IC1uICIkcmV2MSIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3RhdHVzIHNob3VsZCBpbml0aWFsbHkgYmUgIm1pc3NpbmciJyAnCglnaXQgc3VibW9kdWxlIHN0YXR1cyA+bGluZXMgJiYKCWdyZXAgIl4tJHJldjEiIGxpbmVzCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2luaXQgc2hvdWxkIHJlZ2lzdGVyIHN1Ym1vZHVsZSB1cmwgaW4gLmdpdC9jb25maWcnICcKCWVjaG8gZ2l0Oi8vZXhhbXBsZS5jb20vaW5pdC5naXQgPmV4cGVjdCAmJgoKCWdpdCBzdWJtb2R1bGUgaW5pdCAmJgoJZ2l0IGNvbmZpZyBzdWJtb2R1bGUuZXhhbXBsZS51cmwgPnVybCAmJgoJZ2l0IGNvbmZpZyBzdWJtb2R1bGUuZXhhbXBsZS51cmwgLi8uc3VicmVwbyAmJgoKCXRlc3RfY21wIGV4cGVjdCB1cmwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3RhdHVzIHNob3VsZCBzdGlsbCBiZSAibWlzc2luZyIgYWZ0ZXIgaW5pdGlhbGl6aW5nJyAnCglybSAtZnIgaW5pdCAmJgoJbWtkaXIgaW5pdCAmJgoJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPmxpbmVzICYmCglybSAtZnIgaW5pdCAmJgoJZ3JlcCAiXi0kcmV2MSIgbGluZXMKJwoKdGVzdF9mYWlsdXJlX3dpdGhfdW5rbm93bl9zdWJtb2R1bGUgKCkgewoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSAkMSBuby1zdWNoLXN1Ym1vZHVsZSAyPm91dHB1dC5lcnIgJiYKCXRlc3RfZ3JlcCAiXmVycm9yOiAuKm5vLXN1Y2gtc3VibW9kdWxlIiBvdXRwdXQuZXJyCn0KCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2luaXQgc2hvdWxkIGZhaWwgd2l0aCB1bmtub3duIHN1Ym1vZHVsZScgJwoJdGVzdF9mYWlsdXJlX3dpdGhfdW5rbm93bl9zdWJtb2R1bGUgaW5pdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICd1cGRhdGUgc2hvdWxkIGZhaWwgd2l0aCB1bmtub3duIHN1Ym1vZHVsZScgJwoJdGVzdF9mYWlsdXJlX3dpdGhfdW5rbm93bl9zdWJtb2R1bGUgdXBkYXRlCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N0YXR1cyBzaG91bGQgZmFpbCB3aXRoIHVua25vd24gc3VibW9kdWxlJyAnCgl0ZXN0X2ZhaWx1cmVfd2l0aF91bmtub3duX3N1Ym1vZHVsZSBzdGF0dXMKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3luYyBzaG91bGQgZmFpbCB3aXRoIHVua25vd24gc3VibW9kdWxlJyAnCgl0ZXN0X2ZhaWx1cmVfd2l0aF91bmtub3duX3N1Ym1vZHVsZSBzeW5jCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3VwZGF0ZSBzaG91bGQgZmFpbCB3aGVuIHBhdGggaXMgdXNlZCBieSBhIGZpbGUnICcKCWVjaG8gaGVsbG8gPmV4cGVjdCAmJgoKCWVjaG8gImhlbGxvIiA+aW5pdCAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgJiYKCgl0ZXN0X2NtcCBleHBlY3QgaW5pdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICd1cGRhdGUgc2hvdWxkIGZhaWwgd2hlbiBwYXRoIGlzIHVzZWQgYnkgYSBub25lbXB0eSBkaXJlY3RvcnknICcKCWVjaG8gaGVsbG8gPmV4cGVjdCAmJgoKCXJtIC1mciBpbml0ICYmCglta2RpciBpbml0ICYmCgllY2hvICJoZWxsbyIgPmluaXQvYSAmJgoKCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgdXBkYXRlICYmCgoJdGVzdF9jbXAgZXhwZWN0IGluaXQvYQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICd1cGRhdGUgc2hvdWxkIHdvcmsgd2hlbiBwYXRoIGlzIGFuIGVtcHR5IGRpcicgJwoJcm0gLWZyIGluaXQgJiYKCXJtIC1mIGhlYWQtc2hhMSAmJgoJZWNobyAiJHJldjEiID5leHBlY3QgJiYKCglta2RpciBpbml0ICYmCglnaXQgc3VibW9kdWxlIHVwZGF0ZSAtcSA+dXBkYXRlLm91dCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IHVwZGF0ZS5vdXQgJiYKCglpbnNwZWN0IGluaXQgJiYKCXRlc3RfY21wIGV4cGVjdCBoZWFkLXNoYTEKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3RhdHVzIHNob3VsZCBiZSAidXAtdG8tZGF0ZSIgYWZ0ZXIgdXBkYXRlJyAnCglnaXQgc3VibW9kdWxlIHN0YXR1cyA+bGlzdCAmJgoJZ3JlcCAiXiAkcmV2MSIgbGlzdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdGF0dXMgInVwLXRvLWRhdGUiIGZyb20gc3ViZGlyZWN0b3J5JyAnCglta2RpciAtcCBzdWIgJiYKCSgKCQljZCBzdWIgJiYKCQlnaXQgc3VibW9kdWxlIHN0YXR1cyA+Li4vbGlzdAoJKSAmJgoJZ3JlcCAiXiAkcmV2MSIgbGlzdCAmJgoJZ3JlcCAiXFwuXFwuL2luaXQiIGxpc3QKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3RhdHVzICJ1cC10by1kYXRlIiBmcm9tIHN1YmRpcmVjdG9yeSB3aXRoIHBhdGgnICcKCW1rZGlyIC1wIHN1YiAmJgoJKAoJCWNkIHN1YiAmJgoJCWdpdCBzdWJtb2R1bGUgc3RhdHVzIC4uL2luaXQgPi4uL2xpc3QKCSkgJiYKCWdyZXAgIl4gJHJldjEiIGxpc3QgJiYKCWdyZXAgIlxcLlxcLi9pbml0IiBsaXN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N0YXR1cyBzaG91bGQgYmUgIm1vZGlmaWVkIiBhZnRlciBzdWJtb2R1bGUgY29tbWl0JyAnCgkoCgkJY2QgaW5pdCAmJgoJCWVjaG8gYiA+YiAmJgoJCWdpdCBhZGQgYiAmJgoJCWdpdCBjb21taXQgLW0gInN1Ym1vZHVsZSBjb21taXQgMiIKCSkgJiYKCglyZXYyPSQoY2QgaW5pdCAmJiBnaXQgcmV2LXBhcnNlIEhFQUQpICYmCgl0ZXN0IC1uICIkcmV2MiIgJiYKCWdpdCBzdWJtb2R1bGUgc3RhdHVzID5saXN0ICYmCgoJZ3JlcCAiXiskcmV2MiIgbGlzdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICcic3VibW9kdWxlIC0tY2FjaGVkIiBjb21tYW5kIGZvcm1zIHNob3VsZCBiZSBpZGVudGljYWwnICcKCWdpdCBzdWJtb2R1bGUgc3RhdHVzIC0tY2FjaGVkID5leHBlY3QgJiYKCglnaXQgc3VibW9kdWxlIC0tY2FjaGVkID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwgJiYKCglnaXQgc3VibW9kdWxlIC0tY2FjaGVkIHN0YXR1cyA+YWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3RoZSAtLWNhY2hlZCBzaGExIHNob3VsZCBiZSByZXYxJyAnCglnaXQgc3VibW9kdWxlIC0tY2FjaGVkIHN0YXR1cyA+bGlzdCAmJgoJZ3JlcCAiXiskcmV2MSIgbGlzdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdnaXQgZGlmZiBzaG91bGQgcmVwb3J0IHRoZSBTSEExIG9mIHRoZSBuZXcgc3VibW9kdWxlIGNvbW1pdCcgJwoJZ2l0IGRpZmYgPmRpZmYgJiYKCWdyZXAgIl4rU3VicHJvamVjdCBjb21taXQgJHJldjIiIGRpZmYKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXBkYXRlIHNob3VsZCBjaGVja291dCByZXYxJyAnCglybSAtZiBoZWFkLXNoYTEgJiYKCWVjaG8gIiRyZXYxIiA+ZXhwZWN0ICYmCgoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgaW5pdCAmJgoJaW5zcGVjdCBpbml0ICYmCgoJdGVzdF9jbXAgZXhwZWN0IGhlYWQtc2hhMQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdGF0dXMgc2hvdWxkIGJlICJ1cC10by1kYXRlIiBhZnRlciB1cGRhdGUnICcKCWdpdCBzdWJtb2R1bGUgc3RhdHVzID5saXN0ICYmCglncmVwICJeICRyZXYxIiBsaXN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NoZWNrb3V0IHN1cGVycHJvamVjdCB3aXRoIHN1YnByb2plY3QgYWxyZWFkeSBwcmVzZW50JyAnCglnaXQgY2hlY2tvdXQgaW5pdGlhbCAmJgoJZ2l0IGNoZWNrb3V0IG1haW4KJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYXBwbHkgc3VibW9kdWxlIGRpZmYnICcKCWdpdCBicmFuY2ggc2Vjb25kICYmCgkoCgkJY2QgaW5pdCAmJgoJCWVjaG8gcyA+cyAmJgoJCWdpdCBhZGQgcyAmJgoJCWdpdCBjb21taXQgLW0gImNoYW5nZSBzdWJwcm9qZWN0IgoJKSAmJgoJZ2l0IHVwZGF0ZS1pbmRleCAtLWFkZCBpbml0ICYmCglnaXQgY29tbWl0IC1tICJjaGFuZ2UgaW5pdCIgJiYKCWdpdCBmb3JtYXQtcGF0Y2ggLTEgLS1zdGRvdXQgPlAuZGlmZiAmJgoJZ2l0IGNoZWNrb3V0IHNlY29uZCAmJgoJZ2l0IGFwcGx5IC0taW5kZXggUC5kaWZmICYmCgoJZ2l0IGRpZmYgLS1jYWNoZWQgbWFpbiA+c3RhZ2VkICYmCgl0ZXN0X211c3RfYmVfZW1wdHkgc3RhZ2VkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3VwZGF0ZSAtLWluaXQnICcKCW12IGluaXQgaW5pdDIgJiYKCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLmV4YW1wbGUudXJsICIkKHB3ZCkvaW5pdDIiICYmCglnaXQgY29uZmlnIC0tcmVtb3ZlLXNlY3Rpb24gc3VibW9kdWxlLmV4YW1wbGUgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBjb25maWcgc3VibW9kdWxlLmV4YW1wbGUudXJsICYmCgoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgaW5pdCAyPiB1cGRhdGUub3V0ICYmCgl0ZXN0X2dyZXAgIm5vdCBpbml0aWFsaXplZCIgdXBkYXRlLm91dCAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHJldi1wYXJzZSAtLXJlc29sdmUtZ2l0LWRpciBpbml0Ly5naXQgJiYKCglnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgaW5pdCAmJgoJZ2l0IHJldi1wYXJzZSAtLXJlc29sdmUtZ2l0LWRpciBpbml0Ly5naXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXBkYXRlIC0taW5pdCBmcm9tIHN1YmRpcmVjdG9yeScgJwoJbXYgaW5pdCBpbml0MiAmJgoJZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUuZXhhbXBsZS51cmwgIiQocHdkKS9pbml0MiIgJiYKCWdpdCBjb25maWcgLS1yZW1vdmUtc2VjdGlvbiBzdWJtb2R1bGUuZXhhbXBsZSAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IGNvbmZpZyBzdWJtb2R1bGUuZXhhbXBsZS51cmwgJiYKCglta2RpciAtcCBzdWIgJiYKCSgKCQljZCBzdWIgJiYKCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAuLi9pbml0IDI+dXBkYXRlLm91dCAmJgoJCXRlc3RfZ3JlcCAibm90IGluaXRpYWxpemVkIiB1cGRhdGUub3V0ICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IHJldi1wYXJzZSAtLXJlc29sdmUtZ2l0LWRpciAuLi9pbml0Ly5naXQgJiYKCgkJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IC4uL2luaXQKCSkgJiYKCWdpdCByZXYtcGFyc2UgLS1yZXNvbHZlLWdpdC1kaXIgaW5pdC8uZ2l0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2RvIG5vdCBhZGQgZmlsZXMgZnJvbSBhIHN1Ym1vZHVsZScgJwoKCWdpdCByZXNldCAtLWhhcmQgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBhZGQgaW5pdC9hCgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdncmFjZWZ1bGx5IGFkZC9yZXNldCBzdWJtb2R1bGUgd2l0aCBhIHRyYWlsaW5nIHNsYXNoJyAnCgoJZ2l0IHJlc2V0IC0taGFyZCAmJgoJZ2l0IGNvbW1pdCAtbSAiY29tbWl0IHN1YnByb2plY3QiIGluaXQgJiYKCShjZCBpbml0ICYmCgkgZWNobyBiID4gYSkgJiYKCWdpdCBhZGQgaW5pdC8gJiYKCWdpdCBkaWZmIC0tZXhpdC1jb2RlIC0tY2FjaGVkIGluaXQgJiYKCWNvbW1pdD0kKGNkIGluaXQgJiYKCSBnaXQgY29tbWl0IC1tIHVwZGF0ZSBhID4vZGV2L251bGwgJiYKCSBnaXQgcmV2LXBhcnNlIEhFQUQpICYmCglnaXQgYWRkIGluaXQvICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgZGlmZiAtLWV4aXQtY29kZSAtLWNhY2hlZCBpbml0ICYmCgl0ZXN0ICRjb21taXQgPSAkKGdpdCBscy1maWxlcyAtLXN0YWdlIHwKCQlzZWQgLW4gInMvXjE2MDAwMCBcKFteIF0qXCkuKi9cMS9wIikgJiYKCWdpdCByZXNldCBpbml0LyAmJgoJZ2l0IGRpZmYgLS1leGl0LWNvZGUgLS1jYWNoZWQgaW5pdAoKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbHMtZmlsZXMgZ3JhY2VmdWxseSBoYW5kbGVzIHRyYWlsaW5nIHNsYXNoJyAnCgoJdGVzdCAiaW5pdCIgPSAiJChnaXQgbHMtZmlsZXMgaW5pdC8pIgoKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbW92aW5nIHRvIGEgY29tbWl0IHdpdGhvdXQgc3VibW9kdWxlIGRvZXMgbm90IGxlYXZlIGVtcHR5IGRpcicgJwoJcm0gLXJmIGluaXQgJiYKCW1rZGlyIGluaXQgJiYKCWdpdCByZXNldCAtLWhhcmQgJiYKCWdpdCBjaGVja291dCBpbml0aWFsICYmCgl0ZXN0ICEgLWQgaW5pdCAmJgoJZ2l0IGNoZWNrb3V0IHNlY29uZAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgPGludmFsaWQtc3ViY29tbWFuZD4gZmFpbHMnICcKCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgbm8tc3VjaC1zdWJjb21tYW5kCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FkZCBzdWJtb2R1bGVzIHdpdGhvdXQgc3BlY2lmeWluZyBhbiBleHBsaWNpdCBwYXRoJyAnCglta2RpciByZXBvICYmCgkoCgkJY2QgcmVwbyAmJgoJCWdpdCBpbml0ICYmCgkJZWNobyByID5yICYmCgkJZ2l0IGFkZCByICYmCgkJZ2l0IGNvbW1pdCAtbSAicmVwbyBjb21taXQgMSIKCSkgJiYKCWdpdCBjbG9uZSAtLWJhcmUgcmVwby8gYmFyZS5naXQgJiYKCSgKCQljZCBhZGR0ZXN0ICYmCgkJZ2l0IHN1Ym1vZHVsZSBhZGQgIiRzdWJtb2R1cmwvcmVwbyIgJiYKCQlnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS5yZXBvLnBhdGggcmVwbyAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsL2JhcmUuZ2l0IiAmJgoJCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLmJhcmUucGF0aCBiYXJlCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FkZCBzaG91bGQgZmFpbCB3aGVuIHBhdGggaXMgdXNlZCBieSBhIGZpbGUnICcKCSgKCQljZCBhZGR0ZXN0ICYmCgkJdG91Y2ggZmlsZSAmJgoJCXRlc3RfbXVzdF9mYWlsCWdpdCBzdWJtb2R1bGUgYWRkICIkc3VibW9kdXJsL3JlcG8iIGZpbGUKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWRkIHNob3VsZCBmYWlsIHdoZW4gcGF0aCBpcyB1c2VkIGJ5IGFuIGV4aXN0aW5nIGRpcmVjdG9yeScgJwoJKAoJCWNkIGFkZHRlc3QgJiYKCQlta2RpciBlbXB0eS1kaXIgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgc3VibW9kdWxlIGFkZCAiJHN1Ym1vZHVybC9yZXBvIiBlbXB0eS1kaXIKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXNlIHN1cGVycHJvamVjdCBhcyB1cHN0cmVhbSB3aGVuIHBhdGggaXMgcmVsYXRpdmUgYW5kIG5vIHVybCBpcyBzZXQgdGhlcmUnICcKCSgKCQljZCBhZGR0ZXN0ICYmCgkJZ2l0IHN1Ym1vZHVsZSBhZGQgLi4vcmVwbyByZWxhdGl2ZSAmJgoJCXRlc3QgIiQoZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUucmVsYXRpdmUudXJsKSIgPSAuLi9yZXBvICYmCgkJZ2l0IHN1Ym1vZHVsZSBzeW5jIHJlbGF0aXZlICYmCgkJdGVzdCAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5yZWxhdGl2ZS51cmwpIiA9ICIkc3VibW9kdXJsL3JlcG8iCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldCB1cCBmb3IgcmVsYXRpdmUgcGF0aCB0ZXN0cycgJwoJbWtkaXIgcmVsdGVzdCAmJgoJKAoJCWNkIHJlbHRlc3QgJiYKCQlnaXQgaW5pdCAmJgoJCW1rZGlyIHN1YiAmJgoJCSgKCQkJY2Qgc3ViICYmCgkJCWdpdCBpbml0ICYmCgkJCXRlc3RfY29tbWl0IGZvbwoJCSkgJiYKCQlnaXQgYWRkIHN1YiAmJgoJCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLnN1Yi5wYXRoIHN1YiAmJgoJCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLnN1Yi51cmwgLi4vc3VicmVwbyAmJgoJCWNwIC5naXQvY29uZmlnIHByaXN0aW5lLS5naXQtY29uZmlnICYmCgkJY3AgLmdpdG1vZHVsZXMgcHJpc3RpbmUtLmdpdG1vZHVsZXMKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIFVSTCAtIHNzaDovL2hvc3RuYW1lL3JlcG8nICcKCSgKCQljZCByZWx0ZXN0ICYmCgkJY3AgcHJpc3RpbmUtLmdpdC1jb25maWcgLmdpdC9jb25maWcgJiYKCQljcCBwcmlzdGluZS0uZ2l0bW9kdWxlcyAuZ2l0bW9kdWxlcyAmJgoJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgc3NoOi8vaG9zdG5hbWUvcmVwbyAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdCAmJgoJCXRlc3QgIiQoZ2l0IGNvbmZpZyBzdWJtb2R1bGUuc3ViLnVybCkiID0gc3NoOi8vaG9zdG5hbWUvc3VicmVwbwoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICcuLi9zdWJyZXBvIHdvcmtzIHdpdGggcG9ydC1xdWFsaWZpZWQgVVJMIC0gc3NoOi8vaG9zdG5hbWU6MjIvcmVwbycgJwoJKAoJCWNkIHJlbHRlc3QgJiYKCQljcCBwcmlzdGluZS0uZ2l0LWNvbmZpZyAuZ2l0L2NvbmZpZyAmJgoJCWNwIHByaXN0aW5lLS5naXRtb2R1bGVzIC5naXRtb2R1bGVzICYmCgkJZ2l0IGNvbmZpZyByZW1vdGUub3JpZ2luLnVybCBzc2g6Ly9ob3N0bmFtZToyMi9yZXBvICYmCgkJZ2l0IHN1Ym1vZHVsZSBpbml0ICYmCgkJdGVzdCAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWIudXJsKSIgPSBzc2g6Ly9ob3N0bmFtZToyMi9zdWJyZXBvCgkpCicKCiMgQWJvdXQgdGhlIGNob2ljZSBvZiB0aGUgcGF0aCBpbiB0aGUgbmV4dCB0ZXN0OgojIC0gZG91YmxlLXNsYXNoIHNpZGUtc3RlcHMgcGF0aCBtYW5nbGluZyBpc3N1ZXMgb24gV2luZG93cwojIC0gaXQgaXMgc3RpbGwgYW4gYWJzb2x1dGUgbG9jYWwgcGF0aAojIC0gdGhlcmUgY2Fubm90IGJlIGEgc2VydmVyIHdpdGggYSBibGFuayBpbiBpdHMgbmFtZSBqdXN0IGluIGNhc2UgdGhlCiMgICBwYXRoIGlzIHVzZWQgZXJyb25lb3VzbHkgdG8gYWNjZXNzIGEgLy9zZXJ2ZXIvc2hhcmUgc3R5bGUgcGF0aAp0ZXN0X2V4cGVjdF9zdWNjZXNzICcuLi9zdWJyZXBvIHBhdGggd29ya3Mgd2l0aCBsb2NhbCBwYXRoIC0gLy9zb21ld2hlcmUgZWxzZS9yZXBvJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsICIvL3NvbWV3aGVyZSBlbHNlL3JlcG8iICYmCgkJZ2l0IHN1Ym1vZHVsZSBpbml0ICYmCgkJdGVzdCAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWIudXJsKSIgPSAiLy9zb21ld2hlcmUgZWxzZS9zdWJyZXBvIgoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICcuLi9zdWJyZXBvIHdvcmtzIHdpdGggZmlsZSBVUkwgLSBmaWxlOi8vL3RtcC9yZXBvJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIGZpbGU6Ly8vdG1wL3JlcG8gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IGZpbGU6Ly8vdG1wL3N1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIGhlbHBlciBVUkwtIGhlbHBlcjo6Ly9ob3N0bmFtZS9yZXBvJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIGhlbHBlcjo6Ly9ob3N0bmFtZS9yZXBvICYmCgkJZ2l0IHN1Ym1vZHVsZSBpbml0ICYmCgkJdGVzdCAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWIudXJsKSIgPSBoZWxwZXI6Oi8vaG9zdG5hbWUvc3VicmVwbwoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICcuLi9zdWJyZXBvIHdvcmtzIHdpdGggc2NwLXN0eWxlIFVSTCAtIHVzZXJAaG9zdDpyZXBvJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJZ2l0IGNvbmZpZyByZW1vdGUub3JpZ2luLnVybCB1c2VyQGhvc3Q6cmVwbyAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdCAmJgoJCXRlc3QgIiQoZ2l0IGNvbmZpZyBzdWJtb2R1bGUuc3ViLnVybCkiID0gdXNlckBob3N0OnN1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIHNjcC1zdHlsZSBVUkwgLSB1c2VyQGhvc3Q6cGF0aC90by9yZXBvJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIHVzZXJAaG9zdDpwYXRoL3RvL3JlcG8gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IHVzZXJAaG9zdDpwYXRoL3RvL3N1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIHJlbGF0aXZlIGxvY2FsIHBhdGggLSBmb28nICcKCSgKCQljZCByZWx0ZXN0ICYmCgkJY3AgcHJpc3RpbmUtLmdpdC1jb25maWcgLmdpdC9jb25maWcgJiYKCQljcCBwcmlzdGluZS0uZ2l0bW9kdWxlcyAuZ2l0bW9kdWxlcyAmJgoJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgZm9vICYmCgkJIyBhY3R1YWw6IGZhaWxzIHdpdGggYW4gZXJyb3IKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IHN1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIHJlbGF0aXZlIGxvY2FsIHBhdGggLSBmb28vYmFyJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIGZvby9iYXIgJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IGZvby9zdWJyZXBvCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJy4uL3N1YnJlcG8gd29ya3Mgd2l0aCByZWxhdGl2ZSBsb2NhbCBwYXRoIC0gLi9mb28nICcKCSgKCQljZCByZWx0ZXN0ICYmCgkJY3AgcHJpc3RpbmUtLmdpdC1jb25maWcgLmdpdC9jb25maWcgJiYKCQljcCBwcmlzdGluZS0uZ2l0bW9kdWxlcyAuZ2l0bW9kdWxlcyAmJgoJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgLi9mb28gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IHN1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIHJlbGF0aXZlIGxvY2FsIHBhdGggLSAuL2Zvby9iYXInICcKCSgKCQljZCByZWx0ZXN0ICYmCgkJY3AgcHJpc3RpbmUtLmdpdC1jb25maWcgLmdpdC9jb25maWcgJiYKCQljcCBwcmlzdGluZS0uZ2l0bW9kdWxlcyAuZ2l0bW9kdWxlcyAmJgoJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgLi9mb28vYmFyICYmCgkJZ2l0IHN1Ym1vZHVsZSBpbml0ICYmCgkJdGVzdCAiJChnaXQgY29uZmlnIHN1Ym1vZHVsZS5zdWIudXJsKSIgPSBmb28vc3VicmVwbwoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICcuLi9zdWJyZXBvIHdvcmtzIHdpdGggcmVsYXRpdmUgbG9jYWwgcGF0aCAtIC4uL2ZvbycgJwoJKAoJCWNkIHJlbHRlc3QgJiYKCQljcCBwcmlzdGluZS0uZ2l0LWNvbmZpZyAuZ2l0L2NvbmZpZyAmJgoJCWNwIHByaXN0aW5lLS5naXRtb2R1bGVzIC5naXRtb2R1bGVzICYmCgkJZ2l0IGNvbmZpZyByZW1vdGUub3JpZ2luLnVybCAuLi9mb28gJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IC4uL3N1YnJlcG8KCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnLi4vc3VicmVwbyB3b3JrcyB3aXRoIHJlbGF0aXZlIGxvY2FsIHBhdGggLSAuLi9mb28vYmFyJyAnCgkoCgkJY2QgcmVsdGVzdCAmJgoJCWNwIHByaXN0aW5lLS5naXQtY29uZmlnIC5naXQvY29uZmlnICYmCgkJY3AgcHJpc3RpbmUtLmdpdG1vZHVsZXMgLmdpdG1vZHVsZXMgJiYKCQlnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIC4uL2Zvby9iYXIgJiYKCQlnaXQgc3VibW9kdWxlIGluaXQgJiYKCQl0ZXN0ICIkKGdpdCBjb25maWcgc3VibW9kdWxlLnN1Yi51cmwpIiA9IC4uL2Zvby9zdWJyZXBvCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJy4uL2Jhci9hL2IvYyB3b3JrcyB3aXRoIHJlbGF0aXZlIGxvY2FsIHBhdGggLSAuLi9mb28vYmFyLmdpdCcgJwoJKAoJCWNkIHJlbHRlc3QgJiYKCQljcCBwcmlzdGluZS0uZ2l0LWNvbmZpZyAuZ2l0L2NvbmZpZyAmJgoJCWNwIHByaXN0aW5lLS5naXRtb2R1bGVzIC5naXRtb2R1bGVzICYmCgkJbWtkaXIgLXAgYS9iL2MgJiYKCQkoY2QgYS9iL2MgJiYgZ2l0IGluaXQgJiYgdGVzdF9jb21taXQgbXNnKSAmJgoJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgLi4vZm9vL2Jhci5naXQgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAuLi9iYXIvYS9iL2MgLi9hL2IvYyAmJgoJCWdpdCBzdWJtb2R1bGUgaW5pdCAmJgoJCXRlc3QgIiQoZ2l0IGNvbmZpZyBzdWJtb2R1bGUuYS9iL2MudXJsKSIgPSAuLi9mb28vYmFyL2EvYi9jCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ21vdmluZyB0aGUgc3VwZXJwcm9qZWN0IGRvZXMgbm90IGJyZWFrIHN1Ym1vZHVsZXMnICcKCSgKCQljZCBhZGR0ZXN0ICYmCgkJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPmV4cGVjdAoJKSAmJgoJbXYgYWRkdGVzdCBhZGR0ZXN0MiAmJgoJKAoJCWNkIGFkZHRlc3QyICYmCgkJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMgPmFjdHVhbCAmJgoJCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbW92aW5nIHRoZSBzdWJtb2R1bGUgZG9lcyBub3QgYnJlYWsgdGhlIHN1cGVycHJvamVjdCcgJwoJKAoJCWNkIGFkZHRlc3QyICYmCgkJZ2l0IHN1Ym1vZHVsZSBzdGF0dXMKCSkgPmFjdHVhbCAmJgoJc2VkIC1lICJzL14gXChbXiBdKiByZXBvXCkgLiovLVwxLyIgPGFjdHVhbCA+ZXhwZWN0ICYmCgltdiBhZGR0ZXN0Mi9yZXBvIGFkZHRlc3QyL3JlcG8uYmFrICYmCgl0ZXN0X3doZW5fZmluaXNoZWQgIm12IGFkZHRlc3QyL3JlcG8uYmFrIGFkZHRlc3QyL3JlcG8iICYmCgkoCgkJY2QgYWRkdGVzdDIgJiYKCQlnaXQgc3VibW9kdWxlIHN0YXR1cwoJKSA+YWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBhZGQgLS1uYW1lIGFsbG93cyB0byByZXBsYWNlIGEgc3VibW9kdWxlIHdpdGggYW5vdGhlciBhdCB0aGUgc2FtZSBwYXRoJyAnCgkoCgkJY2QgYWRkdGVzdDIgJiYKCQkoCgkJCWNkIHJlcG8gJiYKCQkJZWNobyAiJHN1Ym1vZHVybC9yZXBvIiA+ZXhwZWN0ICYmCgkJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgPmFjdHVhbCAmJgoJCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgkJCWVjaG8gImdpdGRpcjogLi4vLmdpdC9tb2R1bGVzL3JlcG8iID5leHBlY3QgJiYKCQkJdGVzdF9jbXAgZXhwZWN0IC5naXQKCQkpICYmCgkJcm0gLXJmIHJlcG8gJiYKCQlnaXQgcm0gcmVwbyAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC1xIC0tbmFtZSByZXBvX25ldyAiJHN1Ym1vZHVybC9iYXJlLmdpdCIgcmVwbyA+YWN0dWFsICYmCgkJdGVzdF9tdXN0X2JlX2VtcHR5IGFjdHVhbCAmJgoJCWVjaG8gImdpdGRpcjogLi4vLmdpdC9tb2R1bGVzL3N1Ym1vZCIgPmV4cGVjdCAmJgoJCXRlc3RfY21wIGV4cGVjdCBzdWJtb2QvLmdpdCAmJgoJCSgKCQkJY2QgcmVwbyAmJgoJCQllY2hvICIkc3VibW9kdXJsL2JhcmUuZ2l0IiA+ZXhwZWN0ICYmCgkJCWdpdCBjb25maWcgcmVtb3RlLm9yaWdpbi51cmwgPmFjdHVhbCAmJgoJCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgkJCWVjaG8gImdpdGRpcjogLi4vLmdpdC9tb2R1bGVzL3JlcG9fbmV3IiA+ZXhwZWN0ICYmCgkJCXRlc3RfY21wIGV4cGVjdCAuZ2l0CgkJKSAmJgoJCWVjaG8gInJlcG8iID5leHBlY3QgJiYKCQl0ZXN0X211c3RfZmFpbCBnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS5yZXBvLnBhdGggJiYKCQlnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS5yZXBvX25ldy5wYXRoID5hY3R1YWwgJiYKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgkJZWNobyAiJHN1Ym1vZHVybC9yZXBvIiA+ZXhwZWN0ICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUucmVwby51cmwgJiYKCQllY2hvICIkc3VibW9kdXJsL2JhcmUuZ2l0IiA+ZXhwZWN0ICYmCgkJZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUucmVwb19uZXcudXJsID5hY3R1YWwgJiYKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgkJZWNobyAiJHN1Ym1vZHVybC9yZXBvIiA+ZXhwZWN0ICYmCgkJZ2l0IGNvbmZpZyBzdWJtb2R1bGUucmVwby51cmwgPmFjdHVhbCAmJgoJCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwgJiYKCQllY2hvICIkc3VibW9kdXJsL2JhcmUuZ2l0IiA+ZXhwZWN0ICYmCgkJZ2l0IGNvbmZpZyBzdWJtb2R1bGUucmVwb19uZXcudXJsID5hY3R1YWwgJiYKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlY3Vyc2l2ZSByZWxhdGl2ZSBzdWJtb2R1bGVzIHN0YXkgcmVsYXRpdmUnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicm0gLXJmIHN1cGVyIGNsb25lMiBzdWJzdWIgc3ViMyIgJiYKCW1rZGlyIHN1YnN1YiAmJgoJKAoJCWNkIHN1YnN1YiAmJgoJCWdpdCBpbml0ICYmCgkJPnQgJiYKCQlnaXQgYWRkIHQgJiYKCQlnaXQgY29tbWl0IC1tICJpbml0aWFsIGNvbW1pdCIKCSkgJiYKCW1rZGlyIHN1YjMgJiYKCSgKCQljZCBzdWIzICYmCgkJZ2l0IGluaXQgJiYKCQk+dCAmJgoJCWdpdCBhZGQgdCAmJgoJCWdpdCBjb21taXQgLW0gImluaXRpYWwgY29tbWl0IiAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC4uL3N1YnN1YiBkaXJkaXIvc3Vic3ViICYmCgkJZ2l0IGNvbW1pdCAtbSAiYWRkIHN1Ym1vZHVsZSBzdWJzdWIiCgkpICYmCglta2RpciBzdXBlciAmJgoJKAoJCWNkIHN1cGVyICYmCgkJZ2l0IGluaXQgJiYKCQk+dCAmJgoJCWdpdCBhZGQgdCAmJgoJCWdpdCBjb21taXQgLW0gImluaXRpYWwgY29tbWl0IiAmJgoJCWdpdCBzdWJtb2R1bGUgYWRkIC4uL3N1YjMgJiYKCQlnaXQgY29tbWl0IC1tICJhZGQgc3VibW9kdWxlIHN1YiIKCSkgJiYKCWdpdCBjbG9uZSBzdXBlciBjbG9uZTIgJiYKCSgKCQljZCBjbG9uZTIgJiYKCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgLS1yZWN1cnNpdmUgJiYKCQllY2hvICJnaXRkaXI6IC4uLy5naXQvbW9kdWxlcy9zdWIzIiA+Li9zdWIzLy5naXRfZXhwZWN0ICYmCgkJZWNobyAiZ2l0ZGlyOiAuLi8uLi8uLi8uZ2l0L21vZHVsZXMvc3ViMy9tb2R1bGVzL2RpcmRpci9zdWJzdWIiID4uL3N1YjMvZGlyZGlyL3N1YnN1Yi8uZ2l0X2V4cGVjdAoJKSAmJgoJdGVzdF9jbXAgY2xvbmUyL3N1YjMvLmdpdF9leHBlY3QgY2xvbmUyL3N1YjMvLmdpdCAmJgoJdGVzdF9jbXAgY2xvbmUyL3N1YjMvZGlyZGlyL3N1YnN1Yi8uZ2l0X2V4cGVjdCBjbG9uZTIvc3ViMy9kaXJkaXIvc3Vic3ViLy5naXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGFkZCB3aXRoIGFuIGV4aXN0aW5nIG5hbWUgZmFpbHMgdW5sZXNzIGZvcmNlZCcgJwoJKAoJCWNkIGFkZHRlc3QyICYmCgkJcm0gLXJmIHJlcG8gJiYKCQlnaXQgcm0gcmVwbyAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgYWRkIC1xIC0tbmFtZSByZXBvX25ldyAiJHN1Ym1vZHVybC9yZXBvLmdpdCIgcmVwbyAmJgoJCXRlc3QgISAtZCByZXBvICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUucmVwb19uZXcucGF0aCAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLnJlcG9fbmV3LnVybCAmJgoJCWVjaG8gIiRzdWJtb2R1cmwvYmFyZS5naXQiID5leHBlY3QgJiYKCQlnaXQgY29uZmlnIHN1Ym1vZHVsZS5yZXBvX25ldy51cmwgPmFjdHVhbCAmJgoJCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAtZiAtcSAtLW5hbWUgcmVwb19uZXcgIiRzdWJtb2R1cmwvcmVwby5naXQiIHJlcG8gJiYKCQl0ZXN0IC1kIHJlcG8gJiYKCQllY2hvICJyZXBvIiA+ZXhwZWN0ICYmCgkJZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyBzdWJtb2R1bGUucmVwb19uZXcucGF0aCA+YWN0dWFsICYmCgkJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbCAmJgoJCWVjaG8gIiRzdWJtb2R1cmwvcmVwby5naXQiID5leHBlY3QgJiYKCQlnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS5yZXBvX25ldy51cmwgPmFjdHVhbCAmJgoJCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwgJiYKCQllY2hvICIkc3VibW9kdXJsL3JlcG8uZ2l0IiA+ZXhwZWN0ICYmCgkJZ2l0IGNvbmZpZyBzdWJtb2R1bGUucmVwb19uZXcudXJsID5hY3R1YWwgJiYKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldCB1cCBhIHNlY29uZCBzdWJtb2R1bGUnICcKCWdpdCBzdWJtb2R1bGUgYWRkIC4vaW5pdDIgZXhhbXBsZTIgJiYKCWdpdCBjb21taXQgLW0gInN1Ym1vZHVsZSBleGFtcGxlMiBhZGRlZCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGRlaW5pdCB3b3JrcyBvbiByZXBvc2l0b3J5IHdpdGhvdXQgc3VibW9kdWxlcycgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJybSAtcmYgbmV3ZGlyZWN0b3J5IiAmJgoJbWtkaXIgbmV3ZGlyZWN0b3J5ICYmCgkoCgkJY2QgbmV3ZGlyZWN0b3J5ICYmCgkJZ2l0IGluaXQgJiYKCQk+ZmlsZSAmJgoJCWdpdCBhZGQgZmlsZSAmJgoJCWdpdCBjb21taXQgLW0gInJlcG8gc2hvdWxkIG5vdCBiZSBlbXB0eSIgJiYKCQlnaXQgc3VibW9kdWxlIGRlaW5pdCAuICYmCgkJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLS1hbGwKCSkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGRlaW5pdCBzaG91bGQgcmVtb3ZlIHRoZSB3aG9sZSBzdWJtb2R1bGUgc2VjdGlvbiBmcm9tIC5naXQvY29uZmlnJyAnCglnaXQgY29uZmlnIHN1Ym1vZHVsZS5leGFtcGxlLmZvbyBiYXIgJiYKCWdpdCBjb25maWcgc3VibW9kdWxlLmV4YW1wbGUyLmZyb3R6IG5pdGZvbCAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgaW5pdCAmJgoJdGVzdCAteiAiJChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAic3VibW9kdWxlXC5leGFtcGxlXC4iKSIgJiYKCXRlc3QgLW4gIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZTJcLiIpIiAmJgoJdGVzdCAtZiBleGFtcGxlMi8uZ2l0ICYmCglybWRpciBpbml0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgc2hvdWxkIHVuc2V0IGNvcmUud29ya3RyZWUnICcKCXRlc3RfcGF0aF9pc19maWxlIC5naXQvbW9kdWxlcy9leGFtcGxlL2NvbmZpZyAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IGNvbmZpZyAtZiAuZ2l0L21vZHVsZXMvZXhhbXBsZS9jb25maWcgY29yZS53b3JrdHJlZQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgZGVpbml0IGZyb20gc3ViZGlyZWN0b3J5JyAnCglnaXQgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgJiYKCWdpdCBjb25maWcgc3VibW9kdWxlLmV4YW1wbGUuZm9vIGJhciAmJgoJbWtkaXIgLXAgc3ViICYmCgkoCgkJY2Qgc3ViICYmCgkJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLi4vaW5pdCA+Li4vb3V0cHV0CgkpICYmCgl0ZXN0X2dyZXAgIlxcLlxcLi9pbml0IiBvdXRwdXQgJiYKCXRlc3QgLXogIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZVwuIikiICYmCgl0ZXN0IC1uICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGUyXC4iKSIgJiYKCXRlc3QgLWYgZXhhbXBsZTIvLmdpdCAmJgoJcm1kaXIgaW5pdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgZGVpbml0IC4gZGVpbml0cyBhbGwgaW5pdGlhbGl6ZWQgc3VibW9kdWxlcycgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCglnaXQgY29uZmlnIHN1Ym1vZHVsZS5leGFtcGxlLmZvbyBiYXIgJiYKCWdpdCBjb25maWcgc3VibW9kdWxlLmV4YW1wbGUyLmZyb3R6IG5pdGZvbCAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSBkZWluaXQgJiYKCWdpdCBzdWJtb2R1bGUgZGVpbml0IC4gPmFjdHVhbCAmJgoJdGVzdCAteiAiJChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAic3VibW9kdWxlXC5leGFtcGxlXC4iKSIgJiYKCXRlc3QgLXogIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZTJcLiIpIiAmJgoJdGVzdF9ncmVwICJDbGVhcmVkIGRpcmVjdG9yeSAuaW5pdCIgYWN0dWFsICYmCgl0ZXN0X2dyZXAgIkNsZWFyZWQgZGlyZWN0b3J5IC5leGFtcGxlMiIgYWN0dWFsICYmCglybWRpciBpbml0IGV4YW1wbGUyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgLS1hbGwgZGVpbml0cyBhbGwgaW5pdGlhbGl6ZWQgc3VibW9kdWxlcycgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCglnaXQgY29uZmlnIHN1Ym1vZHVsZS5leGFtcGxlLmZvbyBiYXIgJiYKCWdpdCBjb25maWcgc3VibW9kdWxlLmV4YW1wbGUyLmZyb3R6IG5pdGZvbCAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSBkZWluaXQgJiYKCWdpdCBzdWJtb2R1bGUgZGVpbml0IC0tYWxsID5hY3R1YWwgJiYKCXRlc3QgLXogIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZVwuIikiICYmCgl0ZXN0IC16ICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGUyXC4iKSIgJiYKCXRlc3RfZ3JlcCAiQ2xlYXJlZCBkaXJlY3RvcnkgLmluaXQiIGFjdHVhbCAmJgoJdGVzdF9ncmVwICJDbGVhcmVkIGRpcmVjdG9yeSAuZXhhbXBsZTIiIGFjdHVhbCAmJgoJcm1kaXIgaW5pdCBleGFtcGxlMgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgZGVpbml0IGRlaW5pdHMgYSBzdWJtb2R1bGUgd2hlbiBpdHMgd29yayB0cmVlIGlzIG1pc3Npbmcgb3IgZW1wdHknICcKCWdpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAmJgoJcm0gLXJmIGluaXQgZXhhbXBsZTIvKiBleGFtcGxlMi8uZ2l0ICYmCglnaXQgc3VibW9kdWxlIGRlaW5pdCBpbml0IGV4YW1wbGUyID5hY3R1YWwgJiYKCXRlc3QgLXogIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZVwuIikiICYmCgl0ZXN0IC16ICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGUyXC4iKSIgJiYKCXRlc3RfZ3JlcCAhICJDbGVhcmVkIGRpcmVjdG9yeSAuaW5pdCIgYWN0dWFsICYmCgl0ZXN0X2dyZXAgIkNsZWFyZWQgZGlyZWN0b3J5IC5leGFtcGxlMiIgYWN0dWFsICYmCglybWRpciBpbml0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgZmFpbHMgd2hlbiB0aGUgc3VibW9kdWxlIGNvbnRhaW5zIG1vZGlmaWNhdGlvbnMgdW5sZXNzIGZvcmNlZCcgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCgllY2hvIFggPj5pbml0L3MgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBzdWJtb2R1bGUgZGVpbml0IGluaXQgJiYKCXRlc3QgLW4gIiQoZ2l0IGNvbmZpZyAtLWdldC1yZWdleHAgInN1Ym1vZHVsZVwuZXhhbXBsZVwuIikiICYmCgl0ZXN0IC1mIGV4YW1wbGUyLy5naXQgJiYKCWdpdCBzdWJtb2R1bGUgZGVpbml0IC1mIGluaXQgPmFjdHVhbCAmJgoJdGVzdCAteiAiJChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAic3VibW9kdWxlXC5leGFtcGxlXC4iKSIgJiYKCXRlc3RfZ3JlcCAiQ2xlYXJlZCBkaXJlY3RvcnkgLmluaXQiIGFjdHVhbCAmJgoJcm1kaXIgaW5pdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgZGVpbml0IGZhaWxzIHdoZW4gdGhlIHN1Ym1vZHVsZSBjb250YWlucyB1bnRyYWNrZWQgZmlsZXMgdW5sZXNzIGZvcmNlZCcgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCgllY2hvIFggPj5pbml0L3VudHJhY2tlZCAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSBkZWluaXQgaW5pdCAmJgoJdGVzdCAtbiAiJChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAic3VibW9kdWxlXC5leGFtcGxlXC4iKSIgJiYKCXRlc3QgLWYgZXhhbXBsZTIvLmdpdCAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLWYgaW5pdCA+YWN0dWFsICYmCgl0ZXN0IC16ICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGVcLiIpIiAmJgoJdGVzdF9ncmVwICJDbGVhcmVkIGRpcmVjdG9yeSAuaW5pdCIgYWN0dWFsICYmCglybWRpciBpbml0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgZmFpbHMgd2hlbiB0aGUgc3VibW9kdWxlIEhFQUQgZG9lcyBub3QgbWF0Y2ggdW5sZXNzIGZvcmNlZCcgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCgkoCgkJY2QgaW5pdCAmJgoJCWdpdCBjaGVja291dCBIRUFEXgoJKSAmJgoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN1Ym1vZHVsZSBkZWluaXQgaW5pdCAmJgoJdGVzdCAtbiAiJChnaXQgY29uZmlnIC0tZ2V0LXJlZ2V4cCAic3VibW9kdWxlXC5leGFtcGxlXC4iKSIgJiYKCXRlc3QgLWYgZXhhbXBsZTIvLmdpdCAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLWYgaW5pdCA+YWN0dWFsICYmCgl0ZXN0IC16ICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGVcLiIpIiAmJgoJdGVzdF9ncmVwICJDbGVhcmVkIGRpcmVjdG9yeSAuaW5pdCIgYWN0dWFsICYmCglybWRpciBpbml0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSBkZWluaXQgaXMgc2lsZW50IHdoZW4gdXNlZCBvbiBhbiB1bmluaXRpYWxpemVkIHN1Ym1vZHVsZScgJwoJZ2l0IHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCglnaXQgc3VibW9kdWxlIGRlaW5pdCBpbml0ID5hY3R1YWwgJiYKCXRlc3RfZ3JlcCAiU3VibW9kdWxlIC5leGFtcGxlLiAoLiopIHVucmVnaXN0ZXJlZCBmb3IgcGF0aCAuaW5pdCIgYWN0dWFsICYmCgl0ZXN0X2dyZXAgIkNsZWFyZWQgZGlyZWN0b3J5IC5pbml0IiBhY3R1YWwgJiYKCWdpdCBzdWJtb2R1bGUgZGVpbml0IGluaXQgPmFjdHVhbCAmJgoJdGVzdF9ncmVwICEgIlN1Ym1vZHVsZSAuZXhhbXBsZS4gKC4qKSB1bnJlZ2lzdGVyZWQgZm9yIHBhdGggLmluaXQiIGFjdHVhbCAmJgoJdGVzdF9ncmVwICJDbGVhcmVkIGRpcmVjdG9yeSAuaW5pdCIgYWN0dWFsICYmCglnaXQgc3VibW9kdWxlIGRlaW5pdCAuID5hY3R1YWwgJiYKCXRlc3RfZ3JlcCAhICJTdWJtb2R1bGUgLmV4YW1wbGUuICguKikgdW5yZWdpc3RlcmVkIGZvciBwYXRoIC5pbml0IiBhY3R1YWwgJiYKCXRlc3RfZ3JlcCAiU3VibW9kdWxlIC5leGFtcGxlMi4gKC4qKSB1bnJlZ2lzdGVyZWQgZm9yIHBhdGggLmV4YW1wbGUyIiBhY3R1YWwgJiYKCXRlc3RfZ3JlcCAiQ2xlYXJlZCBkaXJlY3RvcnkgLmluaXQiIGFjdHVhbCAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLiA+YWN0dWFsICYmCgl0ZXN0X2dyZXAgISAiU3VibW9kdWxlIC5leGFtcGxlLiAoLiopIHVucmVnaXN0ZXJlZCBmb3IgcGF0aCAuaW5pdCIgYWN0dWFsICYmCgl0ZXN0X2dyZXAgISAiU3VibW9kdWxlIC5leGFtcGxlMi4gKC4qKSB1bnJlZ2lzdGVyZWQgZm9yIHBhdGggLmV4YW1wbGUyIiBhY3R1YWwgJiYKCXRlc3RfZ3JlcCAiQ2xlYXJlZCBkaXJlY3RvcnkgLmluaXQiIGFjdHVhbCAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgLS1hbGwgPmFjdHVhbCAmJgoJdGVzdF9ncmVwICEgIlN1Ym1vZHVsZSAuZXhhbXBsZS4gKC4qKSB1bnJlZ2lzdGVyZWQgZm9yIHBhdGggLmluaXQiIGFjdHVhbCAmJgoJdGVzdF9ncmVwICEgIlN1Ym1vZHVsZSAuZXhhbXBsZTIuICguKikgdW5yZWdpc3RlcmVkIGZvciBwYXRoIC5leGFtcGxlMiIgYWN0dWFsICYmCgl0ZXN0X2dyZXAgIkNsZWFyZWQgZGlyZWN0b3J5IC5pbml0IiBhY3R1YWwgJiYKCXJtZGlyIGluaXQgZXhhbXBsZTIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIGRlaW5pdCBhYnNvcmJzIC5naXQgZGlyZWN0b3J5IGlmIC5naXQgaXMgYSBkaXJlY3RvcnknICcKCWdpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAmJgoJKAoJCWNkIGluaXQgJiYKCQlybSAuZ2l0ICYmCgkJbXYgLi4vLmdpdC9tb2R1bGVzL2V4YW1wbGUgLmdpdCAmJgoJCUdJVF9XT1JLX1RSRUU9LiBnaXQgY29uZmlnIC0tdW5zZXQgY29yZS53b3JrdHJlZQoJKSAmJgoJZ2l0IHN1Ym1vZHVsZSBkZWluaXQgaW5pdCAmJgoJdGVzdF9wYXRoX2lzX21pc3NpbmcgaW5pdC8uZ2l0ICYmCgl0ZXN0IC16ICIkKGdpdCBjb25maWcgLS1nZXQtcmVnZXhwICJzdWJtb2R1bGVcLmV4YW1wbGVcLiIpIgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgd2l0aCBVVEYtOCBuYW1lJyAnCglzdm5hbWU9JChwcmludGYgIlwzMDNcMjQ1IFwzMDNcMjQ0XDMwM1wyNjYiKSAmJgoJbWtkaXIgIiRzdm5hbWUiICYmCgkoCgkJY2QgIiRzdm5hbWUiICYmCgkJZ2l0IGluaXQgJiYKCQk+c3ViICYmCgkJZ2l0IGFkZCBzdWIgJiYKCQlnaXQgY29tbWl0IC1tICJpbml0IHN1YiIKCSkgJiYKCWdpdCBzdWJtb2R1bGUgYWRkIC4vIiRzdm5hbWUiICYmCglnaXQgc3VibW9kdWxlID4mMiAmJgoJdGVzdCAtbiAiJChnaXQgc3VibW9kdWxlIHwgZ3JlcCAiJHN2bmFtZSIpIgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgYWRkIGNsb25lIHNoYWxsb3cgc3VibW9kdWxlJyAnCglta2RpciBzdXBlciAmJgoJcHdkPSQocHdkKSAmJgoJKAoJCWNkIHN1cGVyICYmCgkJZ2l0IGluaXQgJiYKCQlnaXQgc3VibW9kdWxlIGFkZCAtLWRlcHRoPTEgZmlsZTovLyIkcHdkIi9leGFtcGxlMiBzdWJtb2R1bGUgJiYKCQkoCgkJCWNkIHN1Ym1vZHVsZSAmJgoJCQl0ZXN0IDEgPSAkKGdpdCBsb2cgLS1vbmVsaW5lIHwgd2MgLWwpCgkJKQoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCBzdXBlcnByb2plY3Qgd2l0aCBzdWJtb2R1bGVzJyAnCglnaXQgaW5pdCBzdWIxICYmCgl0ZXN0X2NvbW1pdCAtQyBzdWIxIHRlc3QgJiYKCXRlc3RfY29tbWl0IC1DIHN1YjEgdGVzdDIgJiYKCWdpdCBpbml0IG11bHRpc3VwZXIgJiYKCWdpdCAtQyBtdWx0aXN1cGVyIHN1Ym1vZHVsZSBhZGQgLi4vc3ViMSBzdWIwICYmCglnaXQgLUMgbXVsdGlzdXBlciBzdWJtb2R1bGUgYWRkIC4uL3N1YjEgc3ViMSAmJgoJZ2l0IC1DIG11bHRpc3VwZXIgc3VibW9kdWxlIGFkZCAuLi9zdWIxIHN1YjIgJiYKCWdpdCAtQyBtdWx0aXN1cGVyIHN1Ym1vZHVsZSBhZGQgLi4vc3ViMSBzdWIzICYmCglnaXQgLUMgbXVsdGlzdXBlciBjb21taXQgLW0gImFkZCBzb21lIHN1Ym1vZHVsZXMiCicKCmNhdCA+ZXhwZWN0IDw8LUVPRgotc3ViMAogc3ViMSAodGVzdDIpCiBzdWIyICh0ZXN0MikKIHN1YjMgKHRlc3QyKQpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3N1Ym1vZHVsZSB1cGRhdGUgLS1pbml0IHdpdGggYSBzcGVjaWZpY2F0aW9uJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBtdWx0aXN1cGVyX2Nsb25lIiAmJgoJcHdkPSQocHdkKSAmJgoJZ2l0IGNsb25lIGZpbGU6Ly8iJHB3ZCIvbXVsdGlzdXBlciBtdWx0aXN1cGVyX2Nsb25lICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAuICI6KGV4Y2x1ZGUpc3ViMCIgJiYKCWdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIHN1Ym1vZHVsZSBzdGF0dXMgfCBzZWQgInMvJE9JRF9SRUdFWCAvLyIgPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCB3aXRoIHN1Ym1vZHVsZS5hY3RpdmUgc2V0JyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBtdWx0aXN1cGVyX2Nsb25lIiAmJgoJcHdkPSQocHdkKSAmJgoJZ2l0IGNsb25lIGZpbGU6Ly8iJHB3ZCIvbXVsdGlzdXBlciBtdWx0aXN1cGVyX2Nsb25lICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgc3VibW9kdWxlLmFjdGl2ZSAiLiIgJiYKCWdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIGNvbmZpZyAtLWFkZCBzdWJtb2R1bGUuYWN0aXZlICI6KGV4Y2x1ZGUpc3ViMCIgJiYKCWdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIHN1Ym1vZHVsZSB1cGRhdGUgLS1pbml0ICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBzdWJtb2R1bGUgc3RhdHVzIHwgc2VkICJzLyRPSURfUkVHRVggLy8iID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc3VibW9kdWxlIHVwZGF0ZSBhbmQgc2V0dGluZyBzdWJtb2R1bGUuPG5hbWU+LmFjdGl2ZScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJybSAtcmYgbXVsdGlzdXBlcl9jbG9uZSIgJiYKCXB3ZD0kKHB3ZCkgJiYKCWdpdCBjbG9uZSBmaWxlOi8vIiRwd2QiL211bHRpc3VwZXIgbXVsdGlzdXBlcl9jbG9uZSAmJgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgY29uZmlnIC0tYm9vbCBzdWJtb2R1bGUuc3ViMC5hY3RpdmUgInRydWUiICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1ib29sIHN1Ym1vZHVsZS5zdWIxLmFjdGl2ZSAiZmFsc2UiICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1ib29sIHN1Ym1vZHVsZS5zdWIyLmFjdGl2ZSAidHJ1ZSIgJiYKCgljYXQgPmV4cGVjdCA8PC1cRU9GICYmCgkgc3ViMCAodGVzdDIpCgktc3ViMQoJIHN1YjIgKHRlc3QyKQoJLXN1YjMKCUVPRgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIHVwZGF0ZSAmJgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIHN0YXR1cyB8IHNlZCAicy8kT0lEX1JFR0VYIC8vIiA+YWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2Nsb25lIGFjdGl2ZSBzdWJtb2R1bGUgd2l0aG91dCBzdWJtb2R1bGUgdXJsIHNldCcgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJybSAtcmYgdGVzdC90ZXN0IiAmJgoJbWtkaXIgdGVzdCAmJgoJIyBhbm90aGVyIGRpciBicmVha3MgYWNjaWRlbnRhbCByZWxhdGl2ZSBwYXRocyBzdGlsbCBiZWluZyBjb3JyZWN0CglnaXQgY2xvbmUgZmlsZTovLyIkcHdkIi9tdWx0aXN1cGVyIHRlc3QvdGVzdCAmJgoJKAoJCWNkIHRlc3QvdGVzdCAmJgoJCWdpdCBjb25maWcgc3VibW9kdWxlLmFjdGl2ZSAiLiIgJiYKCgkJIyBkbyBub3QgcGFzcyAtLWluaXQgZmxhZywgYXMgdGhlIHN1Ym1vZHVsZSBpcyBhbHJlYWR5IGFjdGl2ZToKCQlnaXQgc3VibW9kdWxlIHVwZGF0ZSAmJgoJCWdpdCBzdWJtb2R1bGUgc3RhdHVzID5hY3R1YWxfcmF3ICYmCgoJCWN1dCAtZCIgIiAtZjMtIGFjdHVhbF9yYXcgPmFjdHVhbCAmJgoJCWNhdCA+ZXhwZWN0IDw8LVxFT0YgJiYKCQlzdWIwICh0ZXN0MikKCQlzdWIxICh0ZXN0MikKCQlzdWIyICh0ZXN0MikKCQlzdWIzICh0ZXN0MikKCQlFT0YKCQl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3VwZGF0ZSBzdWJtb2R1bGVzIHdpdGhvdXQgdXJsIHNldCBpbiAuZ2l0Y29uZmlnJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBtdWx0aXN1cGVyX2Nsb25lIiAmJgoJZ2l0IGNsb25lIGZpbGU6Ly8iJHB3ZCIvbXVsdGlzdXBlciBtdWx0aXN1cGVyX2Nsb25lICYmCgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIGluaXQgJiYKCWZvciBzIGluIHN1YjAgc3ViMSBzdWIyIHN1YjMKCWRvCgkJa2V5PXN1Ym1vZHVsZS4kcy51cmwgJiYKCQlnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1sb2NhbCAtLXVuc2V0ICRrZXkgJiYKCQlnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1maWxlIC5naXRtb2R1bGVzIC0tdW5zZXQgJGtleSB8fCByZXR1cm4gMQoJZG9uZSAmJgoKCXRlc3RfbXVzdF9mYWlsIGdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIHN1Ym1vZHVsZSB1cGRhdGUgMj5lcnIgJiYKCWdyZXAgImNhbm5vdCBjbG9uZSBzdWJtb2R1bGUgLnN1YlswLTNdLiB3aXRob3V0IGEgVVJMIiBlcnIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2xvbmUgLS1yZWN1cnNlLXN1Ym1vZHVsZXMgd2l0aCBhIHBhdGhzcGVjIHdvcmtzJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBtdWx0aXN1cGVyX2Nsb25lIiAmJgoJY2F0ID5leHBlY3RlZCA8PC1cRU9GICYmCgkgc3ViMCAodGVzdDIpCgktc3ViMQoJLXN1YjIKCS1zdWIzCglFT0YKCglnaXQgY2xvbmUgLS1yZWN1cnNlLXN1Ym1vZHVsZXM9InN1YjAiIG11bHRpc3VwZXIgbXVsdGlzdXBlcl9jbG9uZSAmJgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIHN0YXR1cyB8IHNlZCAicy8kT0lEX1JFR0VYIC8vIiA+YWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3RlZCBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2xvbmUgd2l0aCBtdWx0aXBsZSAtLXJlY3Vyc2Utc3VibW9kdWxlcyBvcHRpb25zJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBtdWx0aXN1cGVyX2Nsb25lIiAmJgoJY2F0ID5leHBlY3QgPDwtXEVPRiAmJgoJLXN1YjAKCSBzdWIxICh0ZXN0MikKCS1zdWIyCgkgc3ViMyAodGVzdDIpCglFT0YKCglnaXQgY2xvbmUgLS1yZWN1cnNlLXN1Ym1vZHVsZXM9Ii4iIFwKCQkgIC0tcmVjdXJzZS1zdWJtb2R1bGVzPSI6KGV4Y2x1ZGUpc3ViMCIgXAoJCSAgLS1yZWN1cnNlLXN1Ym1vZHVsZXM9IjooZXhjbHVkZSlzdWIyIiBcCgkJICBtdWx0aXN1cGVyIG11bHRpc3VwZXJfY2xvbmUgJiYKCWdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIHN1Ym1vZHVsZSBzdGF0dXMgfCBzZWQgInMvJE9JRF9SRUdFWCAvLyIgPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjbG9uZSBhbmQgc3Vic2VxdWVudCB1cGRhdGVzIGNvcnJlY3RseSBhdXRvLWluaXRpYWxpemUgc3VibW9kdWxlcycgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJybSAtcmYgbXVsdGlzdXBlcl9jbG9uZSIgJiYKCWNhdCA8PC1cRU9GID5leHBlY3QgJiYKCS1zdWIwCgkgc3ViMSAodGVzdDIpCgktc3ViMgoJIHN1YjMgKHRlc3QyKQoJRU9GCgoJY2F0IDw8LVxFT0YgPmV4cGVjdDIgJiYKCS1zdWIwCgkgc3ViMSAodGVzdDIpCgktc3ViMgoJIHN1YjMgKHRlc3QyKQoJLXN1YjQKCSBzdWI1ICh0ZXN0MikKCUVPRgoKCWdpdCBjbG9uZSAtLXJlY3Vyc2Utc3VibW9kdWxlcz0iLiIgXAoJCSAgLS1yZWN1cnNlLXN1Ym1vZHVsZXM9IjooZXhjbHVkZSlzdWIwIiBcCgkJICAtLXJlY3Vyc2Utc3VibW9kdWxlcz0iOihleGNsdWRlKXN1YjIiIFwKCQkgIC0tcmVjdXJzZS1zdWJtb2R1bGVzPSI6KGV4Y2x1ZGUpc3ViNCIgXAoJCSAgbXVsdGlzdXBlciBtdWx0aXN1cGVyX2Nsb25lICYmCgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIHN0YXR1cyB8IHNlZCAicy8kT0lEX1JFR0VYIC8vIiA+YWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgoJZ2l0IC1DIG11bHRpc3VwZXIgc3VibW9kdWxlIGFkZCAuLi9zdWIxIHN1YjQgJiYKCWdpdCAtQyBtdWx0aXN1cGVyIHN1Ym1vZHVsZSBhZGQgLi4vc3ViMSBzdWI1ICYmCglnaXQgLUMgbXVsdGlzdXBlciBjb21taXQgLW0gImFkZCBtb3JlIHN1Ym1vZHVsZXMiICYmCgkjIG9idGFpbiB0aGUgbmV3IHN1cGVycHJvamVjdAoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgcHVsbCAmJgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIHVwZGF0ZSAtLWluaXQgJiYKCWdpdCAtQyBtdWx0aXN1cGVyX2Nsb25lIHN1Ym1vZHVsZSBzdGF0dXMgfCBzZWQgInMvJE9JRF9SRUdFWCAvLyIgPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0MiBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnaW5pdCBwcm9wZXJseSBzZXRzIHRoZSBjb25maWcnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicm0gLXJmIG11bHRpc3VwZXJfY2xvbmUiICYmCglnaXQgY2xvbmUgLS1yZWN1cnNlLXN1Ym1vZHVsZXM9Ii4iIFwKCQkgIC0tcmVjdXJzZS1zdWJtb2R1bGVzPSI6KGV4Y2x1ZGUpc3ViMCIgXAoJCSAgbXVsdGlzdXBlciBtdWx0aXN1cGVyX2Nsb25lICYmCgoJZ2l0IC1DIG11bHRpc3VwZXJfY2xvbmUgc3VibW9kdWxlIGluaXQgLS0gc3ViMCBzdWIxICYmCglnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1nZXQgc3VibW9kdWxlLnN1YjAuYWN0aXZlICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgLUMgbXVsdGlzdXBlcl9jbG9uZSBjb25maWcgLS1nZXQgc3VibW9kdWxlLnN1YjEuYWN0aXZlCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlY3Vyc2l2ZSBjbG9uZSByZXNwZWN0cyAtcScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJybSAtcmYgbXVsdGlzdXBlcl9jbG9uZSIgJiYKCWdpdCBjbG9uZSAtcSAtLXJlY3Vyc2Utc3VibW9kdWxlcyBtdWx0aXN1cGVyIG11bHRpc3VwZXJfY2xvbmUgPmFjdHVhbCAmJgoJdGVzdF9tdXN0X2JlX2VtcHR5IGFjdHVhbAonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2007 Lars Hjemli\n#\n\ntest_description='Basic porcelain support for submodules\n\nThis test tries to verify basic sanity of the init, update and status\nsubcommands of git submodule.\n'\n\nGIT_TEST_DEFAULT_INITIAL_BRANCH_NAME=main\nexport GIT_TEST_DEFAULT_INITIAL_BRANCH_NAME\n\n. ./test-lib.sh\n\ntest_expect_success 'setup - enable local submodules' '\n\tgit config --global protocol.file.allow always\n'\n\ntest_expect_success 'submodule usage: -h' '\n\tgit submodule -h >out 2>err &&\n\tgrep \"^usage: git submodule\" out &&\n\ttest_must_be_empty err\n'\n\ntest_expect_success 'submodule usage: --recursive' '\n\ttest_expect_code 1 git submodule --recursive >out 2>err &&\n\tgrep \"^usage: git submodule\" err &&\n\ttest_must_be_empty out\n'\n\ntest_expect_success 'submodule usage: status --' '\n\ttest_expect_code 1 git submodule -- &&\n\ttest_expect_code 1 git submodule --end-of-options\n'\n\nfor opt in '--quiet' '--cached'\ndo\n\ttest_expect_success \"submodule usage: status $opt\" '\n\t\tgit submodule $opt &&\n\t\tgit submodule status $opt &&\n\t\tgit submodule $opt status\n\t'\ndone\n\ntest_expect_success 'submodule deinit works on empty repository' '\n\tgit submodule deinit --all\n'\n\ntest_expect_success 'setup - initial commit' '\n\t>t &&\n\tgit add t &&\n\tgit commit -m \"initial commit\" &&\n\tgit branch initial\n'\n\ntest_expect_success 'submodule init aborts on missing .gitmodules file' '\n\ttest_when_finished \"git update-index --remove sub\" &&\n\tgit update-index --add --cacheinfo 160000,$(git rev-parse HEAD),sub &&\n\t# missing the .gitmodules file here\n\ttest_must_fail git submodule init 2>actual &&\n\ttest_grep \"No url found for submodule path\" actual\n'\n\ntest_expect_success 'submodule update aborts on missing .gitmodules file' '\n\ttest_when_finished \"git update-index --remove sub\" &&\n\tgit update-index --add --cacheinfo 160000,$(git rev-parse HEAD),sub &&\n\t# missing the .gitmodules file here\n\tgit submodule update sub 2>actual &&\n\ttest_grep \"Submodule path .sub. not initialized\" actual\n'\n\ntest_expect_success 'submodule update aborts on missing gitmodules url' '\n\ttest_when_finished \"git update-index --remove sub\" &&\n\tgit update-index --add --cacheinfo 160000,$(git rev-parse HEAD),sub &&\n\ttest_when_finished \"rm -f .gitmodules\" &&\n\tgit config -f .gitmodules submodule.s.path sub &&\n\ttest_must_fail git submodule init\n'\n\ntest_expect_success 'add aborts on repository with no commits' '\n\tcat >expect <<-\\EOF &&\n\tfatal: '\"'repo-no-commits'\"' does not have a commit checked out\n\tEOF\n\tgit init repo-no-commits &&\n\ttest_must_fail git submodule add ../a ./repo-no-commits 2>actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'status should ignore inner git repo when not added' '\n\trm -fr inner &&\n\tmkdir inner &&\n\t(\n\t\tcd inner &&\n\t\tgit init &&\n\t\t>t &&\n\t\tgit add t &&\n\t\tgit commit -m \"initial\"\n\t) &&\n\ttest_must_fail git submodule status inner 2>output.err &&\n\trm -fr inner &&\n\ttest_grep \"^error: .*did not match any file(s) known to git\" output.err\n'\n\ntest_expect_success 'setup - repository in init subdirectory' '\n\tmkdir init &&\n\t(\n\t\tcd init &&\n\t\tgit init &&\n\t\techo a >a &&\n\t\tgit add a &&\n\t\tgit commit -m \"submodule commit 1\" &&\n\t\tgit tag -a -m \"rev-1\" rev-1\n\t)\n'\n\ntest_expect_success 'setup - commit with gitlink' '\n\techo a >a &&\n\techo z >z &&\n\tgit add a init z &&\n\tgit commit -m \"super commit 1\"\n'\n\ntest_expect_success 'setup - hide init subdirectory' '\n\tmv init .subrepo\n'\n\ntest_expect_success 'setup - repository to add submodules to' '\n\tgit init addtest &&\n\tgit init addtest-ignore\n'\n\n# The 'submodule add' tests need some repository to add as a submodule.\n# The trash directory is a good one as any. We need to canonicalize\n# the name, though, as some tests compare it to the absolute path git\n# generates, which will expand symbolic links.\nsubmodurl=$(pwd -P)\n\nlistbranches() {\n\tgit for-each-ref --format='%(refname)' 'refs/heads/*'\n}\n\ninspect() {\n\tdir=$1 &&\n\tdotdot=\"${2:-..}\" &&\n\n\t(\n\t\tcd \"$dir\" &&\n\t\tlistbranches >\"$dotdot/heads\" &&\n\t\t{ git symbolic-ref HEAD || :; } >\"$dotdot/head\" &&\n\t\tgit rev-parse HEAD >\"$dotdot/head-sha1\" &&\n\t\tgit update-index --refresh &&\n\t\tgit diff-files --exit-code &&\n\t\tgit clean -n -d -x >\"$dotdot/untracked\"\n\t)\n}\n\ntest_expect_success 'submodule add' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add -q \"$submodurl\" submod >actual &&\n\t\ttest_must_be_empty actual &&\n\t\techo \"gitdir: ../.git/modules/submod\" >expect &&\n\t\ttest_cmp expect submod/.git &&\n\t\t(\n\t\t\tcd submod &&\n\t\t\tgit config core.worktree >actual &&\n\t\t\techo \"../../../submod\" >expect &&\n\t\t\ttest_cmp expect actual &&\n\t\t\trm -f actual expect\n\t\t) &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/submod ../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success !WINDOWS 'submodule add (absolute path)' '\n\ttest_when_finished \"git reset --hard\" &&\n\tgit submodule add \"$submodurl\" \"$submodurl/add-abs\"\n'\n\ntest_expect_success 'setup parent and one repository' '\n\ttest_create_repo parent &&\n\ttest_commit -C parent one\n'\n\ntest_expect_success 'redirected submodule add does not show progress' '\n\tgit -C addtest submodule add \"file://$submodurl/parent\" submod-redirected \\\n\t\t2>err &&\n\t! grep % err &&\n\ttest_grep ! \"Checking connectivity\" err\n'\n\ntest_expect_success 'redirected submodule add --progress does show progress' '\n\tgit -C addtest submodule add --progress \"file://$submodurl/parent\" \\\n\t\tsubmod-redirected-progress 2>err && \\\n\tgrep % err\n'\n\ntest_expect_success 'submodule add to .gitignored path fails' '\n\t(\n\t\tcd addtest-ignore &&\n\t\tcat <<-\\EOF >expect &&\n\t\tThe following paths are ignored by one of your .gitignore files:\n\t\tsubmod\n\t\thint: Use -f if you really want to add them.\n\t\thint: Turn this message off by running\n\t\thint: \"git config advice.addIgnoredFile false\"\n\t\tEOF\n\t\t# Does not use test_commit due to the ignore\n\t\techo \"*\" > .gitignore &&\n\t\tgit add --force .gitignore &&\n\t\tgit commit -m\"Ignore everything\" &&\n\t\t! git submodule add \"$submodurl\" submod >actual 2>&1 &&\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'submodule add to .gitignored path with --force' '\n\t(\n\t\tcd addtest-ignore &&\n\t\tgit submodule add --force \"$submodurl\" submod\n\t)\n'\n\ntest_expect_success 'submodule add to path with tracked content fails' '\n\t(\n\t\tcd addtest &&\n\t\techo \"fatal: '\\''dir-tracked'\\'' already exists in the index\" >expect &&\n\t\tmkdir dir-tracked &&\n\t\ttest_commit foo dir-tracked/bar &&\n\t\ttest_must_fail git submodule add \"$submodurl\" dir-tracked >actual 2>&1 &&\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'submodule add to reconfigure existing submodule with --force' '\n\t(\n\t\tcd addtest-ignore &&\n\t\tbogus_url=\"$(pwd)/bogus-url\" &&\n\t\tgit submodule add --force \"$bogus_url\" submod &&\n\t\tgit submodule add --force -b initial \"$submodurl\" submod-branch &&\n\t\ttest \"$bogus_url\" = \"$(git config -f .gitmodules submodule.submod.url)\" &&\n\t\ttest \"$bogus_url\" = \"$(git config submodule.submod.url)\" &&\n\t\t# Restore the url\n\t\tgit submodule add --force \"$submodurl\" submod &&\n\t\ttest \"$submodurl\" = \"$(git config -f .gitmodules submodule.submod.url)\" &&\n\t\ttest \"$submodurl\" = \"$(git config submodule.submod.url)\"\n\t)\n'\n\ntest_expect_success 'submodule add relays add --dry-run stderr' '\n\ttest_when_finished \"rm -rf addtest/.git/index.lock\" &&\n\t(\n\t\tcd addtest &&\n\t\t: >.git/index.lock &&\n\t\t! git submodule add \"$submodurl\" sub-while-locked 2>output.err &&\n\t\ttest_grep \"^fatal: .*index\\.lock\" output.err &&\n\t\ttest_path_is_missing sub-while-locked\n\t)\n'\n\ntest_expect_success 'submodule add --branch' '\n\techo \"refs/heads/initial\" >expect-head &&\n\tcat <<-\\EOF >expect-heads &&\n\trefs/heads/initial\n\trefs/heads/main\n\tEOF\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add -b initial \"$submodurl\" submod-branch &&\n\t\ttest \"initial\" = \"$(git config -f .gitmodules submodule.submod-branch.branch)\" &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/submod-branch ../.. &&\n\ttest_cmp expect-heads heads &&\n\ttest_cmp expect-head head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add with ./ in path' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl\" ././dotsubmod/./frotz/./ &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/dotsubmod/frotz ../../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add with /././ in path' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl\" dotslashdotsubmod/././frotz/./ &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/dotslashdotsubmod/frotz ../../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add with // in path' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl\" slashslashsubmod///frotz// &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/slashslashsubmod/frotz ../../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add with /.. in path' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl\" dotdotsubmod/../realsubmod/frotz/.. &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/realsubmod ../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add with ./, /.. and // in path' '\n\techo \"refs/heads/main\" >expect &&\n\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl\" dot/dotslashsubmod/./../..////realsubmod2/a/b/c/d/../../../../frotz//.. &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/realsubmod2 ../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success !CYGWIN 'submodule add with \\\\ in path' '\n\ttest_when_finished \"rm -rf parent sub\\\\with\\\\backslash\" &&\n\n\t# Initialize a repo with a backslash in its name\n\tgit init sub\\\\with\\\\backslash &&\n\ttouch sub\\\\with\\\\backslash/empty.file &&\n\tgit -C sub\\\\with\\\\backslash add empty.file &&\n\tgit -C sub\\\\with\\\\backslash commit -m \"Added empty.file\" &&\n\n\t# Add that repository as a submodule\n\tgit init parent &&\n\tgit -C parent submodule add ../sub\\\\with\\\\backslash\n'\n\ntest_expect_success 'submodule add in subdirectory' '\n\techo \"refs/heads/main\" >expect &&\n\n\tmkdir addtest/sub &&\n\t(\n\t\tcd addtest/sub &&\n\t\tgit submodule add \"$submodurl\" ../realsubmod3 &&\n\t\tgit submodule init\n\t) &&\n\n\trm -f heads head untracked &&\n\tinspect addtest/realsubmod3 ../.. &&\n\ttest_cmp expect heads &&\n\ttest_cmp expect head &&\n\ttest_must_be_empty untracked\n'\n\ntest_expect_success 'submodule add in subdirectory with relative path should fail' '\n\t(\n\t\tcd addtest/sub &&\n\t\ttest_must_fail git submodule add ../../ submod3 2>../../output.err\n\t) &&\n\ttest_grep toplevel output.err\n'\n\ntest_expect_success 'setup - add an example entry to .gitmodules' '\n\tgit config --file=.gitmodules submodule.example.url git://example.com/init.git\n'\n\ntest_expect_success 'status should fail for unmapped paths' '\n\ttest_must_fail git submodule status\n'\n\ntest_expect_success 'setup - map path in .gitmodules' '\n\tcat <<\\EOF >expect &&\n[submodule \"example\"]\n\turl = git://example.com/init.git\n\tpath = init\nEOF\n\n\tgit config --file=.gitmodules submodule.example.path init &&\n\n\ttest_cmp expect .gitmodules\n'\n\ntest_expect_success 'status should only print one line' '\n\tgit submodule status >lines &&\n\ttest_line_count = 1 lines\n'\n\ntest_expect_success 'status from subdirectory should have the same SHA1' '\n\ttest_when_finished \"rmdir addtest/subdir\" &&\n\t(\n\t\tcd addtest &&\n\t\tmkdir subdir &&\n\t\tgit submodule status >output &&\n\t\tawk \"{print \\$1}\" <output >expect &&\n\t\tcd subdir &&\n\t\tgit submodule status >../output &&\n\t\tawk \"{print \\$1}\" <../output >../actual &&\n\t\ttest_cmp ../expect ../actual &&\n\t\tgit -C ../submod checkout HEAD^ &&\n\t\tgit submodule status >../output &&\n\t\tawk \"{print \\$1}\" <../output >../actual2 &&\n\t\tcd .. &&\n\t\tgit submodule status >output &&\n\t\tawk \"{print \\$1}\" <output >expect2 &&\n\t\ttest_cmp expect2 actual2 &&\n\t\t! test_cmp actual actual2\n\t)\n'\n\ntest_expect_success 'setup - fetch commit name from submodule' '\n\trev1=$(cd .subrepo && git rev-parse HEAD) &&\n\tprintf \"rev1: %s\\n\" \"$rev1\" &&\n\ttest -n \"$rev1\"\n'\n\ntest_expect_success 'status should initially be \"missing\"' '\n\tgit submodule status >lines &&\n\tgrep \"^-$rev1\" lines\n'\n\ntest_expect_success 'init should register submodule url in .git/config' '\n\techo git://example.com/init.git >expect &&\n\n\tgit submodule init &&\n\tgit config submodule.example.url >url &&\n\tgit config submodule.example.url ./.subrepo &&\n\n\ttest_cmp expect url\n'\n\ntest_expect_success 'status should still be \"missing\" after initializing' '\n\trm -fr init &&\n\tmkdir init &&\n\tgit submodule status >lines &&\n\trm -fr init &&\n\tgrep \"^-$rev1\" lines\n'\n\ntest_failure_with_unknown_submodule () {\n\ttest_must_fail git submodule $1 no-such-submodule 2>output.err &&\n\ttest_grep \"^error: .*no-such-submodule\" output.err\n}\n\ntest_expect_success 'init should fail with unknown submodule' '\n\ttest_failure_with_unknown_submodule init\n'\n\ntest_expect_success 'update should fail with unknown submodule' '\n\ttest_failure_with_unknown_submodule update\n'\n\ntest_expect_success 'status should fail with unknown submodule' '\n\ttest_failure_with_unknown_submodule status\n'\n\ntest_expect_success 'sync should fail with unknown submodule' '\n\ttest_failure_with_unknown_submodule sync\n'\n\ntest_expect_success 'update should fail when path is used by a file' '\n\techo hello >expect &&\n\n\techo \"hello\" >init &&\n\ttest_must_fail git submodule update &&\n\n\ttest_cmp expect init\n'\n\ntest_expect_success 'update should fail when path is used by a nonempty directory' '\n\techo hello >expect &&\n\n\trm -fr init &&\n\tmkdir init &&\n\techo \"hello\" >init/a &&\n\n\ttest_must_fail git submodule update &&\n\n\ttest_cmp expect init/a\n'\n\ntest_expect_success 'update should work when path is an empty dir' '\n\trm -fr init &&\n\trm -f head-sha1 &&\n\techo \"$rev1\" >expect &&\n\n\tmkdir init &&\n\tgit submodule update -q >update.out &&\n\ttest_must_be_empty update.out &&\n\n\tinspect init &&\n\ttest_cmp expect head-sha1\n'\n\ntest_expect_success 'status should be \"up-to-date\" after update' '\n\tgit submodule status >list &&\n\tgrep \"^ $rev1\" list\n'\n\ntest_expect_success 'status \"up-to-date\" from subdirectory' '\n\tmkdir -p sub &&\n\t(\n\t\tcd sub &&\n\t\tgit submodule status >../list\n\t) &&\n\tgrep \"^ $rev1\" list &&\n\tgrep \"\\\\.\\\\./init\" list\n'\n\ntest_expect_success 'status \"up-to-date\" from subdirectory with path' '\n\tmkdir -p sub &&\n\t(\n\t\tcd sub &&\n\t\tgit submodule status ../init >../list\n\t) &&\n\tgrep \"^ $rev1\" list &&\n\tgrep \"\\\\.\\\\./init\" list\n'\n\ntest_expect_success 'status should be \"modified\" after submodule commit' '\n\t(\n\t\tcd init &&\n\t\techo b >b &&\n\t\tgit add b &&\n\t\tgit commit -m \"submodule commit 2\"\n\t) &&\n\n\trev2=$(cd init && git rev-parse HEAD) &&\n\ttest -n \"$rev2\" &&\n\tgit submodule status >list &&\n\n\tgrep \"^+$rev2\" list\n'\n\ntest_expect_success '\"submodule --cached\" command forms should be identical' '\n\tgit submodule status --cached >expect &&\n\n\tgit submodule --cached >actual &&\n\ttest_cmp expect actual &&\n\n\tgit submodule --cached status >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'the --cached sha1 should be rev1' '\n\tgit submodule --cached status >list &&\n\tgrep \"^+$rev1\" list\n'\n\ntest_expect_success 'git diff should report the SHA1 of the new submodule commit' '\n\tgit diff >diff &&\n\tgrep \"^+Subproject commit $rev2\" diff\n'\n\ntest_expect_success 'update should checkout rev1' '\n\trm -f head-sha1 &&\n\techo \"$rev1\" >expect &&\n\n\tgit submodule update init &&\n\tinspect init &&\n\n\ttest_cmp expect head-sha1\n'\n\ntest_expect_success 'status should be \"up-to-date\" after update' '\n\tgit submodule status >list &&\n\tgrep \"^ $rev1\" list\n'\n\ntest_expect_success 'checkout superproject with subproject already present' '\n\tgit checkout initial &&\n\tgit checkout main\n'\n\ntest_expect_success 'apply submodule diff' '\n\tgit branch second &&\n\t(\n\t\tcd init &&\n\t\techo s >s &&\n\t\tgit add s &&\n\t\tgit commit -m \"change subproject\"\n\t) &&\n\tgit update-index --add init &&\n\tgit commit -m \"change init\" &&\n\tgit format-patch -1 --stdout >P.diff &&\n\tgit checkout second &&\n\tgit apply --index P.diff &&\n\n\tgit diff --cached main >staged &&\n\ttest_must_be_empty staged\n'\n\ntest_expect_success 'update --init' '\n\tmv init init2 &&\n\tgit config -f .gitmodules submodule.example.url \"$(pwd)/init2\" &&\n\tgit config --remove-section submodule.example &&\n\ttest_must_fail git config submodule.example.url &&\n\n\tgit submodule update init 2> update.out &&\n\ttest_grep \"not initialized\" update.out &&\n\ttest_must_fail git rev-parse --resolve-git-dir init/.git &&\n\n\tgit submodule update --init init &&\n\tgit rev-parse --resolve-git-dir init/.git\n'\n\ntest_expect_success 'update --init from subdirectory' '\n\tmv init init2 &&\n\tgit config -f .gitmodules submodule.example.url \"$(pwd)/init2\" &&\n\tgit config --remove-section submodule.example &&\n\ttest_must_fail git config submodule.example.url &&\n\n\tmkdir -p sub &&\n\t(\n\t\tcd sub &&\n\t\tgit submodule update ../init 2>update.out &&\n\t\ttest_grep \"not initialized\" update.out &&\n\t\ttest_must_fail git rev-parse --resolve-git-dir ../init/.git &&\n\n\t\tgit submodule update --init ../init\n\t) &&\n\tgit rev-parse --resolve-git-dir init/.git\n'\n\ntest_expect_success 'do not add files from a submodule' '\n\n\tgit reset --hard &&\n\ttest_must_fail git add init/a\n\n'\n\ntest_expect_success 'gracefully add/reset submodule with a trailing slash' '\n\n\tgit reset --hard &&\n\tgit commit -m \"commit subproject\" init &&\n\t(cd init &&\n\t echo b > a) &&\n\tgit add init/ &&\n\tgit diff --exit-code --cached init &&\n\tcommit=$(cd init &&\n\t git commit -m update a >/dev/null &&\n\t git rev-parse HEAD) &&\n\tgit add init/ &&\n\ttest_must_fail git diff --exit-code --cached init &&\n\ttest $commit = $(git ls-files --stage |\n\t\tsed -n \"s/^160000 \\([^ ]*\\).*/\\1/p\") &&\n\tgit reset init/ &&\n\tgit diff --exit-code --cached init\n\n'\n\ntest_expect_success 'ls-files gracefully handles trailing slash' '\n\n\ttest \"init\" = \"$(git ls-files init/)\"\n\n'\n\ntest_expect_success 'moving to a commit without submodule does not leave empty dir' '\n\trm -rf init &&\n\tmkdir init &&\n\tgit reset --hard &&\n\tgit checkout initial &&\n\ttest ! -d init &&\n\tgit checkout second\n'\n\ntest_expect_success 'submodule <invalid-subcommand> fails' '\n\ttest_must_fail git submodule no-such-subcommand\n'\n\ntest_expect_success 'add submodules without specifying an explicit path' '\n\tmkdir repo &&\n\t(\n\t\tcd repo &&\n\t\tgit init &&\n\t\techo r >r &&\n\t\tgit add r &&\n\t\tgit commit -m \"repo commit 1\"\n\t) &&\n\tgit clone --bare repo/ bare.git &&\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add \"$submodurl/repo\" &&\n\t\tgit config -f .gitmodules submodule.repo.path repo &&\n\t\tgit submodule add \"$submodurl/bare.git\" &&\n\t\tgit config -f .gitmodules submodule.bare.path bare\n\t)\n'\n\ntest_expect_success 'add should fail when path is used by a file' '\n\t(\n\t\tcd addtest &&\n\t\ttouch file &&\n\t\ttest_must_fail\tgit submodule add \"$submodurl/repo\" file\n\t)\n'\n\ntest_expect_success 'add should fail when path is used by an existing directory' '\n\t(\n\t\tcd addtest &&\n\t\tmkdir empty-dir &&\n\t\ttest_must_fail git submodule add \"$submodurl/repo\" empty-dir\n\t)\n'\n\ntest_expect_success 'use superproject as upstream when path is relative and no url is set there' '\n\t(\n\t\tcd addtest &&\n\t\tgit submodule add ../repo relative &&\n\t\ttest \"$(git config -f .gitmodules submodule.relative.url)\" = ../repo &&\n\t\tgit submodule sync relative &&\n\t\ttest \"$(git config submodule.relative.url)\" = \"$submodurl/repo\"\n\t)\n'\n\ntest_expect_success 'set up for relative path tests' '\n\tmkdir reltest &&\n\t(\n\t\tcd reltest &&\n\t\tgit init &&\n\t\tmkdir sub &&\n\t\t(\n\t\t\tcd sub &&\n\t\t\tgit init &&\n\t\t\ttest_commit foo\n\t\t) &&\n\t\tgit add sub &&\n\t\tgit config -f .gitmodules submodule.sub.path sub &&\n\t\tgit config -f .gitmodules submodule.sub.url ../subrepo &&\n\t\tcp .git/config pristine-.git-config &&\n\t\tcp .gitmodules pristine-.gitmodules\n\t)\n'\n\ntest_expect_success '../subrepo works with URL - ssh://hostname/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ssh://hostname/repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = ssh://hostname/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with port-qualified URL - ssh://hostname:22/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ssh://hostname:22/repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = ssh://hostname:22/subrepo\n\t)\n'\n\n# About the choice of the path in the next test:\n# - double-slash side-steps path mangling issues on Windows\n# - it is still an absolute local path\n# - there cannot be a server with a blank in its name just in case the\n#   path is used erroneously to access a //server/share style path\ntest_expect_success '../subrepo path works with local path - //somewhere else/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url \"//somewhere else/repo\" &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = \"//somewhere else/subrepo\"\n\t)\n'\n\ntest_expect_success '../subrepo works with file URL - file:///tmp/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url file:///tmp/repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = file:///tmp/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with helper URL- helper:://hostname/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url helper:://hostname/repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = helper:://hostname/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with scp-style URL - user@host:repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tgit config remote.origin.url user@host:repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = user@host:subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with scp-style URL - user@host:path/to/repo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url user@host:path/to/repo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = user@host:path/to/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - foo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url foo &&\n\t\t# actual: fails with an error\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - foo/bar' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url foo/bar &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = foo/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - ./foo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ./foo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - ./foo/bar' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ./foo/bar &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = foo/subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - ../foo' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ../foo &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = ../subrepo\n\t)\n'\n\ntest_expect_success '../subrepo works with relative local path - ../foo/bar' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tgit config remote.origin.url ../foo/bar &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.sub.url)\" = ../foo/subrepo\n\t)\n'\n\ntest_expect_success '../bar/a/b/c works with relative local path - ../foo/bar.git' '\n\t(\n\t\tcd reltest &&\n\t\tcp pristine-.git-config .git/config &&\n\t\tcp pristine-.gitmodules .gitmodules &&\n\t\tmkdir -p a/b/c &&\n\t\t(cd a/b/c && git init && test_commit msg) &&\n\t\tgit config remote.origin.url ../foo/bar.git &&\n\t\tgit submodule add ../bar/a/b/c ./a/b/c &&\n\t\tgit submodule init &&\n\t\ttest \"$(git config submodule.a/b/c.url)\" = ../foo/bar/a/b/c\n\t)\n'\n\ntest_expect_success 'moving the superproject does not break submodules' '\n\t(\n\t\tcd addtest &&\n\t\tgit submodule status >expect\n\t) &&\n\tmv addtest addtest2 &&\n\t(\n\t\tcd addtest2 &&\n\t\tgit submodule status >actual &&\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'moving the submodule does not break the superproject' '\n\t(\n\t\tcd addtest2 &&\n\t\tgit submodule status\n\t) >actual &&\n\tsed -e \"s/^ \\([^ ]* repo\\) .*/-\\1/\" <actual >expect &&\n\tmv addtest2/repo addtest2/repo.bak &&\n\ttest_when_finished \"mv addtest2/repo.bak addtest2/repo\" &&\n\t(\n\t\tcd addtest2 &&\n\t\tgit submodule status\n\t) >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'submodule add --name allows to replace a submodule with another at the same path' '\n\t(\n\t\tcd addtest2 &&\n\t\t(\n\t\t\tcd repo &&\n\t\t\techo \"$submodurl/repo\" >expect &&\n\t\t\tgit config remote.origin.url >actual &&\n\t\t\ttest_cmp expect actual &&\n\t\t\techo \"gitdir: ../.git/modules/repo\" >expect &&\n\t\t\ttest_cmp expect .git\n\t\t) &&\n\t\trm -rf repo &&\n\t\tgit rm repo &&\n\t\tgit submodule add -q --name repo_new \"$submodurl/bare.git\" repo >actual &&\n\t\ttest_must_be_empty actual &&\n\t\techo \"gitdir: ../.git/modules/submod\" >expect &&\n\t\ttest_cmp expect submod/.git &&\n\t\t(\n\t\t\tcd repo &&\n\t\t\techo \"$submodurl/bare.git\" >expect &&\n\t\t\tgit config remote.origin.url >actual &&\n\t\t\ttest_cmp expect actual &&\n\t\t\techo \"gitdir: ../.git/modules/repo_new\" >expect &&\n\t\t\ttest_cmp expect .git\n\t\t) &&\n\t\techo \"repo\" >expect &&\n\t\ttest_must_fail git config -f .gitmodules submodule.repo.path &&\n\t\tgit config -f .gitmodules submodule.repo_new.path >actual &&\n\t\ttest_cmp expect actual &&\n\t\techo \"$submodurl/repo\" >expect &&\n\t\ttest_must_fail git config -f .gitmodules submodule.repo.url &&\n\t\techo \"$submodurl/bare.git\" >expect &&\n\t\tgit config -f .gitmodules submodule.repo_new.url >actual &&\n\t\ttest_cmp expect actual &&\n\t\techo \"$submodurl/repo\" >expect &&\n\t\tgit config submodule.repo.url >actual &&\n\t\ttest_cmp expect actual &&\n\t\techo \"$submodurl/bare.git\" >expect &&\n\t\tgit config submodule.repo_new.url >actual &&\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'recursive relative submodules stay relative' '\n\ttest_when_finished \"rm -rf super clone2 subsub sub3\" &&\n\tmkdir subsub &&\n\t(\n\t\tcd subsub &&\n\t\tgit init &&\n\t\t>t &&\n\t\tgit add t &&\n\t\tgit commit -m \"initial commit\"\n\t) &&\n\tmkdir sub3 &&\n\t(\n\t\tcd sub3 &&\n\t\tgit init &&\n\t\t>t &&\n\t\tgit add t &&\n\t\tgit commit -m \"initial commit\" &&\n\t\tgit submodule add ../subsub dirdir/subsub &&\n\t\tgit commit -m \"add submodule subsub\"\n\t) &&\n\tmkdir super &&\n\t(\n\t\tcd super &&\n\t\tgit init &&\n\t\t>t &&\n\t\tgit add t &&\n\t\tgit commit -m \"initial commit\" &&\n\t\tgit submodule add ../sub3 &&\n\t\tgit commit -m \"add submodule sub\"\n\t) &&\n\tgit clone super clone2 &&\n\t(\n\t\tcd clone2 &&\n\t\tgit submodule update --init --recursive &&\n\t\techo \"gitdir: ../.git/modules/sub3\" >./sub3/.git_expect &&\n\t\techo \"gitdir: ../../../.git/modules/sub3/modules/dirdir/subsub\" >./sub3/dirdir/subsub/.git_expect\n\t) &&\n\ttest_cmp clone2/sub3/.git_expect clone2/sub3/.git &&\n\ttest_cmp clone2/sub3/dirdir/subsub/.git_expect clone2/sub3/dirdir/subsub/.git\n'\n\ntest_expect_success 'submodule add with an existing name fails unless forced' '\n\t(\n\t\tcd addtest2 &&\n\t\trm -rf repo &&\n\t\tgit rm repo &&\n\t\ttest_must_fail git submodule add -q --name repo_new \"$submodurl/repo.git\" repo &&\n\t\ttest ! -d repo &&\n\t\ttest_must_fail git config -f .gitmodules submodule.repo_new.path &&\n\t\ttest_must_fail git config -f .gitmodules submodule.repo_new.url &&\n\t\techo \"$submodurl/bare.git\" >expect &&\n\t\tgit config submodule.repo_new.url >actual &&\n\t\ttest_cmp expect actual &&\n\t\tgit submodule add -f -q --name repo_new \"$submodurl/repo.git\" repo &&\n\t\ttest -d repo &&\n\t\techo \"repo\" >expect &&\n\t\tgit config -f .gitmodules submodule.repo_new.path >actual &&\n\t\ttest_cmp expect actual &&\n\t\techo \"$submodurl/repo.git\" >expect &&\n\t\tgit config -f .gitmodules submodule.repo_new.url >actual &&\n\t\ttest_cmp expect actual &&\n\t\techo \"$submodurl/repo.git\" >expect &&\n\t\tgit config submodule.repo_new.url >actual &&\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'set up a second submodule' '\n\tgit submodule add ./init2 example2 &&\n\tgit commit -m \"submodule example2 added\"\n'\n\ntest_expect_success 'submodule deinit works on repository without submodules' '\n\ttest_when_finished \"rm -rf newdirectory\" &&\n\tmkdir newdirectory &&\n\t(\n\t\tcd newdirectory &&\n\t\tgit init &&\n\t\t>file &&\n\t\tgit add file &&\n\t\tgit commit -m \"repo should not be empty\" &&\n\t\tgit submodule deinit . &&\n\t\tgit submodule deinit --all\n\t)\n'\n\ntest_expect_success 'submodule deinit should remove the whole submodule section from .git/config' '\n\tgit config submodule.example.foo bar &&\n\tgit config submodule.example2.frotz nitfol &&\n\tgit submodule deinit init &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -n \"$(git config --get-regexp \"submodule\\.example2\\.\")\" &&\n\ttest -f example2/.git &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit should unset core.worktree' '\n\ttest_path_is_file .git/modules/example/config &&\n\ttest_must_fail git config -f .git/modules/example/config core.worktree\n'\n\ntest_expect_success 'submodule deinit from subdirectory' '\n\tgit submodule update --init &&\n\tgit config submodule.example.foo bar &&\n\tmkdir -p sub &&\n\t(\n\t\tcd sub &&\n\t\tgit submodule deinit ../init >../output\n\t) &&\n\ttest_grep \"\\\\.\\\\./init\" output &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -n \"$(git config --get-regexp \"submodule\\.example2\\.\")\" &&\n\ttest -f example2/.git &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit . deinits all initialized submodules' '\n\tgit submodule update --init &&\n\tgit config submodule.example.foo bar &&\n\tgit config submodule.example2.frotz nitfol &&\n\ttest_must_fail git submodule deinit &&\n\tgit submodule deinit . >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example2\\.\")\" &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\ttest_grep \"Cleared directory .example2\" actual &&\n\trmdir init example2\n'\n\ntest_expect_success 'submodule deinit --all deinits all initialized submodules' '\n\tgit submodule update --init &&\n\tgit config submodule.example.foo bar &&\n\tgit config submodule.example2.frotz nitfol &&\n\ttest_must_fail git submodule deinit &&\n\tgit submodule deinit --all >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example2\\.\")\" &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\ttest_grep \"Cleared directory .example2\" actual &&\n\trmdir init example2\n'\n\ntest_expect_success 'submodule deinit deinits a submodule when its work tree is missing or empty' '\n\tgit submodule update --init &&\n\trm -rf init example2/* example2/.git &&\n\tgit submodule deinit init example2 >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example2\\.\")\" &&\n\ttest_grep ! \"Cleared directory .init\" actual &&\n\ttest_grep \"Cleared directory .example2\" actual &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit fails when the submodule contains modifications unless forced' '\n\tgit submodule update --init &&\n\techo X >>init/s &&\n\ttest_must_fail git submodule deinit init &&\n\ttest -n \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -f example2/.git &&\n\tgit submodule deinit -f init >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit fails when the submodule contains untracked files unless forced' '\n\tgit submodule update --init &&\n\techo X >>init/untracked &&\n\ttest_must_fail git submodule deinit init &&\n\ttest -n \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -f example2/.git &&\n\tgit submodule deinit -f init >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit fails when the submodule HEAD does not match unless forced' '\n\tgit submodule update --init &&\n\t(\n\t\tcd init &&\n\t\tgit checkout HEAD^\n\t) &&\n\ttest_must_fail git submodule deinit init &&\n\ttest -n \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest -f example2/.git &&\n\tgit submodule deinit -f init >actual &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\" &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\trmdir init\n'\n\ntest_expect_success 'submodule deinit is silent when used on an uninitialized submodule' '\n\tgit submodule update --init &&\n\tgit submodule deinit init >actual &&\n\ttest_grep \"Submodule .example. (.*) unregistered for path .init\" actual &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\tgit submodule deinit init >actual &&\n\ttest_grep ! \"Submodule .example. (.*) unregistered for path .init\" actual &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\tgit submodule deinit . >actual &&\n\ttest_grep ! \"Submodule .example. (.*) unregistered for path .init\" actual &&\n\ttest_grep \"Submodule .example2. (.*) unregistered for path .example2\" actual &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\tgit submodule deinit . >actual &&\n\ttest_grep ! \"Submodule .example. (.*) unregistered for path .init\" actual &&\n\ttest_grep ! \"Submodule .example2. (.*) unregistered for path .example2\" actual &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\tgit submodule deinit --all >actual &&\n\ttest_grep ! \"Submodule .example. (.*) unregistered for path .init\" actual &&\n\ttest_grep ! \"Submodule .example2. (.*) unregistered for path .example2\" actual &&\n\ttest_grep \"Cleared directory .init\" actual &&\n\trmdir init example2\n'\n\ntest_expect_success 'submodule deinit absorbs .git directory if .git is a directory' '\n\tgit submodule update --init &&\n\t(\n\t\tcd init &&\n\t\trm .git &&\n\t\tmv ../.git/modules/example .git &&\n\t\tGIT_WORK_TREE=. git config --unset core.worktree\n\t) &&\n\tgit submodule deinit init &&\n\ttest_path_is_missing init/.git &&\n\ttest -z \"$(git config --get-regexp \"submodule\\.example\\.\")\"\n'\n\ntest_expect_success 'submodule with UTF-8 name' '\n\tsvname=$(printf \"\\303\\245 \\303\\244\\303\\266\") &&\n\tmkdir \"$svname\" &&\n\t(\n\t\tcd \"$svname\" &&\n\t\tgit init &&\n\t\t>sub &&\n\t\tgit add sub &&\n\t\tgit commit -m \"init sub\"\n\t) &&\n\tgit submodule add ./\"$svname\" &&\n\tgit submodule >&2 &&\n\ttest -n \"$(git submodule | grep \"$svname\")\"\n'\n\ntest_expect_success 'submodule add clone shallow submodule' '\n\tmkdir super &&\n\tpwd=$(pwd) &&\n\t(\n\t\tcd super &&\n\t\tgit init &&\n\t\tgit submodule add --depth=1 file://\"$pwd\"/example2 submodule &&\n\t\t(\n\t\t\tcd submodule &&\n\t\t\ttest 1 = $(git log --oneline | wc -l)\n\t\t)\n\t)\n'\n\ntest_expect_success 'setup superproject with submodules' '\n\tgit init sub1 &&\n\ttest_commit -C sub1 test &&\n\ttest_commit -C sub1 test2 &&\n\tgit init multisuper &&\n\tgit -C multisuper submodule add ../sub1 sub0 &&\n\tgit -C multisuper submodule add ../sub1 sub1 &&\n\tgit -C multisuper submodule add ../sub1 sub2 &&\n\tgit -C multisuper submodule add ../sub1 sub3 &&\n\tgit -C multisuper commit -m \"add some submodules\"\n'\n\ncat >expect <<-EOF\n-sub0\n sub1 (test2)\n sub2 (test2)\n sub3 (test2)\nEOF\n\ntest_expect_success 'submodule update --init with a specification' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tpwd=$(pwd) &&\n\tgit clone file://\"$pwd\"/multisuper multisuper_clone &&\n\tgit -C multisuper_clone submodule update --init . \":(exclude)sub0\" &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'submodule update --init with submodule.active set' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tpwd=$(pwd) &&\n\tgit clone file://\"$pwd\"/multisuper multisuper_clone &&\n\tgit -C multisuper_clone config submodule.active \".\" &&\n\tgit -C multisuper_clone config --add submodule.active \":(exclude)sub0\" &&\n\tgit -C multisuper_clone submodule update --init &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'submodule update and setting submodule.<name>.active' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tpwd=$(pwd) &&\n\tgit clone file://\"$pwd\"/multisuper multisuper_clone &&\n\tgit -C multisuper_clone config --bool submodule.sub0.active \"true\" &&\n\tgit -C multisuper_clone config --bool submodule.sub1.active \"false\" &&\n\tgit -C multisuper_clone config --bool submodule.sub2.active \"true\" &&\n\n\tcat >expect <<-\\EOF &&\n\t sub0 (test2)\n\t-sub1\n\t sub2 (test2)\n\t-sub3\n\tEOF\n\tgit -C multisuper_clone submodule update &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'clone active submodule without submodule url set' '\n\ttest_when_finished \"rm -rf test/test\" &&\n\tmkdir test &&\n\t# another dir breaks accidental relative paths still being correct\n\tgit clone file://\"$pwd\"/multisuper test/test &&\n\t(\n\t\tcd test/test &&\n\t\tgit config submodule.active \".\" &&\n\n\t\t# do not pass --init flag, as the submodule is already active:\n\t\tgit submodule update &&\n\t\tgit submodule status >actual_raw &&\n\n\t\tcut -d\" \" -f3- actual_raw >actual &&\n\t\tcat >expect <<-\\EOF &&\n\t\tsub0 (test2)\n\t\tsub1 (test2)\n\t\tsub2 (test2)\n\t\tsub3 (test2)\n\t\tEOF\n\t\ttest_cmp expect actual\n\t)\n'\n\ntest_expect_success 'update submodules without url set in .gitconfig' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tgit clone file://\"$pwd\"/multisuper multisuper_clone &&\n\n\tgit -C multisuper_clone submodule init &&\n\tfor s in sub0 sub1 sub2 sub3\n\tdo\n\t\tkey=submodule.$s.url &&\n\t\tgit -C multisuper_clone config --local --unset $key &&\n\t\tgit -C multisuper_clone config --file .gitmodules --unset $key || return 1\n\tdone &&\n\n\ttest_must_fail git -C multisuper_clone submodule update 2>err &&\n\tgrep \"cannot clone submodule .sub[0-3]. without a URL\" err\n'\n\ntest_expect_success 'clone --recurse-submodules with a pathspec works' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tcat >expected <<-\\EOF &&\n\t sub0 (test2)\n\t-sub1\n\t-sub2\n\t-sub3\n\tEOF\n\n\tgit clone --recurse-submodules=\"sub0\" multisuper multisuper_clone &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expected actual\n'\n\ntest_expect_success 'clone with multiple --recurse-submodules options' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tcat >expect <<-\\EOF &&\n\t-sub0\n\t sub1 (test2)\n\t-sub2\n\t sub3 (test2)\n\tEOF\n\n\tgit clone --recurse-submodules=\".\" \\\n\t\t  --recurse-submodules=\":(exclude)sub0\" \\\n\t\t  --recurse-submodules=\":(exclude)sub2\" \\\n\t\t  multisuper multisuper_clone &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success 'clone and subsequent updates correctly auto-initialize submodules' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tcat <<-\\EOF >expect &&\n\t-sub0\n\t sub1 (test2)\n\t-sub2\n\t sub3 (test2)\n\tEOF\n\n\tcat <<-\\EOF >expect2 &&\n\t-sub0\n\t sub1 (test2)\n\t-sub2\n\t sub3 (test2)\n\t-sub4\n\t sub5 (test2)\n\tEOF\n\n\tgit clone --recurse-submodules=\".\" \\\n\t\t  --recurse-submodules=\":(exclude)sub0\" \\\n\t\t  --recurse-submodules=\":(exclude)sub2\" \\\n\t\t  --recurse-submodules=\":(exclude)sub4\" \\\n\t\t  multisuper multisuper_clone &&\n\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect actual &&\n\n\tgit -C multisuper submodule add ../sub1 sub4 &&\n\tgit -C multisuper submodule add ../sub1 sub5 &&\n\tgit -C multisuper commit -m \"add more submodules\" &&\n\t# obtain the new superproject\n\tgit -C multisuper_clone pull &&\n\tgit -C multisuper_clone submodule update --init &&\n\tgit -C multisuper_clone submodule status | sed \"s/$OID_REGEX //\" >actual &&\n\ttest_cmp expect2 actual\n'\n\ntest_expect_success 'init properly sets the config' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tgit clone --recurse-submodules=\".\" \\\n\t\t  --recurse-submodules=\":(exclude)sub0\" \\\n\t\t  multisuper multisuper_clone &&\n\n\tgit -C multisuper_clone submodule init -- sub0 sub1 &&\n\tgit -C multisuper_clone config --get submodule.sub0.active &&\n\ttest_must_fail git -C multisuper_clone config --get submodule.sub1.active\n'\n\ntest_expect_success 'recursive clone respects -q' '\n\ttest_when_finished \"rm -rf multisuper_clone\" &&\n\tgit clone -q --recurse-submodules multisuper multisuper_clone >actual &&\n\ttest_must_be_empty actual\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00c1f1aab1304c127a5dccdaeff62d7213b7a9e5",
  "sha1_ok": true,
  "size": 40773
}
