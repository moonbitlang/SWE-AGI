{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDUgSnVuaW8gQyBIYW1hbm8KIwoKdGVzdF9kZXNjcmlwdGlvbj0nZ2l0LXBhY2stb2JqZWN0CgonCi4gLi90ZXN0LWxpYi5zaAoKVFJBU0g9YHB3ZGAKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ3NldHVwJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCoKICAgICBmb3IgaSBpbiBhIGIgYwogICAgIGRvCgkgICAgIGRkIGlmPS9kZXYvemVybyBicz00ayBjb3VudD0xIHwgdHIgIlxcMDAwIiAkaSA+JGkgJiYKCSAgICAgZ2l0IHVwZGF0ZS1pbmRleCAtLWFkZCAkaSB8fCByZXR1cm4gMQogICAgIGRvbmUgJiYKICAgICBjYXQgYyA+ZCAmJiBlY2hvIGZvbyA+PmQgJiYgZ2l0IHVwZGF0ZS1pbmRleCAtLWFkZCBkICYmCiAgICAgdHJlZT1gZ2l0IHdyaXRlLXRyZWVgICYmCiAgICAgY29tbWl0PWBnaXQgY29tbWl0LXRyZWUgJHRyZWUgPC9kZXYvbnVsbGAgJiYgewoJIGVjaG8gJHRyZWUgJiYKCSBlY2hvICRjb21taXQgJiYKCSBnaXQgbHMtdHJlZSAkdHJlZSB8IHNlZCAtZSAicy8uKiBcXChbMC05YS1mXSpcXCkJLiovXFwxLyIKICAgICB9ID5vYmotbGlzdCAmJiB7CgkgZ2l0IGRpZmYtdHJlZSAtLXJvb3QgLXAgJGNvbW1pdCAmJgoJIHdoaWxlIHJlYWQgb2JqZWN0CgkgZG8KCSAgICB0PWBnaXQgY2F0LWZpbGUgLXQgJG9iamVjdGAgJiYKCSAgICBnaXQgY2F0LWZpbGUgJHQgJG9iamVjdCB8fCByZXR1cm4gMQoJIGRvbmUgPG9iai1saXN0CiAgICAgfSA+ZXhwZWN0JwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAncGFjayB3aXRob3V0IGRlbHRhJyBcCiAgICAncGFja25hbWVfMT0kKGdpdCBwYWNrLW9iamVjdHMgLS13aW5kb3c9MCB0ZXN0LTEgPG9iai1saXN0KScKCnJtIC1mciAuZ2l0Mgpta2RpciAuZ2l0MgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAndW5wYWNrIHdpdGhvdXQgZGVsdGEnIFwKICAgICJHSVRfT0JKRUNUX0RJUkVDVE9SWT0uZ2l0Mi9vYmplY3RzICYmCiAgICAgZXhwb3J0IEdJVF9PQkpFQ1RfRElSRUNUT1JZICYmCiAgICAgZ2l0IGluaXQgJiYKICAgICBnaXQgdW5wYWNrLW9iamVjdHMgLW4gPHRlc3QtMS0ke3BhY2tuYW1lXzF9LnBhY2sgJiYKICAgICBnaXQgdW5wYWNrLW9iamVjdHMgPHRlc3QtMS0ke3BhY2tuYW1lXzF9LnBhY2siCgp1bnNldCBHSVRfT0JKRUNUX0RJUkVDVE9SWQpjZCAiJFRSQVNILy5naXQyIgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnY2hlY2sgdW5wYWNrIHdpdGhvdXQgZGVsdGEnIFwKICAgICcoY2QgLi4vLmdpdCAmJiBmaW5kIG9iamVjdHMgLXR5cGUgZiAtcHJpbnQpIHwKICAgICB3aGlsZSByZWFkIHBhdGgKICAgICBkbwogICAgICAgICBjbXAgJHBhdGggLi4vLmdpdC8kcGF0aCB8fCB7CgkgICAgIGVjaG8gJHBhdGggZGlmZmVycy4KCSAgICAgcmV0dXJuIDEKCSB9CiAgICAgZG9uZScKY2QgIiRUUkFTSCIKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ3BhY2sgd2l0aCBSRUZfREVMVEEnIFwKICAgICdwd2QgJiYKICAgICBwYWNrbmFtZV8yPSQoZ2l0IHBhY2stb2JqZWN0cyB0ZXN0LTIgPG9iai1saXN0KScKCnJtIC1mciAuZ2l0Mgpta2RpciAuZ2l0MgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAndW5wYWNrIHdpdGggUkVGX0RFTFRBJyBcCiAgICAnR0lUX09CSkVDVF9ESVJFQ1RPUlk9LmdpdDIvb2JqZWN0cyAmJgogICAgIGV4cG9ydCBHSVRfT0JKRUNUX0RJUkVDVE9SWSAmJgogICAgIGdpdCBpbml0ICYmCiAgICAgZ2l0IHVucGFjay1vYmplY3RzIC1uIDx0ZXN0LTItJHtwYWNrbmFtZV8yfS5wYWNrICYmCiAgICAgZ2l0IHVucGFjay1vYmplY3RzIDx0ZXN0LTItJHtwYWNrbmFtZV8yfS5wYWNrJwoKdW5zZXQgR0lUX09CSkVDVF9ESVJFQ1RPUlkKY2QgIiRUUkFTSC8uZ2l0MiIKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnY2hlY2sgdW5wYWNrIHdpdGggUkVGX0RFTFRBJyBcCiAgICAnKGNkIC4uLy5naXQgJiYgZmluZCBvYmplY3RzIC10eXBlIGYgLXByaW50KSB8CiAgICAgd2hpbGUgcmVhZCBwYXRoCiAgICAgZG8KICAgICAgICAgY21wICRwYXRoIC4uLy5naXQvJHBhdGggfHwgewoJICAgICBlY2hvICRwYXRoIGRpZmZlcnMuCgkgICAgIHJldHVybiAxCgkgfQogICAgIGRvbmUnCmNkICIkVFJBU0giCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdwYWNrIHdpdGggT0ZTX0RFTFRBJyBcCiAgICAncHdkICYmCiAgICAgcGFja25hbWVfMz0kKGdpdCBwYWNrLW9iamVjdHMgLS1kZWx0YS1iYXNlLW9mZnNldCB0ZXN0LTMgPG9iai1saXN0KScKCnJtIC1mciAuZ2l0Mgpta2RpciAuZ2l0MgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAndW5wYWNrIHdpdGggT0ZTX0RFTFRBJyBcCiAgICAnR0lUX09CSkVDVF9ESVJFQ1RPUlk9LmdpdDIvb2JqZWN0cyAmJgogICAgIGV4cG9ydCBHSVRfT0JKRUNUX0RJUkVDVE9SWSAmJgogICAgIGdpdCBpbml0ICYmCiAgICAgZ2l0IHVucGFjay1vYmplY3RzIC1uIDx0ZXN0LTMtJHtwYWNrbmFtZV8zfS5wYWNrICYmCiAgICAgZ2l0IHVucGFjay1vYmplY3RzIDx0ZXN0LTMtJHtwYWNrbmFtZV8zfS5wYWNrJwoKdW5zZXQgR0lUX09CSkVDVF9ESVJFQ1RPUlkKY2QgIiRUUkFTSC8uZ2l0MiIKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnY2hlY2sgdW5wYWNrIHdpdGggT0ZTX0RFTFRBJyBcCiAgICAnKGNkIC4uLy5naXQgJiYgZmluZCBvYmplY3RzIC10eXBlIGYgLXByaW50KSB8CiAgICAgd2hpbGUgcmVhZCBwYXRoCiAgICAgZG8KICAgICAgICAgY21wICRwYXRoIC4uLy5naXQvJHBhdGggfHwgewoJICAgICBlY2hvICRwYXRoIGRpZmZlcnMuCgkgICAgIHJldHVybiAxCgkgfQogICAgIGRvbmUnCmNkICIkVFJBU0giCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjb21wYXJlIGRlbHRhIGZsYXZvcnMnICcKCXBlcmwgLWUgJ1wnJwoJCWRlZmluZWQoJF8gPSAtcyAkXykgb3IgZGllIGZvciBAQVJHVjsKCQlleGl0IDEgaWYgJEFSR1ZbMF0gPD0gJEFSR1ZbMV07CgknXCcnIHRlc3QtMi0kcGFja25hbWVfMi5wYWNrIHRlc3QtMy0kcGFja25hbWVfMy5wYWNrCicKCnJtIC1mciAuZ2l0Mgpta2RpciAuZ2l0MgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAndXNlIHBhY2tlZCBvYmplY3RzJyBcCiAgICAnR0lUX09CSkVDVF9ESVJFQ1RPUlk9LmdpdDIvb2JqZWN0cyAmJgogICAgIGV4cG9ydCBHSVRfT0JKRUNUX0RJUkVDVE9SWSAmJgogICAgIGdpdCBpbml0ICYmCiAgICAgY3AgdGVzdC0xLSR7cGFja25hbWVfMX0ucGFjayB0ZXN0LTEtJHtwYWNrbmFtZV8xfS5pZHggLmdpdDIvb2JqZWN0cy9wYWNrICYmIHsKCSBnaXQgZGlmZi10cmVlIC0tcm9vdCAtcCAkY29tbWl0ICYmCgkgd2hpbGUgcmVhZCBvYmplY3QKCSBkbwoJICAgIHQ9YGdpdCBjYXQtZmlsZSAtdCAkb2JqZWN0YCAmJgoJICAgIGdpdCBjYXQtZmlsZSAkdCAkb2JqZWN0IHx8IHJldHVybiAxCgkgZG9uZSA8b2JqLWxpc3QKICAgIH0gPmN1cnJlbnQgJiYKICAgIGRpZmYgZXhwZWN0IGN1cnJlbnQnCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICd1c2UgcGFja2VkIGRlbHRpZmllZCAoUkVGX0RFTFRBKSBvYmplY3RzJyBcCiAgICAnR0lUX09CSkVDVF9ESVJFQ1RPUlk9LmdpdDIvb2JqZWN0cyAmJgogICAgIGV4cG9ydCBHSVRfT0JKRUNUX0RJUkVDVE9SWSAmJgogICAgIHJtIC1mIC5naXQyL29iamVjdHMvcGFjay90ZXN0LSogJiYKICAgICBjcCB0ZXN0LTItJHtwYWNrbmFtZV8yfS5wYWNrIHRlc3QtMi0ke3BhY2tuYW1lXzJ9LmlkeCAuZ2l0Mi9vYmplY3RzL3BhY2sgJiYgewoJIGdpdCBkaWZmLXRyZWUgLS1yb290IC1wICRjb21taXQgJiYKCSB3aGlsZSByZWFkIG9iamVjdAoJIGRvCgkgICAgdD1gZ2l0IGNhdC1maWxlIC10ICRvYmplY3RgICYmCgkgICAgZ2l0IGNhdC1maWxlICR0ICRvYmplY3QgfHwgcmV0dXJuIDEKCSBkb25lIDxvYmotbGlzdAogICAgfSA+Y3VycmVudCAmJgogICAgZGlmZiBleHBlY3QgY3VycmVudCcKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ3VzZSBwYWNrZWQgZGVsdGlmaWVkIChPRlNfREVMVEEpIG9iamVjdHMnIFwKICAgICdHSVRfT0JKRUNUX0RJUkVDVE9SWT0uZ2l0Mi9vYmplY3RzICYmCiAgICAgZXhwb3J0IEdJVF9PQkpFQ1RfRElSRUNUT1JZICYmCiAgICAgcm0gLWYgLmdpdDIvb2JqZWN0cy9wYWNrL3Rlc3QtKiAmJgogICAgIGNwIHRlc3QtMy0ke3BhY2tuYW1lXzN9LnBhY2sgdGVzdC0zLSR7cGFja25hbWVfM30uaWR4IC5naXQyL29iamVjdHMvcGFjayAmJiB7CgkgZ2l0IGRpZmYtdHJlZSAtLXJvb3QgLXAgJGNvbW1pdCAmJgoJIHdoaWxlIHJlYWQgb2JqZWN0CgkgZG8KCSAgICB0PWBnaXQgY2F0LWZpbGUgLXQgJG9iamVjdGAgJiYKCSAgICBnaXQgY2F0LWZpbGUgJHQgJG9iamVjdCB8fCByZXR1cm4gMQoJIGRvbmUgPG9iai1saXN0CiAgICB9ID5jdXJyZW50ICYmCiAgICBkaWZmIGV4cGVjdCBjdXJyZW50JwoKdW5zZXQgR0lUX09CSkVDVF9ESVJFQ1RPUlkKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ3ZlcmlmeSBwYWNrJyBcCiAgICAnZ2l0IHZlcmlmeS1wYWNrCXRlc3QtMS0ke3BhY2tuYW1lXzF9LmlkeCBcCgkJCXRlc3QtMi0ke3BhY2tuYW1lXzJ9LmlkeCBcCgkJCXRlc3QtMy0ke3BhY2tuYW1lXzN9LmlkeCcKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ3ZlcmlmeS1wYWNrIGNhdGNoZXMgbWlzbWF0Y2hlZCAuaWR4IGFuZCAucGFjayBmaWxlcycgXAogICAgJ2NhdCB0ZXN0LTEtJHtwYWNrbmFtZV8xfS5pZHggPnRlc3QtMy5pZHggJiYKICAgICBjYXQgdGVzdC0yLSR7cGFja25hbWVfMn0ucGFjayA+dGVzdC0zLnBhY2sgJiYKICAgICBpZiBnaXQgdmVyaWZ5LXBhY2sgdGVzdC0zLmlkeAogICAgIHRoZW4gZmFsc2UKICAgICBlbHNlIDo7CiAgICAgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICd2ZXJpZnktcGFjayBjYXRjaGVzIGEgY29ycnVwdGVkIHBhY2sgc2lnbmF0dXJlJyBcCiAgICAnY2F0IHRlc3QtMS0ke3BhY2tuYW1lXzF9LnBhY2sgPnRlc3QtMy5wYWNrICYmCiAgICAgZGQgaWY9L2Rldi96ZXJvIG9mPXRlc3QtMy5wYWNrIGNvdW50PTEgYnM9MSBjb252PW5vdHJ1bmMgc2Vlaz0yICYmCiAgICAgaWYgZ2l0IHZlcmlmeS1wYWNrIHRlc3QtMy5pZHgKICAgICB0aGVuIGZhbHNlCiAgICAgZWxzZSA6OwogICAgIGZpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAndmVyaWZ5LXBhY2sgY2F0Y2hlcyBhIGNvcnJ1cHRlZCBwYWNrIHZlcnNpb24nIFwKICAgICdjYXQgdGVzdC0xLSR7cGFja25hbWVfMX0ucGFjayA+dGVzdC0zLnBhY2sgJiYKICAgICBkZCBpZj0vZGV2L3plcm8gb2Y9dGVzdC0zLnBhY2sgY291bnQ9MSBicz0xIGNvbnY9bm90cnVuYyBzZWVrPTcgJiYKICAgICBpZiBnaXQgdmVyaWZ5LXBhY2sgdGVzdC0zLmlkeAogICAgIHRoZW4gZmFsc2UKICAgICBlbHNlIDo7CiAgICAgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICd2ZXJpZnktcGFjayBjYXRjaGVzIGEgY29ycnVwdGVkIHR5cGUvc2l6ZSBvZiB0aGUgMXN0IHBhY2tlZCBvYmplY3QgZGF0YScgXAogICAgJ2NhdCB0ZXN0LTEtJHtwYWNrbmFtZV8xfS5wYWNrID50ZXN0LTMucGFjayAmJgogICAgIGRkIGlmPS9kZXYvemVybyBvZj10ZXN0LTMucGFjayBjb3VudD0xIGJzPTEgY29udj1ub3RydW5jIHNlZWs9MTIgJiYKICAgICBpZiBnaXQgdmVyaWZ5LXBhY2sgdGVzdC0zLmlkeAogICAgIHRoZW4gZmFsc2UKICAgICBlbHNlIDo7CiAgICAgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICd2ZXJpZnktcGFjayBjYXRjaGVzIGEgY29ycnVwdGVkIHN1bSBvZiB0aGUgaW5kZXggZmlsZSBpdHNlbGYnIFwKICAgICdsPWB3YyAtYyA8dGVzdC0zLmlkeGAgJiYKICAgICBsPWBleHByICRsIC0gMjBgICYmCiAgICAgY2F0IHRlc3QtMS0ke3BhY2tuYW1lXzF9LnBhY2sgPnRlc3QtMy5wYWNrICYmCiAgICAgZGQgaWY9L2Rldi96ZXJvIG9mPXRlc3QtMy5pZHggY291bnQ9MjAgYnM9MSBjb252PW5vdHJ1bmMgc2Vlaz0kbCAmJgogICAgIGlmIGdpdCB2ZXJpZnktcGFjayB0ZXN0LTMucGFjawogICAgIHRoZW4gZmFsc2UKICAgICBlbHNlIDo7CiAgICAgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdidWlsZCBwYWNrIGluZGV4IGZvciBhbiBleGlzdGluZyBwYWNrJyBcCiAgICAnY2F0IHRlc3QtMS0ke3BhY2tuYW1lXzF9LnBhY2sgPnRlc3QtMy5wYWNrICYmCiAgICAgZ2l0LWluZGV4LXBhY2sgLW8gdG1wLmlkeCB0ZXN0LTMucGFjayAmJgogICAgIGNtcCB0bXAuaWR4IHRlc3QtMS0ke3BhY2tuYW1lXzF9LmlkeCAmJgoKICAgICBnaXQtaW5kZXgtcGFjayB0ZXN0LTMucGFjayAmJgogICAgIGNtcCB0ZXN0LTMuaWR4IHRlc3QtMS0ke3BhY2tuYW1lXzF9LmlkeCAmJgoKICAgICBjYXQgdGVzdC0yLSR7cGFja25hbWVfMn0ucGFjayA+dGVzdC0zLnBhY2sgJiYKICAgICBnaXQtaW5kZXgtcGFjayAtbyB0bXAuaWR4IHRlc3QtMi0ke3BhY2tuYW1lXzJ9LnBhY2sgJiYKICAgICBjbXAgdG1wLmlkeCB0ZXN0LTItJHtwYWNrbmFtZV8yfS5pZHggJiYKCiAgICAgZ2l0LWluZGV4LXBhY2sgdGVzdC0zLnBhY2sgJiYKICAgICBjbXAgdGVzdC0zLmlkeCB0ZXN0LTItJHtwYWNrbmFtZV8yfS5pZHggJiYKCiAgICAgY2F0IHRlc3QtMy0ke3BhY2tuYW1lXzN9LnBhY2sgPnRlc3QtMy5wYWNrICYmCiAgICAgZ2l0LWluZGV4LXBhY2sgLW8gdG1wLmlkeCB0ZXN0LTMtJHtwYWNrbmFtZV8zfS5wYWNrICYmCiAgICAgY21wIHRtcC5pZHggdGVzdC0zLSR7cGFja25hbWVfM30uaWR4ICYmCgogICAgIGdpdC1pbmRleC1wYWNrIHRlc3QtMy5wYWNrICYmCiAgICAgY21wIHRlc3QtMy5pZHggdGVzdC0zLSR7cGFja25hbWVfM30uaWR4ICYmCgogICAgIDonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdmYWtlIGEgU0hBMSBoYXNoIGNvbGxpc2lvbicgXAogICAgJ3Rlc3QgLWYJLmdpdC9vYmplY3RzL2M4LzJkZTE5MzEyYjZjMzY5NWMwYzE4ZjcwNzA5YTZjNTM1NjgyYTY3ICYmCiAgICAgY3AgLWYJLmdpdC9vYmplY3RzLzlkLzIzNWVkMDdjZDE5ODExYTZjZWIzNDJkZTgyZjE5MGU0OWM5ZjY4IFwKCQkuZ2l0L29iamVjdHMvYzgvMmRlMTkzMTJiNmMzNjk1YzBjMThmNzA3MDlhNmM1MzU2ODJhNjcnCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdtYWtlIHN1cmUgaW5kZXgtcGFjayBkZXRlY3RzIHRoZSBTSEExIGNvbGxpc2lvbicgXAogICAgJyEgZ2l0LWluZGV4LXBhY2sgLW8gYmFkLmlkeCB0ZXN0LTMucGFjaycKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ2hvbm9yIHBhY2sucGFja1NpemVMaW1pdCcgXAogICAgJ2dpdCBjb25maWcgcGFjay5wYWNrU2l6ZUxpbWl0IDIwMCAmJgogICAgIHBhY2tuYW1lXzQ9JChnaXQgcGFjay1vYmplY3RzIHRlc3QtNCA8b2JqLWxpc3QpICYmCiAgICAgdGVzdCAzID0gJChscyB0ZXN0LTQtKi5wYWNrIHwgd2MgLWwpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndW5wYWNraW5nIHdpdGggLS1zdHJpY3QnICcKCglnaXQgY29uZmlnIC0tdW5zZXQgcGFjay5wYWNrc2l6ZWxpbWl0ICYmCglmb3IgaiBpbiBhIGIgYyBkIGUgZiBnCglkbwoJCWZvciBpIGluIDAgMSAyIDMgNCA1IDYgNyA4IDkKCQlkbwoJCQlvPSQoZWNobyAkaiRpIHwgZ2l0IGhhc2gtb2JqZWN0IC13IC0tc3RkaW4pICYmCgkJCWVjaG8gIjEwMDY0NCAkbwkwICRqJGkiCgkJZG9uZQoJZG9uZSA+TElTVCAmJgoJcm0gLWYgLmdpdC9pbmRleCAmJgoJZ2l0IHVwZGF0ZS1pbmRleCAtLWluZGV4LWluZm8gPExJU1QgJiYKCUxJU1Q9JChnaXQgd3JpdGUtdHJlZSkgJiYKCXJtIC1mIC5naXQvaW5kZXggJiYKCWhlYWQgLW4gMTAgTElTVCB8IGdpdCB1cGRhdGUtaW5kZXggLS1pbmRleC1pbmZvICYmCglMST0kKGdpdCB3cml0ZS10cmVlKSAmJgoJcm0gLWYgLmdpdC9pbmRleCAmJgoJdGFpbCAtbiAxMCBMSVNUIHwgZ2l0IHVwZGF0ZS1pbmRleCAtLWluZGV4LWluZm8gJiYKCVNUPSQoZ2l0IHdyaXRlLXRyZWUpICYmCglQQUNLNT0kKCBnaXQgcmV2LWxpc3QgLS1vYmplY3RzICIkTElTVCIgIiRMSSIgIiRTVCIgfCBcCgkJZ2l0IHBhY2stb2JqZWN0cyB0ZXN0LTUgKSAmJgoJUEFDSzY9JCggKAoJCQllY2hvICIkTElTVCIKCQkJZWNobyAiJExJIgoJCQllY2hvICIkU1QiCgkJICkgfCBnaXQgcGFjay1vYmplY3RzIHRlc3QtNiApICYmCgl0ZXN0X2NyZWF0ZV9yZXBvIHRlc3QtNSAmJgoJKAoJCWNkIHRlc3QtNSAmJgoJCWdpdCB1bnBhY2stb2JqZWN0cyAtLXN0cmljdCA8Li4vdGVzdC01LSRQQUNLNS5wYWNrICYmCgkJZ2l0IGxzLXRyZWUgLXIgJExJU1QgJiYKCQlnaXQgbHMtdHJlZSAtciAkTEkgJiYKCQlnaXQgbHMtdHJlZSAtciAkU1QKCSkgJiYKCXRlc3RfY3JlYXRlX3JlcG8gdGVzdC02ICYmCgkoCgkJIyB0cmVlLW9ubHkgaW50byBlbXB0eSByZXBvIC0tIG1hbnkgdW5yZWFjaGFibGVzCgkJY2QgdGVzdC02ICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IHVucGFjay1vYmplY3RzIC0tc3RyaWN0IDwuLi90ZXN0LTYtJFBBQ0s2LnBhY2sKCSkgJiYKCSgKCQkjIGFscmVhZHkgcG9wdWxhdGVkIC0tIG5vIHVucmVhY2hhYmxlcwoJCWNkIHRlc3QtNSAmJgoJCWdpdCB1bnBhY2stb2JqZWN0cyAtLXN0cmljdCA8Li4vdGVzdC02LSRQQUNLNi5wYWNrCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2luZGV4LXBhY2sgd2l0aCAtLXN0cmljdCcgJwoKCWZvciBqIGluIGEgYiBjIGQgZSBmIGcKCWRvCgkJZm9yIGkgaW4gMCAxIDIgMyA0IDUgNiA3IDggOQoJCWRvCgkJCW89JChlY2hvICRqJGkgfCBnaXQgaGFzaC1vYmplY3QgLXcgLS1zdGRpbikgJiYKCQkJZWNobyAiMTAwNjQ0ICRvCTAgJGokaSIKCQlkb25lCglkb25lID5MSVNUICYmCglybSAtZiAuZ2l0L2luZGV4ICYmCglnaXQgdXBkYXRlLWluZGV4IC0taW5kZXgtaW5mbyA8TElTVCAmJgoJTElTVD0kKGdpdCB3cml0ZS10cmVlKSAmJgoJcm0gLWYgLmdpdC9pbmRleCAmJgoJaGVhZCAtbiAxMCBMSVNUIHwgZ2l0IHVwZGF0ZS1pbmRleCAtLWluZGV4LWluZm8gJiYKCUxJPSQoZ2l0IHdyaXRlLXRyZWUpICYmCglybSAtZiAuZ2l0L2luZGV4ICYmCgl0YWlsIC1uIDEwIExJU1QgfCBnaXQgdXBkYXRlLWluZGV4IC0taW5kZXgtaW5mbyAmJgoJU1Q9JChnaXQgd3JpdGUtdHJlZSkgJiYKCVBBQ0s1PSQoIGdpdCByZXYtbGlzdCAtLW9iamVjdHMgIiRMSVNUIiAiJExJIiAiJFNUIiB8IFwKCQlnaXQgcGFjay1vYmplY3RzIHRlc3QtNSApICYmCglQQUNLNj0kKCAoCgkJCWVjaG8gIiRMSVNUIgoJCQllY2hvICIkTEkiCgkJCWVjaG8gIiRTVCIKCQkgKSB8IGdpdCBwYWNrLW9iamVjdHMgdGVzdC02ICkgJiYKCXRlc3RfY3JlYXRlX3JlcG8gdGVzdC03ICYmCgkoCgkJY2QgdGVzdC03ICYmCgkJZ2l0IGluZGV4LXBhY2sgLS1zdHJpY3QgLS1zdGRpbiA8Li4vdGVzdC01LSRQQUNLNS5wYWNrICYmCgkJZ2l0IGxzLXRyZWUgLXIgJExJU1QgJiYKCQlnaXQgbHMtdHJlZSAtciAkTEkgJiYKCQlnaXQgbHMtdHJlZSAtciAkU1QKCSkgJiYKCXRlc3RfY3JlYXRlX3JlcG8gdGVzdC04ICYmCgkoCgkJIyB0cmVlLW9ubHkgaW50byBlbXB0eSByZXBvIC0tIG1hbnkgdW5yZWFjaGFibGVzCgkJY2QgdGVzdC04ICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IGluZGV4LXBhY2sgLS1zdHJpY3QgLS1zdGRpbiA8Li4vdGVzdC02LSRQQUNLNi5wYWNrCgkpICYmCgkoCgkJIyBhbHJlYWR5IHBvcHVsYXRlZCAtLSBubyB1bnJlYWNoYWJsZXMKCQljZCB0ZXN0LTcgJiYKCQlnaXQgaW5kZXgtcGFjayAtLXN0cmljdCAtLXN0ZGluIDwuLi90ZXN0LTYtJFBBQ0s2LnBhY2sKCSkKJwoKdGVzdF9kb25lCg==",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2005 Junio C Hamano\n#\n\ntest_description='git-pack-object\n\n'\n. ./test-lib.sh\n\nTRASH=`pwd`\n\ntest_expect_success \\\n    'setup' \\\n    'rm -f .git/index*\n     for i in a b c\n     do\n\t     dd if=/dev/zero bs=4k count=1 | tr \"\\\\000\" $i >$i &&\n\t     git update-index --add $i || return 1\n     done &&\n     cat c >d && echo foo >>d && git update-index --add d &&\n     tree=`git write-tree` &&\n     commit=`git commit-tree $tree </dev/null` && {\n\t echo $tree &&\n\t echo $commit &&\n\t git ls-tree $tree | sed -e \"s/.* \\\\([0-9a-f]*\\\\)\t.*/\\\\1/\"\n     } >obj-list && {\n\t git diff-tree --root -p $commit &&\n\t while read object\n\t do\n\t    t=`git cat-file -t $object` &&\n\t    git cat-file $t $object || return 1\n\t done <obj-list\n     } >expect'\n\ntest_expect_success \\\n    'pack without delta' \\\n    'packname_1=$(git pack-objects --window=0 test-1 <obj-list)'\n\nrm -fr .git2\nmkdir .git2\n\ntest_expect_success \\\n    'unpack without delta' \\\n    \"GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     git init &&\n     git unpack-objects -n <test-1-${packname_1}.pack &&\n     git unpack-objects <test-1-${packname_1}.pack\"\n\nunset GIT_OBJECT_DIRECTORY\ncd \"$TRASH/.git2\"\n\ntest_expect_success \\\n    'check unpack without delta' \\\n    '(cd ../.git && find objects -type f -print) |\n     while read path\n     do\n         cmp $path ../.git/$path || {\n\t     echo $path differs.\n\t     return 1\n\t }\n     done'\ncd \"$TRASH\"\n\ntest_expect_success \\\n    'pack with REF_DELTA' \\\n    'pwd &&\n     packname_2=$(git pack-objects test-2 <obj-list)'\n\nrm -fr .git2\nmkdir .git2\n\ntest_expect_success \\\n    'unpack with REF_DELTA' \\\n    'GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     git init &&\n     git unpack-objects -n <test-2-${packname_2}.pack &&\n     git unpack-objects <test-2-${packname_2}.pack'\n\nunset GIT_OBJECT_DIRECTORY\ncd \"$TRASH/.git2\"\ntest_expect_success \\\n    'check unpack with REF_DELTA' \\\n    '(cd ../.git && find objects -type f -print) |\n     while read path\n     do\n         cmp $path ../.git/$path || {\n\t     echo $path differs.\n\t     return 1\n\t }\n     done'\ncd \"$TRASH\"\n\ntest_expect_success \\\n    'pack with OFS_DELTA' \\\n    'pwd &&\n     packname_3=$(git pack-objects --delta-base-offset test-3 <obj-list)'\n\nrm -fr .git2\nmkdir .git2\n\ntest_expect_success \\\n    'unpack with OFS_DELTA' \\\n    'GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     git init &&\n     git unpack-objects -n <test-3-${packname_3}.pack &&\n     git unpack-objects <test-3-${packname_3}.pack'\n\nunset GIT_OBJECT_DIRECTORY\ncd \"$TRASH/.git2\"\ntest_expect_success \\\n    'check unpack with OFS_DELTA' \\\n    '(cd ../.git && find objects -type f -print) |\n     while read path\n     do\n         cmp $path ../.git/$path || {\n\t     echo $path differs.\n\t     return 1\n\t }\n     done'\ncd \"$TRASH\"\n\ntest_expect_success 'compare delta flavors' '\n\tperl -e '\\''\n\t\tdefined($_ = -s $_) or die for @ARGV;\n\t\texit 1 if $ARGV[0] <= $ARGV[1];\n\t'\\'' test-2-$packname_2.pack test-3-$packname_3.pack\n'\n\nrm -fr .git2\nmkdir .git2\n\ntest_expect_success \\\n    'use packed objects' \\\n    'GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     git init &&\n     cp test-1-${packname_1}.pack test-1-${packname_1}.idx .git2/objects/pack && {\n\t git diff-tree --root -p $commit &&\n\t while read object\n\t do\n\t    t=`git cat-file -t $object` &&\n\t    git cat-file $t $object || return 1\n\t done <obj-list\n    } >current &&\n    diff expect current'\n\ntest_expect_success \\\n    'use packed deltified (REF_DELTA) objects' \\\n    'GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     rm -f .git2/objects/pack/test-* &&\n     cp test-2-${packname_2}.pack test-2-${packname_2}.idx .git2/objects/pack && {\n\t git diff-tree --root -p $commit &&\n\t while read object\n\t do\n\t    t=`git cat-file -t $object` &&\n\t    git cat-file $t $object || return 1\n\t done <obj-list\n    } >current &&\n    diff expect current'\n\ntest_expect_success \\\n    'use packed deltified (OFS_DELTA) objects' \\\n    'GIT_OBJECT_DIRECTORY=.git2/objects &&\n     export GIT_OBJECT_DIRECTORY &&\n     rm -f .git2/objects/pack/test-* &&\n     cp test-3-${packname_3}.pack test-3-${packname_3}.idx .git2/objects/pack && {\n\t git diff-tree --root -p $commit &&\n\t while read object\n\t do\n\t    t=`git cat-file -t $object` &&\n\t    git cat-file $t $object || return 1\n\t done <obj-list\n    } >current &&\n    diff expect current'\n\nunset GIT_OBJECT_DIRECTORY\n\ntest_expect_success \\\n    'verify pack' \\\n    'git verify-pack\ttest-1-${packname_1}.idx \\\n\t\t\ttest-2-${packname_2}.idx \\\n\t\t\ttest-3-${packname_3}.idx'\n\ntest_expect_success \\\n    'verify-pack catches mismatched .idx and .pack files' \\\n    'cat test-1-${packname_1}.idx >test-3.idx &&\n     cat test-2-${packname_2}.pack >test-3.pack &&\n     if git verify-pack test-3.idx\n     then false\n     else :;\n     fi'\n\ntest_expect_success \\\n    'verify-pack catches a corrupted pack signature' \\\n    'cat test-1-${packname_1}.pack >test-3.pack &&\n     dd if=/dev/zero of=test-3.pack count=1 bs=1 conv=notrunc seek=2 &&\n     if git verify-pack test-3.idx\n     then false\n     else :;\n     fi'\n\ntest_expect_success \\\n    'verify-pack catches a corrupted pack version' \\\n    'cat test-1-${packname_1}.pack >test-3.pack &&\n     dd if=/dev/zero of=test-3.pack count=1 bs=1 conv=notrunc seek=7 &&\n     if git verify-pack test-3.idx\n     then false\n     else :;\n     fi'\n\ntest_expect_success \\\n    'verify-pack catches a corrupted type/size of the 1st packed object data' \\\n    'cat test-1-${packname_1}.pack >test-3.pack &&\n     dd if=/dev/zero of=test-3.pack count=1 bs=1 conv=notrunc seek=12 &&\n     if git verify-pack test-3.idx\n     then false\n     else :;\n     fi'\n\ntest_expect_success \\\n    'verify-pack catches a corrupted sum of the index file itself' \\\n    'l=`wc -c <test-3.idx` &&\n     l=`expr $l - 20` &&\n     cat test-1-${packname_1}.pack >test-3.pack &&\n     dd if=/dev/zero of=test-3.idx count=20 bs=1 conv=notrunc seek=$l &&\n     if git verify-pack test-3.pack\n     then false\n     else :;\n     fi'\n\ntest_expect_success \\\n    'build pack index for an existing pack' \\\n    'cat test-1-${packname_1}.pack >test-3.pack &&\n     git-index-pack -o tmp.idx test-3.pack &&\n     cmp tmp.idx test-1-${packname_1}.idx &&\n\n     git-index-pack test-3.pack &&\n     cmp test-3.idx test-1-${packname_1}.idx &&\n\n     cat test-2-${packname_2}.pack >test-3.pack &&\n     git-index-pack -o tmp.idx test-2-${packname_2}.pack &&\n     cmp tmp.idx test-2-${packname_2}.idx &&\n\n     git-index-pack test-3.pack &&\n     cmp test-3.idx test-2-${packname_2}.idx &&\n\n     cat test-3-${packname_3}.pack >test-3.pack &&\n     git-index-pack -o tmp.idx test-3-${packname_3}.pack &&\n     cmp tmp.idx test-3-${packname_3}.idx &&\n\n     git-index-pack test-3.pack &&\n     cmp test-3.idx test-3-${packname_3}.idx &&\n\n     :'\n\ntest_expect_success \\\n    'fake a SHA1 hash collision' \\\n    'test -f\t.git/objects/c8/2de19312b6c3695c0c18f70709a6c535682a67 &&\n     cp -f\t.git/objects/9d/235ed07cd19811a6ceb342de82f190e49c9f68 \\\n\t\t.git/objects/c8/2de19312b6c3695c0c18f70709a6c535682a67'\n\ntest_expect_success \\\n    'make sure index-pack detects the SHA1 collision' \\\n    '! git-index-pack -o bad.idx test-3.pack'\n\ntest_expect_success \\\n    'honor pack.packSizeLimit' \\\n    'git config pack.packSizeLimit 200 &&\n     packname_4=$(git pack-objects test-4 <obj-list) &&\n     test 3 = $(ls test-4-*.pack | wc -l)'\n\ntest_expect_success 'unpacking with --strict' '\n\n\tgit config --unset pack.packsizelimit &&\n\tfor j in a b c d e f g\n\tdo\n\t\tfor i in 0 1 2 3 4 5 6 7 8 9\n\t\tdo\n\t\t\to=$(echo $j$i | git hash-object -w --stdin) &&\n\t\t\techo \"100644 $o\t0 $j$i\"\n\t\tdone\n\tdone >LIST &&\n\trm -f .git/index &&\n\tgit update-index --index-info <LIST &&\n\tLIST=$(git write-tree) &&\n\trm -f .git/index &&\n\thead -n 10 LIST | git update-index --index-info &&\n\tLI=$(git write-tree) &&\n\trm -f .git/index &&\n\ttail -n 10 LIST | git update-index --index-info &&\n\tST=$(git write-tree) &&\n\tPACK5=$( git rev-list --objects \"$LIST\" \"$LI\" \"$ST\" | \\\n\t\tgit pack-objects test-5 ) &&\n\tPACK6=$( (\n\t\t\techo \"$LIST\"\n\t\t\techo \"$LI\"\n\t\t\techo \"$ST\"\n\t\t ) | git pack-objects test-6 ) &&\n\ttest_create_repo test-5 &&\n\t(\n\t\tcd test-5 &&\n\t\tgit unpack-objects --strict <../test-5-$PACK5.pack &&\n\t\tgit ls-tree -r $LIST &&\n\t\tgit ls-tree -r $LI &&\n\t\tgit ls-tree -r $ST\n\t) &&\n\ttest_create_repo test-6 &&\n\t(\n\t\t# tree-only into empty repo -- many unreachables\n\t\tcd test-6 &&\n\t\ttest_must_fail git unpack-objects --strict <../test-6-$PACK6.pack\n\t) &&\n\t(\n\t\t# already populated -- no unreachables\n\t\tcd test-5 &&\n\t\tgit unpack-objects --strict <../test-6-$PACK6.pack\n\t)\n'\n\ntest_expect_success 'index-pack with --strict' '\n\n\tfor j in a b c d e f g\n\tdo\n\t\tfor i in 0 1 2 3 4 5 6 7 8 9\n\t\tdo\n\t\t\to=$(echo $j$i | git hash-object -w --stdin) &&\n\t\t\techo \"100644 $o\t0 $j$i\"\n\t\tdone\n\tdone >LIST &&\n\trm -f .git/index &&\n\tgit update-index --index-info <LIST &&\n\tLIST=$(git write-tree) &&\n\trm -f .git/index &&\n\thead -n 10 LIST | git update-index --index-info &&\n\tLI=$(git write-tree) &&\n\trm -f .git/index &&\n\ttail -n 10 LIST | git update-index --index-info &&\n\tST=$(git write-tree) &&\n\tPACK5=$( git rev-list --objects \"$LIST\" \"$LI\" \"$ST\" | \\\n\t\tgit pack-objects test-5 ) &&\n\tPACK6=$( (\n\t\t\techo \"$LIST\"\n\t\t\techo \"$LI\"\n\t\t\techo \"$ST\"\n\t\t ) | git pack-objects test-6 ) &&\n\ttest_create_repo test-7 &&\n\t(\n\t\tcd test-7 &&\n\t\tgit index-pack --strict --stdin <../test-5-$PACK5.pack &&\n\t\tgit ls-tree -r $LIST &&\n\t\tgit ls-tree -r $LI &&\n\t\tgit ls-tree -r $ST\n\t) &&\n\ttest_create_repo test-8 &&\n\t(\n\t\t# tree-only into empty repo -- many unreachables\n\t\tcd test-8 &&\n\t\ttest_must_fail git index-pack --strict --stdin <../test-6-$PACK6.pack\n\t) &&\n\t(\n\t\t# already populated -- no unreachables\n\t\tcd test-7 &&\n\t\tgit index-pack --strict --stdin <../test-6-$PACK6.pack\n\t)\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "007b136fe64b1afb6b398dd3a2790aeabc2bd127",
  "sha1_ok": true,
  "size": 9775
}
