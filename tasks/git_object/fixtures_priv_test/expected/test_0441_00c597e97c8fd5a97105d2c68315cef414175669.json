{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDUgTGludXMgVG9ydmFsZHMKIwoKT1BUSU9OU19LRUVQREFTSERBU0g9Ck9QVElPTlNfU1BFQz0iXApnaXQgcmVwYWNrIFtvcHRpb25zXQotLQphICAgICAgICAgICAgICAgcGFjayBldmVyeXRoaW5nIGluIGEgc2luZ2xlIHBhY2sKQSAgICAgICAgICAgICAgIHNhbWUgYXMgLWEsIGFuZCB0dXJuIHVucmVhY2hhYmxlIG9iamVjdHMgbG9vc2UKZCAgICAgICAgICAgICAgIHJlbW92ZSByZWR1bmRhbnQgcGFja3MsIGFuZCBydW4gZ2l0LXBydW5lLXBhY2tlZApmICAgICAgICAgICAgICAgcGFzcyAtLW5vLXJldXNlLW9iamVjdCB0byBnaXQtcGFjay1vYmplY3RzCm4gICAgICAgICAgICAgICBkbyBub3QgcnVuIGdpdC11cGRhdGUtc2VydmVyLWluZm8KcSxxdWlldCAgICAgICAgIGJlIHF1aWV0CmwgICAgICAgICAgICAgICBwYXNzIC0tbG9jYWwgdG8gZ2l0LXBhY2stb2JqZWN0cwogUGFja2luZyBjb25zdHJhaW50cwp3aW5kb3c9ICAgICAgICAgc2l6ZSBvZiB0aGUgd2luZG93IHVzZWQgZm9yIGRlbHRhIGNvbXByZXNzaW9uCndpbmRvdy1tZW1vcnk9ICBzYW1lIGFzIHRoZSBhYm92ZSwgYnV0IGxpbWl0IG1lbW9yeSBzaXplIGluc3RlYWQgb2YgZW50cmllcyBjb3VudApkZXB0aD0gICAgICAgICAgbGltaXRzIHRoZSBtYXhpbXVtIGRlbHRhIGRlcHRoCm1heC1wYWNrLXNpemU9ICBtYXhpbXVtIHNpemUgb2YgZWFjaCBwYWNrZmlsZQoiClNVQkRJUkVDVE9SWV9PSz0nWWVzJwouIGdpdC1zaC1zZXR1cAoKbm9fdXBkYXRlX2luZm89IGFsbF9pbnRvX29uZT0gcmVtb3ZlX3JlZHVuZGFudD0gdW5wYWNrX3VucmVhY2hhYmxlPQpsb2NhbD0gcXVpZXQ9IG5vX3JldXNlPSBleHRyYT0Kd2hpbGUgdGVzdCAkIyAhPSAwCmRvCgljYXNlICIkMSIgaW4KCS1uKQlub191cGRhdGVfaW5mbz10IDs7CgktYSkJYWxsX2ludG9fb25lPXQgOzsKCS1BKQlhbGxfaW50b19vbmU9dAoJCXVucGFja191bnJlYWNoYWJsZT0tLXVucGFjay11bnJlYWNoYWJsZSA7OwoJLWQpCXJlbW92ZV9yZWR1bmRhbnQ9dCA7OwoJLXEpCXF1aWV0PS1xIDs7CgktZikJbm9fcmV1c2U9LS1uby1yZXVzZS1vYmplY3QgOzsKCS1sKQlsb2NhbD0tLWxvY2FsIDs7CgktLW1heC1wYWNrLXNpemV8LS13aW5kb3d8LS13aW5kb3ctbWVtb3J5fC0tZGVwdGgpCgkJZXh0cmE9IiRleHRyYSAkMT0kMiI7IHNoaWZ0IDs7CgktLSkgc2hpZnQ7IGJyZWFrOzsKCSopCXVzYWdlIDs7Cgllc2FjCglzaGlmdApkb25lCgpjYXNlICJgZ2l0IGNvbmZpZyAtLWJvb2wgcmVwYWNrLnVzZWRlbHRhYmFzZW9mZnNldCB8fCBlY2hvIHRydWVgIiBpbgp0cnVlKQoJZXh0cmE9IiRleHRyYSAtLWRlbHRhLWJhc2Utb2Zmc2V0IiA7Owplc2FjCgpQQUNLRElSPSIkR0lUX09CSkVDVF9ESVJFQ1RPUlkvcGFjayIKUEFDS1RNUD0iJEdJVF9PQkpFQ1RfRElSRUNUT1JZLy50bXAtJCQtcGFjayIKcm0gLWYgIiRQQUNLVE1QIi0qCnRyYXAgJ3JtIC1mICIkUEFDS1RNUCItKicgMCAxIDIgMyAxNQoKIyBUaGVyZSB3aWxsIGJlIG1vcmUgcmVwYWNraW5nIHN0cmF0ZWdpZXMgdG8gY29tZS4uLgpjYXNlICIsJGFsbF9pbnRvX29uZSwiIGluCiwsKQoJYXJncz0nLS11bnBhY2tlZCAtLWluY3JlbWVudGFsJwoJOzsKLHQsKQoJaWYgWyAtZCAiJFBBQ0tESVIiIF07IHRoZW4KCQlmb3IgZSBpbiBgY2QgIiRQQUNLRElSIiAmJiBmaW5kIC4gLXR5cGUgZiAtbmFtZSAnKi5wYWNrJyBcCgkJCXwgc2VkIC1lICdzL15cLlwvLy8nIC1lICdzL1wucGFjayQvLydgCgkJZG8KCQkJaWYgWyAtZSAiJFBBQ0tESVIvJGUua2VlcCIgXTsgdGhlbgoJCQkJOiBrZWVwCgkJCWVsc2UKCQkJCWFyZ3M9IiRhcmdzIC0tdW5wYWNrZWQ9JGUucGFjayIKCQkJCWV4aXN0aW5nPSIkZXhpc3RpbmcgJGUiCgkJCWZpCgkJZG9uZQoJCWlmIHRlc3QgLW4gIiRhcmdzIiAtYSAtbiAiJHVucGFja191bnJlYWNoYWJsZSIgLWEgXAoJCQktbiAiJHJlbW92ZV9yZWR1bmRhbnQiCgkJdGhlbgoJCQlhcmdzPSIkYXJncyAkdW5wYWNrX3VucmVhY2hhYmxlIgoJCWZpCglmaQoJOzsKZXNhYwoKYXJncz0iJGFyZ3MgJGxvY2FsICRxdWlldCAkbm9fcmV1c2UkZXh0cmEiCm5hbWVzPSQoZ2l0IHBhY2stb2JqZWN0cyAtLWhvbm9yLXBhY2sta2VlcCAtLW5vbi1lbXB0eSAtLWFsbCAtLXJlZmxvZyAkYXJncyA8L2Rldi9udWxsICIkUEFDS1RNUCIpIHx8CglleGl0IDEKaWYgWyAteiAiJG5hbWVzIiBdOyB0aGVuCglpZiB0ZXN0IC16ICIkcXVpZXQiOyB0aGVuCgkJZWNobyBOb3RoaW5nIG5ldyB0byBwYWNrLgoJZmkKZmkKCiMgT2sgd2UgaGF2ZSBwcmVwYXJlZCBhbGwgbmV3IHBhY2tmaWxlcy4KbWtkaXIgLXAgIiRQQUNLRElSIiB8fCBleGl0CgojIEZpcnN0IHNlZSBpZiB0aGVyZSBhcmUgcGFja3Mgb2YgdGhlIHNhbWUgbmFtZSBhbmQgaWYgc28KIyBpZiB3ZSBjYW4gbW92ZSB0aGVtIG91dCBvZiB0aGUgd2F5ICh0aGlzIGNhbiBoYXBwZW4gaWYgd2UKIyByZXBhY2tlZCBpbW1lZGlhdGVseSBhZnRlciBwYWNraW5nIGZ1bGx5Lgpyb2xsYmFjaz0KZmFpbGVkPQpmb3IgbmFtZSBpbiAkbmFtZXMKZG8KCWZvciBzZnggaW4gcGFjayBpZHgKCWRvCgkJZmlsZT1wYWNrLSRuYW1lLiRzZngKCQl0ZXN0IC1mICIkUEFDS0RJUi8kZmlsZSIgfHwgY29udGludWUKCQlybSAtZiAiJFBBQ0tESVIvb2xkLSRmaWxlIiAmJgoJCW12ICIkUEFDS0RJUi8kZmlsZSIgIiRQQUNLRElSL29sZC0kZmlsZSIgfHwgewoJCQlmYWlsZWQ9dAoJCQlicmVhawoJCX0KCQlyb2xsYmFjaz0iJHJvbGxiYWNrICRmaWxlIgoJZG9uZQoJdGVzdCAteiAiJGZhaWxlZCIgfHwgYnJlYWsKZG9uZQoKIyBJZiByZW5hbWluZyBmYWlsZWQgZm9yIGFueSBvZiB0aGVtLCByb2xsIHRoZSBvbmVzIHdlIGhhdmUKIyBhbHJlYWR5IHJlbmFtZWQgYmFjayB0byB0aGVpciBvcmlnaW5hbCBuYW1lcy4KaWYgdGVzdCAtbiAiJGZhaWxlZCIKdGhlbgoJcm9sbGJhY2tfZmFpbHVyZT0KCWZvciBmaWxlIGluICRyb2xsYmFjawoJZG8KCQltdiAiJFBBQ0tESVIvb2xkLSRmaWxlIiAiJFBBQ0tESVIvJGZpbGUiIHx8CgkJcm9sbGJhY2tfZmFpbHVyZT0iJHJvbGxiYWNrX2ZhaWx1cmUgJGZpbGUiCglkb25lCglpZiB0ZXN0IC1uICIkcm9sbGJhY2tfZmFpbHVyZSIKCXRoZW4KCQllY2hvID4mMiAiV0FSTklORzogU29tZSBwYWNrcyBpbiB1c2UgaGF2ZSBiZWVuIHJlbmFtZWQgYnkiCgkJZWNobyA+JjIgIldBUk5JTkc6IHByZWZpeGluZyBvbGQtIHRvIHRoZWlyIG5hbWUsIGluIG9yZGVyIHRvIgoJCWVjaG8gPiYyICJXQVJOSU5HOiByZXBsYWNlIHRoZW0gd2l0aCB0aGUgbmV3IHZlcnNpb24gb2YgdGhlIgoJCWVjaG8gPiYyICJXQVJOSU5HOiBmaWxlLiAgQnV0IHRoZSBvcGVyYXRpb24gZmFpbGVkLCBhbmQiCgkJZWNobyA+JjIgIldBUk5JTkc6IGF0dGVtcHQgdG8gcmVuYW1lIHRoZW0gYmFjayB0byB0aGVpciIKCQllY2hvID4mMiAiV0FSTklORzogb3JpZ2luYWwgbmFtZXMgYWxzbyBmYWlsZWQuIgoJCWVjaG8gPiYyICJXQVJOSU5HOiBQbGVhc2UgcmVuYW1lIHRoZW0gaW4gJFBBQ0tESVIgbWFudWFsbHk6IgoJCWZvciBmaWxlIGluICRyb2xsYmFja19mYWlsdXJlCgkJZG8KCQkJZWNobyA+JjIgIldBUk5JTkc6ICAgb2xkLSRmaWxlIC0+ICRmaWxlIgoJCWRvbmUKCWZpCglleGl0IDEKZmkKCiMgTm93IHRoZSBvbmVzIHdpdGggdGhlIHNhbWUgbmFtZSBhcmUgb3V0IG9mIHRoZSB3YXkuLi4KZnVsbGJhc2VzPQpmb3IgbmFtZSBpbiAkbmFtZXMKZG8KCWZ1bGxiYXNlcz0iJGZ1bGxiYXNlcyBwYWNrLSRuYW1lIgoJY2htb2QgYS13ICIkUEFDS1RNUC0kbmFtZS5wYWNrIgoJY2htb2QgYS13ICIkUEFDS1RNUC0kbmFtZS5pZHgiCgltdiAtZiAiJFBBQ0tUTVAtJG5hbWUucGFjayIgIiRQQUNLRElSL3BhY2stJG5hbWUucGFjayIgJiYKCW12IC1mICIkUEFDS1RNUC0kbmFtZS5pZHgiICAiJFBBQ0tESVIvcGFjay0kbmFtZS5pZHgiIHx8CglleGl0CmRvbmUKCiMgUmVtb3ZlIHRoZSAib2xkLSIgZmlsZXMKZm9yIG5hbWUgaW4gJG5hbWVzCmRvCglybSAtZiAiJFBBQ0tESVIvb2xkLXBhY2stJG5hbWUuaWR4IgoJcm0gLWYgIiRQQUNLRElSL29sZC1wYWNrLSRuYW1lLnBhY2siCmRvbmUKCiMgRW5kIG9mIHBhY2sgcmVwbGFjZW1lbnQuCgppZiB0ZXN0ICIkcmVtb3ZlX3JlZHVuZGFudCIgPSB0CnRoZW4KCSMgV2Uga25vdyAkZXhpc3RpbmcgYXJlIGFsbCByZWR1bmRhbnQuCglpZiBbIC1uICIkZXhpc3RpbmciIF0KCXRoZW4KCQkoIGNkICIkUEFDS0RJUiIgJiYKCQkgIGZvciBlIGluICRleGlzdGluZwoJCSAgZG8KCQkJY2FzZSAiICRmdWxsYmFzZXMgIiBpbgoJCQkqIiAkZSAiKikgOzsKCQkJKikJcm0gLWYgIiRlLnBhY2siICIkZS5pZHgiICIkZS5rZWVwIiA7OwoJCQllc2FjCgkJICBkb25lCgkJKQoJZmkKCWdpdCBwcnVuZS1wYWNrZWQgJHF1aWV0CmZpCgpjYXNlICIkbm9fdXBkYXRlX2luZm8iIGluCnQpIDogOzsKKikgZ2l0IHVwZGF0ZS1zZXJ2ZXItaW5mbyA7Owplc2FjCg==",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2005 Linus Torvalds\n#\n\nOPTIONS_KEEPDASHDASH=\nOPTIONS_SPEC=\"\\\ngit repack [options]\n--\na               pack everything in a single pack\nA               same as -a, and turn unreachable objects loose\nd               remove redundant packs, and run git-prune-packed\nf               pass --no-reuse-object to git-pack-objects\nn               do not run git-update-server-info\nq,quiet         be quiet\nl               pass --local to git-pack-objects\n Packing constraints\nwindow=         size of the window used for delta compression\nwindow-memory=  same as the above, but limit memory size instead of entries count\ndepth=          limits the maximum delta depth\nmax-pack-size=  maximum size of each packfile\n\"\nSUBDIRECTORY_OK='Yes'\n. git-sh-setup\n\nno_update_info= all_into_one= remove_redundant= unpack_unreachable=\nlocal= quiet= no_reuse= extra=\nwhile test $# != 0\ndo\n\tcase \"$1\" in\n\t-n)\tno_update_info=t ;;\n\t-a)\tall_into_one=t ;;\n\t-A)\tall_into_one=t\n\t\tunpack_unreachable=--unpack-unreachable ;;\n\t-d)\tremove_redundant=t ;;\n\t-q)\tquiet=-q ;;\n\t-f)\tno_reuse=--no-reuse-object ;;\n\t-l)\tlocal=--local ;;\n\t--max-pack-size|--window|--window-memory|--depth)\n\t\textra=\"$extra $1=$2\"; shift ;;\n\t--) shift; break;;\n\t*)\tusage ;;\n\tesac\n\tshift\ndone\n\ncase \"`git config --bool repack.usedeltabaseoffset || echo true`\" in\ntrue)\n\textra=\"$extra --delta-base-offset\" ;;\nesac\n\nPACKDIR=\"$GIT_OBJECT_DIRECTORY/pack\"\nPACKTMP=\"$GIT_OBJECT_DIRECTORY/.tmp-$$-pack\"\nrm -f \"$PACKTMP\"-*\ntrap 'rm -f \"$PACKTMP\"-*' 0 1 2 3 15\n\n# There will be more repacking strategies to come...\ncase \",$all_into_one,\" in\n,,)\n\targs='--unpacked --incremental'\n\t;;\n,t,)\n\tif [ -d \"$PACKDIR\" ]; then\n\t\tfor e in `cd \"$PACKDIR\" && find . -type f -name '*.pack' \\\n\t\t\t| sed -e 's/^\\.\\///' -e 's/\\.pack$//'`\n\t\tdo\n\t\t\tif [ -e \"$PACKDIR/$e.keep\" ]; then\n\t\t\t\t: keep\n\t\t\telse\n\t\t\t\targs=\"$args --unpacked=$e.pack\"\n\t\t\t\texisting=\"$existing $e\"\n\t\t\tfi\n\t\tdone\n\t\tif test -n \"$args\" -a -n \"$unpack_unreachable\" -a \\\n\t\t\t-n \"$remove_redundant\"\n\t\tthen\n\t\t\targs=\"$args $unpack_unreachable\"\n\t\tfi\n\tfi\n\t;;\nesac\n\nargs=\"$args $local $quiet $no_reuse$extra\"\nnames=$(git pack-objects --honor-pack-keep --non-empty --all --reflog $args </dev/null \"$PACKTMP\") ||\n\texit 1\nif [ -z \"$names\" ]; then\n\tif test -z \"$quiet\"; then\n\t\techo Nothing new to pack.\n\tfi\nfi\n\n# Ok we have prepared all new packfiles.\nmkdir -p \"$PACKDIR\" || exit\n\n# First see if there are packs of the same name and if so\n# if we can move them out of the way (this can happen if we\n# repacked immediately after packing fully.\nrollback=\nfailed=\nfor name in $names\ndo\n\tfor sfx in pack idx\n\tdo\n\t\tfile=pack-$name.$sfx\n\t\ttest -f \"$PACKDIR/$file\" || continue\n\t\trm -f \"$PACKDIR/old-$file\" &&\n\t\tmv \"$PACKDIR/$file\" \"$PACKDIR/old-$file\" || {\n\t\t\tfailed=t\n\t\t\tbreak\n\t\t}\n\t\trollback=\"$rollback $file\"\n\tdone\n\ttest -z \"$failed\" || break\ndone\n\n# If renaming failed for any of them, roll the ones we have\n# already renamed back to their original names.\nif test -n \"$failed\"\nthen\n\trollback_failure=\n\tfor file in $rollback\n\tdo\n\t\tmv \"$PACKDIR/old-$file\" \"$PACKDIR/$file\" ||\n\t\trollback_failure=\"$rollback_failure $file\"\n\tdone\n\tif test -n \"$rollback_failure\"\n\tthen\n\t\techo >&2 \"WARNING: Some packs in use have been renamed by\"\n\t\techo >&2 \"WARNING: prefixing old- to their name, in order to\"\n\t\techo >&2 \"WARNING: replace them with the new version of the\"\n\t\techo >&2 \"WARNING: file.  But the operation failed, and\"\n\t\techo >&2 \"WARNING: attempt to rename them back to their\"\n\t\techo >&2 \"WARNING: original names also failed.\"\n\t\techo >&2 \"WARNING: Please rename them in $PACKDIR manually:\"\n\t\tfor file in $rollback_failure\n\t\tdo\n\t\t\techo >&2 \"WARNING:   old-$file -> $file\"\n\t\tdone\n\tfi\n\texit 1\nfi\n\n# Now the ones with the same name are out of the way...\nfullbases=\nfor name in $names\ndo\n\tfullbases=\"$fullbases pack-$name\"\n\tchmod a-w \"$PACKTMP-$name.pack\"\n\tchmod a-w \"$PACKTMP-$name.idx\"\n\tmv -f \"$PACKTMP-$name.pack\" \"$PACKDIR/pack-$name.pack\" &&\n\tmv -f \"$PACKTMP-$name.idx\"  \"$PACKDIR/pack-$name.idx\" ||\n\texit\ndone\n\n# Remove the \"old-\" files\nfor name in $names\ndo\n\trm -f \"$PACKDIR/old-pack-$name.idx\"\n\trm -f \"$PACKDIR/old-pack-$name.pack\"\ndone\n\n# End of pack replacement.\n\nif test \"$remove_redundant\" = t\nthen\n\t# We know $existing are all redundant.\n\tif [ -n \"$existing\" ]\n\tthen\n\t\t( cd \"$PACKDIR\" &&\n\t\t  for e in $existing\n\t\t  do\n\t\t\tcase \" $fullbases \" in\n\t\t\t*\" $e \"*) ;;\n\t\t\t*)\trm -f \"$e.pack\" \"$e.idx\" \"$e.keep\" ;;\n\t\t\tesac\n\t\t  done\n\t\t)\n\tfi\n\tgit prune-packed $quiet\nfi\n\ncase \"$no_update_info\" in\nt) : ;;\n*) git update-server-info ;;\nesac\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00c597e97c8fd5a97105d2c68315cef414175669",
  "sha1_ok": true,
  "size": 4504
}
