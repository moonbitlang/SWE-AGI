{
  "content": {
    "base64": "IyBNZXNvbiBidWlsZCBzeXN0ZW0KIyA9PT09PT09PT09PT09PT09PT0KIwojIFRoZSBNZXNvbiBidWlsZCBzeXN0ZW0gaXMgYW4gYWx0ZXJuYXRpdmUgdG8gb3VyIE1ha2VmaWxlIHRoYXQgeW91IGNhbiB1c2UgdG8KIyBidWlsZCwgdGVzdCBhbmQgaW5zdGFsbCBHaXQuIFVzaW5nIE1lc29uIHJlc3VsdHMgaW4gYSBjb3VwbGUgb2YgYmVuZWZpdHM6CiMKIyAgLSBPdXQtb2YtdHJlZSBidWlsZHMuCiMgIC0gQmV0dGVyIGludGVncmF0aW9uIGludG8gSURFcy4KIyAgLSBFYXN5LXRvLXVzZSBhdXRvY29uZmlndXJhdGlvbiBvZiBhdmFpbGFibGUgZmVhdHVyZXMgb24geW91ciBzeXN0ZW0uCiMKIyBUbyB1c2UgTWVzb24gZnJvbSB0aGUgY29tbWFuZCBsaW5lIHlvdSBuZWVkIHRvIGhhdmUgYm90aCBNZXNvbiBhbmQgTmluamEKIyBpbnN0YWxsZWQuIEFsdGVybmF0aXZlbHksIGlmIHlvdSBkbyBub3QgaGF2ZSBQeXRob24gYXZhaWxhYmxlIG9uIHlvdXIgc3lzdGVtLAojIHlvdSBjYW4gYWxzbyB1c2UgTXVvbiBpbnN0ZWFkIG9mIE1lc29uIGFuZCBTYW11cmFpIGluc3RlYWQgb2YgTmluamEsIGJvdGggb2YKIyB3aGljaCBhcmUgZHJvcC1pbnMgcmVwbGFjZW1lbnQgdGhhdCBvbmx5IGRlcGVuZCBvbiBDLgojCiMgQmFzaWMgdXNhZ2UKIyA9PT09PT09PT09PQojCiMgSW4gdGhlIG1vc3QgdHJpdmlhbCBjYXNlLCB5b3UgY2FuIGNvbmZpZ3VyZSwgYnVpbGQgYW5kIGluc3RhbGwgR2l0IGxpa2UgdGhpczoKIwojICAxLiBTZXQgdXAgdGhlIGJ1aWxkIGRpcmVjdG9yeS4gVGhpcyBvbmx5IG5lZWRzIHRvIGhhcHBlbiBvbmNlIHBlciBidWlsZAojICAgICBkaXJlY3RvcnkgeW91IHdhbnQgdG8gaGF2ZS4gWW91IGNhbiBhbHNvIGNvbmZpZ3VyZSBtdWx0aXBsZSBkaWZmZXJlbnQKIyAgICAgYnVpbGQgZGlyZWN0b3JpZXMgd2l0aCBkaWZmZXJlbnQgY29uZmlndXJhdGlvbnMuCiMKIyAgICAgICQgbWVzb24gc2V0dXAgYnVpbGQvCiMKIyAgICAgVGhlIGJ1aWxkIGRpcmVjdG9yeSBnZXRzIGlnbm9yZWQgYnkgR2l0IGF1dG9tYXRpY2FsbHkgYXMgTWVzb24gd2lsbCB3cml0ZQojICAgICBhICIuZ2l0aWdub3JlIiBmaWxlIGludG8gaXQuIEZyb20gaGVyZW9uLCB3ZSB3aWxsIGFzc3VtZSB0aGF0IHlvdSBleGVjdXRlCiMgICAgIGNvbW1hbmRzIGluc2lkZSB0aGlzIGJ1aWxkIGRpcmVjdG9yeS4KIwojIDIuIENvbXBpbGUgR2l0LiBZb3UgY2FuIGVpdGhlciB1c2UgTWVzb24sIE5pbmphIG9yIFNhbXVyYWkgdG8gZG8gdGhpcywgc28gYWxsCiMgICAgb2YgdGhlIGZvbGxvd2luZyBpbnZvY2F0aW9ucyBhcmUgZXF1aXZhbGVudDoKIwojICAgICAgJCBtZXNvbiBjb21waWxlCiMgICAgICAkIG5pbmphCiMgICAgICAkIHNhbXUKIwojICAgVGhlIGRpZmZlcmVudCBpbnZvY2F0aW9ucyBzaG91bGQgdWx0aW1hdGVseSBub3QgbWFrZSBtdWNoIG9mIGEgZGlmZmVyZW5jZS4KIyAgIFVzaW5nIE1lc29uIGFsc28gd29ya3Mgd2l0aCBvdGhlciBnZW5lcmF0b3JzIHRob3VnaCwgbGlrZSB3aGVuIHRoZSBidWlsZAojICAgZGlyZWN0b3J5IGhhcyBiZWVuIHNldCB1cCBmb3IgdXNlIHdpdGggTWljcm9zb2Z0IFZpc3VhbCBTdHVkaW8uCiMKIyAgIE5pbmphIGFuZCBTYW11cmFpIHVzZSBtdWx0aXBsZSBqb2JzIGJ5IGRlZmF1bHQsIHNjYWxpbmcgd2l0aCB0aGUgbnVtYmVyIG9mCiMgICBwcm9jZXNzb3IgY29yZXMgYXZhaWxhYmxlLiBZb3UgY2FuIHBhc3MgdGhlIGAtak5gIGZsYWcgdG8gY2hhbmdlIHRoaXMuCiMKIyAgIE1lc29uIGF1dG9tYXRpY2FsbHkgcGlja3MgdXAgY2NhY2hlIGFuZCBzY2NhY2hlIHdoZW4gdGhlc2UgYXJlIGluc3RhbGxlZAojICAgd2hlbiBzZXR0aW5nIHVwIHRoZSBidWlsZCBkaXJlY3RvcnkuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBiZWhhdmlvdXIgd2hlbgojICAgc2V0dGluZyB1cCB0aGUgYnVpbGQgZGlyZWN0b3J5IGJ5IHNldHRpbmcgdGhlIGBDQ2AgZW52aXJvbm1lbnQgdmFyaWFibGUgdG8KIyAgIHlvdXIgZGVzaXJlZCBjb21waWxlci4KIwojIDMuIEV4ZWN1dGUgdGVzdHMuIEFnYWluLCB5b3UgY2FuIGVpdGhlciB1c2UgTWVzb24sIE5pbmphIG9yIFNhbXVyYWkgdG8gZG8gdGhpczoKIwojICAgICAgJCBtZXNvbiB0ZXN0CiMgICAgICAkIG5pbmphIHRlc3QKIyAgICAgICQgc2FtdSB0ZXN0CiMKIyAgIEl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSBNZXNvbiBpbiB0aGlzIGNhc2UgdGhvdWdoIGFzIGl0IGFsc28gcHJvdmlkZXMgeW91CiMgICBhZGRpdGlvbmFsIGZlYXR1cmVzIHRoYXQgdGhlIG90aGVyIGJ1aWxkIHN5c3RlbXMgZG9uJ3QgaGF2ZSBhdmFpbGFibGUuCiMgICBZb3UgY2FuIGUuZy4gcGFzcyBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0byB0aGUgdGVzdCBleGVjdXRhYmxlcyBvciBydW4KIyAgIGluZGl2aWR1YWwgdGVzdHM6CiMKIyAgICAgICMgRXhlY3V0ZSB0aGUgdDAwMDAtYmFzaWMgaW50ZWdyYXRpb24gdGVzdCBhbmQgdC1yZWZ0YWJsZS1zdGFjayB1bml0IHRlc3QuCiMgICAgICAkIG1lc29uIHRlc3QgdDAwMDAtYmFzaWMgdC1yZWZ0YWJsZS1zdGFjawojCiMgICAgICAjIEV4ZWN1dGUgYWxsIHJlZnRhYmxlIHVuaXQgdGVzdHMuCiMgICAgICAkIG1lc29uIHRlc3QgdC1yZWZ0YWJsZS0qCiMKIyAgICAgICMgRXhlY3V0ZSBhbGwgdGVzdHMgYW5kIHN0b3Agd2l0aCB0aGUgZmlyc3QgZmFpbHVyZS4KIyAgICAgICQgbWVzb24gdGVzdCAtLW1heGZhaWwgMQojCiMgICAgICAjIEV4ZWN1dGUgc2luZ2xlIHRlc3QgaW50ZXJhY3RpdmVseSBzdWNoIHRoYXQgZmVhdHVyZXMgbGlrZSBgZGVidWcgKClgIHdvcmsuCiMgICAgICAkIG1lc29uIHRlc3QgLWkgLS10ZXN0LWFyZ3M9Jy1peCcgdDE0MDAtdXBkYXRlLXJlZgojCiMgICBUZXN0IGV4ZWN1dGlvbiBpcyBwYXJhbGxlbGl6ZWQgYnkgZGVmYXVsdCBhbmQgc2NhbGVzIHdpdGggdGhlIG51bWJlciBvZgojICAgcHJvY2Vzc29yIGNvcmVzIGF2YWlsYWJsZS4gWW91IGNhbiBjaGFuZ2UgdGhlIG51bWJlciBvZiBwcm9jZXNzZXMgYnkgcGFzc2luZwojICAgdGhlIGAtak5gIGZsYWcgdG8gYG1lc29uIHRlc3RgLgojCiMgNC4gSW5zdGFsbCB0aGUgR2l0IGRpc3RyaWJ1dGlvbi4gQWdhaW4sIHRoaXMgY2FuIGJlIGRvbmUgdmlhIE1lc29uLCBOaW5qYSBvcgojICAgIFNhbXVyYWk6CiMKIyAgICAgICQgbWVzb24gaW5zdGFsbAojICAgICAgJCBuaW5qYSBpbnN0YWxsCiMgICAgICAkIHNhbXUgaW5zdGFsbAojCiMgICAgVGhlIHByZWZpeCBpbnRvIHdoaWNoIEdpdCBzaGFsbCBiZSBpbnN0YWxsZWQgaXMgZGVmaW5lZCB3aGVuIHNldHRpbmcgdXAKIyAgICB0aGUgYnVpbGQgZGlyZWN0b3J5LiBNb3JlIG9uIHRoYXQgaW4gdGhlICJDb25maWd1cmF0aW9uIiBzZWN0aW9uLgojCiMgTWVzb24gc3VwcG9ydHMgbXVsdGlwbGUgYmFja2VuZHMuIFRoZSBkZWZhdWx0IGJhY2tlbmQgZ2VuZXJhdGVzIE5pbmphIGJ1aWxkCiMgaW5zdHJ1Y3Rpb25zLCBidXQgaXQgYWxzbyBzdXBwb3J0cyB0aGUgZ2VuZXJhdGlvbiBvZiBNaWNyb3NvZnQgVmlzdWFsCiMgU3R1ZGlvIHNvbHV0aW9ucyBhcyB3ZWxsIGFzIFhjb2RlIHByb2plY3RzIGJ5IHBhc3NpbmcgdGhlIGAtLWJhY2tlbmRgIG9wdGlvbgojIHRvIGBtZXNvbiBzZXR1cGAuIElERXMgbGlrZSBFY2xpcHNlIGFuZCBWaXN1YWwgU3R1ZGlvIENvZGUgcHJvdmlkZSBwbHVnaW5zIHRvCiMgaW1wb3J0IE1lc29uIGZpbGVzIGRpcmVjdGx5LgojCiMgQ29uZmlndXJhdGlvbgojID09PT09PT09PT09PT0KIwojIFRoZSBleGFjdCBjb25maWd1cmF0aW9uIG9mIEdpdCBpcyBkZXRlcm1pbmVkIHdoZW4gc2V0dGluZyB1cCB0aGUgYnVpbGQKIyBkaXJlY3RvcnkgdmlhIGBtZXNvbiBzZXR1cGAuIFVubGVzcyB0b2xkIG90aGVyd2lzZSwgTWVzb24gd2lsbCBhdXRvbWF0aWNhbGx5CiMgZGV0ZWN0IHRoZSBhdmFpbGFiaWxpdHkgb2YgdmFyaW91cyBiaXRzIGFuZCBwaWVjZXMuIFRoZXJlIGFyZSB0d28gZGlmZmVyZW50CiMga2luZHMgb2Ygb3B0aW9ucyB0aGF0IGNhbiBiZSB1c2VkIHRvIGZ1cnRoZXIgdHdlYWsgdGhlIGJ1aWxkOgojCiMgICAtIEJ1aWx0LWluIG9wdGlvbnMgcHJvdmlkZWQgYnkgTWVzb24uCiMKIyAgIC0gT3B0aW9ucyBkZWZpbmVkIGJ5IHRoZSBwcm9qZWN0IGluIHRoZSAibWVzb25fb3B0aW9ucy50eHQiIGZpbGUuCiMKIyBCb3RoIGtpbmRzIG9mIG9wdGlvbnMgY2FuIGJlIGluc3BlY3RlZCBieSBydW5uaW5nIGBtZXNvbiBjb25maWd1cmVgIGluIHRoZQojIGJ1aWxkIGRpcmVjdG9yeSwgd2hpY2ggd2lsbCBnaXZlIHlvdSBhIGxpc3Qgb2YgdGhlIGN1cnJlbnQgdmFsdWUgZm9yIGFsbAojIG9wdGlvbnMuCiMKIyBPcHRpb25zIGNhbiBiZSBjb25maWd1cmVkIGVpdGhlciB3aGVuIHNldHRpbmcgdXAgdGhlIGJ1aWxkIGRpcmVjdG9yeSBvciBjYW4KIyBiZSBjaGFuZ2VkIGluIHByZWV4aXN0aW5nIGJ1aWxkIGRpcmVjdG9yaWVzOgojCiMgICAgICAjIFNldCB1cCBhIG5ldyBidWlsZCBkaXJlY3Rvcnkgd2l0aCBvcHRpbWl6ZWQgc2V0dGluZ3MgdGhhdCB3aWxsIGJlCiMgICAgICAjIGluc3RhbGxlZCBpbnRvIGFuIGFsdGVybmF0aXZlIHByZWZpeC4KIyAgICAgICQgbWVzb24gc2V0dXAgLS1idWlsZHR5cGUgcmVsZWFzZSAtLW9wdGltaXphdGlvbiAzIC0tc3RyaXAgLS1wcmVmaXg9L2hvbWUvJFVTRVIgYnVpbGQKIwojICAgICAgIyBTZXQgdXAgYSBuZXcgYnVpbGQgZGlyZWN0b3J5IHdpdGggYSBoaWdoZXIgd2FybmluZyBsZXZlbC4gTGV2ZWwgMiBpcwojICAgICAgIyBtb3N0bHkgZXF1aXZhbGVudCB0byBzZXR0aW5nIERFVkVMT1BFUj0xLCBsZXZlbCAzIGFuZCAiZXZlcnl0aGluZyIKIyAgICAgICMgd2lsbCBlbmFibGUgZXZlbiBtb3JlIHdhcm5pbmdzLgojICAgICAgJCBtZXNvbiBzZXR1cCAtRHdhcm5pbmdfbGV2ZWw9MiBidWlsZAojCiMgICAgICAjIFNldCB1cCBhIG5ldyBidWlsZCBkaXJlY3Rvcnkgd2l0aCAnYWRkcmVzcycgYW5kICd1bmRlZmluZWQnIHNhbml0aXplcnMKIyAgICAgICMgdXNpbmcgQ2xhbmcuCiMgICAgICAkIENDPWNsYW5nIG1lc29uIHNldHVwIC1EYl9zYW5pdGl6ZT1hZGRyZXNzLHVuZGVmaW5lZCBidWlsZAojCiMgICAgICAjIERpc2FibGUgdGVzdHMgaW4gYSBwcmVleGlzdGluZyBidWlsZCBkaXJlY3RvcnkuCiMgICAgICAkIG1lc29uIGNvbmZpZ3VyZSAtRHRlc3RzPWZhbHNlCiMKIyAgICAgICMgRGlzYWJsZSBmZWF0dXJlcyBiYXNlZCBvbiBQeXRob24KIyAgICAgICQgbWVzb24gY29uZmlndXJlIC1EcHl0aG9uPWRpc2FibGVkCiMKIyBPcHRpb25zIGhhdmUgYSB0eXBlIGxpa2UgYm9vbGVhbnMsIGNob2ljZXMsIHN0cmluZ3Mgb3IgZmVhdHVyZXMuIEZlYXR1cmVzIGFyZQojIHNvbWV3aGF0IHNwZWNpYWwgYXMgdGhleSBjYW4gaGF2ZSBvbmUgb2YgdGhyZWUgdmFsdWVzOiBlbmFibGVkLCBkaXNhYmxlZCBvcgojIGF1dG8uIFdoaWxlIHRoZSBmaXJzdCB0d28gdmFsdWVzIGFyZSBzZWxmLWV4cGxhbmF0b3J5LCAiYXV0byIgd2lsbCBlbmFibGUgb3IKIyBkaXNhYmxlIHRoZSBmZWF0dXJlIGJhc2VkIG9uIHRoZSBhdmFpbGFiaWxpdHkgb2YgcHJlcmVxdWlzaXRlcyB0byBzdXBwb3J0IGl0LgojIFB5dGhvbi1iYXNlZCBmZWF0dXJlcyBmb3IgZXhhbXBsZSB3aWxsIGJlIGVuYWJsZWQgYXV0b21hdGljYWxseSB3aGVuIGEgUHl0aG9uCiMgaW50ZXJwcmV0ZXIgY291bGQgYmUgZm91bmQuIFRoZSBkZWZhdWx0IHZhbHVlIG9mIHN1Y2ggZmVhdHVyZXMgY2FuIGJlIGNoYW5nZWQKIyB2aWEgYG1lc29uIHNldHVwIC0tYXV0by1mZWF0dXJlcz17ZW5hYmxlZCxkaXNhYmxlZCxhdXRvfWAsIHdoaWNoIHdpbGwgc2V0IHRoZQojIHZhbHVlIG9mIGFsbCBmZWF0dXJlcyB3aXRoIGEgdmFsdWUgb2YgImF1dG8iIHRvIHRoZSBwcm92aWRlZCBvbmUgYnkgZGVmYXVsdC4KIwojIEl0IGlzIGFsc28gcG9zc2libGUgdG8gc3RvcmUgYSBzZXQgb2YgY29uZmlndXJhdGlvbiBvcHRpb25zIGluIG1hY2hpbmUgZmlsZXMuCiMgVGhpcyBjYW4gYmUgdXNlZnVsIGluIGNhc2UgeW91IHJlZ3VsYXJseSB3YW50IHRvIHJldXNlIHRoZSBzYW1lIHNldCBvZiBvcHRpb25zOgojCiMgICBbYmluYXJpZXNdCiMgICBjID0gWydjbGFuZyddCiMgICBhciA9IFsnYXInXQojCiMgICBbcHJvamVjdCBvcHRpb25zXQojICAgZ2V0dGV4dCA9ICdkaXNhYmxlZCcKIyAgIGRlZmF1bHRfZWRpdG9yID0gJ3ZpbScKIwojICAgW2J1aWx0LWluIG9wdGlvbnNdCiMgICBiX2x0byA9IHRydWUKIyAgIGJfc2FuaXRpemUgPSAnYWRkcmVzcyx1bmRlZmluZWQnCiMKIyBUaGVzZSBtYWNoaW5lIGZpbGVzIGNhbiBiZSBwYXNzZWQgdG8gYG1lc29uIHNldHVwYCB2aWEgdGhlIGAtLW5hdGl2ZS1maWxlYAojIG9wdGlvbi4KIwojIFN1YnByb2plY3Qgd3JhcHBlcnMKIyA9PT09PT09PT09PT09PT09PT09CiMKIyBTdWJwcm9qZWN0IHdyYXBwZXJzIGFyZSBhIGZlYXR1cmUgcHJvdmlkZWQgYnkgTWVzb24gdGhhdCBhbGxvd3MgdGhlIGF1dG9tYXRpYwojIGZhbGxiYWNrIHRvIGEgIndyYXBwZWQiIGRlcGVuZGVuY3kgaW4gY2FzZSB0aGUgZGVwZW5kZW5jeSBpcyBub3QgcHJvdmlkZWQgYnkKIyB0aGUgc3lzdGVtLiBGb3IgZXhhbXBsZSBpZiB0aGUgc3lzdGVtIGlzIGxhY2tpbmcgY3VybCwgdGhlbiBNZXNvbiB3aWxsIHVzZQojICJzdWJwcm9qZWN0cy9jdXJsLndyYXAiIHRvIHNldCB1cCBjdXJsIGFzIGEgc3VicHJvamVjdCBhbmQgY29tcGlsZSBhbmQgbGluawojIHRoZSBkZXBlbmRlbmN5IGludG8gR2l0IGl0c2VsZi4gVGhpcyBpcyBlc3BlY2lhbGx5IGhlbHBmdWwgb24gc3lzdGVtcyBsaWtlCiMgV2luZG93cywgd2hlcmUgeW91IHR5cGljYWxseSBkb24ndCBoYXZlIHN1Y2ggZGVwZW5kZW5jaWVzIGluc3RhbGxlZC4KIwojIFRoZSB1c2Ugb2Ygc3VicHJvamVjdCB3cmFwcGVycyBjYW4gYmUgZGlzYWJsZWQgYnkgZXhlY3V0aW5nIGBtZXNvbiBzZXR1cGAKIyB3aXRoIHRoZSBgLS13cmFwLW1vZGUgbm9mYWxsYmFja2Agb3B0aW9uLgoKcHJvamVjdCgnZ2l0JywgJ2MnLAogIG1lc29uX3ZlcnNpb246ICc+PTAuNjEuMCcsCiAgdmVyc2lvbjogJ3YyLjQ3LkdJVCcsCikKCmZzID0gaW1wb3J0KCdmcycpCgpwcm9ncmFtX3BhdGggPSBbXQojIEdpdCBmb3IgV2luZG93cyBwcm92aWRlcyBhbGwgdGhlIHRvb2xzIHdlIG5lZWQgdG8gYnVpbGQgR2l0LgppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ3dpbmRvd3MnCiAgcHJvZ3JhbV9wYXRoICs9IFsgJ0M6L1Byb2dyYW0gRmlsZXMvR2l0L2JpbicsICdDOi9Qcm9ncmFtIEZpbGVzL0dpdC91c3IvYmluJyBdCmVuZGlmCgpjeWdwYXRoID0gZmluZF9wcm9ncmFtKCdjeWdwYXRoJywgZGlyczogcHJvZ3JhbV9wYXRoLCByZXF1aXJlZDogZmFsc2UpCmRpZmYgPSBmaW5kX3Byb2dyYW0oJ2RpZmYnLCBkaXJzOiBwcm9ncmFtX3BhdGgpCnNoZWxsID0gZmluZF9wcm9ncmFtKCdzaCcsIGRpcnM6IHByb2dyYW1fcGF0aCkKdGFyID0gZmluZF9wcm9ncmFtKCd0YXInLCBkaXJzOiBwcm9ncmFtX3BhdGgpCgpzY3JpcHRfZW52aXJvbm1lbnQgPSBlbnZpcm9ubWVudCgpCmZvcmVhY2ggdG9vbCA6IFsnY2F0JywgJ2N1dCcsICdncmVwJywgJ3NlZCcsICdzb3J0JywgJ3RyJywgJ3VuYW1lJ10KICBwcm9ncmFtID0gZmluZF9wcm9ncmFtKHRvb2wsIGRpcnM6IHByb2dyYW1fcGF0aCkKICBzY3JpcHRfZW52aXJvbm1lbnQucHJlcGVuZCgnUEFUSCcsIGZzLnBhcmVudChwcm9ncmFtLmZ1bGxfcGF0aCgpKSkKZW5kZm9yZWFjaAoKZ2l0ID0gZmluZF9wcm9ncmFtKCdnaXQnLCBkaXJzOiBwcm9ncmFtX3BhdGgsIHJlcXVpcmVkOiBmYWxzZSkKaWYgZ2l0LmZvdW5kKCkKICBzY3JpcHRfZW52aXJvbm1lbnQucHJlcGVuZCgnUEFUSCcsIGZzLnBhcmVudChnaXQuZnVsbF9wYXRoKCkpKQplbmRpZgoKaWYgZ2V0X29wdGlvbignc2FuZV90b29sX3BhdGgnKSAhPSAnJwogIHNjcmlwdF9lbnZpcm9ubWVudC5wcmVwZW5kKCdQQVRIJywgZ2V0X29wdGlvbignc2FuZV90b29sX3BhdGgnKSkKZW5kaWYKCiMgVGhlIGVudmlyb25tZW50IHVzZWQgYnkgR0lULVZFUlNJT04tR0VOLiBOb3RlIHRoYXQgd2UgZXhwbGljaXRseSBvdmVycmlkZQojIGVudmlyb25tZW50IHZhcmlhYmxlcyB0aGF0IG1pZ2h0IGJlIHNldCBieSB0aGUgdXNlci4gVGhpcyBpcyBieSBkZXNpZ24gc28KIyB0aGF0IHdlIGFsd2F5cyB1c2Ugd2hhdGV2ZXIgTWVzb24gaGFzIGNvbmZpZ3VyZWQgaW5zdGVhZCBvZiB3aGF0IGlzIHByZXNlbnQKIyBpbiB0aGUgZW52aXJvbm1lbnQuCnZlcnNpb25fZ2VuX2Vudmlyb25tZW50ID0gc2NyaXB0X2Vudmlyb25tZW50CnZlcnNpb25fZ2VuX2Vudmlyb25tZW50LnNldCgnR0lUX0JVSUxUX0ZST01fQ09NTUlUJywgZ2V0X29wdGlvbignYnVpbHRfZnJvbV9jb21taXQnKSkKdmVyc2lvbl9nZW5fZW52aXJvbm1lbnQuc2V0KCdHSVRfREFURScsIGdldF9vcHRpb24oJ2J1aWxkX2RhdGUnKSkKdmVyc2lvbl9nZW5fZW52aXJvbm1lbnQuc2V0KCdHSVRfVVNFUl9BR0VOVCcsIGdldF9vcHRpb24oJ3VzZXJfYWdlbnQnKSkKdmVyc2lvbl9nZW5fZW52aXJvbm1lbnQuc2V0KCdHSVRfVkVSU0lPTicsIGdldF9vcHRpb24oJ3ZlcnNpb24nKSkKCmNvbXBpbGVyID0gbWVzb24uZ2V0X2NvbXBpbGVyKCdjJykKCmxpYmdpdF9zb3VyY2VzID0gWwogICdhYnNwYXRoLmMnLAogICdhZGQtaW50ZXJhY3RpdmUuYycsCiAgJ2FkZC1wYXRjaC5jJywKICAnYWR2aWNlLmMnLAogICdhbGlhcy5jJywKICAnYWxsb2MuYycsCiAgJ2FwcGx5LmMnLAogICdhcmNoaXZlLXRhci5jJywKICAnYXJjaGl2ZS16aXAuYycsCiAgJ2FyY2hpdmUuYycsCiAgJ2F0dHIuYycsCiAgJ2Jhc2U4NS5jJywKICAnYmlzZWN0LmMnLAogICdibGFtZS5jJywKICAnYmxvYi5jJywKICAnYmxvb20uYycsCiAgJ2JyYW5jaC5jJywKICAnYnVsay1jaGVja2luLmMnLAogICdidW5kbGUtdXJpLmMnLAogICdidW5kbGUuYycsCiAgJ2NhY2hlLXRyZWUuYycsCiAgJ2NidHJlZS5jJywKICAnY2hkaXItbm90aWZ5LmMnLAogICdjaGVja291dC5jJywKICAnY2h1bmstZm9ybWF0LmMnLAogICdjb2xvci5jJywKICAnY29sdW1uLmMnLAogICdjb21iaW5lLWRpZmYuYycsCiAgJ2NvbW1pdC1ncmFwaC5jJywKICAnY29tbWl0LXJlYWNoLmMnLAogICdjb21taXQuYycsCiAgJ2NvbXBhdC9ub25ibG9jay5jJywKICAnY29tcGF0L29ic3RhY2suYycsCiAgJ2NvbXBhdC90ZXJtaW5hbC5jJywKICAnY29tcGF0L3psaWItdW5jb21wcmVzczIuYycsCiAgJ2NvbmZpZy5jJywKICAnY29ubmVjdC5jJywKICAnY29ubmVjdGVkLmMnLAogICdjb252ZXJ0LmMnLAogICdjb3B5LmMnLAogICdjcmVkZW50aWFsLmMnLAogICdjc3VtLWZpbGUuYycsCiAgJ2N0eXBlLmMnLAogICdkYXRlLmMnLAogICdkZWNvcmF0ZS5jJywKICAnZGVsdGEtaXNsYW5kcy5jJywKICAnZGlhZ25vc2UuYycsCiAgJ2RpZmYtZGVsdGEuYycsCiAgJ2RpZmYtbWVyZ2VzLmMnLAogICdkaWZmLWxpYi5jJywKICAnZGlmZi1uby1pbmRleC5jJywKICAnZGlmZi5jJywKICAnZGlmZmNvcmUtYnJlYWsuYycsCiAgJ2RpZmZjb3JlLWRlbHRhLmMnLAogICdkaWZmY29yZS1vcmRlci5jJywKICAnZGlmZmNvcmUtcGlja2F4ZS5jJywKICAnZGlmZmNvcmUtcmVuYW1lLmMnLAogICdkaWZmY29yZS1yb3RhdGUuYycsCiAgJ2Rpci1pdGVyYXRvci5jJywKICAnZGlyLmMnLAogICdlZGl0b3IuYycsCiAgJ2VudHJ5LmMnLAogICdlbnZpcm9ubWVudC5jJywKICAnZXdhaC9iaXRtYXAuYycsCiAgJ2V3YWgvZXdhaF9iaXRtYXAuYycsCiAgJ2V3YWgvZXdhaF9pby5jJywKICAnZXdhaC9ld2FoX3Jsdy5jJywKICAnZXhlYy1jbWQuYycsCiAgJ2ZldGNoLW5lZ290aWF0b3IuYycsCiAgJ2ZldGNoLXBhY2suYycsCiAgJ2ZtdC1tZXJnZS1tc2cuYycsCiAgJ2ZzY2suYycsCiAgJ2ZzbW9uaXRvci5jJywKICAnZnNtb25pdG9yLWlwYy5jJywKICAnZnNtb25pdG9yLXNldHRpbmdzLmMnLAogICdnZXR0ZXh0LmMnLAogICdnaXQtemxpYi5jJywKICAnZ3BnLWludGVyZmFjZS5jJywKICAnZ3JhcGguYycsCiAgJ2dyZXAuYycsCiAgJ2hhc2gtbG9va3VwLmMnLAogICdoYXNobWFwLmMnLAogICdoZWxwLmMnLAogICdoZXguYycsCiAgJ2hleC1sbC5jJywKICAnaG9vay5jJywKICAnaWRlbnQuYycsCiAgJ2pzb24td3JpdGVyLmMnLAogICdrd3NldC5jJywKICAnbGV2ZW5zaHRlaW4uYycsCiAgJ2xpbmUtbG9nLmMnLAogICdsaW5lLXJhbmdlLmMnLAogICdsaW5lYXItYXNzaWdubWVudC5jJywKICAnbGlzdC1vYmplY3RzLWZpbHRlci1vcHRpb25zLmMnLAogICdsaXN0LW9iamVjdHMtZmlsdGVyLmMnLAogICdsaXN0LW9iamVjdHMuYycsCiAgJ2xvY2tmaWxlLmMnLAogICdsb2ctdHJlZS5jJywKICAnbG9vc2UuYycsCiAgJ2xzLXJlZnMuYycsCiAgJ21haWxpbmZvLmMnLAogICdtYWlsbWFwLmMnLAogICdtYXRjaC10cmVlcy5jJywKICAnbWVtLXBvb2wuYycsCiAgJ21lcmdlLWJsb2JzLmMnLAogICdtZXJnZS1sbC5jJywKICAnbWVyZ2Utb3J0LmMnLAogICdtZXJnZS1vcnQtd3JhcHBlcnMuYycsCiAgJ21lcmdlLXJlY3Vyc2l2ZS5jJywKICAnbWVyZ2UuYycsCiAgJ21pZHguYycsCiAgJ21pZHgtd3JpdGUuYycsCiAgJ25hbWUtaGFzaC5jJywKICAnbmVnb3RpYXRvci9kZWZhdWx0LmMnLAogICduZWdvdGlhdG9yL25vb3AuYycsCiAgJ25lZ290aWF0b3Ivc2tpcHBpbmcuYycsCiAgJ25vdGVzLWNhY2hlLmMnLAogICdub3Rlcy1tZXJnZS5jJywKICAnbm90ZXMtdXRpbHMuYycsCiAgJ25vdGVzLmMnLAogICdvYmplY3QtZmlsZS1jb252ZXJ0LmMnLAogICdvYmplY3QtZmlsZS5jJywKICAnb2JqZWN0LW5hbWUuYycsCiAgJ29iamVjdC5jJywKICAnb2lkLWFycmF5LmMnLAogICdvaWRtYXAuYycsCiAgJ29pZHNldC5jJywKICAnb2lkdHJlZS5jJywKICAncGFjay1iaXRtYXAtd3JpdGUuYycsCiAgJ3BhY2stYml0bWFwLmMnLAogICdwYWNrLWNoZWNrLmMnLAogICdwYWNrLW10aW1lcy5jJywKICAncGFjay1vYmplY3RzLmMnLAogICdwYWNrLXJldmluZGV4LmMnLAogICdwYWNrLXdyaXRlLmMnLAogICdwYWNrZmlsZS5jJywKICAncGFnZXIuYycsCiAgJ3BhcmFsbGVsLWNoZWNrb3V0LmMnLAogICdwYXJzZS5jJywKICAncGFyc2Utb3B0aW9ucy1jYi5jJywKICAncGFyc2Utb3B0aW9ucy5jJywKICAncGF0Y2gtZGVsdGEuYycsCiAgJ3BhdGNoLWlkcy5jJywKICAncGF0aC5jJywKICAncGF0aHNwZWMuYycsCiAgJ3BrdC1saW5lLmMnLAogICdwcmVsb2FkLWluZGV4LmMnLAogICdwcmV0dHkuYycsCiAgJ3ByaW8tcXVldWUuYycsCiAgJ3Byb2dyZXNzLmMnLAogICdwcm9taXNvci1yZW1vdGUuYycsCiAgJ3Byb21wdC5jJywKICAncHJvdG9jb2wuYycsCiAgJ3Byb3RvY29sLWNhcHMuYycsCiAgJ3BydW5lLXBhY2tlZC5jJywKICAncHNldWRvLW1lcmdlLmMnLAogICdxdW90ZS5jJywKICAncmFuZ2UtZGlmZi5jJywKICAncmVhY2hhYmxlLmMnLAogICdyZWFkLWNhY2hlLmMnLAogICdyZWJhc2UtaW50ZXJhY3RpdmUuYycsCiAgJ3JlYmFzZS5jJywKICAncmVmLWZpbHRlci5jJywKICAncmVmbG9nLXdhbGsuYycsCiAgJ3JlZmxvZy5jJywKICAncmVmcy5jJywKICAncmVmcy9kZWJ1Zy5jJywKICAncmVmcy9maWxlcy1iYWNrZW5kLmMnLAogICdyZWZzL3JlZnRhYmxlLWJhY2tlbmQuYycsCiAgJ3JlZnMvaXRlcmF0b3IuYycsCiAgJ3JlZnMvcGFja2VkLWJhY2tlbmQuYycsCiAgJ3JlZnMvcmVmLWNhY2hlLmMnLAogICdyZWZzcGVjLmMnLAogICdyZWZ0YWJsZS9iYXNpY3MuYycsCiAgJ3JlZnRhYmxlL2Vycm9yLmMnLAogICdyZWZ0YWJsZS9ibG9jay5jJywKICAncmVmdGFibGUvYmxvY2tzb3VyY2UuYycsCiAgJ3JlZnRhYmxlL2l0ZXIuYycsCiAgJ3JlZnRhYmxlL21lcmdlZC5jJywKICAncmVmdGFibGUvcHEuYycsCiAgJ3JlZnRhYmxlL3JlYWRlci5jJywKICAncmVmdGFibGUvcmVjb3JkLmMnLAogICdyZWZ0YWJsZS9zdGFjay5jJywKICAncmVmdGFibGUvc3lzdGVtLmMnLAogICdyZWZ0YWJsZS90cmVlLmMnLAogICdyZWZ0YWJsZS93cml0ZXIuYycsCiAgJ3JlbW90ZS5jJywKICAncmVwbGFjZS1vYmplY3QuYycsCiAgJ3JlcG8tc2V0dGluZ3MuYycsCiAgJ3JlcG9zaXRvcnkuYycsCiAgJ3JlcmVyZS5jJywKICAncmVzZXQuYycsCiAgJ3Jlc29sdmUtdW5kby5jJywKICAncmV2aXNpb24uYycsCiAgJ3J1bi1jb21tYW5kLmMnLAogICdzZW5kLXBhY2suYycsCiAgJ3NlcXVlbmNlci5jJywKICAnc2VydmUuYycsCiAgJ3NlcnZlci1pbmZvLmMnLAogICdzZXR1cC5jJywKICAnc2hhbGxvdy5jJywKICAnc2lkZWJhbmQuYycsCiAgJ3NpZ2NoYWluLmMnLAogICdzcGFyc2UtaW5kZXguYycsCiAgJ3NwbGl0LWluZGV4LmMnLAogICdzdGFibGUtcXNvcnQuYycsCiAgJ3N0YXRpbmZvLmMnLAogICdzdHJidWYuYycsCiAgJ3N0cmVhbWluZy5jJywKICAnc3RyaW5nLWxpc3QuYycsCiAgJ3N0cm1hcC5jJywKICAnc3RydmVjLmMnLAogICdzdWItcHJvY2Vzcy5jJywKICAnc3VibW9kdWxlLWNvbmZpZy5jJywKICAnc3VibW9kdWxlLmMnLAogICdzeW1saW5rcy5jJywKICAndGFnLmMnLAogICd0ZW1wZmlsZS5jJywKICAndGhyZWFkLXV0aWxzLmMnLAogICd0bXAtb2JqZGlyLmMnLAogICd0cmFjZS5jJywKICAndHJhY2UyLmMnLAogICd0cmFjZTIvdHIyX2NmZy5jJywKICAndHJhY2UyL3RyMl9jbWRfbmFtZS5jJywKICAndHJhY2UyL3RyMl9jdHIuYycsCiAgJ3RyYWNlMi90cjJfZHN0LmMnLAogICd0cmFjZTIvdHIyX3NpZC5jJywKICAndHJhY2UyL3RyMl9zeXNlbnYuYycsCiAgJ3RyYWNlMi90cjJfdGJ1Zi5jJywKICAndHJhY2UyL3RyMl90Z3RfZXZlbnQuYycsCiAgJ3RyYWNlMi90cjJfdGd0X25vcm1hbC5jJywKICAndHJhY2UyL3RyMl90Z3RfcGVyZi5jJywKICAndHJhY2UyL3RyMl90bHMuYycsCiAgJ3RyYWNlMi90cjJfdG1yLmMnLAogICd0cmFpbGVyLmMnLAogICd0cmFuc3BvcnQtaGVscGVyLmMnLAogICd0cmFuc3BvcnQuYycsCiAgJ3RyZWUtZGlmZi5jJywKICAndHJlZS13YWxrLmMnLAogICd0cmVlLmMnLAogICd1bnBhY2stdHJlZXMuYycsCiAgJ3VwbG9hZC1wYWNrLmMnLAogICd1cmwuYycsCiAgJ3VybG1hdGNoLmMnLAogICd1c2FnZS5jJywKICAndXNlcmRpZmYuYycsCiAgJ3V0ZjguYycsCiAgJ3ZhcmludC5jJywKICAndmVyc2lvbmNtcC5jJywKICAnd2Fsa2VyLmMnLAogICd3aWxkbWF0Y2guYycsCiAgJ3dvcmt0cmVlLmMnLAogICd3cmFwcGVyLmMnLAogICd3cml0ZS1vci1kaWUuYycsCiAgJ3dzLmMnLAogICd3dC1zdGF0dXMuYycsCiAgJ3hkaWZmLWludGVyZmFjZS5jJywKICAneGRpZmYveGRpZmZpLmMnLAogICd4ZGlmZi94ZW1pdC5jJywKICAneGRpZmYveGhpc3RvZ3JhbS5jJywKICAneGRpZmYveG1lcmdlLmMnLAogICd4ZGlmZi94cGF0aWVuY2UuYycsCiAgJ3hkaWZmL3hwcmVwYXJlLmMnLAogICd4ZGlmZi94dXRpbHMuYycsCl0KCmJ1aWx0aW5fc291cmNlcyA9IFsKICAnYnVpbHRpbi9hZGQuYycsCiAgJ2J1aWx0aW4vYW0uYycsCiAgJ2J1aWx0aW4vYW5ub3RhdGUuYycsCiAgJ2J1aWx0aW4vYXBwbHkuYycsCiAgJ2J1aWx0aW4vYXJjaGl2ZS5jJywKICAnYnVpbHRpbi9iaXNlY3QuYycsCiAgJ2J1aWx0aW4vYmxhbWUuYycsCiAgJ2J1aWx0aW4vYnJhbmNoLmMnLAogICdidWlsdGluL2J1Z3JlcG9ydC5jJywKICAnYnVpbHRpbi9idW5kbGUuYycsCiAgJ2J1aWx0aW4vY2F0LWZpbGUuYycsCiAgJ2J1aWx0aW4vY2hlY2stYXR0ci5jJywKICAnYnVpbHRpbi9jaGVjay1pZ25vcmUuYycsCiAgJ2J1aWx0aW4vY2hlY2stbWFpbG1hcC5jJywKICAnYnVpbHRpbi9jaGVjay1yZWYtZm9ybWF0LmMnLAogICdidWlsdGluL2NoZWNrb3V0LS13b3JrZXIuYycsCiAgJ2J1aWx0aW4vY2hlY2tvdXQtaW5kZXguYycsCiAgJ2J1aWx0aW4vY2hlY2tvdXQuYycsCiAgJ2J1aWx0aW4vY2xlYW4uYycsCiAgJ2J1aWx0aW4vY2xvbmUuYycsCiAgJ2J1aWx0aW4vY29sdW1uLmMnLAogICdidWlsdGluL2NvbW1pdC1ncmFwaC5jJywKICAnYnVpbHRpbi9jb21taXQtdHJlZS5jJywKICAnYnVpbHRpbi9jb21taXQuYycsCiAgJ2J1aWx0aW4vY29uZmlnLmMnLAogICdidWlsdGluL2NvdW50LW9iamVjdHMuYycsCiAgJ2J1aWx0aW4vY3JlZGVudGlhbC1jYWNoZS0tZGFlbW9uLmMnLAogICdidWlsdGluL2NyZWRlbnRpYWwtY2FjaGUuYycsCiAgJ2J1aWx0aW4vY3JlZGVudGlhbC1zdG9yZS5jJywKICAnYnVpbHRpbi9jcmVkZW50aWFsLmMnLAogICdidWlsdGluL2Rlc2NyaWJlLmMnLAogICdidWlsdGluL2RpYWdub3NlLmMnLAogICdidWlsdGluL2RpZmYtZmlsZXMuYycsCiAgJ2J1aWx0aW4vZGlmZi1pbmRleC5jJywKICAnYnVpbHRpbi9kaWZmLXRyZWUuYycsCiAgJ2J1aWx0aW4vZGlmZi5jJywKICAnYnVpbHRpbi9kaWZmdG9vbC5jJywKICAnYnVpbHRpbi9mYXN0LWV4cG9ydC5jJywKICAnYnVpbHRpbi9mYXN0LWltcG9ydC5jJywKICAnYnVpbHRpbi9mZXRjaC1wYWNrLmMnLAogICdidWlsdGluL2ZldGNoLmMnLAogICdidWlsdGluL2ZtdC1tZXJnZS1tc2cuYycsCiAgJ2J1aWx0aW4vZm9yLWVhY2gtcmVmLmMnLAogICdidWlsdGluL2Zvci1lYWNoLXJlcG8uYycsCiAgJ2J1aWx0aW4vZnNjay5jJywKICAnYnVpbHRpbi9mc21vbml0b3ItLWRhZW1vbi5jJywKICAnYnVpbHRpbi9nYy5jJywKICAnYnVpbHRpbi9nZXQtdGFyLWNvbW1pdC1pZC5jJywKICAnYnVpbHRpbi9ncmVwLmMnLAogICdidWlsdGluL2hhc2gtb2JqZWN0LmMnLAogICdidWlsdGluL2hlbHAuYycsCiAgJ2J1aWx0aW4vaG9vay5jJywKICAnYnVpbHRpbi9pbmRleC1wYWNrLmMnLAogICdidWlsdGluL2luaXQtZGIuYycsCiAgJ2J1aWx0aW4vaW50ZXJwcmV0LXRyYWlsZXJzLmMnLAogICdidWlsdGluL2xvZy5jJywKICAnYnVpbHRpbi9scy1maWxlcy5jJywKICAnYnVpbHRpbi9scy1yZW1vdGUuYycsCiAgJ2J1aWx0aW4vbHMtdHJlZS5jJywKICAnYnVpbHRpbi9tYWlsaW5mby5jJywKICAnYnVpbHRpbi9tYWlsc3BsaXQuYycsCiAgJ2J1aWx0aW4vbWVyZ2UtYmFzZS5jJywKICAnYnVpbHRpbi9tZXJnZS1maWxlLmMnLAogICdidWlsdGluL21lcmdlLWluZGV4LmMnLAogICdidWlsdGluL21lcmdlLW91cnMuYycsCiAgJ2J1aWx0aW4vbWVyZ2UtcmVjdXJzaXZlLmMnLAogICdidWlsdGluL21lcmdlLXRyZWUuYycsCiAgJ2J1aWx0aW4vbWVyZ2UuYycsCiAgJ2J1aWx0aW4vbWt0YWcuYycsCiAgJ2J1aWx0aW4vbWt0cmVlLmMnLAogICdidWlsdGluL211bHRpLXBhY2staW5kZXguYycsCiAgJ2J1aWx0aW4vbXYuYycsCiAgJ2J1aWx0aW4vbmFtZS1yZXYuYycsCiAgJ2J1aWx0aW4vbm90ZXMuYycsCiAgJ2J1aWx0aW4vcGFjay1vYmplY3RzLmMnLAogICdidWlsdGluL3BhY2stcmVkdW5kYW50LmMnLAogICdidWlsdGluL3BhY2stcmVmcy5jJywKICAnYnVpbHRpbi9wYXRjaC1pZC5jJywKICAnYnVpbHRpbi9wcnVuZS1wYWNrZWQuYycsCiAgJ2J1aWx0aW4vcHJ1bmUuYycsCiAgJ2J1aWx0aW4vcHVsbC5jJywKICAnYnVpbHRpbi9wdXNoLmMnLAogICdidWlsdGluL3JhbmdlLWRpZmYuYycsCiAgJ2J1aWx0aW4vcmVhZC10cmVlLmMnLAogICdidWlsdGluL3JlYmFzZS5jJywKICAnYnVpbHRpbi9yZWNlaXZlLXBhY2suYycsCiAgJ2J1aWx0aW4vcmVmbG9nLmMnLAogICdidWlsdGluL3JlZnMuYycsCiAgJ2J1aWx0aW4vcmVtb3RlLWV4dC5jJywKICAnYnVpbHRpbi9yZW1vdGUtZmQuYycsCiAgJ2J1aWx0aW4vcmVtb3RlLmMnLAogICdidWlsdGluL3JlcGFjay5jJywKICAnYnVpbHRpbi9yZXBsYWNlLmMnLAogICdidWlsdGluL3JlcGxheS5jJywKICAnYnVpbHRpbi9yZXJlcmUuYycsCiAgJ2J1aWx0aW4vcmVzZXQuYycsCiAgJ2J1aWx0aW4vcmV2LWxpc3QuYycsCiAgJ2J1aWx0aW4vcmV2LXBhcnNlLmMnLAogICdidWlsdGluL3JldmVydC5jJywKICAnYnVpbHRpbi9ybS5jJywKICAnYnVpbHRpbi9zZW5kLXBhY2suYycsCiAgJ2J1aWx0aW4vc2hvcnRsb2cuYycsCiAgJ2J1aWx0aW4vc2hvdy1icmFuY2guYycsCiAgJ2J1aWx0aW4vc2hvdy1pbmRleC5jJywKICAnYnVpbHRpbi9zaG93LXJlZi5jJywKICAnYnVpbHRpbi9zcGFyc2UtY2hlY2tvdXQuYycsCiAgJ2J1aWx0aW4vc3Rhc2guYycsCiAgJ2J1aWx0aW4vc3RyaXBzcGFjZS5jJywKICAnYnVpbHRpbi9zdWJtb2R1bGUtLWhlbHBlci5jJywKICAnYnVpbHRpbi9zeW1ib2xpYy1yZWYuYycsCiAgJ2J1aWx0aW4vdGFnLmMnLAogICdidWlsdGluL3VucGFjay1maWxlLmMnLAogICdidWlsdGluL3VucGFjay1vYmplY3RzLmMnLAogICdidWlsdGluL3VwZGF0ZS1pbmRleC5jJywKICAnYnVpbHRpbi91cGRhdGUtcmVmLmMnLAogICdidWlsdGluL3VwZGF0ZS1zZXJ2ZXItaW5mby5jJywKICAnYnVpbHRpbi91cGxvYWQtYXJjaGl2ZS5jJywKICAnYnVpbHRpbi91cGxvYWQtcGFjay5jJywKICAnYnVpbHRpbi92YXIuYycsCiAgJ2J1aWx0aW4vdmVyaWZ5LWNvbW1pdC5jJywKICAnYnVpbHRpbi92ZXJpZnktcGFjay5jJywKICAnYnVpbHRpbi92ZXJpZnktdGFnLmMnLAogICdidWlsdGluL3dvcmt0cmVlLmMnLAogICdidWlsdGluL3dyaXRlLXRyZWUuYycsCl0KCmxpYmdpdF9zb3VyY2VzICs9IGN1c3RvbV90YXJnZXQoCiAgaW5wdXQ6ICdjb21tYW5kLWxpc3QudHh0JywKICBvdXRwdXQ6ICdjb21tYW5kLWxpc3QuaCcsCiAgY29tbWFuZDogW3NoZWxsLCBtZXNvbi5jdXJyZW50X3NvdXJjZV9kaXIoKSArICcvZ2VuZXJhdGUtY21kbGlzdC5zaCcsIG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpLCAnQE9VVFBVVEAnXSwKICBlbnY6IHNjcmlwdF9lbnZpcm9ubWVudCwKKQoKbGliZ2l0X3NvdXJjZXMgKz0gY3VzdG9tX3RhcmdldCgKICBvdXRwdXQ6ICdjb25maWctbGlzdC5oJywKICBjb21tYW5kOiBbCiAgICBzaGVsbCwKICAgIG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpICsgJy9nZW5lcmF0ZS1jb25maWdsaXN0LnNoJywKICAgIG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpLAogICAgJ0BPVVRQVVRAJywKICBdLAogIGVudjogc2NyaXB0X2Vudmlyb25tZW50LAopCgpsaWJnaXRfc291cmNlcyArPSBjdXN0b21fdGFyZ2V0KAogIGlucHV0OiAnRG9jdW1lbnRhdGlvbi9naXRob29rcy50eHQnLAogIG91dHB1dDogJ2hvb2stbGlzdC5oJywKICBjb21tYW5kOiBbCiAgICBzaGVsbCwKICAgIG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpICsgJy9nZW5lcmF0ZS1ob29rbGlzdC5zaCcsCiAgICBtZXNvbi5jdXJyZW50X3NvdXJjZV9kaXIoKSwKICAgICdAT1VUUFVUQCcsCiAgXSwKICBlbnY6IHNjcmlwdF9lbnZpcm9ubWVudCwKKQoKIyBUaGlzIGNvbnRhaW5zIHRoZSB2YXJpYWJsZXMgZm9yIEdJVC1CVUlMRC1PUFRJT05TLCB3aGljaCB3ZSB1c2UgdG8gcHJvcGFnYXRlCiMgYnVpbGQgb3B0aW9ucyB0byBvdXIgdGVzdHMuCmJ1aWxkX29wdGlvbnNfY29uZmlnID0gY29uZmlndXJhdGlvbl9kYXRhKCkKYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdHSVRfSU5URVJPUF9NQUtFX09QVFMnLCAnJykKYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdHSVRfUEVSRl9MQVJHRV9SRVBPJywgJycpCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnR0lUX1BFUkZfTUFLRV9DT01NQU5EJywgJycpCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnR0lUX1BFUkZfTUFLRV9PUFRTJywgJycpCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnR0lUX1BFUkZfUkVQRUFUX0NPVU5UJywgJycpCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnR0lUX1BFUkZfUkVQTycsICcnKQpidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ0dJVF9URVNUX0NNUF9VU0VfQ09QSUVEX0NPTlRFWFQnLCAnJykKYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdHSVRfVEVTVF9JTkRFWF9WRVJTSU9OJywgJycpCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnR0lUX1RFU1RfT1BUUycsICcnKQpidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ0dJVF9URVNUX1BFUkxfRkFUQUxfV0FSTklOR1MnLCAnJykKYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdHSVRfVEVTVF9VVEY4X0xPQ0FMRScsICcnKQpidWlsZF9vcHRpb25zX2NvbmZpZy5zZXRfcXVvdGVkKCdMT0NBTEVESVInLCBmcy5hc19wb3NpeChnZXRfb3B0aW9uKCdwcmVmaXgnKSAvIGdldF9vcHRpb24oJ2xvY2FsZWRpcicpKSkKYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdHSVRXRUJESVInLCBmcy5hc19wb3NpeChnZXRfb3B0aW9uKCdwcmVmaXgnKSAvIGdldF9vcHRpb24oJ2RhdGFkaXInKSAvICdnaXR3ZWInKSkKCmlmIGdldF9vcHRpb24oJ3NhbmVfdG9vbF9wYXRoJykgIT0gJycKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXRfcXVvdGVkKCdCUk9LRU5fUEFUSF9GSVgnLCAnc3xeXCMgQEJST0tFTl9QQVRIX0ZJWEAkfGdpdF9icm9rZW5fcGF0aF9maXggIicgKyBnZXRfb3B0aW9uKCdzYW5lX3Rvb2xfcGF0aCcpICsgJyJ8JykKZWxzZQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldF9xdW90ZWQoJ0JST0tFTl9QQVRIX0ZJWCcsICcvXlwjIEBCUk9LRU5fUEFUSF9GSVhAJC9kJykKZW5kaWYKCnRlc3Rfb3V0cHV0X2RpcmVjdG9yeSA9IGdldF9vcHRpb24oJ3Rlc3Rfb3V0cHV0X2RpcmVjdG9yeScpCmlmIHRlc3Rfb3V0cHV0X2RpcmVjdG9yeSA9PSAnJwogIHRlc3Rfb3V0cHV0X2RpcmVjdG9yeSA9IG1lc29uLnByb2plY3RfYnVpbGRfcm9vdCgpIC8gJ3Rlc3Qtb3V0cHV0JwplbmRpZgoKIyBUaGVzZSB2YXJpYWJsZXMgYXJlIHVzZWQgZm9yIGJ1aWxkaW5nIGxpYmdpdC5hLgpsaWJnaXRfY19hcmdzID0gWwogICctREJJTkRJUj0iJyArIGdldF9vcHRpb24oJ2JpbmRpcicpICsgJyInLAogICctRERFRkFVTFRfRURJVE9SPSInICsgZ2V0X29wdGlvbignZGVmYXVsdF9lZGl0b3InKSArICciJywKICAnLURERUZBVUxUX0dJVF9URU1QTEFURV9ESVI9IicgKyBnZXRfb3B0aW9uKCdkYXRhZGlyJykgLyAnZ2l0LWNvcmUvdGVtcGxhdGVzJyArICciJywKICAnLURERUZBVUxUX0hFTFBfRk9STUFUPSInICsgZ2V0X29wdGlvbignZGVmYXVsdF9oZWxwX2Zvcm1hdCcpICsgJyInLAogICctRERFRkFVTFRfUEFHRVI9IicgKyBnZXRfb3B0aW9uKCdkZWZhdWx0X3BhZ2VyJykgKyAnIicsCiAgJy1ERVRDX0dJVEFUVFJJQlVURVM9IicgKyBnZXRfb3B0aW9uKCdnaXRhdHRyaWJ1dGVzJykgKyAnIicsCiAgJy1ERVRDX0dJVENPTkZJRz0iJyArIGdldF9vcHRpb24oJ2dpdGNvbmZpZycpICsgJyInLAogICctREZBTExCQUNLX1JVTlRJTUVfUFJFRklYPSInICsgZ2V0X29wdGlvbigncHJlZml4JykgKyAnIicsCiAgJy1ER0lUX0VYRUNfUEFUSD0iJyArIGdldF9vcHRpb24oJ3ByZWZpeCcpIC8gZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlIicsCiAgJy1ER0lUX0hPU1RfQ1BVPSInICsgaG9zdF9tYWNoaW5lLmNwdV9mYW1pbHkoKSArICciJywKICAnLURHSVRfSFRNTF9QQVRIPSInICsgZ2V0X29wdGlvbignZGF0YWRpcicpIC8gJ2RvYy9naXQtZG9jIicsCiAgJy1ER0lUX0lORk9fUEFUSD0iJyArIGdldF9vcHRpb24oJ2luZm9kaXInKSArICciJywKICAnLURHSVRfTE9DQUxFX1BBVEg9IicgKyBnZXRfb3B0aW9uKCdsb2NhbGVkaXInKSArICciJywKICAnLURHSVRfTUFOX1BBVEg9IicgKyBnZXRfb3B0aW9uKCdtYW5kaXInKSArICciJywKICAnLURQQUdFUl9FTlY9IicgKyBnZXRfb3B0aW9uKCdwYWdlcl9lbnZpcm9ubWVudCcpICsgJyInLAogICctRFNIRUxMX1BBVEg9IicgKyBmcy5hc19wb3NpeChzaGVsbC5mdWxsX3BhdGgoKSkgKyAnIicsCl0KbGliZ2l0X2luY2x1ZGVfZGlyZWN0b3JpZXMgPSBbICcuJyBdCmxpYmdpdF9kZXBlbmRlbmNpZXMgPSBbIF0KCiMgVHJlYXQgYW55IHdhcm5pbmcgbGV2ZWwgYWJvdmUgMSB0aGUgc2FtZSBhcyB3ZSB0cmVhdCBERVZFTE9QRVI9MSBpbiBvdXIKIyBNYWtlZmlsZS4KaWYgZ2V0X29wdGlvbignd2FybmluZ19sZXZlbCcpIGluIFsnMicsJzMnLCAnZXZlcnl0aGluZyddIGFuZCBjb21waWxlci5nZXRfYXJndW1lbnRfc3ludGF4KCkgPT0gJ2djYycKICBmb3JlYWNoIGNmbGFnIDogWwogICAgJy1XZGVjbGFyYXRpb24tYWZ0ZXItc3RhdGVtZW50JywKICAgICctV2Zvcm1hdC1zZWN1cml0eScsCiAgICAnLVdvbGQtc3R5bGUtZGVmaW5pdGlvbicsCiAgICAnLVdvdmVyZmxvdycsCiAgICAnLVdwb2ludGVyLWFyaXRoJywKICAgICctV3N0cmljdC1wcm90b3R5cGVzJywKICAgICctV3VudXNlZCcsCiAgICAnLVd2bGEnLAogICAgJy1Xd3JpdGUtc3RyaW5ncycsCiAgICAnLWZuby1jb21tb24nLAogICAgJy1XdGF1dG9sb2dpY2FsLWNvbnN0YW50LW91dC1vZi1yYW5nZS1jb21wYXJlJywKICAgICMgSWYgYSBmdW5jdGlvbiBpcyBwdWJsaWMsIHRoZXJlIHNob3VsZCBiZSBhIHByb3RvdHlwZSBhbmQgdGhlIHJpZ2h0CiAgICAjIGhlYWRlciBmaWxlIHNob3VsZCBiZSBpbmNsdWRlZC4gSWYgbm90LCBpdCBzaG91bGQgYmUgc3RhdGljLgogICAgJy1XbWlzc2luZy1wcm90b3R5cGVzJywKICAgICMgVGhlc2UgYXJlIGRpc2FibGVkIGJlY2F1c2Ugd2UgaGF2ZSB0aGVzZSBhbGwgb3ZlciB0aGUgcGxhY2UuCiAgICAnLVduby1lbXB0eS1ib2R5JywKICAgICctV25vLW1pc3NpbmctZmllbGQtaW5pdGlhbGl6ZXJzJywKICAgICctV25vLXNpZ24tY29tcGFyZScsCiAgXQogICAgaWYgY29tcGlsZXIuaGFzX2FyZ3VtZW50KGNmbGFnKQogICAgICBsaWJnaXRfY19hcmdzICs9IGNmbGFnCiAgICBlbmRpZgogIGVuZGZvcmVhY2gKZW5kaWYKCmlmIGdldF9vcHRpb24oJ2Jfc2FuaXRpemUnKS5jb250YWlucygnYWRkcmVzcycpCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdTQU5JVElaRV9BRERSRVNTJywgJ1llc0NvbXBpbGVkV2l0aEl0JykKZWxzZQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnU0FOSVRJWkVfQUREUkVTUycsICcnKQplbmRpZgppZiBnZXRfb3B0aW9uKCdiX3Nhbml0aXplJykuY29udGFpbnMoJ2xlYWsnKQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnU0FOSVRJWkVfTEVBSycsICdZZXNDb21waWxlZFdpdGhJdCcpCmVsc2UKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ1NBTklUSVpFX0xFQUsnLCAnJykKZW5kaWYKaWYgZ2V0X29wdGlvbignYl9zYW5pdGl6ZScpLmNvbnRhaW5zKCd1bmRlZmluZWQnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMURDX0ZPUkNFX0FMSUdORURfQUNDRVNTJwplbmRpZgoKZXhlY3V0YWJsZV9zdWZmaXggPSAnJwppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ2N5Z3dpbicgb3IgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJwogIGV4ZWN1dGFibGVfc3VmZml4ID0gJy5leGUnCiAgbGliZ2l0X2NfYXJncyArPSAnLURTVFJJUF9FWFRFTlNJT049IicgKyBleGVjdXRhYmxlX3N1ZmZpeCArICciJwplbmRpZgpidWlsZF9vcHRpb25zX2NvbmZpZy5zZXRfcXVvdGVkKCdYJywgZXhlY3V0YWJsZV9zdWZmaXgpCgpweXRob24gPSBpbXBvcnQoJ3B5dGhvbicpLmZpbmRfaW5zdGFsbGF0aW9uKCdweXRob24zJywgcmVxdWlyZWQ6IGdldF9vcHRpb24oJ3B5dGhvbicpKQppZiBweXRob24uZm91bmQoKQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fUFlUSE9OJywgJycpCmVsc2UKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1BZVEhPTicKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX1BZVEhPTicsICcxJykKZW5kaWYKCiMgUGVybCBpcyB1c2VkIGZvciB0d28gZGlmZmVyZW50IHRoaW5nczogb3VyIHRlc3QgaGFybmVzcyBhbmQgdG8gcHJvdmlkZSBzb21lCiMgZmVhdHVyZXMuIEl0IGlzIG9wdGlvbmFsIGlmIHlvdSB3YW50IHRvIG5laXRoZXIgZXhlY3V0ZSB0ZXN0cyBub3IgdXNlIGFueSBvZgojIHRoZXNlIG9wdGlvbmFsIGZlYXR1cmVzLgpwZXJsX3JlcXVpcmVkID0gZ2V0X29wdGlvbigncGVybCcpCmlmIGdldF9vcHRpb24oJ3Rlc3RzJykgb3IgZ2V0X29wdGlvbignZ2l0d2ViJykuZW5hYmxlZCgpCiAgcGVybF9yZXF1aXJlZCA9IHRydWUKZW5kaWYKCiMgTm90ZSB0aGF0IHdlIG9ubHkgc2V0IE5PX1BFUkwgaWYgdGhlIFBlcmwgZmVhdHVyZXMgd2VyZSBkaXNhYmxlZCBieSB0aGUgdXNlci4KIyBJdCBtYXkgbm90IGJlIHNldCB3aGVuIHdlIGhhdmUgZm91bmQgUGVybCwgYnV0IG9ubHkgdXNlIGl0IHRvIHJ1biB0ZXN0cy4KcGVybCA9IGZpbmRfcHJvZ3JhbSgncGVybCcsIHZlcnNpb246ICc+PTUuOC4xJywgZGlyczogcHJvZ3JhbV9wYXRoLCByZXF1aXJlZDogcGVybF9yZXF1aXJlZCkKcGVybF9mZWF0dXJlc19lbmFibGVkID0gcGVybC5mb3VuZCgpIGFuZCBnZXRfb3B0aW9uKCdwZXJsJykuYWxsb3dlZCgpCmlmIHBlcmxfZmVhdHVyZXNfZW5hYmxlZAogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fUEVSTCcsICcnKQoKICBpZiBnZXRfb3B0aW9uKCdydW50aW1lX3ByZWZpeCcpCiAgICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ1BFUkxfTE9DQUxFRElSJywgJycpCiAgZWxzZQogICAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0X3F1b3RlZCgnUEVSTF9MT0NBTEVESVInLCBmcy5hc19wb3NpeChnZXRfb3B0aW9uKCdwcmVmaXgnKSAvIGdldF9vcHRpb24oJ2xvY2FsZWRpcicpKSkKICBlbmRpZgoKICBpZiBnZXRfb3B0aW9uKCdwZXJsX2NwYW5fZmFsbGJhY2snKQogICAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19QRVJMX0NQQU5fRkFMTEJBQ0tTJywgJycpCiAgZWxzZQogICAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0X3F1b3RlZCgnTk9fUEVSTF9DUEFOX0ZBTExCQUNLUycsICdZZXNQbGVhc2UnKQogIGVuZGlmCmVsc2UKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1BFUkwnCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19QRVJMJywgJzEnKQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnUEVSTF9MT0NBTEVESVInLCAnJykKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX1BFUkxfQ1BBTl9GQUxMQkFDS1MnLCAnJykKZW5kaWYKCnpsaWIgPSBkZXBlbmRlbmN5KCd6bGliJywgZGVmYXVsdF9vcHRpb25zOiBbJ2RlZmF1bHRfbGlicmFyeT1zdGF0aWMnLCAndGVzdHM9ZGlzYWJsZWQnXSkKaWYgemxpYi52ZXJzaW9uKCkudmVyc2lvbl9jb21wYXJlKCc8MS4yLjAnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fREVGTEFURV9CT1VORCcKZW5kaWYKbGliZ2l0X2RlcGVuZGVuY2llcyArPSB6bGliCgp0aHJlYWRzID0gZGVwZW5kZW5jeSgndGhyZWFkcycsIHJlcXVpcmVkOiBmYWxzZSkKaWYgdGhyZWFkcy5mb3VuZCgpCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSB0aHJlYWRzCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19QVEhSRUFEUycsICcnKQplbHNlCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19QVEhSRUFEUycKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX1BUSFJFQURTJywgJzEnKQplbmRpZgoKbXNnZm10ID0gZmluZF9wcm9ncmFtKCdtc2dmbXQnLCBkaXJzOiBwcm9ncmFtX3BhdGgsIHJlcXVpcmVkOiBmYWxzZSkKZ2V0dGV4dF9vcHRpb24gPSBnZXRfb3B0aW9uKCdnZXR0ZXh0JykuZGlzYWJsZV9hdXRvX2lmKG5vdCBtc2dmbXQuZm91bmQoKSkKaWYgbm90IG1zZ2ZtdC5mb3VuZCgpIGFuZCBnZXR0ZXh0X29wdGlvbi5lbmFibGVkKCkKICBlcnJvcignSW50ZXJuYXRpb25hbGl6YXRpb24gdmlhIGxpYmludGwgcmVxdWlyZXMgbXNnZm10JykKZW5kaWYKCmlmIGdldHRleHRfb3B0aW9uLmFsbG93ZWQoKSBhbmQgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICdkYXJ3aW4nIGFuZCBnZXRfb3B0aW9uKCdtYWNvc191c2VfaG9tZWJyZXdfZ2V0dGV4dCcpCiAgaWYgaG9zdF9tYWNoaW5lLmNwdV9mYW1pbHkoKSA9PSAneDg2XzY0JwogICAgbGliaW50bF9wcmVmaXggPSAnL3Vzci9sb2NhbCcKICBlbGlmIGhvc3RfbWFjaGluZS5jcHVfZmFtaWx5KCkgPT0gJ2FhcmNoNjQnCiAgICBsaWJpbnRsX3ByZWZpeCA9ICcvb3B0L2hvbWVicmV3JwogIGVsc2UKICAgIGVycm9yKCdIb21lYnJldyB3b3JrYXJvdW5kIG5vdCBzdXBwb3J0ZWQgb24gY3VycmVudCBhcmNoaXRlY3R1cmUnKQogIGVuZGlmCgogIGludGwgPSBjb21waWxlci5maW5kX2xpYnJhcnkoJ2ludGwnLCBkaXJzOiBsaWJpbnRsX3ByZWZpeCAvICdsaWInLCByZXF1aXJlZDogZ2V0dGV4dF9vcHRpb24pCiAgaWYgaW50bC5mb3VuZCgpCiAgICBpbnRsID0gZGVjbGFyZV9kZXBlbmRlbmN5KAogICAgICBkZXBlbmRlbmNpZXM6IGludGwsCiAgICAgIGluY2x1ZGVfZGlyZWN0b3JpZXM6IGxpYmludGxfcHJlZml4IC8gJ2luY2x1ZGUnLAogICAgKQogIGVuZGlmCmVsc2UKICBpbnRsID0gZGVwZW5kZW5jeSgnaW50bCcsIHJlcXVpcmVkOiBnZXR0ZXh0X29wdGlvbikKZW5kaWYKaWYgaW50bC5mb3VuZCgpCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBpbnRsCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19HRVRURVhUJywgJycpCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdVU0VfR0VUVEVYVF9TQ0hFTUUnLCAnJykKCiAgIyBQT1NJWCBub3dhZGF5cyByZXF1aXJlcyBgbmxfbGFuZ2luZm8oKWAsIGJ1dCBzb21lIHN5c3RlbXMgc3RpbGwgZG9uJ3QgaGF2ZQogICMgdGhlIGZ1bmN0aW9uIGF2YWlsYWJsZS4gT24gc3VjaCBzeXN0ZW1zIHdlIGluc3RlYWQgZmFsbCBiYWNrIHRvIGxpYmNoYXJzZXQuCiAgIyBPbiBuYXRpdmUgV2luZG93cyBzeXN0ZW1zIHdlIHVzZSBvdXIgb3duIGVtdWxhdGlvbi4KICBpZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgIT0gJ3dpbmRvd3MnIGFuZCBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdubF9sYW5naW5mbycpCiAgICBsaWJjaGFyc2V0ID0gY29tcGlsZXIuZmluZF9saWJyYXJ5KCdjaGFyc2V0JywgcmVxdWlyZWQ6IHRydWUpCiAgICBsaWJnaXRfZGVwZW5kZW5jaWVzICs9IGxpYmNoYXJzZXQKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9MSUJDSEFSU0VUX0gnCiAgZW5kaWYKZWxzZQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fR0VUVEVYVCcKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX0dFVFRFWFQnLCAnMScpCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdVU0VfR0VUVEVYVF9TQ0hFTUUnLCAnZmFsbHRocm91Z2gnKQplbmRpZgoKaWNvbnYgPSBkZXBlbmRlbmN5KCdpY29udicsIHJlcXVpcmVkOiBnZXRfb3B0aW9uKCdpY29udicpKQppZiBpY29udi5mb3VuZCgpCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBpY29udgogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fSUNPTlYnLCAnJykKCiAgaGF2ZV9vbGRfaWNvbnYgPSBmYWxzZQogIGlmIG5vdCBjb21waWxlci5jb21waWxlcygnJycKICAgICNpbmNsdWRlIDxpY29udi5oPgoKICAgIGV4dGVybiBzaXplX3QgaWNvbnYoaWNvbnZfdCBjZCwKICAgICAgICAgICAgICAgICAgICAgICAgY2hhciAqKmluYnVmLCBzaXplX3QgKmluYnl0ZXNsZWZ0LAogICAgICAgICAgICAgICAgICAgICAgICBjaGFyICoqb3V0YnVmLCBzaXplX3QgKm91dGJ5dGVzbGVmdCk7CiAgJycnLCBuYW1lOiAnb2xkIGljb252IGludGVyZmFjZScsIGRlcGVuZGVuY2llczogW2ljb252XSkKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1ET0xEX0lDT05WJwogICAgaGF2ZV9vbGRfaWNvbnYgPSB0cnVlCiAgZW5kaWYKCiAgaWNvbnZfb21pdHNfYm9tX3NvdXJjZSA9ICcnJyMKICAgICNpbmNsdWRlIDxpY29udi5oPgoKICAgIGludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICoqYXJndikKICAgIHsKICAnJycKICBpZiBoYXZlX29sZF9pY29udgogICAgaWNvbnZfb21pdHNfYm9tX3NvdXJjZSArPSAnJycKICAgICAgdHlwZWRlZiBjb25zdCBjaGFyICppY29udl9pYnA7CiAgICAnJycKICBlbHNlCiAgICBpY29udl9vbWl0c19ib21fc291cmNlICs9ICcnJwogICAgICB0eXBlZGVmIGNoYXIgKmljb252X2licDsKICAgICcnJwogIGVuZGlmCiAgaWNvbnZfb21pdHNfYm9tX3NvdXJjZSArPSAnJycKICAgICAgaW50IHY7CiAgICAgIGljb252X3QgY29udjsKICAgICAgY2hhciBpbltdID0gImEiOyBpY29udl9pYnAgcGluID0gaW47CiAgICAgIGNoYXIgb3V0WzIwXSA9ICIiOyBjaGFyICpwb3V0ID0gb3V0OwogICAgICBzaXplX3QgaXN6ID0gc2l6ZW9mIGluOwogICAgICBzaXplX3Qgb3N6ID0gc2l6ZW9mIG91dDsKCiAgICAgIGNvbnYgPSBpY29udl9vcGVuKCJVVEYtMTYiLCAiVVRGLTgiKTsKICAgICAgaWNvbnYoY29udiwgJnBpbiwgJmlzeiwgJnBvdXQsICZvc3opOwogICAgICBpY29udl9jbG9zZShjb252KTsKICAgICAgdiA9ICh1bnNpZ25lZCBjaGFyKShvdXRbMF0pICsgKHVuc2lnbmVkIGNoYXIpKG91dFsxXSk7CiAgICAgIHJldHVybiB2ICE9IDB4ZmUgKyAweGZmOwogICAgfQogICcnJwoKICBpZiBjb21waWxlci5ydW4oaWNvbnZfb21pdHNfYm9tX3NvdXJjZSwKICAgIGRlcGVuZGVuY2llczogaWNvbnYsCiAgICBuYW1lOiAnaWNvbnYgb21pdHMgQk9NJywKICApLnJldHVybmNvZGUoKSAhPSAwCiAgICBsaWJnaXRfY19hcmdzICs9ICctRElDT05WX09NSVRTX0JPTScKICBlbmRpZgplbHNlCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19JQ09OVicKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX0lDT05WJywgJzEnKQplbmRpZgoKcGNyZTIgPSBkZXBlbmRlbmN5KCdsaWJwY3JlMi04JywgcmVxdWlyZWQ6IGdldF9vcHRpb24oJ3BjcmUyJyksIGRlZmF1bHRfb3B0aW9uczogWydkZWZhdWx0X2xpYnJhcnk9c3RhdGljJywgJ3Rlc3Q9ZmFsc2UnXSkKaWYgcGNyZTIuZm91bmQoKQogIGxpYmdpdF9kZXBlbmRlbmNpZXMgKz0gcGNyZTIKICBsaWJnaXRfY19hcmdzICs9ICctRFVTRV9MSUJQQ1JFMicKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ1VTRV9MSUJQQ1JFMicsICcxJykKZWxzZQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnVVNFX0xJQlBDUkUyJywgJycpCmVuZGlmCgpjdXJsID0gZGVwZW5kZW5jeSgnbGliY3VybCcsIHZlcnNpb246ICc+PTcuMjEuMycsIHJlcXVpcmVkOiBnZXRfb3B0aW9uKCdjdXJsJyksIGRlZmF1bHRfb3B0aW9uczogWydkZWZhdWx0X2xpYnJhcnk9c3RhdGljJywgJ3Rlc3RzPWRpc2FibGVkJywgJ3Rvb2w9ZGlzYWJsZWQnXSkKdXNlX2N1cmxfZm9yX2ltYXBfc2VuZCA9IGZhbHNlCmlmIGN1cmwuZm91bmQoKQogIGlmIGN1cmwudmVyc2lvbigpLnZlcnNpb25fY29tcGFyZSgnPj03LjM0LjAnKQogICAgbGliZ2l0X2NfYXJncyArPSAnLURVU0VfQ1VSTF9GT1JfSU1BUF9TRU5EJwogICAgdXNlX2N1cmxfZm9yX2ltYXBfc2VuZCA9IHRydWUKICBlbmRpZgoKICBsaWJnaXRfZGVwZW5kZW5jaWVzICs9IGN1cmwKICBsaWJnaXRfY19hcmdzICs9ICctRENVUkxfRElTQUJMRV9UWVBFQ0hFQ0snCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19DVVJMJywgJycpCmVsc2UKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0NVUkwnCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19DVVJMJywgJzEnKQplbmRpZgoKZXhwYXQgPSBkZXBlbmRlbmN5KCdleHBhdCcsIHJlcXVpcmVkOiBnZXRfb3B0aW9uKCdleHBhdCcpLCBkZWZhdWx0X29wdGlvbnM6IFsnZGVmYXVsdF9saWJyYXJ5PXN0YXRpYycsICdidWlsZF90ZXN0cz1mYWxzZSddKQppZiBleHBhdC5mb3VuZCgpCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBleHBhdAoKICBpZiBleHBhdC52ZXJzaW9uKCkudmVyc2lvbl9jb21wYXJlKCc8PTEuMicpCiAgICBsaWJnaXRfY19hcmdzICs9ICctREVYUEFUX05FRURTX1hNTFBBUlNFX0gnCiAgZW5kaWYKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX0VYUEFUJywgJycpCmVsc2UKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0VYUEFUJwogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fRVhQQVQnLCAnMScpCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2hlYWRlcignc3lzL3NlbGVjdC5oJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NZU19TRUxFQ1RfSCcKZW5kaWYKCmhhc19wb2xsX2ggPSBjb21waWxlci5oYXNfaGVhZGVyKCdwb2xsLmgnKQppZiBub3QgaGFzX3BvbGxfaAogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fUE9MTF9IJwplbmRpZgoKaGFzX3N5c19wb2xsX2ggPSBjb21waWxlci5oYXNfaGVhZGVyKCdzeXMvcG9sbC5oJykKaWYgbm90IGhhc19zeXNfcG9sbF9oCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19TWVNfUE9MTF9IJwplbmRpZgoKaWYgbm90IGhhc19wb2xsX2ggYW5kIG5vdCBoYXNfc3lzX3BvbGxfaAogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fUE9MTCcKICBsaWJnaXRfc291cmNlcyArPSAnY29tcGF0L3BvbGwvcG9sbC5jJwogIGxpYmdpdF9pbmNsdWRlX2RpcmVjdG9yaWVzICs9ICdjb21wYXQvcG9sbCcKZW5kaWYKCmlmIG5vdCBjb21waWxlci5oYXNfaGVhZGVyKCdpbnR0eXBlcy5oJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0lOVFRZUEVTX0gnCmVuZGlmCgppZiBjb21waWxlci5oYXNfaGVhZGVyKCdhbGxvY2EuaCcpCiAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX0FMTE9DQV9IJwplbmRpZgoKaWYgY29tcGlsZXIuaGFzX2hlYWRlcignc3lzL3N5c2luZm8uaCcpCiAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX1NZU0lORk8nCmVuZGlmCgojIFdpbmRvd3MgaGFzIGxpYmdlbi5oIGFuZCBhIGJhc2VuYW1lIGltcGxlbWVudGF0aW9uLCBidXQgd2Ugc3RpbGwgbmVlZCBvdXIgb3duCiMgaW1wbGVtZW50YXRpb24gdG8gdGhyZWF0IHRoaW5ncyBsaWtlIGRyaXZlIHByZWZpeGVzIHNwZWNpYWxseS4KaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJyBvciBub3QgY29tcGlsZXIuaGFzX2hlYWRlcignbGliZ2VuLmgnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fTElCR0VOX0gnCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9iYXNlbmFtZS5jJwplbmRpZgoKaWYgY29tcGlsZXIuaGFzX2hlYWRlcigncGF0aHMuaCcpCiAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX1BBVEhTX0gnCmVuZGlmCgppZiBjb21waWxlci5oYXNfaGVhZGVyKCdzdHJpbmdzLmgnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9TVFJJTkdTX0gnCmVuZGlmCgpuZXR3b3JraW5nX2RlcGVuZGVuY2llcyA9IFsgXQppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ3dpbmRvd3MnCiAgd2luc29jayA9IGNvbXBpbGVyLmZpbmRfbGlicmFyeSgnd3MyXzMyJywgcmVxdWlyZWQ6IGZhbHNlKQogIGlmIHdpbnNvY2suZm91bmQoKQogICAgbmV0d29ya2luZ19kZXBlbmRlbmNpZXMgKz0gd2luc29jawogIGVuZGlmCmVsc2UKICBsaWJyZXNvbHYgPSBjb21waWxlci5maW5kX2xpYnJhcnkoJ3Jlc29sdicsIHJlcXVpcmVkOiBmYWxzZSkKICBpZiBsaWJyZXNvbHYuZm91bmQoKQogICAgbmV0d29ya2luZ19kZXBlbmRlbmNpZXMgKz0gbGlicmVzb2x2CiAgZW5kaWYKZW5kaWYKbGliZ2l0X2RlcGVuZGVuY2llcyArPSBuZXR3b3JraW5nX2RlcGVuZGVuY2llcwoKZm9yZWFjaCBzeW1ib2wgOiBbJ2luZXRfbnRvcCcsICdpbmV0X3B0b24nLCAnc3RyZXJyb3InXQogIGlmIG5vdCBjb21waWxlci5oYXNfZnVuY3Rpb24oc3ltYm9sLCBkZXBlbmRlbmNpZXM6IG5ldHdvcmtpbmdfZGVwZW5kZW5jaWVzKQogICAgbGliZ2l0X2NfYXJncyArPSAnLUROT18nICsgc3ltYm9sLnRvX3VwcGVyKCkKICBlbmRpZgplbmRmb3JlYWNoCgpoYXNfaXB2NiA9IGNvbXBpbGVyLmhhc19mdW5jdGlvbignZ2V0YWRkcmluZm8nLCBkZXBlbmRlbmNpZXM6IG5ldHdvcmtpbmdfZGVwZW5kZW5jaWVzKQppZiBub3QgaGFzX2lwdjYKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0lQVjYnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuY29tcGlsZXMoJycnCiAgI2lmZGVmIF9XSU4zMgogICMgaW5jbHVkZSA8d2luc29jazIuaD4KICAjZWxzZQogICMgaW5jbHVkZSA8c3lzL3R5cGVzLmg+CiAgIyBpbmNsdWRlIDxzeXMvc29ja2V0Lmg+CiAgI2VuZGlmCgogIHZvaWQgZnVuYyh2b2lkKQogIHsKICAgIHN0cnVjdCBzb2NrYWRkcl9zdG9yYWdlIHg7CiAgfQonJycsIG5hbWU6ICdzdHJ1Y3Qgc29ja2FkZHJfc3RvcmFnZScpCiAgaWYgaGFzX2lwdjYKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1Ec29ja2FkZHJfc3RvcmFnZT1zb2NrYWRkcl9pbjYnCiAgZWxzZQogICAgbGliZ2l0X2NfYXJncyArPSAnLURzb2NrYWRkcl9zdG9yYWdlPXNvY2thZGRyX2luJwogIGVuZGlmCmVuZGlmCgppZiBjb21waWxlci5oYXNfZnVuY3Rpb24oJ3NvY2tldCcsIGRlcGVuZGVuY2llczogbmV0d29ya2luZ19kZXBlbmRlbmNpZXMpCiAgbGliZ2l0X3NvdXJjZXMgKz0gWwogICAgJ3VuaXgtc29ja2V0LmMnLAogICAgJ3VuaXgtc3RyZWFtLXNlcnZlci5jJywKICBdCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19VTklYX1NPQ0tFVFMnLCAnJykKZWxzZQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fVU5JWF9TT0NLRVRTJwogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fVU5JWF9TT0NLRVRTJywgJzEnKQplbmRpZgoKaWYgbm90IGNvbXBpbGVyLmhhc19mdW5jdGlvbigncHJlYWQnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fUFJFQUQnCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9wcmVhZC5jJwplbmRpZgoKaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICdkYXJ3aW4nCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9wcmVjb21wb3NlX3V0ZjguYycKICBsaWJnaXRfY19hcmdzICs9ICctRFBSRUNPTVBPU0VfVU5JQ09ERScKICBsaWJnaXRfY19hcmdzICs9ICctRFBST1RFQ1RfSEZTX0RFRkFVTFQnCmVuZGlmCgojIENvbmZpZ3VyZSBnZW5lcmFsIGNvbXBhdGliaWxpdHkgd3JhcHBlcnMuCmlmIGhvc3RfbWFjaGluZS5zeXN0ZW0oKSA9PSAnY3lnd2luJwogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdjb21wYXQvd2luMzIvcGF0aC11dGlscy5jJywKICBdCmVsaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJwogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdjb21wYXQvbWluZ3cuYycsCiAgICAnY29tcGF0L3dpbmFuc2kuYycsCiAgICAnY29tcGF0L3dpbjMyL2ZsdXNoLmMnLAogICAgJ2NvbXBhdC93aW4zMi9wYXRoLXV0aWxzLmMnLAogICAgJ2NvbXBhdC93aW4zMi9wdGhyZWFkLmMnLAogICAgJ2NvbXBhdC93aW4zMi9zeXNsb2cuYycsCiAgICAnY29tcGF0L3dpbjMyL2RpcmVudC5jJywKICAgICdjb21wYXQvd2luMzJtbWFwLmMnLAogICAgJ2NvbXBhdC9uZWRtYWxsb2MvbmVkbWFsbG9jLmMnLAogIF0KCiAgbGliZ2l0X2NfYXJncyArPSBbCiAgICAnLURERVRFQ1RfTVNZU19UVFknLAogICAgJy1ERU5TVVJFX01TWVNURU1fSVNfU0VUJywKICAgICctRE5BVElWRV9DUkxGJywKICAgICctRE5PR0RJJywKICAgICctRE5PX1BPU0lYX0dPT0RJRVMnLAogICAgJy1EV0lOMzInLAogICAgJy1EX0NPTlNPTEUnLAogICAgJy1EX0NPTlNPTEVfREVURUNUX01TWVNfVFRZJywKICAgICctRF9fVVNFX01JTkdXX0FOU0lfU1RESU89MCcsCiAgXQoKICBsaWJnaXRfZGVwZW5kZW5jaWVzICs9IGNvbXBpbGVyLmZpbmRfbGlicmFyeSgnbnRkbGwnKQogIGxpYmdpdF9pbmNsdWRlX2RpcmVjdG9yaWVzICs9ICdjb21wYXQvd2luMzInCiAgaWYgY29tcGlsZXIuZ2V0X2lkKCkgPT0gJ21zdmMnCiAgICBsaWJnaXRfaW5jbHVkZV9kaXJlY3RvcmllcyArPSAnY29tcGF0L3ZjYnVpbGQvaW5jbHVkZScKICBlbmRpZgplbmRpZgoKaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICdsaW51eCcKICBsaWJnaXRfc291cmNlcyArPSAnY29tcGF0L2xpbnV4L3Byb2NpbmZvLmMnCmVsaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJwogIGxpYmdpdF9zb3VyY2VzICs9ICdjb21wYXQvd2luMzIvdHJhY2UyX3dpbjMyX3Byb2Nlc3NfaW5mby5jJwplbHNlCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9zdHViL3Byb2NpbmZvLmMnCmVuZGlmCgppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ2N5Z3dpbicgb3IgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJwogIGxpYmdpdF9jX2FyZ3MgKz0gWwogICAgJy1EVU5SRUxJQUJMRV9GU1RBVCcsCiAgICAnLURNTUFQX1BSRVZFTlRTX0RFTEVURScsCiAgICAnLURPQkpFQ1RfQ1JFQVRJT05fTU9ERT0xJywKICBdCmVuZGlmCgojIENvbmZpZ3VyZSB0aGUgc2ltcGxlLWlwYyBzdWJzeXN0ZW0gcmVxdWlyZWQgZnJvIHRoZSBmc21vbml0b3IuCmlmIGhvc3RfbWFjaGluZS5zeXN0ZW0oKSA9PSAnd2luZG93cycKICBsaWJnaXRfc291cmNlcyArPSBbCiAgICAnY29tcGF0L3NpbXBsZS1pcGMvaXBjLXNoYXJlZC5jJywKICAgICdjb21wYXQvc2ltcGxlLWlwYy9pcGMtd2luMzIuYycsCiAgXQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU1VQUE9SVFNfU0lNUExFX0lQQycKZWxzZQogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdjb21wYXQvc2ltcGxlLWlwYy9pcGMtc2hhcmVkLmMnLAogICAgJ2NvbXBhdC9zaW1wbGUtaXBjL2lwYy11bml4LXNvY2tldC5jJywKICBdCiAgbGliZ2l0X2NfYXJncyArPSAnLURTVVBQT1JUU19TSU1QTEVfSVBDJwplbmRpZgoKZnNtb25pdG9yX2JhY2tlbmQgPSAnJwppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ3dpbmRvd3MnCiAgZnNtb25pdG9yX2JhY2tlbmQgPSAnd2luMzInCmVsaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICdkYXJ3aW4nCiAgZnNtb25pdG9yX2JhY2tlbmQgPSAnZGFyd2luJwogIGxpYmdpdF9kZXBlbmRlbmNpZXMgKz0gZGVwZW5kZW5jeSgnQ29yZVNlcnZpY2VzJykKZW5kaWYKaWYgZnNtb25pdG9yX2JhY2tlbmQgIT0gJycKICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfRlNNT05JVE9SX0RBRU1PTl9CQUNLRU5EJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9GU01PTklUT1JfT1NfU0VUVElOR1MnCgogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdjb21wYXQvZnNtb25pdG9yL2ZzbS1oZWFsdGgtJyArIGZzbW9uaXRvcl9iYWNrZW5kICsgJy5jJywKICAgICdjb21wYXQvZnNtb25pdG9yL2ZzbS1pcGMtJyArIGZzbW9uaXRvcl9iYWNrZW5kICsgJy5jJywKICAgICdjb21wYXQvZnNtb25pdG9yL2ZzbS1saXN0ZW4tJyArIGZzbW9uaXRvcl9iYWNrZW5kICsgJy5jJywKICAgICdjb21wYXQvZnNtb25pdG9yL2ZzbS1wYXRoLXV0aWxzLScgKyBmc21vbml0b3JfYmFja2VuZCArICcuYycsCiAgICAnY29tcGF0L2ZzbW9uaXRvci9mc20tc2V0dGluZ3MtJyArIGZzbW9uaXRvcl9iYWNrZW5kICsgJy5jJywKICBdCmVuZGlmCmJ1aWxkX29wdGlvbnNfY29uZmlnLnNldF9xdW90ZWQoJ0ZTTU9OSVRPUl9EQUVNT05fQkFDS0VORCcsIGZzbW9uaXRvcl9iYWNrZW5kKQpidWlsZF9vcHRpb25zX2NvbmZpZy5zZXRfcXVvdGVkKCdGU01PTklUT1JfT1NfU0VUVElOR1MnLCBmc21vbml0b3JfYmFja2VuZCkKCmlmIG5vdCBnZXRfb3B0aW9uKCdiX3Nhbml0aXplJykuY29udGFpbnMoJ2FkZHJlc3MnKSBhbmQgZ2V0X29wdGlvbigncmVnZXgnKS5hbGxvd2VkKCkgYW5kIGNvbXBpbGVyLmhhc19oZWFkZXIoJ3JlZ2V4LmgnKSBhbmQgY29tcGlsZXIuZ2V0X2RlZmluZSgnUkVHX1NUQVJURU5EJywgcHJlZml4OiAnI2luY2x1ZGUgPHJlZ2V4Lmg+JykgIT0gJycKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX1JFR0VYJywgJycpCgogIGlmIGNvbXBpbGVyLmdldF9kZWZpbmUoJ1JFR19FTkhBTkNFRCcsIHByZWZpeDogJyNpbmNsdWRlIDxyZWdleC5oPicpICE9ICcnCiAgICBsaWJnaXRfY19hcmdzICs9ICctRFVTRV9FTkhBTkNFRF9CQVNJQ19SRUdVTEFSX0VYUFJFU1NJT05TJwogICAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9yZWdjb21wX2VuaGFuY2VkLmMnCiAgZW5kaWYKZWxpZiBub3QgZ2V0X29wdGlvbigncmVnZXgnKS5lbmFibGVkKCkKICBsaWJnaXRfY19hcmdzICs9IFsKICAgICctRE5PX1JFR0VYJywKICAgICctREdBV0snLAogICAgJy1ETk9fTUJTVVBQT1JUJywKICBdCiAgYnVpbGRfb3B0aW9uc19jb25maWcuc2V0KCdOT19SRUdFWCcsICcxJykKICBsaWJnaXRfc291cmNlcyArPSAnY29tcGF0L3JlZ2V4L3JlZ2V4LmMnCiAgbGliZ2l0X2luY2x1ZGVfZGlyZWN0b3JpZXMgKz0gJ2NvbXBhdC9yZWdleCcKZWxzZQogICAgZXJyb3IoJ05hdGl2ZSByZWdleCBzdXBwb3J0IHJlcXVlc3RlZCBidXQgbm90IGZvdW5kJykKZW5kaWYKCiMgc2V0aXRpbWVyIGFuZCBmcmllbmRzIGFyZSBwcm92aWRlZCBieSBjb21wYXQvbWluZ3cuYy4KaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpICE9ICd3aW5kb3dzJwogIGlmIG5vdCBjb21waWxlci5jb21waWxlcygnJycKICAgICNpbmNsdWRlIDxzeXMvdGltZS5oPgogICAgdm9pZCBmdW5jKHZvaWQpCiAgICB7CiAgICAgIHN0cnVjdCBpdGltZXJ2YWwgdmFsdWU7CiAgICB9CiAgJycnLCBuYW1lOiAnc3RydWN0IGl0aW1lcnZhbCcpCiAgICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NUUlVDVF9JVElNRVJWQUwnCiAgICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NFVElUSU1FUicKICBlbGlmIG5vdCBjb21waWxlci5oYXNfZnVuY3Rpb24oJ3NldGl0aW1lcicpCiAgICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NFVElUSU1FUicKICBlbmRpZgplbmRpZgoKaWYgY29tcGlsZXIuaGFzX21lbWJlcignc3RydWN0IHN0YXQnLCAnc3RfbXRpbWVzcGVjLnR2X25zZWMnLCBwcmVmaXg6ICcjaW5jbHVkZSA8c3lzL3N0YXQuaD4nKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EVVNFX1NUX1RJTUVTUEVDJwplbGlmIG5vdCBjb21waWxlci5oYXNfbWVtYmVyKCdzdHJ1Y3Qgc3RhdCcsICdzdF9tdGltLnR2X25zZWMnLCBwcmVmaXg6ICcjaW5jbHVkZSA8c3lzL3N0YXQuaD4nKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fTlNFQycKZW5kaWYKCmlmIG5vdCBjb21waWxlci5oYXNfbWVtYmVyKCdzdHJ1Y3Qgc3RhdCcsICdzdF9ibG9ja3MnLCBwcmVmaXg6ICcjaW5jbHVkZSA8c3lzL3N0YXQuaD4nKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fU1RfQkxPQ0tTX0lOX1NUUlVDVF9TVEFUJwplbmRpZgoKaWYgbm90IGNvbXBpbGVyLmhhc19tZW1iZXIoJ3N0cnVjdCBkaXJlbnQnLCAnZF90eXBlJywgcHJlZml4OiAnI2luY2x1ZGUgPGRpcmVudC5oPicpCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19EX1RZUEVfSU5fRElSRU5UJwplbmRpZgoKaWYgbm90IGNvbXBpbGVyLmhhc19tZW1iZXIoJ3N0cnVjdCBwYXNzd2QnLCAncHdfZ2Vjb3MnLCBwcmVmaXg6ICcjaW5jbHVkZSA8cHdkLmg+JykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0dFQ09TX0lOX1BXRU5UJwplbmRpZgoKaWYgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzeW5jX2ZpbGVfcmFuZ2UnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9TWU5DX0ZJTEVfUkFOR0UnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzdHJjYXNlc3RyJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NUUkNBU0VTVFInCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9zdHJjYXNlc3RyLmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdtZW1tZW0nKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fTUVNTUVNJwogIGxpYmdpdF9zb3VyY2VzICs9ICdjb21wYXQvbWVtbWVtLmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzdHJsY3B5JykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX1NUUkxDUFknCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9zdHJsY3B5LmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzdHJkdXAnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ET1ZFUlJJREVfU1RSRFVQJwogIGxpYmdpdF9zb3VyY2VzICs9ICdjb21wYXQvc3RyZHVwLmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzdHJ0b3VtYXgnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fU1RSVE9VTUFYJwogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdjb21wYXQvc3RydG91bWF4LmMnLAogICAgJ2NvbXBhdC9zdHJ0b2ltYXguYycsCiAgXQplbmRpZgoKaWYgbm90IGNvbXBpbGVyLmhhc19mdW5jdGlvbignc3RydG91bGwnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fU1RSVE9VTEwnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdzZXRlbnYnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fU0VURU5WJwogIGxpYmdpdF9zb3VyY2VzICs9ICdjb21wYXQvc2V0ZW52LmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdxc29ydCcpCiAgbGliZ2l0X2NfYXJncyArPSAnLURJTlRFUk5BTF9RU09SVCcKZW5kaWYKbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9xc29ydF9zLmMnCgojIHVuc2V0ZW52IGlzIHByb3ZpZGVkIGJ5IGNvbXBhdC9taW5ndy5jLgppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgIT0gJ3dpbmRvd3MnIGFuZCBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCd1bnNldGVudicpCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19VTlNFVEVOVicKICBsaWJnaXRfc291cmNlcyArPSAnY29tcGF0L3Vuc2V0ZW52LmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdta2R0ZW1wJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX01LRFRFTVAnCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9ta2R0ZW1wLmMnCmVuZGlmCgppZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdpbml0Z3JvdXBzJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX0lOSVRHUk9VUFMnCmVuZGlmCgppZiBjb21waWxlci5oYXNfZnVuY3Rpb24oJ2dldGRlbGltJykKICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfR0VUREVMSU0nCmVuZGlmCgppZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ3dpbmRvd3MnCiAgbGliZ2l0X2NfYXJncyArPSAnLURVU0VfV0lOMzJfTU1BUCcKZWxpZiBub3QgY29tcGlsZXIuaGFzX2Z1bmN0aW9uKCdtbWFwJykKICBsaWJnaXRfY19hcmdzICs9ICctRE5PX01NQVAnCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2NvbXBhdC9tbWFwLmMnCmVuZGlmCgppZiBjb21waWxlci5oYXNfZnVuY3Rpb24oJ2Nsb2NrX2dldHRpbWUnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9DTE9DS19HRVRUSU1FJwplbmRpZgoKaWYgY29tcGlsZXIuY29tcGlsZXMoJycnCiAgI2luY2x1ZGUgPHRpbWUuaD4KCiAgdm9pZCBmdW5jKHZvaWQpCiAgewogICAgY2xvY2tpZF90IGlkID0gQ0xPQ0tfTU9OT1RPTklDOwogIH0KJycnLCBuYW1lOiAnbW9ub3RvbmljIGNsb2NrJykKICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfQ0xPQ0tfTU9OT1RPTklDJwplbmRpZgoKaWYgbm90IGNvbXBpbGVyLmNvbXBpbGVzKCcnJwogICNpbmNsdWRlIDxpbnR0eXBlcy5oPgoKICB2b2lkIGZ1bmModm9pZCkKICB7CiAgICB1aW50bWF4X3QgeCA9IDA7CiAgfQonJycsIG5hbWU6ICd1aW50bWF4X3QnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ETk9fVUlOVE1BWF9UJwplbmRpZgoKaGFzX2JzZF9zeXNjdGwgPSBmYWxzZQppZiBjb21waWxlci5oYXNfaGVhZGVyKCdzeXMvc3lzY3RsLmgnKQogIGlmIGNvbXBpbGVyLmNvbXBpbGVzKCcnJwogICAgI2luY2x1ZGUgPHN0ZGRlZi5oPgogICAgI2luY2x1ZGUgPHN5cy9zeXNjdGwuaD4KCiAgICB2b2lkIGZ1bmModm9pZCkKICAgIHsKICAgICAgaW50IHZhbCwgbWliWzJdID0geyAwIH07CiAgICAgIHNpemVfdCBsZW4gPSBzaXplb2YodmFsKTsKICAgICAgc3lzY3RsKG1pYiwgMiwgJnZhbCwgJmxlbiwgTlVMTCwgMCk7CiAgICB9CiAgJycnLCBuYW1lOiAnQlNEIHN5c2N0bCcpCiAgICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfQlNEX1NZU0NUTCcKICAgIGhhc19ic2Rfc3lzY3RsID0gdHJ1ZQogIGVuZGlmCmVuZGlmCgppZiBub3QgbWVzb24uaXNfY3Jvc3NfYnVpbGQoKSBhbmQgY29tcGlsZXIucnVuKCcnJwogICNpbmNsdWRlIDxzdGRpby5oPgoKICBpbnQgbWFpbihpbnQgYXJnYywgY29uc3QgY2hhciAqKmFyZ3YpCiAgewogICAgRklMRSAqZiA9IGZvcGVuKCIuIiwgInIiKTsKICAgIHJldHVybiBmID8gMCA6IDE7CiAgfQonJycsIG5hbWU6ICdmcmVhZCByZWFkcyBkaXJlY3RvcmllcycpLnJldHVybmNvZGUoKSA9PSAwCiAgbGliZ2l0X2NfYXJncyArPSAnLURGUkVBRF9SRUFEU19ESVJFQ1RPUklFUycKICBsaWJnaXRfc291cmNlcyArPSAnY29tcGF0L2ZvcGVuLmMnCmVuZGlmCgppZiBub3QgbWVzb24uaXNfY3Jvc3NfYnVpbGQoKSBhbmQgZnMuZXhpc3RzKCcvZGV2L3R0eScpCiAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX0RFVl9UVFknCmVuZGlmCgpodHRwc19iYWNrZW5kID0gZ2V0X29wdGlvbignaHR0cHNfYmFja2VuZCcpCgpzZWN1cml0eV9mcmFtZXdvcmsgPSBkZXBlbmRlbmN5KCdTZWN1cml0eScsIHJlcXVpcmVkOiBodHRwc19iYWNrZW5kID09ICdDb21tb25DcnlwdG8nKQpjb3JlX2ZvdW5kYXRpb25fZnJhbWV3b3JrID0gZGVwZW5kZW5jeSgnQ29yZUZvdW5kYXRpb24nLCByZXF1aXJlZDogc2VjdXJpdHlfZnJhbWV3b3JrLmZvdW5kKCkpCmlmIGh0dHBzX2JhY2tlbmQgPT0gJ2F1dG8nIGFuZCBzZWN1cml0eV9mcmFtZXdvcmsuZm91bmQoKQogIGh0dHBzX2JhY2tlbmQgPSAnQ29tbW9uQ3J5cHRvJwplbmRpZgoKb3BlbnNzbF9yZXF1aXJlZCA9IGh0dHBzX2JhY2tlbmQgPT0gJ29wZW5zc2wnIG9yIGdldF9vcHRpb24oJ3NoYTFfYmFja2VuZCcpID09ICdvcGVuc3NsJyBvciBnZXRfb3B0aW9uKCdzaGEyNTZfYmFja2VuZCcpID09ICdvcGVuc3NsJwpvcGVuc3NsID0gZGVwZW5kZW5jeSgnb3BlbnNzbCcsIHJlcXVpcmVkOiBvcGVuc3NsX3JlcXVpcmVkLCBkZWZhdWx0X29wdGlvbnM6IFsnZGVmYXVsdF9saWJyYXJ5PXN0YXRpYyddKQppZiBodHRwc19iYWNrZW5kID09ICdhdXRvJyBhbmQgb3BlbnNzbC5mb3VuZCgpCiAgaHR0cHNfYmFja2VuZCA9ICdvcGVuc3NsJwplbmRpZgoKaWYgaHR0cHNfYmFja2VuZCA9PSAnQ29tbW9uQ3J5cHRvJwogIGxpYmdpdF9kZXBlbmRlbmNpZXMgKz0gc2VjdXJpdHlfZnJhbWV3b3JrCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBjb3JlX2ZvdW5kYXRpb25fZnJhbWV3b3JrCiAgbGliZ2l0X2NfYXJncyArPSAnLURBUFBMRV9DT01NT05fQ1JZUFRPJwplbGlmIGh0dHBzX2JhY2tlbmQgPT0gJ29wZW5zc2wnCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBvcGVuc3NsCmVsc2UKICAjIFdlIGVpdGhlciBjb3VsZG4ndCBmaW5kIGFueSBkZXBlbmRlbmNpZXMgd2l0aCAnYXV0bycgb3IgdGhlIHVzZXIgcmVxdWVzdGVkCiAgIyAnbm9uZScuIEJvdGggY2FzZXMgYXJlIGJlbmlnbi4KZW5kaWYKCmlmIGh0dHBzX2JhY2tlbmQgIT0gJ29wZW5zc2wnCiAgbGliZ2l0X2NfYXJncyArPSAnLUROT19PUEVOU1NMJwplbmRpZgoKc2hhMV9iYWNrZW5kID0gZ2V0X29wdGlvbignc2hhMV9iYWNrZW5kJykKaWYgc2hhMV9iYWNrZW5kID09ICdzaGExZGMnCiAgbGliZ2l0X2NfYXJncyArPSAnLURTSEExX0RDJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMURDX05PX1NUQU5EQVJEX0lOQ0xVREVTPTEnCiAgbGliZ2l0X2NfYXJncyArPSAnLURTSEExRENfSU5JVF9TQUZFX0hBU0hfREVGQVVMVD0wJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMURDX0NVU1RPTV9JTkNMVURFX1NIQTFfQz0iZ2l0LWNvbXBhdC11dGlsLmgiJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMURDX0NVU1RPTV9JTkNMVURFX1VCQ19DSEVDS19DPSJnaXQtY29tcGF0LXV0aWwuaCInCgogIGxpYmdpdF9zb3VyY2VzICs9IFsKICAgICdzaGExZGNfZ2l0LmMnLAogICAgJ3NoYTFkYy9zaGExLmMnLAogICAgJ3NoYTFkYy91YmNfY2hlY2suYycsCiAgXQplbGlmIHNoYTFfYmFja2VuZCA9PSAnY29tbW9uLWNyeXB0bycKICBsaWJnaXRfY19hcmdzICs9ICctRENPTU1PTl9ESUdFU1RfRk9SX09QRU5TU0wnCiAgbGliZ2l0X2NfYXJncyArPSAnLURTSEExX0FQUExFJwogICMgQXBwbGUgQ29tbW9uQ3J5cHRvIHJlcXVpcmVzIGNodW5raW5nCiAgbGliZ2l0X2NfYXJncyArPSAnLURTSEExX01BWF9CTE9DS19TSVpFPTEwMjRMKjEwMjRMKjEwMjRMJwplbGlmIHNoYTFfYmFja2VuZCA9PSAnb3BlbnNzbCcKICBsaWJnaXRfY19hcmdzICs9ICctRFNIQTFfT1BFTlNTTCcKICBsaWJnaXRfZGVwZW5kZW5jaWVzICs9IG9wZW5zc2wKZWxpZiBzaGExX2JhY2tlbmQgPT0gJ2Jsb2NrJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMV9CTEsnCiAgbGliZ2l0X3NvdXJjZXMgKz0gJ2Jsb2NrLXNoYTEvc2hhMS5jJwplbHNlCiAgZXJyb3IoJ1VuaGFuZGxlZCBTSEExIGJhY2tlbmQgJyArIHNoYTFfYmFja2VuZCkKZW5kaWYKCnNoYTI1Nl9iYWNrZW5kID0gZ2V0X29wdGlvbignc2hhMjU2X2JhY2tlbmQnKQppZiBzaGEyNTZfYmFja2VuZCA9PSAnb3BlbnNzbCcKICBsaWJnaXRfY19hcmdzICs9ICctRFNIQTI1Nl9PUEVOU1NMJwogIGxpYmdpdF9kZXBlbmRlbmNpZXMgKz0gb3BlbnNzbAplbGlmIHNoYTI1Nl9iYWNrZW5kID09ICduZXR0bGUnCiAgbmV0dGxlID0gZGVwZW5kZW5jeSgnbmV0dGxlJykKICBsaWJnaXRfZGVwZW5kZW5jaWVzICs9IG5ldHRsZQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMjU2X05FVFRMRScKZWxpZiBzaGEyNTZfYmFja2VuZCA9PSAnZ2NyeXB0JwogIGdjcnlwdCA9IGRlcGVuZGVuY3koJ2djcnlwdCcpCiAgbGliZ2l0X2RlcGVuZGVuY2llcyArPSBnY3J5cHQKICBsaWJnaXRfY19hcmdzICs9ICctRFNIQTI1Nl9HQ1JZUFQnCmVsaWYgc2hhMjU2X2JhY2tlbmQgPT0gJ2Jsb2NrJwogIGxpYmdpdF9jX2FyZ3MgKz0gJy1EU0hBMjU2X0JMSycKICBsaWJnaXRfc291cmNlcyArPSAnc2hhMjU2L2Jsb2NrL3NoYTI1Ni5jJwplbHNlCiAgZXJyb3IoJ1VuaGFuZGxlZCBTSEEyNTYgYmFja2VuZCAnICsgc2hhMjU2X2JhY2tlbmQpCmVuZGlmCgppZiBjb21waWxlci5oYXNfaGVhZGVyX3N5bWJvbCgnc3RkbGliLmgnLCAnYXJjNHJhbmRvbV9idWYnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9BUkM0UkFORE9NJwplbGlmIGNvbXBpbGVyLmhhc19oZWFkZXJfc3ltYm9sKCdic2Qvc3RkbGliLmgnLCAnYXJjNHJhbmRvbV9idWYnKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9BUkM0UkFORE9NX0JTRCcKZWxpZiBjb21waWxlci5oYXNfZnVuY3Rpb24oJ2dldHJhbmRvbScsIHByZWZpeDogJyNpbmNsdWRlIDxzeXMvcmFuZG9tLmg+JykKICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfR0VUUkFORE9NJwplbGlmIGNvbXBpbGVyLmhhc19mdW5jdGlvbignZ2V0ZW50cm9weScsIHByZWZpeDogJyNpbmNsdWRlIDx1bmlzdGQuaD4nKQogIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9HRVRFTlRST1BZJwplbGlmIGNvbXBpbGVyLmhhc19mdW5jdGlvbignUnRsR2VuUmFuZG9tJywgcHJlZml4OiAnI2luY2x1ZGUgPHdpbmRvd3MuaD5cbiNpbmNsdWRlIDxudHNlY2FwaS5oPicpCiAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX1JUTEdFTlJBTkRPTScKZWxpZiBvcGVuc3NsLmZvdW5kKCkKICBsaWJnaXRfY19hcmdzICs9ICctREhBVkVfT1BFTlNTTF9DU1BSTkcnCmVuZGlmCgppZiBnZXRfb3B0aW9uKCdydW50aW1lX3ByZWZpeCcpCiAgbGliZ2l0X2NfYXJncyArPSAnLURSVU5USU1FX1BSRUZJWCcKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ1JVTlRJTUVfUFJFRklYJywgJ3RydWUnKQoKICBpZiBjb21waWxlci5oYXNfaGVhZGVyKCdtYWNoLW8vZHlsZC5oJykKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9OU19HRVRfRVhFQ1VUQUJMRV9QQVRIJwogIGVuZGlmCgogIGlmIGhhc19ic2Rfc3lzY3RsIGFuZCBjb21waWxlci5jb21waWxlcygnJycKICAgICNpbmNsdWRlIDxzeXMvc3lzY3RsLmg+CgogICAgdm9pZCBmdW5jKHZvaWQpCiAgICB7CiAgICAgIEtFUk5fUFJPQ19QQVRITkFNRTsgS0VSTl9QUk9DOwogICAgfQogICcnJywgbmFtZTogJ0JTRCBLRVJOX1BST0NfUEFUSE5BTUUnKQogICAgbGliZ2l0X2NfYXJncyArPSAnLURIQVZFX05TX0dFVF9FWEVDVVRBQkxFX1BBVEgnCiAgZW5kaWYKCiAgaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICdsaW51eCcKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1EUFJPQ0ZTX0VYRUNVVEFCTEVfUEFUSD0iL3Byb2Mvc2VsZi9leGUnICsgJyInCiAgZWxpZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ29wZW5ic2QnCiAgICBsaWJnaXRfY19hcmdzICs9ICctRFBST0NGU19FWEVDVVRBQkxFX1BBVEg9IicgKyAnL3Byb2MvY3VycHJvYy9maWxlJyArICciJwogIGVsaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICduZXRic2QnCiAgICBsaWJnaXRfY19hcmdzICs9ICctRFBST0NGU19FWEVDVVRBQkxFX1BBVEg9IicgKyAnL3Byb2MvY3VycHJvYy9leGUnICsgJyInCiAgZW5kaWYKCiAgaWYgaG9zdF9tYWNoaW5lLnN5c3RlbSgpID09ICd3aW5kb3dzJyBhbmQgY29tcGlsZXIuY29tcGlsZXMoJycnCiAgICAjaW5jbHVkZSA8c3RkbGliLmg+CgogICAgdm9pZCBmdW5jKHZvaWQpCiAgICB7CiAgICAgIF93cGdtcHRyOwogICAgfQogICcnJywgbmFtZTogJ1dpbjMyIF93cGdtcHRyJykKICAgIGxpYmdpdF9jX2FyZ3MgKz0gJy1ESEFWRV9XUEdNUFRSJwogIGVuZGlmCmVsc2UKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ1JVTlRJTUVfUFJFRklYJywgJ2ZhbHNlJykKZW5kaWYKCmdpdF92ZXJzaW9uX2ZpbGUgPSBjdXN0b21fdGFyZ2V0KAogIGNvbW1hbmQ6IFsKICAgIHNoZWxsLAogICAgbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCkgLyAnR0lULVZFUlNJT04tR0VOJywKICAgIG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpLAogICAgJ0BJTlBVVEAnLAogICAgJ0BPVVRQVVRAJywKICBdLAogIGlucHV0OiBtZXNvbi5jdXJyZW50X3NvdXJjZV9kaXIoKSAvICdHSVQtVkVSU0lPTi1GSUxFLmluJywKICBvdXRwdXQ6ICdHSVQtVkVSU0lPTi1GSUxFJywKICBlbnY6IHZlcnNpb25fZ2VuX2Vudmlyb25tZW50LAogIGJ1aWxkX2Fsd2F5c19zdGFsZTogdHJ1ZSwKKQoKdmVyc2lvbl9kZWZfaCA9IGN1c3RvbV90YXJnZXQoCiAgY29tbWFuZDogWwogICAgc2hlbGwsCiAgICBtZXNvbi5jdXJyZW50X3NvdXJjZV9kaXIoKSAvICdHSVQtVkVSU0lPTi1HRU4nLAogICAgbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCksCiAgICAnQElOUFVUQCcsCiAgICAnQE9VVFBVVEAnLAogIF0sCiAgaW5wdXQ6IG1lc29uLmN1cnJlbnRfc291cmNlX2RpcigpIC8gJ3ZlcnNpb24tZGVmLmguaW4nLAogIG91dHB1dDogJ3ZlcnNpb24tZGVmLmgnLAogICMgRGVwZW5kIG9uIEdJVC1WRVJTSU9OLUZJTEUgc28gdGhhdCB3ZSBkb24ndCBhbHdheXMgdHJ5IHRvIHJlYnVpbGQgdGhpcwogICMgdGFyZ2V0IGZvciB0aGUgc2FtZSBjb21taXQuCiAgZGVwZW5kczogW2dpdF92ZXJzaW9uX2ZpbGVdLAogIGVudjogdmVyc2lvbl9nZW5fZW52aXJvbm1lbnQsCikKCiMgQnVpbGQgYSBzZXBhcmF0ZSBsaWJyYXJ5IGZvciAidmVyc2lvbi5jIiBzbyB0aGF0IHdlIGRvIG5vdCBoYXZlIHRvIHJlYnVpbGQKIyBldmVyeXRoaW5nIHdoZW4gdGhlIGN1cnJlbnQgR2l0IGNvbW1pdCBjaGFuZ2VzLgpsaWJnaXRfdmVyc2lvbl9saWJyYXJ5ID0gc3RhdGljX2xpYnJhcnkoJ2dpdC12ZXJzaW9uJywKICBzb3VyY2VzOiBbCiAgICAndmVyc2lvbi5jJywKICAgIHZlcnNpb25fZGVmX2gsCiAgXSwKICBjX2FyZ3M6IGxpYmdpdF9jX2FyZ3MsCiAgZGVwZW5kZW5jaWVzOiBsaWJnaXRfZGVwZW5kZW5jaWVzLAogIGluY2x1ZGVfZGlyZWN0b3JpZXM6IGxpYmdpdF9pbmNsdWRlX2RpcmVjdG9yaWVzLAopCgpsaWJnaXRfbGlicmFyeSA9IHN0YXRpY19saWJyYXJ5KCdnaXQnLAogIHNvdXJjZXM6IGxpYmdpdF9zb3VyY2VzLAogIGNfYXJnczogbGliZ2l0X2NfYXJncywKICBsaW5rX3dpdGg6IGxpYmdpdF92ZXJzaW9uX2xpYnJhcnksCiAgZGVwZW5kZW5jaWVzOiBsaWJnaXRfZGVwZW5kZW5jaWVzLAogIGluY2x1ZGVfZGlyZWN0b3JpZXM6IGxpYmdpdF9pbmNsdWRlX2RpcmVjdG9yaWVzLAopCgpsaWJnaXQgPSBkZWNsYXJlX2RlcGVuZGVuY3koCiAgY29tcGlsZV9hcmdzOiBsaWJnaXRfY19hcmdzLAogIGxpbmtfd2l0aDogbGliZ2l0X2xpYnJhcnksCiAgZGVwZW5kZW5jaWVzOiBsaWJnaXRfZGVwZW5kZW5jaWVzLAogIGluY2x1ZGVfZGlyZWN0b3JpZXM6IGxpYmdpdF9pbmNsdWRlX2RpcmVjdG9yaWVzLAopCgpjb21tb25fbWFpbl9zb3VyY2VzID0gWydjb21tb24tbWFpbi5jJ10KY29tbW9uX21haW5fbGlua19hcmdzID0gWyBdCmlmIGhvc3RfbWFjaGluZS5zeXN0ZW0oKSA9PSAnd2luZG93cycKICBnaXRfcmMgPSBjdXN0b21fdGFyZ2V0KAogICAgY29tbWFuZDogWwogICAgICBzaGVsbCwKICAgICAgbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCkgLyAnR0lULVZFUlNJT04tR0VOJywKICAgICAgbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCksCiAgICAgICdASU5QVVRAJywKICAgICAgJ0BPVVRQVVRAJywKICAgIF0sCiAgICBpbnB1dDogbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCkgLyAnZ2l0LnJjLmluJywKICAgIG91dHB1dDogJ2dpdC5yYycsCiAgICBkZXBlbmRzOiBbZ2l0X3ZlcnNpb25fZmlsZV0sCiAgICBlbnY6IHZlcnNpb25fZ2VuX2Vudmlyb25tZW50LAogICkKCiAgY29tbW9uX21haW5fc291cmNlcyArPSBpbXBvcnQoJ3dpbmRvd3MnKS5jb21waWxlX3Jlc291cmNlcyhnaXRfcmMsCiAgICBpbmNsdWRlX2RpcmVjdG9yaWVzOiBbbWVzb24uY3VycmVudF9zb3VyY2VfZGlyKCldLAogICkKICBpZiBjb21waWxlci5nZXRfYXJndW1lbnRfc3ludGF4KCkgPT0gJ2djYycKICAgIGNvbW1vbl9tYWluX2xpbmtfYXJncyArPSBbCiAgICAgICctbXVuaWNvZGUnLAogICAgICAnLVdsLC1ueGNvbXBhdCcsCiAgICAgICctV2wsLWR5bmFtaWNiYXNlJywKICAgICAgJy1XbCwtcGljLWV4ZWN1dGFibGUsLWUsbWFpbkNSVFN0YXJ0dXAnLAogICAgXQogIGVsaWYgY29tcGlsZXIuZ2V0X2FyZ3VtZW50X3N5bnRheCgpID09ICdtc3ZjJwogICAgY29tbW9uX21haW5fbGlua19hcmdzICs9IFsKICAgICAgJy9FTlRSWTp3bWFpbkNSVFN0YXJ0dXAnLAogICAgICAnaW52YWxpZGNvbnRpbnVlLm9iaicsCiAgICBdCiAgZWxzZQogICAgZXJyb3IoJ1Vuc3VwcG9ydGVkIGNvbXBpbGVyICcgKyBjb21waWxlci5nZXRfaWQoKSkKICBlbmRpZgplbmRpZgpjb21tb25fbWFpbl9saWJyYXJ5ID0gc3RhdGljX2xpYnJhcnkoJ2NvbW1vbi1tYWluJywKICBzb3VyY2VzOiBjb21tb25fbWFpbl9zb3VyY2VzLAogIGNfYXJnczogbGliZ2l0X2NfYXJncywKICBkZXBlbmRlbmNpZXM6IGxpYmdpdF9kZXBlbmRlbmNpZXMsCiAgaW5jbHVkZV9kaXJlY3RvcmllczogbGliZ2l0X2luY2x1ZGVfZGlyZWN0b3JpZXMsCikKY29tbW9uX21haW4gPSBkZWNsYXJlX2RlcGVuZGVuY3koCiAgbGlua193aXRoOiBjb21tb25fbWFpbl9saWJyYXJ5LAogIGxpbmtfYXJnczogY29tbW9uX21haW5fbGlua19hcmdzLAopCgpiaW5fd3JhcHBlcnMgPSBbIF0KdGVzdF9kZXBlbmRlbmNpZXMgPSBbIF0KCmdpdCA9IGV4ZWN1dGFibGUoJ2dpdCcsCiAgc291cmNlczogYnVpbHRpbl9zb3VyY2VzICsgJ2dpdC5jJywKICBkZXBlbmRlbmNpZXM6IFtsaWJnaXQsIGNvbW1vbl9tYWluXSwKICBpbnN0YWxsOiB0cnVlLAogIGluc3RhbGxfZGlyOiBnZXRfb3B0aW9uKCdsaWJleGVjZGlyJykgLyAnZ2l0LWNvcmUnLAopCmJpbl93cmFwcGVycyArPSBnaXQKCnRlc3RfZGVwZW5kZW5jaWVzICs9IGV4ZWN1dGFibGUoJ2dpdC1kYWVtb24nLAogIHNvdXJjZXM6ICdkYWVtb24uYycsCiAgZGVwZW5kZW5jaWVzOiBbbGliZ2l0LCBjb21tb25fbWFpbl0sCiAgaW5zdGFsbDogdHJ1ZSwKICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKKQoKdGVzdF9kZXBlbmRlbmNpZXMgKz0gZXhlY3V0YWJsZSgnZ2l0LXNoLWkxOG4tLWVudnN1YnN0JywKICBzb3VyY2VzOiAnc2gtaTE4bi0tZW52c3Vic3QuYycsCiAgZGVwZW5kZW5jaWVzOiBbbGliZ2l0LCBjb21tb25fbWFpbl0sCiAgaW5zdGFsbDogdHJ1ZSwKICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKKQoKYmluX3dyYXBwZXJzICs9IGV4ZWN1dGFibGUoJ2dpdC1zaGVsbCcsCiAgc291cmNlczogJ3NoZWxsLmMnLAogIGRlcGVuZGVuY2llczogW2xpYmdpdCwgY29tbW9uX21haW5dLAogIGluc3RhbGw6IHRydWUsCiAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCikKCnRlc3RfZGVwZW5kZW5jaWVzICs9IGV4ZWN1dGFibGUoJ2dpdC1odHRwLWJhY2tlbmQnLAogIHNvdXJjZXM6ICdodHRwLWJhY2tlbmQuYycsCiAgZGVwZW5kZW5jaWVzOiBbbGliZ2l0LCBjb21tb25fbWFpbl0sCiAgaW5zdGFsbDogdHJ1ZSwKICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKKQoKYmluX3dyYXBwZXJzICs9IGV4ZWN1dGFibGUoJ3NjYWxhcicsCiAgc291cmNlczogJ3NjYWxhci5jJywKICBkZXBlbmRlbmNpZXM6IFtsaWJnaXQsIGNvbW1vbl9tYWluXSwKICBpbnN0YWxsOiB0cnVlLAogIGluc3RhbGxfZGlyOiBnZXRfb3B0aW9uKCdsaWJleGVjZGlyJykgLyAnZ2l0LWNvcmUnLAopCgppZiBnZXRfb3B0aW9uKCdjdXJsJykuZW5hYmxlZCgpCiAgY3VybF9zb3VyY2VzID0gWwogICAgJ2h0dHAuYycsCiAgICAnaHR0cC13YWxrZXIuYycsCiAgXQoKICBnaXRfcmVtb3RlX2h0dHAgPSBleGVjdXRhYmxlKCdnaXQtcmVtb3RlLWh0dHAnLAogICAgc291cmNlczogY3VybF9zb3VyY2VzICsgJ3JlbW90ZS1jdXJsLmMnLAogICAgZGVwZW5kZW5jaWVzOiBbbGliZ2l0LCBjb21tb25fbWFpbl0sCiAgICBpbnN0YWxsOiB0cnVlLAogICAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCiAgKQogIHRlc3RfZGVwZW5kZW5jaWVzICs9IGdpdF9yZW1vdGVfaHR0cAoKICB0ZXN0X2RlcGVuZGVuY2llcyArPSBleGVjdXRhYmxlKCdnaXQtaHR0cC1mZXRjaCcsCiAgICBzb3VyY2VzOiBjdXJsX3NvdXJjZXMgKyAnaHR0cC1mZXRjaC5jJywKICAgIGRlcGVuZGVuY2llczogW2xpYmdpdCwgY29tbW9uX21haW5dLAogICAgaW5zdGFsbDogdHJ1ZSwKICAgIGluc3RhbGxfZGlyOiBnZXRfb3B0aW9uKCdsaWJleGVjZGlyJykgLyAnZ2l0LWNvcmUnLAogICkKCiAgaWYgZXhwYXQuZm91bmQoKQogICAgdGVzdF9kZXBlbmRlbmNpZXMgKz0gZXhlY3V0YWJsZSgnZ2l0LWh0dHAtcHVzaCcsCiAgICAgIHNvdXJjZXM6IGN1cmxfc291cmNlcyArICdodHRwLXB1c2guYycsCiAgICAgIGRlcGVuZGVuY2llczogW2xpYmdpdCwgY29tbW9uX21haW5dLAogICAgICBpbnN0YWxsOiB0cnVlLAogICAgICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKICAgICkKICBlbmRpZgoKICBmb3JlYWNoIGFsaWFzIDogWyAnZ2l0LXJlbW90ZS1odHRwcycsICdnaXQtcmVtb3RlLWZ0cCcsICdnaXQtcmVtb3RlLWZ0cHMnIF0KICAgIHRlc3RfZGVwZW5kZW5jaWVzICs9IGV4ZWN1dGFibGUoYWxpYXMsCiAgICAgIG9iamVjdHM6IGdpdF9yZW1vdGVfaHR0cC5leHRyYWN0X2FsbF9vYmplY3RzKHJlY3Vyc2l2ZTogZmFsc2UpLAogICAgICBkZXBlbmRlbmNpZXM6IFtsaWJnaXQsIGNvbW1vbl9tYWluXSwKICAgICkKCiAgICBpbnN0YWxsX3N5bWxpbmsoYWxpYXMgKyBleGVjdXRhYmxlX3N1ZmZpeCwKICAgICAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCiAgICAgIHBvaW50aW5nX3RvOiAnZ2l0LXJlbW90ZS1odHRwJywKICAgICkKICBlbmRmb3JlYWNoCmVuZGlmCgppbWFwX3NlbmRfc291cmNlcyA9IFsnaW1hcC1zZW5kLmMnXQppZiB1c2VfY3VybF9mb3JfaW1hcF9zZW5kCiAgaW1hcF9zZW5kX3NvdXJjZXMgKz0gY3VybF9zb3VyY2VzCmVuZGlmCgp0ZXN0X2RlcGVuZGVuY2llcyArPSBleGVjdXRhYmxlKCdnaXQtaW1hcC1zZW5kJywKICBzb3VyY2VzOiBpbWFwX3NlbmRfc291cmNlcywKICBkZXBlbmRlbmNpZXM6IFtsaWJnaXQsIGNvbW1vbl9tYWluXSwKICBpbnN0YWxsOiB0cnVlLAogIGluc3RhbGxfZGlyOiBnZXRfb3B0aW9uKCdsaWJleGVjZGlyJykgLyAnZ2l0LWNvcmUnLAopCgpmb3JlYWNoIGFsaWFzIDogWyAnZ2l0LXJlY2VpdmUtcGFjaycsICdnaXQtdXBsb2FkLWFyY2hpdmUnLCAnZ2l0LXVwbG9hZC1wYWNrJyBdCiAgYmluX3dyYXBwZXJzICs9IGV4ZWN1dGFibGUoYWxpYXMsCiAgICBvYmplY3RzOiBnaXQuZXh0cmFjdF9hbGxfb2JqZWN0cyhyZWN1cnNpdmU6IGZhbHNlKSwKICAgIGRlcGVuZGVuY2llczogW2xpYmdpdCwgY29tbW9uX21haW5dLAogICkKCiAgaW5zdGFsbF9zeW1saW5rKGFsaWFzICsgZXhlY3V0YWJsZV9zdWZmaXgsCiAgICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKICAgIHBvaW50aW5nX3RvOiAnZ2l0JywKICApCmVuZGZvcmVhY2gKCmZvcmVhY2ggc3ltbGluayA6IFsKICAnZ2l0JywKICAnZ2l0LXJlY2VpdmUtcGFjaycsCiAgJ2dpdC1zaGVsbCcsCiAgJ2dpdC11cGxvYWQtYXJjaGl2ZScsCiAgJ2dpdC11cGxvYWQtcGFjaycsCiAgJ3NjYWxhcicsCl0KICBpZiBtZXNvbi52ZXJzaW9uKCkudmVyc2lvbl9jb21wYXJlKCc+PTEuMy4wJykKICAgIHBvaW50aW5nX3RvID0gZnMucmVsYXRpdmVfdG8oZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJyAvIHN5bWxpbmssIGdldF9vcHRpb24oJ2JpbmRpcicpKQogIGVsc2UKICAgIHBvaW50aW5nX3RvID0gJy4uL2xpYmV4ZWMvZ2l0LWNvcmUnIC8gc3ltbGluawogIGVuZGlmCgogIGluc3RhbGxfc3ltbGluayhzeW1saW5rLAogICAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2JpbmRpcicpLAogICAgcG9pbnRpbmdfdG86IHBvaW50aW5nX3RvLAogICkKZW5kZm9yZWFjaAoKc2NyaXB0c19zaCA9IFsKICAnZ2l0LWRpZmZ0b29sLS1oZWxwZXIuc2gnLAogICdnaXQtZmlsdGVyLWJyYW5jaC5zaCcsCiAgJ2dpdC1tZXJnZS1vY3RvcHVzLnNoJywKICAnZ2l0LW1lcmdlLW9uZS1maWxlLnNoJywKICAnZ2l0LW1lcmdlLXJlc29sdmUuc2gnLAogICdnaXQtbWVyZ2V0b29sLS1saWIuc2gnLAogICdnaXQtbWVyZ2V0b29sLnNoJywKICAnZ2l0LXF1aWx0aW1wb3J0LnNoJywKICAnZ2l0LXJlcXVlc3QtcHVsbC5zaCcsCiAgJ2dpdC1zaC1pMThuLnNoJywKICAnZ2l0LXNoLXNldHVwLnNoJywKICAnZ2l0LXN1Ym1vZHVsZS5zaCcsCiAgJ2dpdC13ZWItLWJyb3dzZS5zaCcsCl0KaWYgcGVybF9mZWF0dXJlc19lbmFibGVkCiAgc2NyaXB0c19zaCArPSAnZ2l0LWluc3Rhd2ViLnNoJwplbmRpZgoKZm9yZWFjaCBzY3JpcHQgOiBzY3JpcHRzX3NoCiAgdGVzdF9kZXBlbmRlbmNpZXMgKz0gY3VzdG9tX3RhcmdldCgKICAgIGlucHV0OiBzY3JpcHQsCiAgICBvdXRwdXQ6IGZzLnN0ZW0oc2NyaXB0KSwKICAgIGNvbW1hbmQ6IFsKICAgICAgc2hlbGwsCiAgICAgIG1lc29uLnByb2plY3Rfc291cmNlX3Jvb3QoKSAvICdnZW5lcmF0ZS1zY3JpcHQuc2gnLAogICAgICAnQElOUFVUQCcsCiAgICAgICdAT1VUUFVUQCcsCiAgICAgIG1lc29uLnByb2plY3RfYnVpbGRfcm9vdCgpIC8gJ0dJVC1CVUlMRC1PUFRJT05TJywKICAgIF0sCiAgICBpbnN0YWxsOiB0cnVlLAogICAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCiAgKQplbmRmb3JlYWNoCgppZiBwZXJsX2ZlYXR1cmVzX2VuYWJsZWQKICBzY3JpcHRzX3BlcmwgPSBbCiAgICAnZ2l0LWFyY2hpbXBvcnQucGVybCcsCiAgICAnZ2l0LWN2c2V4cG9ydGNvbW1pdC5wZXJsJywKICAgICdnaXQtY3ZzaW1wb3J0LnBlcmwnLAogICAgJ2dpdC1jdnNzZXJ2ZXIucGVybCcsCiAgICAnZ2l0LXNlbmQtZW1haWwucGVybCcsCiAgICAnZ2l0LXN2bi5wZXJsJywKICBdCgogIHBhdGhzZXAgPSAnOicKICBpZiBob3N0X21hY2hpbmUuc3lzdGVtKCkgPT0gJ3dpbmRvd3MnCiAgICBwYXRoc2VwID0gJzsnCiAgZW5kaWYKCiAgcGVybF9oZWFkZXJfdGVtcGxhdGUgPSAncGVybC9oZWFkZXJfdGVtcGxhdGVzL2ZpeGVkX3ByZWZpeC50ZW1wbGF0ZS5wbCcKICBpZiBnZXRfb3B0aW9uKCdydW50aW1lX3ByZWZpeCcpCiAgICBwZXJsX2hlYWRlcl90ZW1wbGF0ZSA9ICdwZXJsL2hlYWRlcl90ZW1wbGF0ZXMvcnVudGltZV9wcmVmaXgudGVtcGxhdGUucGwnCiAgZW5kaWYKCiAgcGVybF9oZWFkZXIgPSBjb25maWd1cmVfZmlsZSgKICAgIGlucHV0OiBwZXJsX2hlYWRlcl90ZW1wbGF0ZSwKICAgIG91dHB1dDogJ0dJVC1QRVJMLUhFQURFUicsCiAgICBjb25maWd1cmF0aW9uOiB7CiAgICAgICdHSVRFWEVDRElSX1JFTCc6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCiAgICAgICdQRVJMTElCRElSX1JFTCc6IGdldF9vcHRpb24oJ2RhdGFkaXInKSAvICdwZXJsNScsCiAgICAgICdMT0NBTEVESVJfUkVMJzogZ2V0X29wdGlvbignZGF0YWRpcicpIC8gJ2xvY2FsZScsCiAgICAgICdJTlNUTElCRElSJzogZ2V0X29wdGlvbignZGF0YWRpcicpIC8gJ3Blcmw1JywKICAgICAgJ1BBVEhTRVAnOiBwYXRoc2VwLAogICAgfSwKICApCgogIGdlbmVyYXRlX3BlcmxfY29tbWFuZCA9IFsKICAgIHNoZWxsLAogICAgbWVzb24ucHJvamVjdF9zb3VyY2Vfcm9vdCgpIC8gJ2dlbmVyYXRlLXBlcmwuc2gnLAogICAgbWVzb24ucHJvamVjdF9idWlsZF9yb290KCkgLyAnR0lULUJVSUxELU9QVElPTlMnLAogICAgZ2l0X3ZlcnNpb25fZmlsZS5mdWxsX3BhdGgoKSwKICAgIHBlcmxfaGVhZGVyLAogICAgJ0BJTlBVVEAnLAogICAgJ0BPVVRQVVRAJywKICBdCgogIGZvcmVhY2ggc2NyaXB0IDogc2NyaXB0c19wZXJsCiAgICBnZW5lcmF0ZWRfc2NyaXB0ID0gY3VzdG9tX3RhcmdldCgKICAgICAgaW5wdXQ6IHNjcmlwdCwKICAgICAgb3V0cHV0OiBmcy5zdGVtKHNjcmlwdCksCiAgICAgIGNvbW1hbmQ6IGdlbmVyYXRlX3BlcmxfY29tbWFuZCwKICAgICAgaW5zdGFsbDogdHJ1ZSwKICAgICAgaW5zdGFsbF9kaXI6IGdldF9vcHRpb24oJ2xpYmV4ZWNkaXInKSAvICdnaXQtY29yZScsCiAgICAgIGRlcGVuZHM6IFtnaXRfdmVyc2lvbl9maWxlXSwKICAgICkKICAgIHRlc3RfZGVwZW5kZW5jaWVzICs9IGdlbmVyYXRlZF9zY3JpcHQKCiAgICBpZiBzY3JpcHQgPT0gJ2dpdC1jdnNzZXJ2ZXIucGVybCcKICAgICAgYmluX3dyYXBwZXJzICs9IGdlbmVyYXRlZF9zY3JpcHQKCiAgICAgIGlmIG1lc29uLnZlcnNpb24oKS52ZXJzaW9uX2NvbXBhcmUoJz49MS4zLjAnKQogICAgICAgIHBvaW50aW5nX3RvID0gZnMucmVsYXRpdmVfdG8oZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJyAvIGZzLnN0ZW0oc2NyaXB0KSwgZ2V0X29wdGlvbignYmluZGlyJykpCiAgICAgIGVsc2UKICAgICAgICBwb2ludGluZ190byA9ICcuLi9saWJleGVjL2dpdC1jb3JlJyAvIGZzLnN0ZW0oc2NyaXB0KQogICAgICBlbmRpZgoKICAgICAgaW5zdGFsbF9zeW1saW5rKGZzLnN0ZW0oc2NyaXB0KSwKICAgICAgICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignYmluZGlyJyksCiAgICAgICAgcG9pbnRpbmdfdG86IHBvaW50aW5nX3RvLAogICAgICApCiAgICBlbmRpZgogIGVuZGZvcmVhY2gKCiAgc3ViZGlyKCdwZXJsJykKZW5kaWYKCmlmIHB5dGhvbi5mb3VuZCgpCiAgc2NyaXB0c19weXRob24gPSBbCiAgICAnZ2l0LXA0LnB5JwogIF0KCiAgZm9yZWFjaCBzY3JpcHQgOiBzY3JpcHRzX3B5dGhvbgogICAgZ2VuZXJhdGVkX3B5dGhvbiA9IGN1c3RvbV90YXJnZXQoCiAgICAgIGlucHV0OiBzY3JpcHQsCiAgICAgIG91dHB1dDogZnMuc3RlbShzY3JpcHQpLAogICAgICBjb21tYW5kOiBbCiAgICAgICAgc2hlbGwsCiAgICAgICAgbWVzb24ucHJvamVjdF9zb3VyY2Vfcm9vdCgpIC8gJ2dlbmVyYXRlLXB5dGhvbi5zaCcsCiAgICAgICAgbWVzb24ucHJvamVjdF9idWlsZF9yb290KCkgLyAnR0lULUJVSUxELU9QVElPTlMnLAogICAgICAgICdASU5QVVRAJywKICAgICAgICAnQE9VVFBVVEAnLAogICAgICBdLAogICAgICBpbnN0YWxsOiB0cnVlLAogICAgICBpbnN0YWxsX2RpcjogZ2V0X29wdGlvbignbGliZXhlY2RpcicpIC8gJ2dpdC1jb3JlJywKICAgICkKICAgIHRlc3RfZGVwZW5kZW5jaWVzICs9IGdlbmVyYXRlZF9weXRob24KICBlbmRmb3JlYWNoCmVuZGlmCgptZXJnZXRvb2xzID0gWwogICdtZXJnZXRvb2xzL2FyYXhpcycsCiAgJ21lcmdldG9vbHMvYmMnLAogICdtZXJnZXRvb2xzL2NvZGVjb21wYXJlJywKICAnbWVyZ2V0b29scy9kZWx0YXdhbGtlcicsCiAgJ21lcmdldG9vbHMvZGlmZm1lcmdlJywKICAnbWVyZ2V0b29scy9kaWZmdXNlJywKICAnbWVyZ2V0b29scy9lY21lcmdlJywKICAnbWVyZ2V0b29scy9lbWVyZ2UnLAogICdtZXJnZXRvb2xzL2V4YW1kaWZmJywKICAnbWVyZ2V0b29scy9ndWlmZnknLAogICdtZXJnZXRvb2xzL2d2aW1kaWZmJywKICAnbWVyZ2V0b29scy9rZGlmZjMnLAogICdtZXJnZXRvb2xzL2tvbXBhcmUnLAogICdtZXJnZXRvb2xzL21lbGQnLAogICdtZXJnZXRvb2xzL252aW1kaWZmJywKICAnbWVyZ2V0b29scy9vcGVuZGlmZicsCiAgJ21lcmdldG9vbHMvcDRtZXJnZScsCiAgJ21lcmdldG9vbHMvc21lcmdlJywKICAnbWVyZ2V0b29scy90a2RpZmYnLAogICdtZXJnZXRvb2xzL3RvcnRvaXNlbWVyZ2UnLAogICdtZXJnZXRvb2xzL3ZpbWRpZmYnLAogICdtZXJnZXRvb2xzL3ZzY29kZScsCiAgJ21lcmdldG9vbHMvd2lubWVyZ2UnLAogICdtZXJnZXRvb2xzL3h4ZGlmZicsCl0KCmZvcmVhY2ggbWVyZ2V0b29sIDogbWVyZ2V0b29scwogIGluc3RhbGxfZGF0YShtZXJnZXRvb2wsIGluc3RhbGxfZGlyOiBnZXRfb3B0aW9uKCdsaWJleGVjZGlyJykgLyAnZ2l0LWNvcmUnIC8gJ21lcmdldG9vbHMnKQplbmRmb3JlYWNoCgppZiBpbnRsLmZvdW5kKCkKICBzdWJkaXIoJ3BvJykKZW5kaWYKc3ViZGlyKCdjb250cmliJykKCiMgR2l0d2ViIHJlcXVpcmVzIFBlcmwsIHNvIHdlIGRpc2FibGUgdGhlIGF1dG8tZmVhdHVyZSBpZiBQZXJsIHdhcyBub3QgZm91bmQuCiMgV2UgbWFrZSBzdXJlIGZ1cnRoZXIgdXAgdGhhdCBQZXJsIGlzIHJlcXVpcmVkIGluIGNhc2UgdGhlIGdpdHdlYiBvcHRpb24gaXMKIyBlbmFibGVkLgpnaXR3ZWJfb3B0aW9uID0gZ2V0X29wdGlvbignZ2l0d2ViJykuZGlzYWJsZV9hdXRvX2lmKG5vdCBwZXJsLmZvdW5kKCkpCmlmIGdpdHdlYl9vcHRpb24uYWxsb3dlZCgpCiAgc3ViZGlyKCdnaXR3ZWInKQogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldCgnTk9fR0lUV0VCJywgJycpCmVsc2UKICBidWlsZF9vcHRpb25zX2NvbmZpZy5zZXQoJ05PX0dJVFdFQicsICcxJykKZW5kaWYKCnN1YmRpcigndGVtcGxhdGVzJykKCiMgRXZlcnl0aGluZyBidXQgdGhlIGJpbi13cmFwcGVycyBuZWVkIHRvIGNvbWUgYmVmb3JlIHRoaXMgdGFyZ2V0IHN1Y2ggdGhhdCB3ZQojIGNhbiBwcm9wZXJseSBzZXQgdXAgdGVzdCBkZXBlbmRlbmNpZXMuIFRoZSBiaW4td3JhcHBlcnMgdGhlbXNlbHZlcyBhcmUgc2V0IHVwCiMgYXQgY29uZmlndXJhdGlvbiB0aW1lLCBzbyB0aGVzZSBhcmUgZmluZS4KaWYgZ2V0X29wdGlvbigndGVzdHMnKQogIHN1YmRpcigndCcpCmVuZGlmCgpzdWJkaXIoJ2Jpbi13cmFwcGVycycpCmlmIGdldF9vcHRpb24oJ2RvY3MnKSAhPSBbXQogIHN1YmRpcignRG9jdW1lbnRhdGlvbicpCmVuZGlmCgpmb3JlYWNoIGtleSwgdmFsdWUgOiB7CiAgJ0RJRkYnOiBkaWZmLmZ1bGxfcGF0aCgpLAogICdHSVRfVEVTVF9DTVAnOiBkaWZmLmZ1bGxfcGF0aCgpICsgJyAtdScsCiAgJ0dJVF9URVNUX0dJVFBFUkxMSUInOiBtZXNvbi5wcm9qZWN0X2J1aWxkX3Jvb3QoKSAvICdwZXJsJywKICAnR0lUX1RFU1RfTUVSR0VfVE9PTFNfRElSJzogbWVzb24ucHJvamVjdF9zb3VyY2Vfcm9vdCgpIC8gJ21lcmdldG9vbHMnLAogICdHSVRfVEVTVF9QT1BBVEgnOiBtZXNvbi5wcm9qZWN0X3NvdXJjZV9yb290KCkgLyAncG8nLAogICdHSVRfVEVTVF9URU1QTEFURV9ESVInOiBtZXNvbi5wcm9qZWN0X2J1aWxkX3Jvb3QoKSAvICd0ZW1wbGF0ZXMnLAogICdHSVRfVEVTVF9URVhURE9NQUlORElSJzogbWVzb24ucHJvamVjdF9idWlsZF9yb290KCkgLyAncG8nLAogICdQQUdFUl9FTlYnOiBnZXRfb3B0aW9uKCdwYWdlcl9lbnZpcm9ubWVudCcpLAogICdQRVJMX1BBVEgnOiBwZXJsLmZvdW5kKCkgPyBwZXJsLmZ1bGxfcGF0aCgpIDogJycsCiAgJ1BZVEhPTl9QQVRIJzogcHl0aG9uLmZvdW5kICgpID8gcHl0aG9uLmZ1bGxfcGF0aCgpIDogJycsCiAgJ1NIRUxMX1BBVEgnOiBzaGVsbC5mdWxsX3BhdGgoKSwKICAnVEFSJzogdGFyLmZ1bGxfcGF0aCgpLAogICdURVNUX09VVFBVVF9ESVJFQ1RPUlknOiB0ZXN0X291dHB1dF9kaXJlY3RvcnksCiAgJ1RFU1RfU0hFTExfUEFUSCc6IHNoZWxsLmZ1bGxfcGF0aCgpLAp9CiAgaWYgdmFsdWUgIT0gJycgYW5kIGN5Z3BhdGguZm91bmQoKQogICAgdmFsdWUgPSBydW5fY29tbWFuZChjeWdwYXRoLCB2YWx1ZSwgY2hlY2s6IHRydWUpLnN0ZG91dCgpLnN0cmlwKCkKICBlbmRpZgogIGJ1aWxkX29wdGlvbnNfY29uZmlnLnNldF9xdW90ZWQoa2V5LCB2YWx1ZSkKZW5kZm9yZWFjaAoKY29uZmlndXJlX2ZpbGUoCiAgaW5wdXQ6ICdHSVQtQlVJTEQtT1BUSU9OUy5pbicsCiAgb3V0cHV0OiAnR0lULUJVSUxELU9QVElPTlMnLAogIGNvbmZpZ3VyYXRpb246IGJ1aWxkX29wdGlvbnNfY29uZmlnLAopCgpzdW1tYXJ5KHsKICAnY3VybCc6IGN1cmwuZm91bmQoKSwKICAnZXhwYXQnOiBleHBhdC5mb3VuZCgpLAogICdnZXR0ZXh0JzogaW50bC5mb3VuZCgpLAogICdnaXR3ZWInOiBnaXR3ZWJfb3B0aW9uLmFsbG93ZWQoKSwKICAnaHR0cHMnOiBodHRwc19iYWNrZW5kLAogICdpY29udic6IGljb252LmZvdW5kKCksCiAgJ3BjcmUyJzogcGNyZTIuZm91bmQoKSwKICAncGVybCc6IHBlcmxfZmVhdHVyZXNfZW5hYmxlZCwKICAncHl0aG9uJzogcHl0aG9uLmZvdW5kKCksCn0sIHNlY3Rpb246ICdBdXRvLWRldGVjdGVkIGZlYXR1cmVzJykK",
    "text": "# Meson build system\n# ==================\n#\n# The Meson build system is an alternative to our Makefile that you can use to\n# build, test and install Git. Using Meson results in a couple of benefits:\n#\n#  - Out-of-tree builds.\n#  - Better integration into IDEs.\n#  - Easy-to-use autoconfiguration of available features on your system.\n#\n# To use Meson from the command line you need to have both Meson and Ninja\n# installed. Alternatively, if you do not have Python available on your system,\n# you can also use Muon instead of Meson and Samurai instead of Ninja, both of\n# which are drop-ins replacement that only depend on C.\n#\n# Basic usage\n# ===========\n#\n# In the most trivial case, you can configure, build and install Git like this:\n#\n#  1. Set up the build directory. This only needs to happen once per build\n#     directory you want to have. You can also configure multiple different\n#     build directories with different configurations.\n#\n#      $ meson setup build/\n#\n#     The build directory gets ignored by Git automatically as Meson will write\n#     a \".gitignore\" file into it. From hereon, we will assume that you execute\n#     commands inside this build directory.\n#\n# 2. Compile Git. You can either use Meson, Ninja or Samurai to do this, so all\n#    of the following invocations are equivalent:\n#\n#      $ meson compile\n#      $ ninja\n#      $ samu\n#\n#   The different invocations should ultimately not make much of a difference.\n#   Using Meson also works with other generators though, like when the build\n#   directory has been set up for use with Microsoft Visual Studio.\n#\n#   Ninja and Samurai use multiple jobs by default, scaling with the number of\n#   processor cores available. You can pass the `-jN` flag to change this.\n#\n#   Meson automatically picks up ccache and sccache when these are installed\n#   when setting up the build directory. You can override this behaviour when\n#   setting up the build directory by setting the `CC` environment variable to\n#   your desired compiler.\n#\n# 3. Execute tests. Again, you can either use Meson, Ninja or Samurai to do this:\n#\n#      $ meson test\n#      $ ninja test\n#      $ samu test\n#\n#   It is recommended to use Meson in this case though as it also provides you\n#   additional features that the other build systems don't have available.\n#   You can e.g. pass additional arguments to the test executables or run\n#   individual tests:\n#\n#      # Execute the t0000-basic integration test and t-reftable-stack unit test.\n#      $ meson test t0000-basic t-reftable-stack\n#\n#      # Execute all reftable unit tests.\n#      $ meson test t-reftable-*\n#\n#      # Execute all tests and stop with the first failure.\n#      $ meson test --maxfail 1\n#\n#      # Execute single test interactively such that features like `debug ()` work.\n#      $ meson test -i --test-args='-ix' t1400-update-ref\n#\n#   Test execution is parallelized by default and scales with the number of\n#   processor cores available. You can change the number of processes by passing\n#   the `-jN` flag to `meson test`.\n#\n# 4. Install the Git distribution. Again, this can be done via Meson, Ninja or\n#    Samurai:\n#\n#      $ meson install\n#      $ ninja install\n#      $ samu install\n#\n#    The prefix into which Git shall be installed is defined when setting up\n#    the build directory. More on that in the \"Configuration\" section.\n#\n# Meson supports multiple backends. The default backend generates Ninja build\n# instructions, but it also supports the generation of Microsoft Visual\n# Studio solutions as well as Xcode projects by passing the `--backend` option\n# to `meson setup`. IDEs like Eclipse and Visual Studio Code provide plugins to\n# import Meson files directly.\n#\n# Configuration\n# =============\n#\n# The exact configuration of Git is determined when setting up the build\n# directory via `meson setup`. Unless told otherwise, Meson will automatically\n# detect the availability of various bits and pieces. There are two different\n# kinds of options that can be used to further tweak the build:\n#\n#   - Built-in options provided by Meson.\n#\n#   - Options defined by the project in the \"meson_options.txt\" file.\n#\n# Both kinds of options can be inspected by running `meson configure` in the\n# build directory, which will give you a list of the current value for all\n# options.\n#\n# Options can be configured either when setting up the build directory or can\n# be changed in preexisting build directories:\n#\n#      # Set up a new build directory with optimized settings that will be\n#      # installed into an alternative prefix.\n#      $ meson setup --buildtype release --optimization 3 --strip --prefix=/home/$USER build\n#\n#      # Set up a new build directory with a higher warning level. Level 2 is\n#      # mostly equivalent to setting DEVELOPER=1, level 3 and \"everything\"\n#      # will enable even more warnings.\n#      $ meson setup -Dwarning_level=2 build\n#\n#      # Set up a new build directory with 'address' and 'undefined' sanitizers\n#      # using Clang.\n#      $ CC=clang meson setup -Db_sanitize=address,undefined build\n#\n#      # Disable tests in a preexisting build directory.\n#      $ meson configure -Dtests=false\n#\n#      # Disable features based on Python\n#      $ meson configure -Dpython=disabled\n#\n# Options have a type like booleans, choices, strings or features. Features are\n# somewhat special as they can have one of three values: enabled, disabled or\n# auto. While the first two values are self-explanatory, \"auto\" will enable or\n# disable the feature based on the availability of prerequisites to support it.\n# Python-based features for example will be enabled automatically when a Python\n# interpreter could be found. The default value of such features can be changed\n# via `meson setup --auto-features={enabled,disabled,auto}`, which will set the\n# value of all features with a value of \"auto\" to the provided one by default.\n#\n# It is also possible to store a set of configuration options in machine files.\n# This can be useful in case you regularly want to reuse the same set of options:\n#\n#   [binaries]\n#   c = ['clang']\n#   ar = ['ar']\n#\n#   [project options]\n#   gettext = 'disabled'\n#   default_editor = 'vim'\n#\n#   [built-in options]\n#   b_lto = true\n#   b_sanitize = 'address,undefined'\n#\n# These machine files can be passed to `meson setup` via the `--native-file`\n# option.\n#\n# Subproject wrappers\n# ===================\n#\n# Subproject wrappers are a feature provided by Meson that allows the automatic\n# fallback to a \"wrapped\" dependency in case the dependency is not provided by\n# the system. For example if the system is lacking curl, then Meson will use\n# \"subprojects/curl.wrap\" to set up curl as a subproject and compile and link\n# the dependency into Git itself. This is especially helpful on systems like\n# Windows, where you typically don't have such dependencies installed.\n#\n# The use of subproject wrappers can be disabled by executing `meson setup`\n# with the `--wrap-mode nofallback` option.\n\nproject('git', 'c',\n  meson_version: '>=0.61.0',\n  version: 'v2.47.GIT',\n)\n\nfs = import('fs')\n\nprogram_path = []\n# Git for Windows provides all the tools we need to build Git.\nif host_machine.system() == 'windows'\n  program_path += [ 'C:/Program Files/Git/bin', 'C:/Program Files/Git/usr/bin' ]\nendif\n\ncygpath = find_program('cygpath', dirs: program_path, required: false)\ndiff = find_program('diff', dirs: program_path)\nshell = find_program('sh', dirs: program_path)\ntar = find_program('tar', dirs: program_path)\n\nscript_environment = environment()\nforeach tool : ['cat', 'cut', 'grep', 'sed', 'sort', 'tr', 'uname']\n  program = find_program(tool, dirs: program_path)\n  script_environment.prepend('PATH', fs.parent(program.full_path()))\nendforeach\n\ngit = find_program('git', dirs: program_path, required: false)\nif git.found()\n  script_environment.prepend('PATH', fs.parent(git.full_path()))\nendif\n\nif get_option('sane_tool_path') != ''\n  script_environment.prepend('PATH', get_option('sane_tool_path'))\nendif\n\n# The environment used by GIT-VERSION-GEN. Note that we explicitly override\n# environment variables that might be set by the user. This is by design so\n# that we always use whatever Meson has configured instead of what is present\n# in the environment.\nversion_gen_environment = script_environment\nversion_gen_environment.set('GIT_BUILT_FROM_COMMIT', get_option('built_from_commit'))\nversion_gen_environment.set('GIT_DATE', get_option('build_date'))\nversion_gen_environment.set('GIT_USER_AGENT', get_option('user_agent'))\nversion_gen_environment.set('GIT_VERSION', get_option('version'))\n\ncompiler = meson.get_compiler('c')\n\nlibgit_sources = [\n  'abspath.c',\n  'add-interactive.c',\n  'add-patch.c',\n  'advice.c',\n  'alias.c',\n  'alloc.c',\n  'apply.c',\n  'archive-tar.c',\n  'archive-zip.c',\n  'archive.c',\n  'attr.c',\n  'base85.c',\n  'bisect.c',\n  'blame.c',\n  'blob.c',\n  'bloom.c',\n  'branch.c',\n  'bulk-checkin.c',\n  'bundle-uri.c',\n  'bundle.c',\n  'cache-tree.c',\n  'cbtree.c',\n  'chdir-notify.c',\n  'checkout.c',\n  'chunk-format.c',\n  'color.c',\n  'column.c',\n  'combine-diff.c',\n  'commit-graph.c',\n  'commit-reach.c',\n  'commit.c',\n  'compat/nonblock.c',\n  'compat/obstack.c',\n  'compat/terminal.c',\n  'compat/zlib-uncompress2.c',\n  'config.c',\n  'connect.c',\n  'connected.c',\n  'convert.c',\n  'copy.c',\n  'credential.c',\n  'csum-file.c',\n  'ctype.c',\n  'date.c',\n  'decorate.c',\n  'delta-islands.c',\n  'diagnose.c',\n  'diff-delta.c',\n  'diff-merges.c',\n  'diff-lib.c',\n  'diff-no-index.c',\n  'diff.c',\n  'diffcore-break.c',\n  'diffcore-delta.c',\n  'diffcore-order.c',\n  'diffcore-pickaxe.c',\n  'diffcore-rename.c',\n  'diffcore-rotate.c',\n  'dir-iterator.c',\n  'dir.c',\n  'editor.c',\n  'entry.c',\n  'environment.c',\n  'ewah/bitmap.c',\n  'ewah/ewah_bitmap.c',\n  'ewah/ewah_io.c',\n  'ewah/ewah_rlw.c',\n  'exec-cmd.c',\n  'fetch-negotiator.c',\n  'fetch-pack.c',\n  'fmt-merge-msg.c',\n  'fsck.c',\n  'fsmonitor.c',\n  'fsmonitor-ipc.c',\n  'fsmonitor-settings.c',\n  'gettext.c',\n  'git-zlib.c',\n  'gpg-interface.c',\n  'graph.c',\n  'grep.c',\n  'hash-lookup.c',\n  'hashmap.c',\n  'help.c',\n  'hex.c',\n  'hex-ll.c',\n  'hook.c',\n  'ident.c',\n  'json-writer.c',\n  'kwset.c',\n  'levenshtein.c',\n  'line-log.c',\n  'line-range.c',\n  'linear-assignment.c',\n  'list-objects-filter-options.c',\n  'list-objects-filter.c',\n  'list-objects.c',\n  'lockfile.c',\n  'log-tree.c',\n  'loose.c',\n  'ls-refs.c',\n  'mailinfo.c',\n  'mailmap.c',\n  'match-trees.c',\n  'mem-pool.c',\n  'merge-blobs.c',\n  'merge-ll.c',\n  'merge-ort.c',\n  'merge-ort-wrappers.c',\n  'merge-recursive.c',\n  'merge.c',\n  'midx.c',\n  'midx-write.c',\n  'name-hash.c',\n  'negotiator/default.c',\n  'negotiator/noop.c',\n  'negotiator/skipping.c',\n  'notes-cache.c',\n  'notes-merge.c',\n  'notes-utils.c',\n  'notes.c',\n  'object-file-convert.c',\n  'object-file.c',\n  'object-name.c',\n  'object.c',\n  'oid-array.c',\n  'oidmap.c',\n  'oidset.c',\n  'oidtree.c',\n  'pack-bitmap-write.c',\n  'pack-bitmap.c',\n  'pack-check.c',\n  'pack-mtimes.c',\n  'pack-objects.c',\n  'pack-revindex.c',\n  'pack-write.c',\n  'packfile.c',\n  'pager.c',\n  'parallel-checkout.c',\n  'parse.c',\n  'parse-options-cb.c',\n  'parse-options.c',\n  'patch-delta.c',\n  'patch-ids.c',\n  'path.c',\n  'pathspec.c',\n  'pkt-line.c',\n  'preload-index.c',\n  'pretty.c',\n  'prio-queue.c',\n  'progress.c',\n  'promisor-remote.c',\n  'prompt.c',\n  'protocol.c',\n  'protocol-caps.c',\n  'prune-packed.c',\n  'pseudo-merge.c',\n  'quote.c',\n  'range-diff.c',\n  'reachable.c',\n  'read-cache.c',\n  'rebase-interactive.c',\n  'rebase.c',\n  'ref-filter.c',\n  'reflog-walk.c',\n  'reflog.c',\n  'refs.c',\n  'refs/debug.c',\n  'refs/files-backend.c',\n  'refs/reftable-backend.c',\n  'refs/iterator.c',\n  'refs/packed-backend.c',\n  'refs/ref-cache.c',\n  'refspec.c',\n  'reftable/basics.c',\n  'reftable/error.c',\n  'reftable/block.c',\n  'reftable/blocksource.c',\n  'reftable/iter.c',\n  'reftable/merged.c',\n  'reftable/pq.c',\n  'reftable/reader.c',\n  'reftable/record.c',\n  'reftable/stack.c',\n  'reftable/system.c',\n  'reftable/tree.c',\n  'reftable/writer.c',\n  'remote.c',\n  'replace-object.c',\n  'repo-settings.c',\n  'repository.c',\n  'rerere.c',\n  'reset.c',\n  'resolve-undo.c',\n  'revision.c',\n  'run-command.c',\n  'send-pack.c',\n  'sequencer.c',\n  'serve.c',\n  'server-info.c',\n  'setup.c',\n  'shallow.c',\n  'sideband.c',\n  'sigchain.c',\n  'sparse-index.c',\n  'split-index.c',\n  'stable-qsort.c',\n  'statinfo.c',\n  'strbuf.c',\n  'streaming.c',\n  'string-list.c',\n  'strmap.c',\n  'strvec.c',\n  'sub-process.c',\n  'submodule-config.c',\n  'submodule.c',\n  'symlinks.c',\n  'tag.c',\n  'tempfile.c',\n  'thread-utils.c',\n  'tmp-objdir.c',\n  'trace.c',\n  'trace2.c',\n  'trace2/tr2_cfg.c',\n  'trace2/tr2_cmd_name.c',\n  'trace2/tr2_ctr.c',\n  'trace2/tr2_dst.c',\n  'trace2/tr2_sid.c',\n  'trace2/tr2_sysenv.c',\n  'trace2/tr2_tbuf.c',\n  'trace2/tr2_tgt_event.c',\n  'trace2/tr2_tgt_normal.c',\n  'trace2/tr2_tgt_perf.c',\n  'trace2/tr2_tls.c',\n  'trace2/tr2_tmr.c',\n  'trailer.c',\n  'transport-helper.c',\n  'transport.c',\n  'tree-diff.c',\n  'tree-walk.c',\n  'tree.c',\n  'unpack-trees.c',\n  'upload-pack.c',\n  'url.c',\n  'urlmatch.c',\n  'usage.c',\n  'userdiff.c',\n  'utf8.c',\n  'varint.c',\n  'versioncmp.c',\n  'walker.c',\n  'wildmatch.c',\n  'worktree.c',\n  'wrapper.c',\n  'write-or-die.c',\n  'ws.c',\n  'wt-status.c',\n  'xdiff-interface.c',\n  'xdiff/xdiffi.c',\n  'xdiff/xemit.c',\n  'xdiff/xhistogram.c',\n  'xdiff/xmerge.c',\n  'xdiff/xpatience.c',\n  'xdiff/xprepare.c',\n  'xdiff/xutils.c',\n]\n\nbuiltin_sources = [\n  'builtin/add.c',\n  'builtin/am.c',\n  'builtin/annotate.c',\n  'builtin/apply.c',\n  'builtin/archive.c',\n  'builtin/bisect.c',\n  'builtin/blame.c',\n  'builtin/branch.c',\n  'builtin/bugreport.c',\n  'builtin/bundle.c',\n  'builtin/cat-file.c',\n  'builtin/check-attr.c',\n  'builtin/check-ignore.c',\n  'builtin/check-mailmap.c',\n  'builtin/check-ref-format.c',\n  'builtin/checkout--worker.c',\n  'builtin/checkout-index.c',\n  'builtin/checkout.c',\n  'builtin/clean.c',\n  'builtin/clone.c',\n  'builtin/column.c',\n  'builtin/commit-graph.c',\n  'builtin/commit-tree.c',\n  'builtin/commit.c',\n  'builtin/config.c',\n  'builtin/count-objects.c',\n  'builtin/credential-cache--daemon.c',\n  'builtin/credential-cache.c',\n  'builtin/credential-store.c',\n  'builtin/credential.c',\n  'builtin/describe.c',\n  'builtin/diagnose.c',\n  'builtin/diff-files.c',\n  'builtin/diff-index.c',\n  'builtin/diff-tree.c',\n  'builtin/diff.c',\n  'builtin/difftool.c',\n  'builtin/fast-export.c',\n  'builtin/fast-import.c',\n  'builtin/fetch-pack.c',\n  'builtin/fetch.c',\n  'builtin/fmt-merge-msg.c',\n  'builtin/for-each-ref.c',\n  'builtin/for-each-repo.c',\n  'builtin/fsck.c',\n  'builtin/fsmonitor--daemon.c',\n  'builtin/gc.c',\n  'builtin/get-tar-commit-id.c',\n  'builtin/grep.c',\n  'builtin/hash-object.c',\n  'builtin/help.c',\n  'builtin/hook.c',\n  'builtin/index-pack.c',\n  'builtin/init-db.c',\n  'builtin/interpret-trailers.c',\n  'builtin/log.c',\n  'builtin/ls-files.c',\n  'builtin/ls-remote.c',\n  'builtin/ls-tree.c',\n  'builtin/mailinfo.c',\n  'builtin/mailsplit.c',\n  'builtin/merge-base.c',\n  'builtin/merge-file.c',\n  'builtin/merge-index.c',\n  'builtin/merge-ours.c',\n  'builtin/merge-recursive.c',\n  'builtin/merge-tree.c',\n  'builtin/merge.c',\n  'builtin/mktag.c',\n  'builtin/mktree.c',\n  'builtin/multi-pack-index.c',\n  'builtin/mv.c',\n  'builtin/name-rev.c',\n  'builtin/notes.c',\n  'builtin/pack-objects.c',\n  'builtin/pack-redundant.c',\n  'builtin/pack-refs.c',\n  'builtin/patch-id.c',\n  'builtin/prune-packed.c',\n  'builtin/prune.c',\n  'builtin/pull.c',\n  'builtin/push.c',\n  'builtin/range-diff.c',\n  'builtin/read-tree.c',\n  'builtin/rebase.c',\n  'builtin/receive-pack.c',\n  'builtin/reflog.c',\n  'builtin/refs.c',\n  'builtin/remote-ext.c',\n  'builtin/remote-fd.c',\n  'builtin/remote.c',\n  'builtin/repack.c',\n  'builtin/replace.c',\n  'builtin/replay.c',\n  'builtin/rerere.c',\n  'builtin/reset.c',\n  'builtin/rev-list.c',\n  'builtin/rev-parse.c',\n  'builtin/revert.c',\n  'builtin/rm.c',\n  'builtin/send-pack.c',\n  'builtin/shortlog.c',\n  'builtin/show-branch.c',\n  'builtin/show-index.c',\n  'builtin/show-ref.c',\n  'builtin/sparse-checkout.c',\n  'builtin/stash.c',\n  'builtin/stripspace.c',\n  'builtin/submodule--helper.c',\n  'builtin/symbolic-ref.c',\n  'builtin/tag.c',\n  'builtin/unpack-file.c',\n  'builtin/unpack-objects.c',\n  'builtin/update-index.c',\n  'builtin/update-ref.c',\n  'builtin/update-server-info.c',\n  'builtin/upload-archive.c',\n  'builtin/upload-pack.c',\n  'builtin/var.c',\n  'builtin/verify-commit.c',\n  'builtin/verify-pack.c',\n  'builtin/verify-tag.c',\n  'builtin/worktree.c',\n  'builtin/write-tree.c',\n]\n\nlibgit_sources += custom_target(\n  input: 'command-list.txt',\n  output: 'command-list.h',\n  command: [shell, meson.current_source_dir() + '/generate-cmdlist.sh', meson.current_source_dir(), '@OUTPUT@'],\n  env: script_environment,\n)\n\nlibgit_sources += custom_target(\n  output: 'config-list.h',\n  command: [\n    shell,\n    meson.current_source_dir() + '/generate-configlist.sh',\n    meson.current_source_dir(),\n    '@OUTPUT@',\n  ],\n  env: script_environment,\n)\n\nlibgit_sources += custom_target(\n  input: 'Documentation/githooks.txt',\n  output: 'hook-list.h',\n  command: [\n    shell,\n    meson.current_source_dir() + '/generate-hooklist.sh',\n    meson.current_source_dir(),\n    '@OUTPUT@',\n  ],\n  env: script_environment,\n)\n\n# This contains the variables for GIT-BUILD-OPTIONS, which we use to propagate\n# build options to our tests.\nbuild_options_config = configuration_data()\nbuild_options_config.set('GIT_INTEROP_MAKE_OPTS', '')\nbuild_options_config.set('GIT_PERF_LARGE_REPO', '')\nbuild_options_config.set('GIT_PERF_MAKE_COMMAND', '')\nbuild_options_config.set('GIT_PERF_MAKE_OPTS', '')\nbuild_options_config.set('GIT_PERF_REPEAT_COUNT', '')\nbuild_options_config.set('GIT_PERF_REPO', '')\nbuild_options_config.set('GIT_TEST_CMP_USE_COPIED_CONTEXT', '')\nbuild_options_config.set('GIT_TEST_INDEX_VERSION', '')\nbuild_options_config.set('GIT_TEST_OPTS', '')\nbuild_options_config.set('GIT_TEST_PERL_FATAL_WARNINGS', '')\nbuild_options_config.set('GIT_TEST_UTF8_LOCALE', '')\nbuild_options_config.set_quoted('LOCALEDIR', fs.as_posix(get_option('prefix') / get_option('localedir')))\nbuild_options_config.set('GITWEBDIR', fs.as_posix(get_option('prefix') / get_option('datadir') / 'gitweb'))\n\nif get_option('sane_tool_path') != ''\n  build_options_config.set_quoted('BROKEN_PATH_FIX', 's|^\\# @BROKEN_PATH_FIX@$|git_broken_path_fix \"' + get_option('sane_tool_path') + '\"|')\nelse\n  build_options_config.set_quoted('BROKEN_PATH_FIX', '/^\\# @BROKEN_PATH_FIX@$/d')\nendif\n\ntest_output_directory = get_option('test_output_directory')\nif test_output_directory == ''\n  test_output_directory = meson.project_build_root() / 'test-output'\nendif\n\n# These variables are used for building libgit.a.\nlibgit_c_args = [\n  '-DBINDIR=\"' + get_option('bindir') + '\"',\n  '-DDEFAULT_EDITOR=\"' + get_option('default_editor') + '\"',\n  '-DDEFAULT_GIT_TEMPLATE_DIR=\"' + get_option('datadir') / 'git-core/templates' + '\"',\n  '-DDEFAULT_HELP_FORMAT=\"' + get_option('default_help_format') + '\"',\n  '-DDEFAULT_PAGER=\"' + get_option('default_pager') + '\"',\n  '-DETC_GITATTRIBUTES=\"' + get_option('gitattributes') + '\"',\n  '-DETC_GITCONFIG=\"' + get_option('gitconfig') + '\"',\n  '-DFALLBACK_RUNTIME_PREFIX=\"' + get_option('prefix') + '\"',\n  '-DGIT_EXEC_PATH=\"' + get_option('prefix') / get_option('libexecdir') / 'git-core\"',\n  '-DGIT_HOST_CPU=\"' + host_machine.cpu_family() + '\"',\n  '-DGIT_HTML_PATH=\"' + get_option('datadir') / 'doc/git-doc\"',\n  '-DGIT_INFO_PATH=\"' + get_option('infodir') + '\"',\n  '-DGIT_LOCALE_PATH=\"' + get_option('localedir') + '\"',\n  '-DGIT_MAN_PATH=\"' + get_option('mandir') + '\"',\n  '-DPAGER_ENV=\"' + get_option('pager_environment') + '\"',\n  '-DSHELL_PATH=\"' + fs.as_posix(shell.full_path()) + '\"',\n]\nlibgit_include_directories = [ '.' ]\nlibgit_dependencies = [ ]\n\n# Treat any warning level above 1 the same as we treat DEVELOPER=1 in our\n# Makefile.\nif get_option('warning_level') in ['2','3', 'everything'] and compiler.get_argument_syntax() == 'gcc'\n  foreach cflag : [\n    '-Wdeclaration-after-statement',\n    '-Wformat-security',\n    '-Wold-style-definition',\n    '-Woverflow',\n    '-Wpointer-arith',\n    '-Wstrict-prototypes',\n    '-Wunused',\n    '-Wvla',\n    '-Wwrite-strings',\n    '-fno-common',\n    '-Wtautological-constant-out-of-range-compare',\n    # If a function is public, there should be a prototype and the right\n    # header file should be included. If not, it should be static.\n    '-Wmissing-prototypes',\n    # These are disabled because we have these all over the place.\n    '-Wno-empty-body',\n    '-Wno-missing-field-initializers',\n    '-Wno-sign-compare',\n  ]\n    if compiler.has_argument(cflag)\n      libgit_c_args += cflag\n    endif\n  endforeach\nendif\n\nif get_option('b_sanitize').contains('address')\n  build_options_config.set('SANITIZE_ADDRESS', 'YesCompiledWithIt')\nelse\n  build_options_config.set('SANITIZE_ADDRESS', '')\nendif\nif get_option('b_sanitize').contains('leak')\n  build_options_config.set('SANITIZE_LEAK', 'YesCompiledWithIt')\nelse\n  build_options_config.set('SANITIZE_LEAK', '')\nendif\nif get_option('b_sanitize').contains('undefined')\n  libgit_c_args += '-DSHA1DC_FORCE_ALIGNED_ACCESS'\nendif\n\nexecutable_suffix = ''\nif host_machine.system() == 'cygwin' or host_machine.system() == 'windows'\n  executable_suffix = '.exe'\n  libgit_c_args += '-DSTRIP_EXTENSION=\"' + executable_suffix + '\"'\nendif\nbuild_options_config.set_quoted('X', executable_suffix)\n\npython = import('python').find_installation('python3', required: get_option('python'))\nif python.found()\n  build_options_config.set('NO_PYTHON', '')\nelse\n  libgit_c_args += '-DNO_PYTHON'\n  build_options_config.set('NO_PYTHON', '1')\nendif\n\n# Perl is used for two different things: our test harness and to provide some\n# features. It is optional if you want to neither execute tests nor use any of\n# these optional features.\nperl_required = get_option('perl')\nif get_option('tests') or get_option('gitweb').enabled()\n  perl_required = true\nendif\n\n# Note that we only set NO_PERL if the Perl features were disabled by the user.\n# It may not be set when we have found Perl, but only use it to run tests.\nperl = find_program('perl', version: '>=5.8.1', dirs: program_path, required: perl_required)\nperl_features_enabled = perl.found() and get_option('perl').allowed()\nif perl_features_enabled\n  build_options_config.set('NO_PERL', '')\n\n  if get_option('runtime_prefix')\n    build_options_config.set('PERL_LOCALEDIR', '')\n  else\n    build_options_config.set_quoted('PERL_LOCALEDIR', fs.as_posix(get_option('prefix') / get_option('localedir')))\n  endif\n\n  if get_option('perl_cpan_fallback')\n    build_options_config.set('NO_PERL_CPAN_FALLBACKS', '')\n  else\n    build_options_config.set_quoted('NO_PERL_CPAN_FALLBACKS', 'YesPlease')\n  endif\nelse\n  libgit_c_args += '-DNO_PERL'\n  build_options_config.set('NO_PERL', '1')\n  build_options_config.set('PERL_LOCALEDIR', '')\n  build_options_config.set('NO_PERL_CPAN_FALLBACKS', '')\nendif\n\nzlib = dependency('zlib', default_options: ['default_library=static', 'tests=disabled'])\nif zlib.version().version_compare('<1.2.0')\n  libgit_c_args += '-DNO_DEFLATE_BOUND'\nendif\nlibgit_dependencies += zlib\n\nthreads = dependency('threads', required: false)\nif threads.found()\n  libgit_dependencies += threads\n  build_options_config.set('NO_PTHREADS', '')\nelse\n  libgit_c_args += '-DNO_PTHREADS'\n  build_options_config.set('NO_PTHREADS', '1')\nendif\n\nmsgfmt = find_program('msgfmt', dirs: program_path, required: false)\ngettext_option = get_option('gettext').disable_auto_if(not msgfmt.found())\nif not msgfmt.found() and gettext_option.enabled()\n  error('Internationalization via libintl requires msgfmt')\nendif\n\nif gettext_option.allowed() and host_machine.system() == 'darwin' and get_option('macos_use_homebrew_gettext')\n  if host_machine.cpu_family() == 'x86_64'\n    libintl_prefix = '/usr/local'\n  elif host_machine.cpu_family() == 'aarch64'\n    libintl_prefix = '/opt/homebrew'\n  else\n    error('Homebrew workaround not supported on current architecture')\n  endif\n\n  intl = compiler.find_library('intl', dirs: libintl_prefix / 'lib', required: gettext_option)\n  if intl.found()\n    intl = declare_dependency(\n      dependencies: intl,\n      include_directories: libintl_prefix / 'include',\n    )\n  endif\nelse\n  intl = dependency('intl', required: gettext_option)\nendif\nif intl.found()\n  libgit_dependencies += intl\n  build_options_config.set('NO_GETTEXT', '')\n  build_options_config.set('USE_GETTEXT_SCHEME', '')\n\n  # POSIX nowadays requires `nl_langinfo()`, but some systems still don't have\n  # the function available. On such systems we instead fall back to libcharset.\n  # On native Windows systems we use our own emulation.\n  if host_machine.system() != 'windows' and not compiler.has_function('nl_langinfo')\n    libcharset = compiler.find_library('charset', required: true)\n    libgit_dependencies += libcharset\n    libgit_c_args += '-DHAVE_LIBCHARSET_H'\n  endif\nelse\n  libgit_c_args += '-DNO_GETTEXT'\n  build_options_config.set('NO_GETTEXT', '1')\n  build_options_config.set('USE_GETTEXT_SCHEME', 'fallthrough')\nendif\n\niconv = dependency('iconv', required: get_option('iconv'))\nif iconv.found()\n  libgit_dependencies += iconv\n  build_options_config.set('NO_ICONV', '')\n\n  have_old_iconv = false\n  if not compiler.compiles('''\n    #include <iconv.h>\n\n    extern size_t iconv(iconv_t cd,\n                        char **inbuf, size_t *inbytesleft,\n                        char **outbuf, size_t *outbytesleft);\n  ''', name: 'old iconv interface', dependencies: [iconv])\n    libgit_c_args += '-DOLD_ICONV'\n    have_old_iconv = true\n  endif\n\n  iconv_omits_bom_source = '''#\n    #include <iconv.h>\n\n    int main(int argc, const char **argv)\n    {\n  '''\n  if have_old_iconv\n    iconv_omits_bom_source += '''\n      typedef const char *iconv_ibp;\n    '''\n  else\n    iconv_omits_bom_source += '''\n      typedef char *iconv_ibp;\n    '''\n  endif\n  iconv_omits_bom_source += '''\n      int v;\n      iconv_t conv;\n      char in[] = \"a\"; iconv_ibp pin = in;\n      char out[20] = \"\"; char *pout = out;\n      size_t isz = sizeof in;\n      size_t osz = sizeof out;\n\n      conv = iconv_open(\"UTF-16\", \"UTF-8\");\n      iconv(conv, &pin, &isz, &pout, &osz);\n      iconv_close(conv);\n      v = (unsigned char)(out[0]) + (unsigned char)(out[1]);\n      return v != 0xfe + 0xff;\n    }\n  '''\n\n  if compiler.run(iconv_omits_bom_source,\n    dependencies: iconv,\n    name: 'iconv omits BOM',\n  ).returncode() != 0\n    libgit_c_args += '-DICONV_OMITS_BOM'\n  endif\nelse\n  libgit_c_args += '-DNO_ICONV'\n  build_options_config.set('NO_ICONV', '1')\nendif\n\npcre2 = dependency('libpcre2-8', required: get_option('pcre2'), default_options: ['default_library=static', 'test=false'])\nif pcre2.found()\n  libgit_dependencies += pcre2\n  libgit_c_args += '-DUSE_LIBPCRE2'\n  build_options_config.set('USE_LIBPCRE2', '1')\nelse\n  build_options_config.set('USE_LIBPCRE2', '')\nendif\n\ncurl = dependency('libcurl', version: '>=7.21.3', required: get_option('curl'), default_options: ['default_library=static', 'tests=disabled', 'tool=disabled'])\nuse_curl_for_imap_send = false\nif curl.found()\n  if curl.version().version_compare('>=7.34.0')\n    libgit_c_args += '-DUSE_CURL_FOR_IMAP_SEND'\n    use_curl_for_imap_send = true\n  endif\n\n  libgit_dependencies += curl\n  libgit_c_args += '-DCURL_DISABLE_TYPECHECK'\n  build_options_config.set('NO_CURL', '')\nelse\n  libgit_c_args += '-DNO_CURL'\n  build_options_config.set('NO_CURL', '1')\nendif\n\nexpat = dependency('expat', required: get_option('expat'), default_options: ['default_library=static', 'build_tests=false'])\nif expat.found()\n  libgit_dependencies += expat\n\n  if expat.version().version_compare('<=1.2')\n    libgit_c_args += '-DEXPAT_NEEDS_XMLPARSE_H'\n  endif\n  build_options_config.set('NO_EXPAT', '')\nelse\n  libgit_c_args += '-DNO_EXPAT'\n  build_options_config.set('NO_EXPAT', '1')\nendif\n\nif not compiler.has_header('sys/select.h')\n  libgit_c_args += '-DNO_SYS_SELECT_H'\nendif\n\nhas_poll_h = compiler.has_header('poll.h')\nif not has_poll_h\n  libgit_c_args += '-DNO_POLL_H'\nendif\n\nhas_sys_poll_h = compiler.has_header('sys/poll.h')\nif not has_sys_poll_h\n  libgit_c_args += '-DNO_SYS_POLL_H'\nendif\n\nif not has_poll_h and not has_sys_poll_h\n  libgit_c_args += '-DNO_POLL'\n  libgit_sources += 'compat/poll/poll.c'\n  libgit_include_directories += 'compat/poll'\nendif\n\nif not compiler.has_header('inttypes.h')\n  libgit_c_args += '-DNO_INTTYPES_H'\nendif\n\nif compiler.has_header('alloca.h')\n  libgit_c_args += '-DHAVE_ALLOCA_H'\nendif\n\nif compiler.has_header('sys/sysinfo.h')\n  libgit_c_args += '-DHAVE_SYSINFO'\nendif\n\n# Windows has libgen.h and a basename implementation, but we still need our own\n# implementation to threat things like drive prefixes specially.\nif host_machine.system() == 'windows' or not compiler.has_header('libgen.h')\n  libgit_c_args += '-DNO_LIBGEN_H'\n  libgit_sources += 'compat/basename.c'\nendif\n\nif compiler.has_header('paths.h')\n  libgit_c_args += '-DHAVE_PATHS_H'\nendif\n\nif compiler.has_header('strings.h')\n  libgit_c_args += '-DHAVE_STRINGS_H'\nendif\n\nnetworking_dependencies = [ ]\nif host_machine.system() == 'windows'\n  winsock = compiler.find_library('ws2_32', required: false)\n  if winsock.found()\n    networking_dependencies += winsock\n  endif\nelse\n  libresolv = compiler.find_library('resolv', required: false)\n  if libresolv.found()\n    networking_dependencies += libresolv\n  endif\nendif\nlibgit_dependencies += networking_dependencies\n\nforeach symbol : ['inet_ntop', 'inet_pton', 'strerror']\n  if not compiler.has_function(symbol, dependencies: networking_dependencies)\n    libgit_c_args += '-DNO_' + symbol.to_upper()\n  endif\nendforeach\n\nhas_ipv6 = compiler.has_function('getaddrinfo', dependencies: networking_dependencies)\nif not has_ipv6\n  libgit_c_args += '-DNO_IPV6'\nendif\n\nif not compiler.compiles('''\n  #ifdef _WIN32\n  # include <winsock2.h>\n  #else\n  # include <sys/types.h>\n  # include <sys/socket.h>\n  #endif\n\n  void func(void)\n  {\n    struct sockaddr_storage x;\n  }\n''', name: 'struct sockaddr_storage')\n  if has_ipv6\n    libgit_c_args += '-Dsockaddr_storage=sockaddr_in6'\n  else\n    libgit_c_args += '-Dsockaddr_storage=sockaddr_in'\n  endif\nendif\n\nif compiler.has_function('socket', dependencies: networking_dependencies)\n  libgit_sources += [\n    'unix-socket.c',\n    'unix-stream-server.c',\n  ]\n  build_options_config.set('NO_UNIX_SOCKETS', '')\nelse\n  libgit_c_args += '-DNO_UNIX_SOCKETS'\n  build_options_config.set('NO_UNIX_SOCKETS', '1')\nendif\n\nif not compiler.has_function('pread')\n  libgit_c_args += '-DNO_PREAD'\n  libgit_sources += 'compat/pread.c'\nendif\n\nif host_machine.system() == 'darwin'\n  libgit_sources += 'compat/precompose_utf8.c'\n  libgit_c_args += '-DPRECOMPOSE_UNICODE'\n  libgit_c_args += '-DPROTECT_HFS_DEFAULT'\nendif\n\n# Configure general compatibility wrappers.\nif host_machine.system() == 'cygwin'\n  libgit_sources += [\n    'compat/win32/path-utils.c',\n  ]\nelif host_machine.system() == 'windows'\n  libgit_sources += [\n    'compat/mingw.c',\n    'compat/winansi.c',\n    'compat/win32/flush.c',\n    'compat/win32/path-utils.c',\n    'compat/win32/pthread.c',\n    'compat/win32/syslog.c',\n    'compat/win32/dirent.c',\n    'compat/win32mmap.c',\n    'compat/nedmalloc/nedmalloc.c',\n  ]\n\n  libgit_c_args += [\n    '-DDETECT_MSYS_TTY',\n    '-DENSURE_MSYSTEM_IS_SET',\n    '-DNATIVE_CRLF',\n    '-DNOGDI',\n    '-DNO_POSIX_GOODIES',\n    '-DWIN32',\n    '-D_CONSOLE',\n    '-D_CONSOLE_DETECT_MSYS_TTY',\n    '-D__USE_MINGW_ANSI_STDIO=0',\n  ]\n\n  libgit_dependencies += compiler.find_library('ntdll')\n  libgit_include_directories += 'compat/win32'\n  if compiler.get_id() == 'msvc'\n    libgit_include_directories += 'compat/vcbuild/include'\n  endif\nendif\n\nif host_machine.system() == 'linux'\n  libgit_sources += 'compat/linux/procinfo.c'\nelif host_machine.system() == 'windows'\n  libgit_sources += 'compat/win32/trace2_win32_process_info.c'\nelse\n  libgit_sources += 'compat/stub/procinfo.c'\nendif\n\nif host_machine.system() == 'cygwin' or host_machine.system() == 'windows'\n  libgit_c_args += [\n    '-DUNRELIABLE_FSTAT',\n    '-DMMAP_PREVENTS_DELETE',\n    '-DOBJECT_CREATION_MODE=1',\n  ]\nendif\n\n# Configure the simple-ipc subsystem required fro the fsmonitor.\nif host_machine.system() == 'windows'\n  libgit_sources += [\n    'compat/simple-ipc/ipc-shared.c',\n    'compat/simple-ipc/ipc-win32.c',\n  ]\n  libgit_c_args += '-DSUPPORTS_SIMPLE_IPC'\nelse\n  libgit_sources += [\n    'compat/simple-ipc/ipc-shared.c',\n    'compat/simple-ipc/ipc-unix-socket.c',\n  ]\n  libgit_c_args += '-DSUPPORTS_SIMPLE_IPC'\nendif\n\nfsmonitor_backend = ''\nif host_machine.system() == 'windows'\n  fsmonitor_backend = 'win32'\nelif host_machine.system() == 'darwin'\n  fsmonitor_backend = 'darwin'\n  libgit_dependencies += dependency('CoreServices')\nendif\nif fsmonitor_backend != ''\n  libgit_c_args += '-DHAVE_FSMONITOR_DAEMON_BACKEND'\n  libgit_c_args += '-DHAVE_FSMONITOR_OS_SETTINGS'\n\n  libgit_sources += [\n    'compat/fsmonitor/fsm-health-' + fsmonitor_backend + '.c',\n    'compat/fsmonitor/fsm-ipc-' + fsmonitor_backend + '.c',\n    'compat/fsmonitor/fsm-listen-' + fsmonitor_backend + '.c',\n    'compat/fsmonitor/fsm-path-utils-' + fsmonitor_backend + '.c',\n    'compat/fsmonitor/fsm-settings-' + fsmonitor_backend + '.c',\n  ]\nendif\nbuild_options_config.set_quoted('FSMONITOR_DAEMON_BACKEND', fsmonitor_backend)\nbuild_options_config.set_quoted('FSMONITOR_OS_SETTINGS', fsmonitor_backend)\n\nif not get_option('b_sanitize').contains('address') and get_option('regex').allowed() and compiler.has_header('regex.h') and compiler.get_define('REG_STARTEND', prefix: '#include <regex.h>') != ''\n  build_options_config.set('NO_REGEX', '')\n\n  if compiler.get_define('REG_ENHANCED', prefix: '#include <regex.h>') != ''\n    libgit_c_args += '-DUSE_ENHANCED_BASIC_REGULAR_EXPRESSIONS'\n    libgit_sources += 'compat/regcomp_enhanced.c'\n  endif\nelif not get_option('regex').enabled()\n  libgit_c_args += [\n    '-DNO_REGEX',\n    '-DGAWK',\n    '-DNO_MBSUPPORT',\n  ]\n  build_options_config.set('NO_REGEX', '1')\n  libgit_sources += 'compat/regex/regex.c'\n  libgit_include_directories += 'compat/regex'\nelse\n    error('Native regex support requested but not found')\nendif\n\n# setitimer and friends are provided by compat/mingw.c.\nif host_machine.system() != 'windows'\n  if not compiler.compiles('''\n    #include <sys/time.h>\n    void func(void)\n    {\n      struct itimerval value;\n    }\n  ''', name: 'struct itimerval')\n    libgit_c_args += '-DNO_STRUCT_ITIMERVAL'\n    libgit_c_args += '-DNO_SETITIMER'\n  elif not compiler.has_function('setitimer')\n    libgit_c_args += '-DNO_SETITIMER'\n  endif\nendif\n\nif compiler.has_member('struct stat', 'st_mtimespec.tv_nsec', prefix: '#include <sys/stat.h>')\n  libgit_c_args += '-DUSE_ST_TIMESPEC'\nelif not compiler.has_member('struct stat', 'st_mtim.tv_nsec', prefix: '#include <sys/stat.h>')\n  libgit_c_args += '-DNO_NSEC'\nendif\n\nif not compiler.has_member('struct stat', 'st_blocks', prefix: '#include <sys/stat.h>')\n  libgit_c_args += '-DNO_ST_BLOCKS_IN_STRUCT_STAT'\nendif\n\nif not compiler.has_member('struct dirent', 'd_type', prefix: '#include <dirent.h>')\n  libgit_c_args += '-DNO_D_TYPE_IN_DIRENT'\nendif\n\nif not compiler.has_member('struct passwd', 'pw_gecos', prefix: '#include <pwd.h>')\n  libgit_c_args += '-DNO_GECOS_IN_PWENT'\nendif\n\nif compiler.has_function('sync_file_range')\n  libgit_c_args += '-DHAVE_SYNC_FILE_RANGE'\nendif\n\nif not compiler.has_function('strcasestr')\n  libgit_c_args += '-DNO_STRCASESTR'\n  libgit_sources += 'compat/strcasestr.c'\nendif\n\nif not compiler.has_function('memmem')\n  libgit_c_args += '-DNO_MEMMEM'\n  libgit_sources += 'compat/memmem.c'\nendif\n\nif not compiler.has_function('strlcpy')\n  libgit_c_args += '-DNO_STRLCPY'\n  libgit_sources += 'compat/strlcpy.c'\nendif\n\nif not compiler.has_function('strdup')\n  libgit_c_args += '-DOVERRIDE_STRDUP'\n  libgit_sources += 'compat/strdup.c'\nendif\n\nif not compiler.has_function('strtoumax')\n  libgit_c_args += '-DNO_STRTOUMAX'\n  libgit_sources += [\n    'compat/strtoumax.c',\n    'compat/strtoimax.c',\n  ]\nendif\n\nif not compiler.has_function('strtoull')\n  libgit_c_args += '-DNO_STRTOULL'\nendif\n\nif not compiler.has_function('setenv')\n  libgit_c_args += '-DNO_SETENV'\n  libgit_sources += 'compat/setenv.c'\nendif\n\nif not compiler.has_function('qsort')\n  libgit_c_args += '-DINTERNAL_QSORT'\nendif\nlibgit_sources += 'compat/qsort_s.c'\n\n# unsetenv is provided by compat/mingw.c.\nif host_machine.system() != 'windows' and not compiler.has_function('unsetenv')\n  libgit_c_args += '-DNO_UNSETENV'\n  libgit_sources += 'compat/unsetenv.c'\nendif\n\nif not compiler.has_function('mkdtemp')\n  libgit_c_args += '-DNO_MKDTEMP'\n  libgit_sources += 'compat/mkdtemp.c'\nendif\n\nif not compiler.has_function('initgroups')\n  libgit_c_args += '-DNO_INITGROUPS'\nendif\n\nif compiler.has_function('getdelim')\n  libgit_c_args += '-DHAVE_GETDELIM'\nendif\n\nif host_machine.system() == 'windows'\n  libgit_c_args += '-DUSE_WIN32_MMAP'\nelif not compiler.has_function('mmap')\n  libgit_c_args += '-DNO_MMAP'\n  libgit_sources += 'compat/mmap.c'\nendif\n\nif compiler.has_function('clock_gettime')\n  libgit_c_args += '-DHAVE_CLOCK_GETTIME'\nendif\n\nif compiler.compiles('''\n  #include <time.h>\n\n  void func(void)\n  {\n    clockid_t id = CLOCK_MONOTONIC;\n  }\n''', name: 'monotonic clock')\n  libgit_c_args += '-DHAVE_CLOCK_MONOTONIC'\nendif\n\nif not compiler.compiles('''\n  #include <inttypes.h>\n\n  void func(void)\n  {\n    uintmax_t x = 0;\n  }\n''', name: 'uintmax_t')\n  libgit_c_args += '-DNO_UINTMAX_T'\nendif\n\nhas_bsd_sysctl = false\nif compiler.has_header('sys/sysctl.h')\n  if compiler.compiles('''\n    #include <stddef.h>\n    #include <sys/sysctl.h>\n\n    void func(void)\n    {\n      int val, mib[2] = { 0 };\n      size_t len = sizeof(val);\n      sysctl(mib, 2, &val, &len, NULL, 0);\n    }\n  ''', name: 'BSD sysctl')\n    libgit_c_args += '-DHAVE_BSD_SYSCTL'\n    has_bsd_sysctl = true\n  endif\nendif\n\nif not meson.is_cross_build() and compiler.run('''\n  #include <stdio.h>\n\n  int main(int argc, const char **argv)\n  {\n    FILE *f = fopen(\".\", \"r\");\n    return f ? 0 : 1;\n  }\n''', name: 'fread reads directories').returncode() == 0\n  libgit_c_args += '-DFREAD_READS_DIRECTORIES'\n  libgit_sources += 'compat/fopen.c'\nendif\n\nif not meson.is_cross_build() and fs.exists('/dev/tty')\n  libgit_c_args += '-DHAVE_DEV_TTY'\nendif\n\nhttps_backend = get_option('https_backend')\n\nsecurity_framework = dependency('Security', required: https_backend == 'CommonCrypto')\ncore_foundation_framework = dependency('CoreFoundation', required: security_framework.found())\nif https_backend == 'auto' and security_framework.found()\n  https_backend = 'CommonCrypto'\nendif\n\nopenssl_required = https_backend == 'openssl' or get_option('sha1_backend') == 'openssl' or get_option('sha256_backend') == 'openssl'\nopenssl = dependency('openssl', required: openssl_required, default_options: ['default_library=static'])\nif https_backend == 'auto' and openssl.found()\n  https_backend = 'openssl'\nendif\n\nif https_backend == 'CommonCrypto'\n  libgit_dependencies += security_framework\n  libgit_dependencies += core_foundation_framework\n  libgit_c_args += '-DAPPLE_COMMON_CRYPTO'\nelif https_backend == 'openssl'\n  libgit_dependencies += openssl\nelse\n  # We either couldn't find any dependencies with 'auto' or the user requested\n  # 'none'. Both cases are benign.\nendif\n\nif https_backend != 'openssl'\n  libgit_c_args += '-DNO_OPENSSL'\nendif\n\nsha1_backend = get_option('sha1_backend')\nif sha1_backend == 'sha1dc'\n  libgit_c_args += '-DSHA1_DC'\n  libgit_c_args += '-DSHA1DC_NO_STANDARD_INCLUDES=1'\n  libgit_c_args += '-DSHA1DC_INIT_SAFE_HASH_DEFAULT=0'\n  libgit_c_args += '-DSHA1DC_CUSTOM_INCLUDE_SHA1_C=\"git-compat-util.h\"'\n  libgit_c_args += '-DSHA1DC_CUSTOM_INCLUDE_UBC_CHECK_C=\"git-compat-util.h\"'\n\n  libgit_sources += [\n    'sha1dc_git.c',\n    'sha1dc/sha1.c',\n    'sha1dc/ubc_check.c',\n  ]\nelif sha1_backend == 'common-crypto'\n  libgit_c_args += '-DCOMMON_DIGEST_FOR_OPENSSL'\n  libgit_c_args += '-DSHA1_APPLE'\n  # Apple CommonCrypto requires chunking\n  libgit_c_args += '-DSHA1_MAX_BLOCK_SIZE=1024L*1024L*1024L'\nelif sha1_backend == 'openssl'\n  libgit_c_args += '-DSHA1_OPENSSL'\n  libgit_dependencies += openssl\nelif sha1_backend == 'block'\n  libgit_c_args += '-DSHA1_BLK'\n  libgit_sources += 'block-sha1/sha1.c'\nelse\n  error('Unhandled SHA1 backend ' + sha1_backend)\nendif\n\nsha256_backend = get_option('sha256_backend')\nif sha256_backend == 'openssl'\n  libgit_c_args += '-DSHA256_OPENSSL'\n  libgit_dependencies += openssl\nelif sha256_backend == 'nettle'\n  nettle = dependency('nettle')\n  libgit_dependencies += nettle\n  libgit_c_args += '-DSHA256_NETTLE'\nelif sha256_backend == 'gcrypt'\n  gcrypt = dependency('gcrypt')\n  libgit_dependencies += gcrypt\n  libgit_c_args += '-DSHA256_GCRYPT'\nelif sha256_backend == 'block'\n  libgit_c_args += '-DSHA256_BLK'\n  libgit_sources += 'sha256/block/sha256.c'\nelse\n  error('Unhandled SHA256 backend ' + sha256_backend)\nendif\n\nif compiler.has_header_symbol('stdlib.h', 'arc4random_buf')\n  libgit_c_args += '-DHAVE_ARC4RANDOM'\nelif compiler.has_header_symbol('bsd/stdlib.h', 'arc4random_buf')\n  libgit_c_args += '-DHAVE_ARC4RANDOM_BSD'\nelif compiler.has_function('getrandom', prefix: '#include <sys/random.h>')\n  libgit_c_args += '-DHAVE_GETRANDOM'\nelif compiler.has_function('getentropy', prefix: '#include <unistd.h>')\n  libgit_c_args += '-DHAVE_GETENTROPY'\nelif compiler.has_function('RtlGenRandom', prefix: '#include <windows.h>\\n#include <ntsecapi.h>')\n  libgit_c_args += '-DHAVE_RTLGENRANDOM'\nelif openssl.found()\n  libgit_c_args += '-DHAVE_OPENSSL_CSPRNG'\nendif\n\nif get_option('runtime_prefix')\n  libgit_c_args += '-DRUNTIME_PREFIX'\n  build_options_config.set('RUNTIME_PREFIX', 'true')\n\n  if compiler.has_header('mach-o/dyld.h')\n    libgit_c_args += '-DHAVE_NS_GET_EXECUTABLE_PATH'\n  endif\n\n  if has_bsd_sysctl and compiler.compiles('''\n    #include <sys/sysctl.h>\n\n    void func(void)\n    {\n      KERN_PROC_PATHNAME; KERN_PROC;\n    }\n  ''', name: 'BSD KERN_PROC_PATHNAME')\n    libgit_c_args += '-DHAVE_NS_GET_EXECUTABLE_PATH'\n  endif\n\n  if host_machine.system() == 'linux'\n    libgit_c_args += '-DPROCFS_EXECUTABLE_PATH=\"/proc/self/exe' + '\"'\n  elif host_machine.system() == 'openbsd'\n    libgit_c_args += '-DPROCFS_EXECUTABLE_PATH=\"' + '/proc/curproc/file' + '\"'\n  elif host_machine.system() == 'netbsd'\n    libgit_c_args += '-DPROCFS_EXECUTABLE_PATH=\"' + '/proc/curproc/exe' + '\"'\n  endif\n\n  if host_machine.system() == 'windows' and compiler.compiles('''\n    #include <stdlib.h>\n\n    void func(void)\n    {\n      _wpgmptr;\n    }\n  ''', name: 'Win32 _wpgmptr')\n    libgit_c_args += '-DHAVE_WPGMPTR'\n  endif\nelse\n  build_options_config.set('RUNTIME_PREFIX', 'false')\nendif\n\ngit_version_file = custom_target(\n  command: [\n    shell,\n    meson.current_source_dir() / 'GIT-VERSION-GEN',\n    meson.current_source_dir(),\n    '@INPUT@',\n    '@OUTPUT@',\n  ],\n  input: meson.current_source_dir() / 'GIT-VERSION-FILE.in',\n  output: 'GIT-VERSION-FILE',\n  env: version_gen_environment,\n  build_always_stale: true,\n)\n\nversion_def_h = custom_target(\n  command: [\n    shell,\n    meson.current_source_dir() / 'GIT-VERSION-GEN',\n    meson.current_source_dir(),\n    '@INPUT@',\n    '@OUTPUT@',\n  ],\n  input: meson.current_source_dir() / 'version-def.h.in',\n  output: 'version-def.h',\n  # Depend on GIT-VERSION-FILE so that we don't always try to rebuild this\n  # target for the same commit.\n  depends: [git_version_file],\n  env: version_gen_environment,\n)\n\n# Build a separate library for \"version.c\" so that we do not have to rebuild\n# everything when the current Git commit changes.\nlibgit_version_library = static_library('git-version',\n  sources: [\n    'version.c',\n    version_def_h,\n  ],\n  c_args: libgit_c_args,\n  dependencies: libgit_dependencies,\n  include_directories: libgit_include_directories,\n)\n\nlibgit_library = static_library('git',\n  sources: libgit_sources,\n  c_args: libgit_c_args,\n  link_with: libgit_version_library,\n  dependencies: libgit_dependencies,\n  include_directories: libgit_include_directories,\n)\n\nlibgit = declare_dependency(\n  compile_args: libgit_c_args,\n  link_with: libgit_library,\n  dependencies: libgit_dependencies,\n  include_directories: libgit_include_directories,\n)\n\ncommon_main_sources = ['common-main.c']\ncommon_main_link_args = [ ]\nif host_machine.system() == 'windows'\n  git_rc = custom_target(\n    command: [\n      shell,\n      meson.current_source_dir() / 'GIT-VERSION-GEN',\n      meson.current_source_dir(),\n      '@INPUT@',\n      '@OUTPUT@',\n    ],\n    input: meson.current_source_dir() / 'git.rc.in',\n    output: 'git.rc',\n    depends: [git_version_file],\n    env: version_gen_environment,\n  )\n\n  common_main_sources += import('windows').compile_resources(git_rc,\n    include_directories: [meson.current_source_dir()],\n  )\n  if compiler.get_argument_syntax() == 'gcc'\n    common_main_link_args += [\n      '-municode',\n      '-Wl,-nxcompat',\n      '-Wl,-dynamicbase',\n      '-Wl,-pic-executable,-e,mainCRTStartup',\n    ]\n  elif compiler.get_argument_syntax() == 'msvc'\n    common_main_link_args += [\n      '/ENTRY:wmainCRTStartup',\n      'invalidcontinue.obj',\n    ]\n  else\n    error('Unsupported compiler ' + compiler.get_id())\n  endif\nendif\ncommon_main_library = static_library('common-main',\n  sources: common_main_sources,\n  c_args: libgit_c_args,\n  dependencies: libgit_dependencies,\n  include_directories: libgit_include_directories,\n)\ncommon_main = declare_dependency(\n  link_with: common_main_library,\n  link_args: common_main_link_args,\n)\n\nbin_wrappers = [ ]\ntest_dependencies = [ ]\n\ngit = executable('git',\n  sources: builtin_sources + 'git.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\nbin_wrappers += git\n\ntest_dependencies += executable('git-daemon',\n  sources: 'daemon.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\ntest_dependencies += executable('git-sh-i18n--envsubst',\n  sources: 'sh-i18n--envsubst.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\nbin_wrappers += executable('git-shell',\n  sources: 'shell.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\ntest_dependencies += executable('git-http-backend',\n  sources: 'http-backend.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\nbin_wrappers += executable('scalar',\n  sources: 'scalar.c',\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\nif get_option('curl').enabled()\n  curl_sources = [\n    'http.c',\n    'http-walker.c',\n  ]\n\n  git_remote_http = executable('git-remote-http',\n    sources: curl_sources + 'remote-curl.c',\n    dependencies: [libgit, common_main],\n    install: true,\n    install_dir: get_option('libexecdir') / 'git-core',\n  )\n  test_dependencies += git_remote_http\n\n  test_dependencies += executable('git-http-fetch',\n    sources: curl_sources + 'http-fetch.c',\n    dependencies: [libgit, common_main],\n    install: true,\n    install_dir: get_option('libexecdir') / 'git-core',\n  )\n\n  if expat.found()\n    test_dependencies += executable('git-http-push',\n      sources: curl_sources + 'http-push.c',\n      dependencies: [libgit, common_main],\n      install: true,\n      install_dir: get_option('libexecdir') / 'git-core',\n    )\n  endif\n\n  foreach alias : [ 'git-remote-https', 'git-remote-ftp', 'git-remote-ftps' ]\n    test_dependencies += executable(alias,\n      objects: git_remote_http.extract_all_objects(recursive: false),\n      dependencies: [libgit, common_main],\n    )\n\n    install_symlink(alias + executable_suffix,\n      install_dir: get_option('libexecdir') / 'git-core',\n      pointing_to: 'git-remote-http',\n    )\n  endforeach\nendif\n\nimap_send_sources = ['imap-send.c']\nif use_curl_for_imap_send\n  imap_send_sources += curl_sources\nendif\n\ntest_dependencies += executable('git-imap-send',\n  sources: imap_send_sources,\n  dependencies: [libgit, common_main],\n  install: true,\n  install_dir: get_option('libexecdir') / 'git-core',\n)\n\nforeach alias : [ 'git-receive-pack', 'git-upload-archive', 'git-upload-pack' ]\n  bin_wrappers += executable(alias,\n    objects: git.extract_all_objects(recursive: false),\n    dependencies: [libgit, common_main],\n  )\n\n  install_symlink(alias + executable_suffix,\n    install_dir: get_option('libexecdir') / 'git-core',\n    pointing_to: 'git',\n  )\nendforeach\n\nforeach symlink : [\n  'git',\n  'git-receive-pack',\n  'git-shell',\n  'git-upload-archive',\n  'git-upload-pack',\n  'scalar',\n]\n  if meson.version().version_compare('>=1.3.0')\n    pointing_to = fs.relative_to(get_option('libexecdir') / 'git-core' / symlink, get_option('bindir'))\n  else\n    pointing_to = '../libexec/git-core' / symlink\n  endif\n\n  install_symlink(symlink,\n    install_dir: get_option('bindir'),\n    pointing_to: pointing_to,\n  )\nendforeach\n\nscripts_sh = [\n  'git-difftool--helper.sh',\n  'git-filter-branch.sh',\n  'git-merge-octopus.sh',\n  'git-merge-one-file.sh',\n  'git-merge-resolve.sh',\n  'git-mergetool--lib.sh',\n  'git-mergetool.sh',\n  'git-quiltimport.sh',\n  'git-request-pull.sh',\n  'git-sh-i18n.sh',\n  'git-sh-setup.sh',\n  'git-submodule.sh',\n  'git-web--browse.sh',\n]\nif perl_features_enabled\n  scripts_sh += 'git-instaweb.sh'\nendif\n\nforeach script : scripts_sh\n  test_dependencies += custom_target(\n    input: script,\n    output: fs.stem(script),\n    command: [\n      shell,\n      meson.project_source_root() / 'generate-script.sh',\n      '@INPUT@',\n      '@OUTPUT@',\n      meson.project_build_root() / 'GIT-BUILD-OPTIONS',\n    ],\n    install: true,\n    install_dir: get_option('libexecdir') / 'git-core',\n  )\nendforeach\n\nif perl_features_enabled\n  scripts_perl = [\n    'git-archimport.perl',\n    'git-cvsexportcommit.perl',\n    'git-cvsimport.perl',\n    'git-cvsserver.perl',\n    'git-send-email.perl',\n    'git-svn.perl',\n  ]\n\n  pathsep = ':'\n  if host_machine.system() == 'windows'\n    pathsep = ';'\n  endif\n\n  perl_header_template = 'perl/header_templates/fixed_prefix.template.pl'\n  if get_option('runtime_prefix')\n    perl_header_template = 'perl/header_templates/runtime_prefix.template.pl'\n  endif\n\n  perl_header = configure_file(\n    input: perl_header_template,\n    output: 'GIT-PERL-HEADER',\n    configuration: {\n      'GITEXECDIR_REL': get_option('libexecdir') / 'git-core',\n      'PERLLIBDIR_REL': get_option('datadir') / 'perl5',\n      'LOCALEDIR_REL': get_option('datadir') / 'locale',\n      'INSTLIBDIR': get_option('datadir') / 'perl5',\n      'PATHSEP': pathsep,\n    },\n  )\n\n  generate_perl_command = [\n    shell,\n    meson.project_source_root() / 'generate-perl.sh',\n    meson.project_build_root() / 'GIT-BUILD-OPTIONS',\n    git_version_file.full_path(),\n    perl_header,\n    '@INPUT@',\n    '@OUTPUT@',\n  ]\n\n  foreach script : scripts_perl\n    generated_script = custom_target(\n      input: script,\n      output: fs.stem(script),\n      command: generate_perl_command,\n      install: true,\n      install_dir: get_option('libexecdir') / 'git-core',\n      depends: [git_version_file],\n    )\n    test_dependencies += generated_script\n\n    if script == 'git-cvsserver.perl'\n      bin_wrappers += generated_script\n\n      if meson.version().version_compare('>=1.3.0')\n        pointing_to = fs.relative_to(get_option('libexecdir') / 'git-core' / fs.stem(script), get_option('bindir'))\n      else\n        pointing_to = '../libexec/git-core' / fs.stem(script)\n      endif\n\n      install_symlink(fs.stem(script),\n        install_dir: get_option('bindir'),\n        pointing_to: pointing_to,\n      )\n    endif\n  endforeach\n\n  subdir('perl')\nendif\n\nif python.found()\n  scripts_python = [\n    'git-p4.py'\n  ]\n\n  foreach script : scripts_python\n    generated_python = custom_target(\n      input: script,\n      output: fs.stem(script),\n      command: [\n        shell,\n        meson.project_source_root() / 'generate-python.sh',\n        meson.project_build_root() / 'GIT-BUILD-OPTIONS',\n        '@INPUT@',\n        '@OUTPUT@',\n      ],\n      install: true,\n      install_dir: get_option('libexecdir') / 'git-core',\n    )\n    test_dependencies += generated_python\n  endforeach\nendif\n\nmergetools = [\n  'mergetools/araxis',\n  'mergetools/bc',\n  'mergetools/codecompare',\n  'mergetools/deltawalker',\n  'mergetools/diffmerge',\n  'mergetools/diffuse',\n  'mergetools/ecmerge',\n  'mergetools/emerge',\n  'mergetools/examdiff',\n  'mergetools/guiffy',\n  'mergetools/gvimdiff',\n  'mergetools/kdiff3',\n  'mergetools/kompare',\n  'mergetools/meld',\n  'mergetools/nvimdiff',\n  'mergetools/opendiff',\n  'mergetools/p4merge',\n  'mergetools/smerge',\n  'mergetools/tkdiff',\n  'mergetools/tortoisemerge',\n  'mergetools/vimdiff',\n  'mergetools/vscode',\n  'mergetools/winmerge',\n  'mergetools/xxdiff',\n]\n\nforeach mergetool : mergetools\n  install_data(mergetool, install_dir: get_option('libexecdir') / 'git-core' / 'mergetools')\nendforeach\n\nif intl.found()\n  subdir('po')\nendif\nsubdir('contrib')\n\n# Gitweb requires Perl, so we disable the auto-feature if Perl was not found.\n# We make sure further up that Perl is required in case the gitweb option is\n# enabled.\ngitweb_option = get_option('gitweb').disable_auto_if(not perl.found())\nif gitweb_option.allowed()\n  subdir('gitweb')\n  build_options_config.set('NO_GITWEB', '')\nelse\n  build_options_config.set('NO_GITWEB', '1')\nendif\n\nsubdir('templates')\n\n# Everything but the bin-wrappers need to come before this target such that we\n# can properly set up test dependencies. The bin-wrappers themselves are set up\n# at configuration time, so these are fine.\nif get_option('tests')\n  subdir('t')\nendif\n\nsubdir('bin-wrappers')\nif get_option('docs') != []\n  subdir('Documentation')\nendif\n\nforeach key, value : {\n  'DIFF': diff.full_path(),\n  'GIT_TEST_CMP': diff.full_path() + ' -u',\n  'GIT_TEST_GITPERLLIB': meson.project_build_root() / 'perl',\n  'GIT_TEST_MERGE_TOOLS_DIR': meson.project_source_root() / 'mergetools',\n  'GIT_TEST_POPATH': meson.project_source_root() / 'po',\n  'GIT_TEST_TEMPLATE_DIR': meson.project_build_root() / 'templates',\n  'GIT_TEST_TEXTDOMAINDIR': meson.project_build_root() / 'po',\n  'PAGER_ENV': get_option('pager_environment'),\n  'PERL_PATH': perl.found() ? perl.full_path() : '',\n  'PYTHON_PATH': python.found () ? python.full_path() : '',\n  'SHELL_PATH': shell.full_path(),\n  'TAR': tar.full_path(),\n  'TEST_OUTPUT_DIRECTORY': test_output_directory,\n  'TEST_SHELL_PATH': shell.full_path(),\n}\n  if value != '' and cygpath.found()\n    value = run_command(cygpath, value, check: true).stdout().strip()\n  endif\n  build_options_config.set_quoted(key, value)\nendforeach\n\nconfigure_file(\n  input: 'GIT-BUILD-OPTIONS.in',\n  output: 'GIT-BUILD-OPTIONS',\n  configuration: build_options_config,\n)\n\nsummary({\n  'curl': curl.found(),\n  'expat': expat.found(),\n  'gettext': intl.found(),\n  'gitweb': gitweb_option.allowed(),\n  'https': https_backend,\n  'iconv': iconv.found(),\n  'pcre2': pcre2.found(),\n  'perl': perl_features_enabled,\n  'python': python.found(),\n}, section: 'Auto-detected features')\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "0064eb64f546a6349a8694ce251bd352febda6fe",
  "sha1_ok": true,
  "size": 55041
}
