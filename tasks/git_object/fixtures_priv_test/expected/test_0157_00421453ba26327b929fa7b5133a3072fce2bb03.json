{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdjaGVja291dCBpbnRvIGRldGFjaGVkIEhFQUQgc3RhdGUnCi4gLi90ZXN0LWxpYi5zaAoKY2hlY2tfZGV0YWNoZWQgKCkgewoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN5bWJvbGljLXJlZiAtcSBIRUFEID4vZGV2L251bGwKfQoKY2hlY2tfbm90X2RldGFjaGVkICgpIHsKCWdpdCBzeW1ib2xpYy1yZWYgLXEgSEVBRCA+L2Rldi9udWxsCn0KCnJlc2V0ICgpIHsKCWdpdCBjaGVja291dCBtYXN0ZXIgJiYKCWNoZWNrX25vdF9kZXRhY2hlZAp9Cgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCcgJwoJdGVzdF9jb21taXQgb25lICYmCgl0ZXN0X2NvbW1pdCB0d28gJiYKCWdpdCBicmFuY2ggYnJhbmNoICYmCglnaXQgdGFnIHRhZwonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjaGVja291dCBicmFuY2ggZG9lcyBub3QgZGV0YWNoJyAnCglyZXNldCAmJgoJZ2l0IGNoZWNrb3V0IGJyYW5jaCAmJgoJY2hlY2tfbm90X2RldGFjaGVkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NoZWNrb3V0IHRhZyBkZXRhY2hlcycgJwoJcmVzZXQgJiYKCWdpdCBjaGVja291dCB0YWcgJiYKCWNoZWNrX2RldGFjaGVkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NoZWNrb3V0IGJyYW5jaCBieSBmdWxsIG5hbWUgZGV0YWNoZXMnICcKCXJlc2V0ICYmCglnaXQgY2hlY2tvdXQgcmVmcy9oZWFkcy9icmFuY2ggJiYKCWNoZWNrX2RldGFjaGVkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NoZWNrb3V0IG5vbi1yZWYgZGV0YWNoZXMnICcKCXJlc2V0ICYmCglnaXQgY2hlY2tvdXQgYnJhbmNoXiAmJgoJY2hlY2tfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgcmVmXjAgZGV0YWNoZXMnICcKCXJlc2V0ICYmCglnaXQgY2hlY2tvdXQgYnJhbmNoXjAgJiYKCWNoZWNrX2RldGFjaGVkCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NoZWNrb3V0IC0tZGV0YWNoIGRldGFjaGVzJyAnCglyZXNldCAmJgoJZ2l0IGNoZWNrb3V0IC0tZGV0YWNoIGJyYW5jaCAmJgoJY2hlY2tfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgLS1kZXRhY2ggd2l0aG91dCBicmFuY2ggbmFtZScgJwoJcmVzZXQgJiYKCWdpdCBjaGVja291dCAtLWRldGFjaCAmJgoJY2hlY2tfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgLS1kZXRhY2ggZXJyb3JzIG91dCBmb3Igbm9uLWNvbW1pdCcgJwoJcmVzZXQgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBjaGVja291dCAtLWRldGFjaCBvbmVee3RyZWV9ICYmCgljaGVja19ub3RfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgLS1kZXRhY2ggZXJyb3JzIG91dCBmb3IgZXh0cmEgYXJndW1lbnQnICcKCXJlc2V0ICYmCglnaXQgY2hlY2tvdXQgbWFzdGVyICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgY2hlY2tvdXQgLS1kZXRhY2ggdGFnIG9uZS50ICYmCgljaGVja19ub3RfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgLS1kZXRhY2hlZCBhbmQgLWIgYXJlIGluY29tcGF0aWJsZScgJwoJcmVzZXQgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBjaGVja291dCAtLWRldGFjaCAtYiBuZXdicmFuY2ggdGFnICYmCgljaGVja19ub3RfZGV0YWNoZWQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2hlY2tvdXQgLS1kZXRhY2ggbW92ZXMgSEVBRCcgJwoJcmVzZXQgJiYKCWdpdCBjaGVja291dCBvbmUgJiYKCWdpdCBjaGVja291dCAtLWRldGFjaCB0d28gJiYKCWdpdCBkaWZmIC0tZXhpdC1jb2RlIEhFQUQgJiYKCWdpdCBkaWZmIC0tZXhpdC1jb2RlIHR3bwonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n\ntest_description='checkout into detached HEAD state'\n. ./test-lib.sh\n\ncheck_detached () {\n\ttest_must_fail git symbolic-ref -q HEAD >/dev/null\n}\n\ncheck_not_detached () {\n\tgit symbolic-ref -q HEAD >/dev/null\n}\n\nreset () {\n\tgit checkout master &&\n\tcheck_not_detached\n}\n\ntest_expect_success 'setup' '\n\ttest_commit one &&\n\ttest_commit two &&\n\tgit branch branch &&\n\tgit tag tag\n'\n\ntest_expect_success 'checkout branch does not detach' '\n\treset &&\n\tgit checkout branch &&\n\tcheck_not_detached\n'\n\ntest_expect_success 'checkout tag detaches' '\n\treset &&\n\tgit checkout tag &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout branch by full name detaches' '\n\treset &&\n\tgit checkout refs/heads/branch &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout non-ref detaches' '\n\treset &&\n\tgit checkout branch^ &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout ref^0 detaches' '\n\treset &&\n\tgit checkout branch^0 &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout --detach detaches' '\n\treset &&\n\tgit checkout --detach branch &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout --detach without branch name' '\n\treset &&\n\tgit checkout --detach &&\n\tcheck_detached\n'\n\ntest_expect_success 'checkout --detach errors out for non-commit' '\n\treset &&\n\ttest_must_fail git checkout --detach one^{tree} &&\n\tcheck_not_detached\n'\n\ntest_expect_success 'checkout --detach errors out for extra argument' '\n\treset &&\n\tgit checkout master &&\n\ttest_must_fail git checkout --detach tag one.t &&\n\tcheck_not_detached\n'\n\ntest_expect_success 'checkout --detached and -b are incompatible' '\n\treset &&\n\ttest_must_fail git checkout --detach -b newbranch tag &&\n\tcheck_not_detached\n'\n\ntest_expect_success 'checkout --detach moves HEAD' '\n\treset &&\n\tgit checkout one &&\n\tgit checkout --detach two &&\n\tgit diff --exit-code HEAD &&\n\tgit diff --exit-code two\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00421453ba26327b929fa7b5133a3072fce2bb03",
  "sha1_ok": true,
  "size": 1833
}
