{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDUgSnVuaW8gQyBIYW1hbm8KIwoKdGVzdF9kZXNjcmlwdGlvbj0nVHdvIHdheSBtZXJnZSB3aXRoIHJlYWQtdHJlZSAtLWVtdTIzICRIICRNCgpUaGlzIHRlc3QgdHJpZXMgdHdvLXdheSBtZXJnZSAoYWthIGZhc3QgZm9yd2FyZCB3aXRoIGNhcnJ5IGZvcndhcmQpLgoKVGhlcmUgaXMgdGhlIGhlYWQgKGNhbGxlZCBIKSBhbmQgYW5vdGhlciBjb21taXQgKGNhbGxlZCBNKSwgd2hpY2ggaXMKc2ltcGx5IGFoZWFkIG9mIEguICBUaGUgaW5kZXggYW5kIHRoZSB3b3JrIHRyZWUgY29udGFpbnMgYSBzdGF0ZSB0aGF0CmlzIGRlcml2ZWQgZnJvbSBILCBidXQgbWF5IGFsc28gaGF2ZSBsb2NhbCBjaGFuZ2VzLiAgVGhpcyB0ZXN0IGNoZWNrcwphbGwgdGhlIGNvbWJpbmF0aW9ucyBkZXNjcmliZWQgaW4gdGhlIHR3by10cmVlIG1lcmdlICJjYXJyeSBmb3J3YXJkIgpydWxlcywgZm91bmQgaW4gPERvY3VtZW50YXRpb24vZ2l0LXJldi10cmVlLnR4dD4uCgpJbiB0aGUgdGVzdCwgdGhlc2UgcGF0aHMgYXJlIHVzZWQ6CiAgICAgICAgYm96YmFyICAtIGluIEgsIHN0YXlzIGluIE0sIG1vZGlmaWVkIGZyb20gYm96YmFyIHRvIGdudXN0bwogICAgICAgIGZyb3R6ICAgLSBub3QgaW4gSCBhZGRlZCBpbiBNCiAgICAgICAgbml0Zm9sICAtIGluIEgsIHN0YXlzIGluIE0gdW5tb2RpZmllZAogICAgICAgIHJlenJvdiAgLSBpbiBILCBkZWxldGVkIGluIE0KICAgICAgICB5b21pbiAgIC0gbm90IGluIEggbm9yIE0KJwouIC4vdGVzdC1saWIuc2gKCnJlYWRfdHJlZV90d293YXkgKCkgewogICAgZ2l0LXJlYWQtdHJlZSAtLWVtdTIzICIkMSIgIiQyIiAmJgogICAgZ2l0LWxzLWZpbGVzIC0tc3RhZ2UgJiYKICAgIGdpdC1tZXJnZS1pbmRleCAuLi8uLi9naXQtbWVyZ2Utb25lLWZpbGUuc2ggLWEgJiYKICAgIGdpdC1scy1maWxlcyAtLXN0YWdlCn0KCl94NDA9J1swLTlhLWZdWzAtOWEtZl1bMC05YS1mXVswLTlhLWZdWzAtOWEtZl0nCl94NDA9IiRfeDQwJF94NDAkX3g0MCRfeDQwJF94NDAkX3g0MCRfeDQwJF94NDAiCmNvbXBhcmVfY2hhbmdlICgpIHsKCXNlZCAtbiA+Y3VycmVudCBcCgkgICAgLWUgJy9eLS0tIC9kOyAvXisrKyAvZDsgL15AQCAvZDsnIFwKCSAgICAtZSAncy9eXChbLStdWzAtN11bMC03XVswLTddWzAtN11bMC03XVswLTddXCkgJyIkX3g0MCInIC9cMSBYIC9wJyBcCgkgICAgIiQxIgoJZGlmZiAtdSBleHBlY3RlZCBjdXJyZW50Cn0KCmNoZWNrX2NhY2hlX2F0ICgpIHsKCWNsZWFuX2lmX2VtcHR5PWBnaXQtZGlmZi1maWxlcyAiJDEiYAoJY2FzZSAiJGNsZWFuX2lmX2VtcHR5IiBpbgoJJycpICBlY2hvICIkMTogY2xlYW4iIDs7Cgk/KikgIGVjaG8gIiQxOiBkaXJ0eSIgOzsKCWVzYWMKCWNhc2UgIiQyLCRjbGVhbl9pZl9lbXB0eSIgaW4KCWNsZWFuLCkJCTogICAgIDs7CgljbGVhbiw/KikJZmFsc2UgOzsKCWRpcnR5LCkJCWZhbHNlIDs7CglkaXJ0eSw/KikJOiAgICAgOzsKCWVzYWMKfQoKY2hlY2tfc3RhZ2VzICgpIHsKICAgIGNhdCA+ZXhwZWN0ZWRfc3RhZ2VzCiAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSB8IHNlZCAtZSAicy8gJF94NDAgLyBYIC8iID5jdXJyZW50X3N0YWdlcwogICAgZGlmZiAtdSBleHBlY3RlZF9zdGFnZXMgY3VycmVudF9zdGFnZXMKfQoKY2F0ID5ib3piYXItb2xkIDw8XEVPRgpUaGlzIGlzIGEgc2FtcGxlIGZpbGUgdXNlZCBpbiB0d28td2F5IGZhc3QgZm9yd2FyZCBtZXJnZQp0ZXN0cy4gIEl0cyBzZWNvbmQgbGluZSBlbmRzIHdpdGggYSBtYWdpYyB3b3JkIGJvemJhcgp3aGljaCB3aWxsIGJlIG1vZGlmaWVkIGJ5IHRoZSBtZXJnZWQgaGVhZCB0byBnbnVzdG8uCkl0IGhhcyBzb21lIGV4dHJhIGxpbmVzIHNvIHRoYXQgZXh0ZXJuYWwgdG9vbHMgY2FuCnN1Y2Nlc3NmdWxseSBtZXJnZSBpbmRlcGVuZGVudCBjaGFuZ2VzIG1hZGUgdG8gbGF0ZXIKbGluZXMgKHN1Y2ggYXMgdGhpcyBvbmUpLCBhdm9pZGluZyBsaW5lIGNvbmZsaWN0cy4KRU9GCgpzZWQgLWUgJ3MvYm96YmFyL2dudXN0byAoZWFybGllciBib3piYXIpLycgYm96YmFyLW9sZCA+Ym96YmFyLW5ldwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICBzZXR1cCBcCiAgICAnZWNobyBmcm90eiA+ZnJvdHogJiYKICAgICBlY2hvIG5pdGZvbCA+bml0Zm9sICYmCiAgICAgY2F0IGJvemJhci1vbGQgPmJvemJhciAmJgogICAgIGVjaG8gcmV6cm92ID5yZXpyb3YgJiYKICAgICBlY2hvIHlvbWluID55b21pbiAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgbml0Zm9sIGJvemJhciByZXpyb3YgJiYKICAgICB0cmVlSD1gZ2l0LXdyaXRlLXRyZWVgICYmCiAgICAgZWNobyB0cmVlSCAkdHJlZUggJiYKICAgICBnaXQtbHMtdHJlZSAkdHJlZUggJiYKCiAgICAgY2F0IGJvemJhci1uZXcgPmJvemJhciAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgZnJvdHogYm96YmFyIC0tZm9yY2UtcmVtb3ZlIHJlenJvdiAmJgogICAgIGdpdC1scy1maWxlcyAtLXN0YWdlID5NLm91dCAmJgogICAgIHRyZWVNPWBnaXQtd3JpdGUtdHJlZWAgJiYKICAgICBlY2hvIHRyZWVNICR0cmVlTSAmJgogICAgIGdpdC1scy10cmVlICR0cmVlTSAmJgogICAgIGdpdC1kaWZmLXRyZWUgJHRyZWVIICR0cmVlTScKCiMgInJlYWQtdHJlZSAtbSBIIEkrSCBNIiBidXQgSSBpcyBlbXB0eSBzbyB0aGlzIGlzICJyZWFkLXRyZWUgLW0gSCBIIE0iLgojCiMgYm96YmFyIFtPICYmIEEgJiYgQiAmJiBPPT1BICYmIE8hPUIgKCMxNCkgPT0+IEJdIHRha2UgTSBieSByZWFkLXRyZWUKIyBmcm90eiAgWyFPICYmICFBICYmIEIgKCMyKSA9PT4gQl0gICAgICAgICAgICAgICAgdGFrZSBNIGJ5IHJlYWQtdHJlZQojIG5pdGZvbCBbTyAmJiBBICYmIEIgJiYgTz09QSAmJiBPPT1CICgjMTUpID09PiBCXSB0YWtlIE0gYnkgcmVhZC10cmVlCiMgcmV6cm92IFtPICYmIEEgJiYgIUIgJiYgTz09QSAoIzEwKSA9PT4gbm8gbWVyZ2VdIHJlbW92ZWQgYnkgc2NyaXB0CiMKIyBFYXJsaWVyIG9uZSBkaWQgbm90IGhhdmUgIzJBTFQgc28gdGFraW5nIE0gd2FzIGRvbmUgYnkgdGhlIHNjcmlwdCwKIyB3aGljaCBhbHNvIHVwZGF0ZWQgdGhlIHdvcmsgdHJlZSBhbmQgbWFraW5nIGZyb3R6IGNsZWFuLiAgV2l0aCAjMkFMVCwKIyB0aGlzIGlzIHJlc29sdmVkIGJ5IHJlYWQtdHJlZSBpdHNlbGYgYW5kIHRoZSBwYXRoIGlzIGxlZnQgZGlydHkKIyBiZWNhdXNlIHdlIGFyZSBub3QgdGVzdGluZyAicmVhZC10cmVlIC11IC0tZW11MjMiLgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcxLCAyLCAzIC0gbm8gY2FycnkgZm9yd2FyZCcgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MS0zLm91dCAmJgogICAgIGRpZmYgLXUgTS5vdXQgMS0zLm91dCAmJgogICAgIGNoZWNrX2NhY2hlX2F0IGJvemJhciBkaXJ0eSAmJgogICAgIGNoZWNrX2NhY2hlX2F0IGZyb3R6IGRpcnR5ICYmICMgc2FtZSBhcyBwdXJlIDItd2F5IGFnYWluLgogICAgIGNoZWNrX2NhY2hlX2F0IG5pdGZvbCBkaXJ0eScKCmVjaG8gJysxMDA2NDQgWCAwCXlvbWluJyA+ZXhwZWN0ZWQKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJzQgLSBjYXJyeSBmb3J3YXJkIGxvY2FsIGFkZGl0aW9uLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgeW9taW4gJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+NC5vdXQgfHwgcmV0dXJuIDEKICAgICBkaWZmIC11IE0ub3V0IDQub3V0ID40ZGlmZi5vdXQKICAgICBjb21wYXJlX2NoYW5nZSA0ZGlmZi5vdXQgZXhwZWN0ZWQgJiYKICAgICBjaGVja19jYWNoZV9hdCB5b21pbiBjbGVhbicKCiMgInJlYWQtdHJlZSAtbSBIIEkrSCBNIiB3aGVyZSAhSCAmJiAhTTsgc28gKEkrSCkgbm90IGJlaW5nIHVwLXRvLWRhdGUKIyBzaG91bGQgbm90IG1hdHRlci4gIFRoYW5rcyB0byAjM0FMVCwgdGhpcyBpcyBub3cgcG9zc2libGUuCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJzUgLSBjYXJyeSBmb3J3YXJkIGxvY2FsIGFkZGl0aW9uLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8geW9taW4gPnlvbWluICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCB5b21pbiAmJgogICAgIGVjaG8geW9taW4geW9taW4gPnlvbWluICYmCiAgICAgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNICYmCiAgICAgZ2l0LWxzLWZpbGVzIC0tc3RhZ2UgPjUub3V0IHx8IHJldHVybiAxCiAgICAgZGlmZiAtdSBNLm91dCA1Lm91dCA+NWRpZmYub3V0CiAgICAgY29tcGFyZV9jaGFuZ2UgNWRpZmYub3V0IGV4cGVjdGVkICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgeW9taW4gZGlydHknCgojICJyZWFkLXRyZWUgLW0gSCBJK0ggTSIgd2hlcmUgIUggJiYgTSAmJiAoSStIKSA9PSBNLCBzbyB0aGlzIHNob3VsZAojIHN1Y2NlZWQgKGV2ZW4gdGhlIGVudHJ5IGlzIGNsZWFuKSwgbm93IHRoYW5rcyB0byAjNUFMVC4KdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnNiAtIGxvY2FsIGFkZGl0aW9uIGFscmVhZHkgaGFzIHRoZSBzYW1lLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgZnJvdHogJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+Ni5vdXQgJiYKICAgICBkaWZmIC11IE0ub3V0IDYub3V0ICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgZnJvdHogY2xlYW4nCgojIEV4YWN0bHkgdGhlIHNhbWUgcGF0dGVybiBhcyBhYm92ZSBidXQgd2l0aCBkaXJ0eSBjYWNoZS4gIFRoaXMgYWxzbwojIHNob3VsZCBzdWNjZWVkLCBub3cgdGhhbmtzIHRvICM1QUxULgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICc3IC0gbG9jYWwgYWRkaXRpb24gYWxyZWFkeSBoYXMgdGhlIHNhbWUuJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGdpdC1yZWFkLXRyZWUgJHRyZWVIICYmCiAgICAgZ2l0LWNoZWNrb3V0LWluZGV4IC11IC1mIC1xIC1hICYmCiAgICAgZWNobyBmcm90eiA+ZnJvdHogJiYKICAgICBnaXQtdXBkYXRlLWluZGV4IC0tYWRkIGZyb3R6ICYmCiAgICAgZWNobyBmcm90eiBmcm90eiA+ZnJvdHogJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+Ny5vdXQgJiYKICAgICBkaWZmIC11IE0ub3V0IDcub3V0ICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgZnJvdHogZGlydHknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICc4IC0gY29uZmxpY3RpbmcgYWRkaXRpb24uJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGdpdC1yZWFkLXRyZWUgJHRyZWVIICYmCiAgICAgZ2l0LWNoZWNrb3V0LWluZGV4IC11IC1mIC1xIC1hICYmCiAgICAgZWNobyBmcm90eiBmcm90eiA+ZnJvdHogJiYKICAgICBnaXQtdXBkYXRlLWluZGV4IC0tYWRkIGZyb3R6ICYmCiAgICAgaWYgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNOyB0aGVuIGZhbHNlOyBlbHNlIDo7IGZpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnOSAtIGNvbmZsaWN0aW5nIGFkZGl0aW9uLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gZnJvdHogZnJvdHogPmZyb3R6ICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBmcm90eiAmJgogICAgIGVjaG8gZnJvdHogPmZyb3R6ICYmCiAgICAgaWYgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNOyB0aGVuIGZhbHNlOyBlbHNlIDo7IGZpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMTAgLSBwYXRoIHJlbW92ZWQuJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGdpdC1yZWFkLXRyZWUgJHRyZWVIICYmCiAgICAgZ2l0LWNoZWNrb3V0LWluZGV4IC11IC1mIC1xIC1hICYmCiAgICAgZWNobyByZXpyb3YgPnJlenJvdiAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgcmV6cm92ICYmCiAgICAgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNICYmCiAgICAgZ2l0LWxzLWZpbGVzIC0tc3RhZ2UgPjEwLm91dCAmJgogICAgIGRpZmYgLXUgTS5vdXQgMTAub3V0JwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMTEgLSBkaXJ0eSBwYXRoIHJlbW92ZWQuJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGdpdC1yZWFkLXRyZWUgJHRyZWVIICYmCiAgICAgZ2l0LWNoZWNrb3V0LWluZGV4IC11IC1mIC1xIC1hICYmCiAgICAgZWNobyByZXpyb3YgPnJlenJvdiAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgcmV6cm92ICYmCiAgICAgZWNobyByZXpyb3YgcmV6cm92ID5yZXpyb3YgJiYKICAgICBpZiByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU07IHRoZW4gZmFsc2U7IGVsc2UgOjsgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcxMiAtIHVubWF0Y2hpbmcgbG9jYWwgY2hhbmdlcyBiZWluZyByZW1vdmVkLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gcmV6cm92IHJlenJvdiA+cmV6cm92ICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCByZXpyb3YgJiYKICAgICBpZiByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU07IHRoZW4gZmFsc2U7IGVsc2UgOjsgZmknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcxMyAtIHVubWF0Y2hpbmcgbG9jYWwgY2hhbmdlcyBiZWluZyByZW1vdmVkLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gcmV6cm92IHJlenJvdiA+cmV6cm92ICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCByZXpyb3YgJiYKICAgICBlY2hvIHJlenJvdiA+cmV6cm92ICYmCiAgICAgaWYgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNOyB0aGVuIGZhbHNlOyBlbHNlIDo7IGZpJwoKY2F0ID5leHBlY3RlZCA8PEVPRgotMTAwNjQ0IFggMAluaXRmb2wKKzEwMDY0NCBYIDAJbml0Zm9sCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMTQgLSB1bmNoYW5nZWQgaW4gdHdvIGhlYWRzLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gbml0Zm9sIG5pdGZvbCA+bml0Zm9sICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBuaXRmb2wgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MTQub3V0IHx8IHJldHVybiAxCiAgICAgZGlmZiAtdSBNLm91dCAxNC5vdXQgPjE0ZGlmZi5vdXQKICAgICBjb21wYXJlX2NoYW5nZSAxNGRpZmYub3V0IGV4cGVjdGVkICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgbml0Zm9sIGNsZWFuJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMTUgLSB1bmNoYW5nZWQgaW4gdHdvIGhlYWRzLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gbml0Zm9sIG5pdGZvbCA+bml0Zm9sICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBuaXRmb2wgJiYKICAgICBlY2hvIG5pdGZvbCBuaXRmb2wgbml0Zm9sID5uaXRmb2wgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MTUub3V0IHx8IHJldHVybiAxCiAgICAgZGlmZiAtdSBNLm91dCAxNS5vdXQgPjE1ZGlmZi5vdXQKICAgICBjb21wYXJlX2NoYW5nZSAxNWRpZmYub3V0IGV4cGVjdGVkICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgbml0Zm9sIGRpcnR5JwoKIyBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHN0cmFpZ2h0IDItd2F5IG1lcmdlIGluIHRoYXQgaXQgbGVhdmVzCiMgdGhyZWUgc3RhZ2VzIG9mIGJvemJhciBpbiB0aGUgaW5kZXggZmlsZSB3aXRob3V0IGZhaWxpbmcsIHNvCiMgdGhlIHVzZXIgY2FuIHJ1biBnaXQtZGlmZi1zdGFnZXMgdG8gZXhhbWluZSB0aGUgc2l0dWF0aW9uLgojIFdpdGggIzJBTFQsIGZyb3R6IGlzIHJlc29sdmVkIGludGVybmFsbHkuCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJzE2IC0gY29uZmxpY3RpbmcgbG9jYWwgY2hhbmdlLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGVjaG8gYm96YmFyIGJvemJhciA+Ym96YmFyICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBib3piYXIgJiYKICAgICBnaXQtcmVhZC10cmVlIC0tZW11MjMgJHRyZWVIICR0cmVlTSAmJgogICAgIGNoZWNrX3N0YWdlcycgPDxcRU9GCjEwMDY0NCBYIDEJYm96YmFyCjEwMDY0NCBYIDIJYm96YmFyCjEwMDY0NCBYIDMJYm96YmFyCjEwMDY0NCBYIDAJZnJvdHoKMTAwNjQ0IFggMAluaXRmb2wKMTAwNjQ0IFggMQlyZXpyb3YKMTAwNjQ0IFggMglyZXpyb3YKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcxNyAtIGNvbmZsaWN0aW5nIGxvY2FsIGNoYW5nZS4nIFwKICAgICdybSAtZiAuZ2l0L2luZGV4ICYmCiAgICAgZ2l0LXJlYWQtdHJlZSAkdHJlZUggJiYKICAgICBnaXQtY2hlY2tvdXQtaW5kZXggLXUgLWYgLXEgLWEgJiYKICAgICBlY2hvIGJvemJhciBib3piYXIgPmJvemJhciAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgYm96YmFyICYmCiAgICAgZWNobyBib3piYXIgYm96YmFyIGJvemJhciA+Ym96YmFyICYmCiAgICAgaWYgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNOyB0aGVuIGZhbHNlOyBlbHNlIDo7IGZpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMTggLSBsb2NhbCBjaGFuZ2UgYWxyZWFkeSBoYXZpbmcgYSBnb29kIHJlc3VsdC4nIFwKICAgICdybSAtZiAuZ2l0L2luZGV4ICYmCiAgICAgZ2l0LXJlYWQtdHJlZSAkdHJlZUggJiYKICAgICBnaXQtY2hlY2tvdXQtaW5kZXggLXUgLWYgLXEgLWEgJiYKICAgICBjYXQgYm96YmFyLW5ldyA+Ym96YmFyICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBib3piYXIgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MTgub3V0ICYmCiAgICAgZGlmZiAtdSBNLm91dCAxOC5vdXQgJiYKICAgICBjaGVja19jYWNoZV9hdCBib3piYXIgY2xlYW4nCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcxOSAtIGxvY2FsIGNoYW5nZSBhbHJlYWR5IGhhdmluZyBhIGdvb2QgcmVzdWx0LCBmdXJ0aGVyIG1vZGlmaWVkLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBnaXQtcmVhZC10cmVlICR0cmVlSCAmJgogICAgIGdpdC1jaGVja291dC1pbmRleCAtdSAtZiAtcSAtYSAmJgogICAgIGNhdCBib3piYXItbmV3ID5ib3piYXIgJiYKICAgICBnaXQtdXBkYXRlLWluZGV4IC0tYWRkIGJvemJhciAmJgogICAgIGVjaG8gZ251c3RvIGdudXN0byA+Ym96YmFyICYmCiAgICAgcmVhZF90cmVlX3R3b3dheSAkdHJlZUggJHRyZWVNICYmCiAgICAgZ2l0LWxzLWZpbGVzIC0tc3RhZ2UgPjE5Lm91dCAmJgogICAgIGRpZmYgLXUgTS5vdXQgMTkub3V0ICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgYm96YmFyIGRpcnR5JwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMjAgLSBubyBsb2NhbCBjaGFuZ2UsIHVzZSBuZXcgdHJlZS4nIFwKICAgICdybSAtZiAuZ2l0L2luZGV4ICYmCiAgICAgZ2l0LXJlYWQtdHJlZSAkdHJlZUggJiYKICAgICBnaXQtY2hlY2tvdXQtaW5kZXggLXUgLWYgLXEgLWEgJiYKICAgICBjYXQgYm96YmFyLW9sZCA+Ym96YmFyICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBib3piYXIgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MjAub3V0ICYmCiAgICAgZGlmZiAtdSBNLm91dCAyMC5vdXQgJiYKICAgICBjaGVja19jYWNoZV9hdCBib3piYXIgZGlydHknCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICcyMSAtIG5vIGxvY2FsIGNoYW5nZSwgZGlydHkgY2FjaGUuJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGdpdC1yZWFkLXRyZWUgJHRyZWVIICYmCiAgICAgZ2l0LWNoZWNrb3V0LWluZGV4IC11IC1mIC1xIC1hICYmCiAgICAgY2F0IGJvemJhci1vbGQgPmJvemJhciAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgYm96YmFyICYmCiAgICAgZWNobyBnbnVzdG8gZ251c3RvID5ib3piYXIgJiYKICAgICBpZiByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU07IHRoZW4gZmFsc2U7IGVsc2UgOjsgZmknCgplY2hvICctMTAwNjQ0IFggMAlib3piYXIKKzEwMDY0NCBYIDAJYm96YmFyJyA+ZXhwZWN0ZWQKCiMgVGhpcyBmYWlscyB3aXRoIHN0cmFpZ2h0IHR3by13YXkgZmFzdCBmb3J3YXJkLCBidXQgZW11MjMKIyBjYW4gbWVyZ2UgdGhlbS4KdGVzdF9leHBlY3Rfc3VjY2VzcyBcCiAgICAnMjIgLSBsb2NhbCBjaGFuZ2UgY2FjaGUgdXBkYXRlZC4nIFwKICAgICdybSAtZiAuZ2l0L2luZGV4ICYmCiAgICAgZ2l0LXJlYWQtdHJlZSAkdHJlZUggJiYKICAgICBnaXQtY2hlY2tvdXQtaW5kZXggLXUgLWYgLXEgLWEgJiYKICAgICBzZWQgLWUgInMvc3VjaCBhcy9TVUNIIEFTLyIgYm96YmFyLW9sZCA+Ym96YmFyICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBib3piYXIgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlSCAkdHJlZU0gJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+MjIub3V0IHx8IHJldHVybiAxCiAgICAgZGlmZiAtdSBNLm91dCAyMi5vdXQgPjIyZGlmZi5vdXQKICAgICBjb21wYXJlX2NoYW5nZSAyMmRpZmYub3V0ICYmCiAgICAgY2hlY2tfY2FjaGVfYXQgYm96YmFyIGNsZWFuJwoKIyBBbHNvIG1ha2Ugc3VyZSB3ZSBkaWQgbm90IGJyZWFrIERGIHZzIERGL0RGIGNhc2UuCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ0RGIHZzIERGL0RGIGNhc2Ugc2V0dXAuJyBcCiAgICAncm0gLWYgLmdpdC9pbmRleCAmJgogICAgIGVjaG8gREYgPkRGICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBERiAmJgogICAgIHRyZWVERj1gZ2l0LXdyaXRlLXRyZWVgICYmCiAgICAgZWNobyB0cmVlREYgJHRyZWVERiAmJgogICAgIGdpdC1scy10cmVlICR0cmVlREYgJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+REYub3V0CgogICAgIHJtIC1mIERGICYmCiAgICAgbWtkaXIgREYgJiYKICAgICBlY2hvIERGL0RGID5ERi9ERiAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgLS1yZW1vdmUgREYgREYvREYgJiYKICAgICB0cmVlREZERj1gZ2l0LXdyaXRlLXRyZWVgICYmCiAgICAgZWNobyB0cmVlREZERiAkdHJlZURGREYgJiYKICAgICBnaXQtbHMtdHJlZSAkdHJlZURGREYgJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+REZERi5vdXQnCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdERiB2cyBERi9ERiBjYXNlIHRlc3QgKCMxKScgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBybSAtZnIgREYgJiYKICAgICBlY2hvIERGID5ERiAmJgogICAgIGdpdC11cGRhdGUtaW5kZXggLS1hZGQgREYgJiYKICAgICByZWFkX3RyZWVfdHdvd2F5ICR0cmVlREYgJHRyZWVERkRGICYmCiAgICAgZ2l0LWxzLWZpbGVzIC0tc3RhZ2UgPkRGREZjaGVjay5vdXQgJiYKICAgICBkaWZmIC11IERGREYub3V0IERGREZjaGVjay5vdXQgJiYKICAgICBjaGVja19jYWNoZV9hdCBERi9ERiBjbGVhbiAmJiAjIGRpZmZlcmVudCBmcm9tIHB1cmUgMi13YXkKICAgICA6JwoKIyBUaGUgb3RoZXIgd2F5IGFyb3VuZAp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKICAgICdERiB2cyBERi9ERiBjYXNlIHRlc3QgKCMyKScgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBybSAtZnIgREYgJiYKICAgICBta2RpciBERiAmJgogICAgIGVjaG8gREYvREYgPkRGL0RGICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBERi9ERiAmJgogICAgIHJlYWRfdHJlZV90d293YXkgJHRyZWVERkRGICR0cmVlREYgJiYKICAgICBnaXQtbHMtZmlsZXMgLS1zdGFnZSA+REZERmNoZWNrLm91dCAmJgogICAgIGRpZmYgLXUgREYub3V0IERGREZjaGVjay5vdXQgJiYKICAgICBjaGVja19jYWNoZV9hdCBERiBjbGVhbiAmJiAjIGRpZmZlcmVudCBmcm9tIHB1cmUgMi13YXkKICAgICA6JwoKIyBFbXUyMyBjYW4gZ3JvayBJIGhhdmluZyBtb3JlIHRoYW4gSC4gIE1ha2Ugc3VyZSB3ZSBkaWQgbm90CiMgYm90Y2ggdGhlIGNvbmZsaWN0IHRlc3RzIChmaXhlZCkuCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAogICAgJ0RGIHZzIERGL0RGIGNhc2UgdGVzdCAoIzMpLicgXAogICAgJ3JtIC1mIC5naXQvaW5kZXggJiYKICAgICBybSAtZnIgREYgJiYKICAgICBta2RpciBERiAmJgogICAgIGVjaG8gREYvREYgPkRGL0RGICYmCiAgICAgZ2l0LXVwZGF0ZS1pbmRleCAtLWFkZCBERi9ERiAmJgogICAgICMgVGhpcyBzaG91bGQgZmFpbCBiZWNhdXNlIEkgYW5kIEggaGF2ZSBhIGNvbmZsaWN0CiAgICAgIyBhdCBERi4KICAgICBpZiBnaXQtcmVhZC10cmVlIC0tZW11MjMgJHRyZWVERiAkdHJlZURGREYKICAgICB0aGVuIGZhbHNlCiAgICAgZWxzZSB0cnVlCiAgICAgZmknCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2005 Junio C Hamano\n#\n\ntest_description='Two way merge with read-tree --emu23 $H $M\n\nThis test tries two-way merge (aka fast forward with carry forward).\n\nThere is the head (called H) and another commit (called M), which is\nsimply ahead of H.  The index and the work tree contains a state that\nis derived from H, but may also have local changes.  This test checks\nall the combinations described in the two-tree merge \"carry forward\"\nrules, found in <Documentation/git-rev-tree.txt>.\n\nIn the test, these paths are used:\n        bozbar  - in H, stays in M, modified from bozbar to gnusto\n        frotz   - not in H added in M\n        nitfol  - in H, stays in M unmodified\n        rezrov  - in H, deleted in M\n        yomin   - not in H nor M\n'\n. ./test-lib.sh\n\nread_tree_twoway () {\n    git-read-tree --emu23 \"$1\" \"$2\" &&\n    git-ls-files --stage &&\n    git-merge-index ../../git-merge-one-file.sh -a &&\n    git-ls-files --stage\n}\n\n_x40='[0-9a-f][0-9a-f][0-9a-f][0-9a-f][0-9a-f]'\n_x40=\"$_x40$_x40$_x40$_x40$_x40$_x40$_x40$_x40\"\ncompare_change () {\n\tsed -n >current \\\n\t    -e '/^--- /d; /^+++ /d; /^@@ /d;' \\\n\t    -e 's/^\\([-+][0-7][0-7][0-7][0-7][0-7][0-7]\\) '\"$_x40\"' /\\1 X /p' \\\n\t    \"$1\"\n\tdiff -u expected current\n}\n\ncheck_cache_at () {\n\tclean_if_empty=`git-diff-files \"$1\"`\n\tcase \"$clean_if_empty\" in\n\t'')  echo \"$1: clean\" ;;\n\t?*)  echo \"$1: dirty\" ;;\n\tesac\n\tcase \"$2,$clean_if_empty\" in\n\tclean,)\t\t:     ;;\n\tclean,?*)\tfalse ;;\n\tdirty,)\t\tfalse ;;\n\tdirty,?*)\t:     ;;\n\tesac\n}\n\ncheck_stages () {\n    cat >expected_stages\n    git-ls-files --stage | sed -e \"s/ $_x40 / X /\" >current_stages\n    diff -u expected_stages current_stages\n}\n\ncat >bozbar-old <<\\EOF\nThis is a sample file used in two-way fast forward merge\ntests.  Its second line ends with a magic word bozbar\nwhich will be modified by the merged head to gnusto.\nIt has some extra lines so that external tools can\nsuccessfully merge independent changes made to later\nlines (such as this one), avoiding line conflicts.\nEOF\n\nsed -e 's/bozbar/gnusto (earlier bozbar)/' bozbar-old >bozbar-new\n\ntest_expect_success \\\n    setup \\\n    'echo frotz >frotz &&\n     echo nitfol >nitfol &&\n     cat bozbar-old >bozbar &&\n     echo rezrov >rezrov &&\n     echo yomin >yomin &&\n     git-update-index --add nitfol bozbar rezrov &&\n     treeH=`git-write-tree` &&\n     echo treeH $treeH &&\n     git-ls-tree $treeH &&\n\n     cat bozbar-new >bozbar &&\n     git-update-index --add frotz bozbar --force-remove rezrov &&\n     git-ls-files --stage >M.out &&\n     treeM=`git-write-tree` &&\n     echo treeM $treeM &&\n     git-ls-tree $treeM &&\n     git-diff-tree $treeH $treeM'\n\n# \"read-tree -m H I+H M\" but I is empty so this is \"read-tree -m H H M\".\n#\n# bozbar [O && A && B && O==A && O!=B (#14) ==> B] take M by read-tree\n# frotz  [!O && !A && B (#2) ==> B]                take M by read-tree\n# nitfol [O && A && B && O==A && O==B (#15) ==> B] take M by read-tree\n# rezrov [O && A && !B && O==A (#10) ==> no merge] removed by script\n#\n# Earlier one did not have #2ALT so taking M was done by the script,\n# which also updated the work tree and making frotz clean.  With #2ALT,\n# this is resolved by read-tree itself and the path is left dirty\n# because we are not testing \"read-tree -u --emu23\".\ntest_expect_success \\\n    '1, 2, 3 - no carry forward' \\\n    'rm -f .git/index &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >1-3.out &&\n     diff -u M.out 1-3.out &&\n     check_cache_at bozbar dirty &&\n     check_cache_at frotz dirty && # same as pure 2-way again.\n     check_cache_at nitfol dirty'\n\necho '+100644 X 0\tyomin' >expected\n\ntest_expect_success \\\n    '4 - carry forward local addition.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     git-update-index --add yomin &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >4.out || return 1\n     diff -u M.out 4.out >4diff.out\n     compare_change 4diff.out expected &&\n     check_cache_at yomin clean'\n\n# \"read-tree -m H I+H M\" where !H && !M; so (I+H) not being up-to-date\n# should not matter.  Thanks to #3ALT, this is now possible.\ntest_expect_success \\\n    '5 - carry forward local addition.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo yomin >yomin &&\n     git-update-index --add yomin &&\n     echo yomin yomin >yomin &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >5.out || return 1\n     diff -u M.out 5.out >5diff.out\n     compare_change 5diff.out expected &&\n     check_cache_at yomin dirty'\n\n# \"read-tree -m H I+H M\" where !H && M && (I+H) == M, so this should\n# succeed (even the entry is clean), now thanks to #5ALT.\ntest_expect_success \\\n    '6 - local addition already has the same.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     git-update-index --add frotz &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >6.out &&\n     diff -u M.out 6.out &&\n     check_cache_at frotz clean'\n\n# Exactly the same pattern as above but with dirty cache.  This also\n# should succeed, now thanks to #5ALT.\ntest_expect_success \\\n    '7 - local addition already has the same.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo frotz >frotz &&\n     git-update-index --add frotz &&\n     echo frotz frotz >frotz &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >7.out &&\n     diff -u M.out 7.out &&\n     check_cache_at frotz dirty'\n\ntest_expect_success \\\n    '8 - conflicting addition.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo frotz frotz >frotz &&\n     git-update-index --add frotz &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ntest_expect_success \\\n    '9 - conflicting addition.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo frotz frotz >frotz &&\n     git-update-index --add frotz &&\n     echo frotz >frotz &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ntest_expect_success \\\n    '10 - path removed.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo rezrov >rezrov &&\n     git-update-index --add rezrov &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >10.out &&\n     diff -u M.out 10.out'\n\ntest_expect_success \\\n    '11 - dirty path removed.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo rezrov >rezrov &&\n     git-update-index --add rezrov &&\n     echo rezrov rezrov >rezrov &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ntest_expect_success \\\n    '12 - unmatching local changes being removed.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo rezrov rezrov >rezrov &&\n     git-update-index --add rezrov &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ntest_expect_success \\\n    '13 - unmatching local changes being removed.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo rezrov rezrov >rezrov &&\n     git-update-index --add rezrov &&\n     echo rezrov >rezrov &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ncat >expected <<EOF\n-100644 X 0\tnitfol\n+100644 X 0\tnitfol\nEOF\n\ntest_expect_success \\\n    '14 - unchanged in two heads.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo nitfol nitfol >nitfol &&\n     git-update-index --add nitfol &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >14.out || return 1\n     diff -u M.out 14.out >14diff.out\n     compare_change 14diff.out expected &&\n     check_cache_at nitfol clean'\n\ntest_expect_success \\\n    '15 - unchanged in two heads.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo nitfol nitfol >nitfol &&\n     git-update-index --add nitfol &&\n     echo nitfol nitfol nitfol >nitfol &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >15.out || return 1\n     diff -u M.out 15.out >15diff.out\n     compare_change 15diff.out expected &&\n     check_cache_at nitfol dirty'\n\n# This is different from straight 2-way merge in that it leaves\n# three stages of bozbar in the index file without failing, so\n# the user can run git-diff-stages to examine the situation.\n# With #2ALT, frotz is resolved internally.\ntest_expect_success \\\n    '16 - conflicting local change.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo bozbar bozbar >bozbar &&\n     git-update-index --add bozbar &&\n     git-read-tree --emu23 $treeH $treeM &&\n     check_stages' <<\\EOF\n100644 X 1\tbozbar\n100644 X 2\tbozbar\n100644 X 3\tbozbar\n100644 X 0\tfrotz\n100644 X 0\tnitfol\n100644 X 1\trezrov\n100644 X 2\trezrov\nEOF\n\ntest_expect_success \\\n    '17 - conflicting local change.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     echo bozbar bozbar >bozbar &&\n     git-update-index --add bozbar &&\n     echo bozbar bozbar bozbar >bozbar &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\ntest_expect_success \\\n    '18 - local change already having a good result.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     cat bozbar-new >bozbar &&\n     git-update-index --add bozbar &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >18.out &&\n     diff -u M.out 18.out &&\n     check_cache_at bozbar clean'\n\ntest_expect_success \\\n    '19 - local change already having a good result, further modified.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     cat bozbar-new >bozbar &&\n     git-update-index --add bozbar &&\n     echo gnusto gnusto >bozbar &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >19.out &&\n     diff -u M.out 19.out &&\n     check_cache_at bozbar dirty'\n\ntest_expect_success \\\n    '20 - no local change, use new tree.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     cat bozbar-old >bozbar &&\n     git-update-index --add bozbar &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >20.out &&\n     diff -u M.out 20.out &&\n     check_cache_at bozbar dirty'\n\ntest_expect_success \\\n    '21 - no local change, dirty cache.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     cat bozbar-old >bozbar &&\n     git-update-index --add bozbar &&\n     echo gnusto gnusto >bozbar &&\n     if read_tree_twoway $treeH $treeM; then false; else :; fi'\n\necho '-100644 X 0\tbozbar\n+100644 X 0\tbozbar' >expected\n\n# This fails with straight two-way fast forward, but emu23\n# can merge them.\ntest_expect_success \\\n    '22 - local change cache updated.' \\\n    'rm -f .git/index &&\n     git-read-tree $treeH &&\n     git-checkout-index -u -f -q -a &&\n     sed -e \"s/such as/SUCH AS/\" bozbar-old >bozbar &&\n     git-update-index --add bozbar &&\n     read_tree_twoway $treeH $treeM &&\n     git-ls-files --stage >22.out || return 1\n     diff -u M.out 22.out >22diff.out\n     compare_change 22diff.out &&\n     check_cache_at bozbar clean'\n\n# Also make sure we did not break DF vs DF/DF case.\ntest_expect_success \\\n    'DF vs DF/DF case setup.' \\\n    'rm -f .git/index &&\n     echo DF >DF &&\n     git-update-index --add DF &&\n     treeDF=`git-write-tree` &&\n     echo treeDF $treeDF &&\n     git-ls-tree $treeDF &&\n     git-ls-files --stage >DF.out\n\n     rm -f DF &&\n     mkdir DF &&\n     echo DF/DF >DF/DF &&\n     git-update-index --add --remove DF DF/DF &&\n     treeDFDF=`git-write-tree` &&\n     echo treeDFDF $treeDFDF &&\n     git-ls-tree $treeDFDF &&\n     git-ls-files --stage >DFDF.out'\n\ntest_expect_success \\\n    'DF vs DF/DF case test (#1)' \\\n    'rm -f .git/index &&\n     rm -fr DF &&\n     echo DF >DF &&\n     git-update-index --add DF &&\n     read_tree_twoway $treeDF $treeDFDF &&\n     git-ls-files --stage >DFDFcheck.out &&\n     diff -u DFDF.out DFDFcheck.out &&\n     check_cache_at DF/DF clean && # different from pure 2-way\n     :'\n\n# The other way around\ntest_expect_success \\\n    'DF vs DF/DF case test (#2)' \\\n    'rm -f .git/index &&\n     rm -fr DF &&\n     mkdir DF &&\n     echo DF/DF >DF/DF &&\n     git-update-index --add DF/DF &&\n     read_tree_twoway $treeDFDF $treeDF &&\n     git-ls-files --stage >DFDFcheck.out &&\n     diff -u DF.out DFDFcheck.out &&\n     check_cache_at DF clean && # different from pure 2-way\n     :'\n\n# Emu23 can grok I having more than H.  Make sure we did not\n# botch the conflict tests (fixed).\ntest_expect_success \\\n    'DF vs DF/DF case test (#3).' \\\n    'rm -f .git/index &&\n     rm -fr DF &&\n     mkdir DF &&\n     echo DF/DF >DF/DF &&\n     git-update-index --add DF/DF &&\n     # This should fail because I and H have a conflict\n     # at DF.\n     if git-read-tree --emu23 $treeDF $treeDFDF\n     then false\n     else true\n     fi'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00c332a1407a86096cbaf06ef5d8ec613a412190",
  "sha1_ok": true,
  "size": 13191
}
