{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdnaXQtY3ZzaW1wb3J0IGJhc2ljIHRlc3RzJwouIC4vdGVzdC1saWIuc2gKCkNWU1JPT1Q9JChwd2QpL2N2c3Jvb3QKZXhwb3J0IENWU1JPT1QKIyBmb3IgY2xlYW4gY3ZzcHMgY2FjaGUKSE9NRT0kKHB3ZCkKZXhwb3J0IEhPTUUKCmlmICEgdHlwZSBjdnMgPi9kZXYvbnVsbCAyPiYxCnRoZW4KCXNheSAnc2tpcHBpbmcgY3ZzaW1wb3J0IHRlc3RzLCBjdnMgbm90IGZvdW5kJwoJdGVzdF9kb25lCglleGl0CmZpCgpjdnNwc192ZXJzaW9uPWBjdnNwcyAtaCAyPiYxIHwgc2VkIC1uZSAncy9jdnNwcyB2ZXJzaW9uIC8vcCdgCmNhc2UgIiRjdnNwc192ZXJzaW9uIiBpbgoyLjEpCgk7OwonJykKCXNheSAnc2tpcHBpbmcgY3ZzaW1wb3J0IHRlc3RzLCBjdnNwcyBub3QgZm91bmQnCgl0ZXN0X2RvbmUKCWV4aXQKCTs7CiopCglzYXkgJ3NraXBwaW5nIGN2c2ltcG9ydCB0ZXN0cywgY3ZzcHMgdG9vIG9sZCcKCXRlc3RfZG9uZQoJZXhpdAoJOzsKZXNhYwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgY3Zzcm9vdCcgJ2N2cyBpbml0JwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgYSBjdnMgbW9kdWxlJyAnCgoJbWtkaXIgJENWU1JPT1QvbW9kdWxlICYmCgljdnMgY28gLWQgbW9kdWxlLWN2cyBtb2R1bGUgJiYKCWNkIG1vZHVsZS1jdnMgJiYKCWNhdCA8PEVPRiA+b19mb3J0dW5hICYmCk8gRm9ydHVuYQp2ZWx1dCBsdW5hCnN0YXR1IHZhcmlhYmlsaXMsCgpzZW1wZXIgY3Jlc2NpcwphdXQgZGVjcmVzY2lzOwp2aXRhIGRldGVzdGFiaWxpcwoKbnVuYyBvYmR1cmF0CmV0IHR1bmMgY3VyYXQKbHVkbyBtZW50aXMgYWNpZW0sCgplZ2VzdGF0ZW0sCnBvdGVzdGF0ZW0KZGlzc29sdml0IHV0IGdsYWNpZW0uCkVPRgoJY3ZzIGFkZCBvX2ZvcnR1bmEgJiYKCWNhdCA8PEVPRiA+bWVzc2FnZSAmJgphZGQgIk8gRm9ydHVuYSIgbHlyaWNzCgpUaGVzZSBwdWJsaWMgZG9tYWluIGx5cmljcyBtYWtlIGFuIGV4Y2VsbGVudCBzYW1wbGUgdGV4dC4KRU9GCgljdnMgY29tbWl0IC1GIG1lc3NhZ2UgJiYKCWNkIC4uCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ltcG9ydCBhIHRyaXZpYWwgbW9kdWxlJyAnCgoJZ2l0IGN2c2ltcG9ydCAtYSAteiAwIC1DIG1vZHVsZS1naXQgbW9kdWxlICYmCglnaXQgZGlmZiBtb2R1bGUtY3ZzL29fZm9ydHVuYSBtb2R1bGUtZ2l0L29fZm9ydHVuYQoKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncGFjayByZWZzJyAnY2QgbW9kdWxlLWdpdCAmJiBnaXQgZ2MgJiYgY2QgLi4nCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICd1cGRhdGUgY3ZzIG1vZHVsZScgJwoKCWNkIG1vZHVsZS1jdnMgJiYKCWNhdCA8PEVPRiA+b19mb3J0dW5hICYmCk8gRm9ydHVuZSwKbGlrZSB0aGUgbW9vbgp5b3UgYXJlIGNoYW5nZWFibGUsCgpldmVyIHdheGluZwphbmQgd2FuaW5nOwpoYXRlZnVsIGxpZmUKCmZpcnN0IG9wcHJlc3NlcwphbmQgdGhlbiBzb290aGVzCmFzIGZhbmN5IHRha2VzIGl0OwoKcG92ZXJ0eQphbmQgcG93ZXIKaXQgbWVsdHMgdGhlbSBsaWtlIGljZS4KRU9GCgljYXQgPDxFT0YgPm1lc3NhZ2UgJiYKdHJhbnNsYXRlIHRvIEVuZ2xpc2gKCk15IExhdGluIGlzIHRlcnJpYmxlLgpFT0YKCWN2cyBjb21taXQgLUYgbWVzc2FnZSAmJgoJY2QgLi4KJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXBkYXRlIGdpdCBtb2R1bGUnICcKCgljZCBtb2R1bGUtZ2l0ICYmCglnaXQgY3ZzaW1wb3J0IC1hIC16IDAgbW9kdWxlICYmCglnaXQgbWVyZ2Ugb3JpZ2luICYmCgljZCAuLiAmJgoJZ2l0IGRpZmYgbW9kdWxlLWN2cy9vX2ZvcnR1bmEgbW9kdWxlLWdpdC9vX2ZvcnR1bmEKCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3VwZGF0ZSBjdnMgbW9kdWxlJyAnCgoJY2QgbW9kdWxlLWN2cyAmJgoJCWVjaG8gMSA+dGljayAmJgoJCWN2cyBhZGQgdGljayAmJgoJCWN2cyBjb21taXQgLW0gMQoJY2QgLi4KCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2c2ltcG9ydC5tb2R1bGUgY29uZmlnIHdvcmtzJyAnCgoJY2QgbW9kdWxlLWdpdCAmJgoJCWdpdCBjb25maWcgY3ZzaW1wb3J0Lm1vZHVsZSBtb2R1bGUgJiYKCQlnaXQgY3ZzaW1wb3J0IC1hIC16MCAmJgoJCWdpdCBtZXJnZSBvcmlnaW4gJiYKCWNkIC4uICYmCglnaXQgZGlmZiBtb2R1bGUtY3ZzL3RpY2sgbW9kdWxlLWdpdC90aWNrCgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdpbXBvcnQgZnJvbSBhIENWUyB3b3JraW5nIHRyZWUnICcKCgljdnMgY28gLWQgaW1wb3J0LWZyb20td3QgbW9kdWxlICYmCgljZCBpbXBvcnQtZnJvbS13dCAmJgoJCWdpdCBjdnNpbXBvcnQgLWEgLXowICYmCgkJZWNobyAxID5leHBlY3QgJiYKCQlnaXQgbG9nIC0xIC0tcHJldHR5PWZvcm1hdDolcyVuID5hY3R1YWwgJiYKCQlnaXQgZGlmZiBhY3R1YWwgZXhwZWN0ICYmCgljZCAuLgoKJwoKdGVzdF9kb25lCg==",
    "text": "#!/bin/sh\n\ntest_description='git-cvsimport basic tests'\n. ./test-lib.sh\n\nCVSROOT=$(pwd)/cvsroot\nexport CVSROOT\n# for clean cvsps cache\nHOME=$(pwd)\nexport HOME\n\nif ! type cvs >/dev/null 2>&1\nthen\n\tsay 'skipping cvsimport tests, cvs not found'\n\ttest_done\n\texit\nfi\n\ncvsps_version=`cvsps -h 2>&1 | sed -ne 's/cvsps version //p'`\ncase \"$cvsps_version\" in\n2.1)\n\t;;\n'')\n\tsay 'skipping cvsimport tests, cvsps not found'\n\ttest_done\n\texit\n\t;;\n*)\n\tsay 'skipping cvsimport tests, cvsps too old'\n\ttest_done\n\texit\n\t;;\nesac\n\ntest_expect_success 'setup cvsroot' 'cvs init'\n\ntest_expect_success 'setup a cvs module' '\n\n\tmkdir $CVSROOT/module &&\n\tcvs co -d module-cvs module &&\n\tcd module-cvs &&\n\tcat <<EOF >o_fortuna &&\nO Fortuna\nvelut luna\nstatu variabilis,\n\nsemper crescis\naut decrescis;\nvita detestabilis\n\nnunc obdurat\net tunc curat\nludo mentis aciem,\n\negestatem,\npotestatem\ndissolvit ut glaciem.\nEOF\n\tcvs add o_fortuna &&\n\tcat <<EOF >message &&\nadd \"O Fortuna\" lyrics\n\nThese public domain lyrics make an excellent sample text.\nEOF\n\tcvs commit -F message &&\n\tcd ..\n'\n\ntest_expect_success 'import a trivial module' '\n\n\tgit cvsimport -a -z 0 -C module-git module &&\n\tgit diff module-cvs/o_fortuna module-git/o_fortuna\n\n'\n\ntest_expect_success 'pack refs' 'cd module-git && git gc && cd ..'\n\ntest_expect_success 'update cvs module' '\n\n\tcd module-cvs &&\n\tcat <<EOF >o_fortuna &&\nO Fortune,\nlike the moon\nyou are changeable,\n\never waxing\nand waning;\nhateful life\n\nfirst oppresses\nand then soothes\nas fancy takes it;\n\npoverty\nand power\nit melts them like ice.\nEOF\n\tcat <<EOF >message &&\ntranslate to English\n\nMy Latin is terrible.\nEOF\n\tcvs commit -F message &&\n\tcd ..\n'\n\ntest_expect_success 'update git module' '\n\n\tcd module-git &&\n\tgit cvsimport -a -z 0 module &&\n\tgit merge origin &&\n\tcd .. &&\n\tgit diff module-cvs/o_fortuna module-git/o_fortuna\n\n'\n\ntest_expect_success 'update cvs module' '\n\n\tcd module-cvs &&\n\t\techo 1 >tick &&\n\t\tcvs add tick &&\n\t\tcvs commit -m 1\n\tcd ..\n\n'\n\ntest_expect_success 'cvsimport.module config works' '\n\n\tcd module-git &&\n\t\tgit config cvsimport.module module &&\n\t\tgit cvsimport -a -z0 &&\n\t\tgit merge origin &&\n\tcd .. &&\n\tgit diff module-cvs/tick module-git/tick\n\n'\n\ntest_expect_success 'import from a CVS working tree' '\n\n\tcvs co -d import-from-wt module &&\n\tcd import-from-wt &&\n\t\tgit cvsimport -a -z0 &&\n\t\techo 1 >expect &&\n\t\tgit log -1 --pretty=format:%s%n >actual &&\n\t\tgit diff actual expect &&\n\tcd ..\n\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00a74ee7384e4b824c9faf9e6d7891e4f28c775a",
  "sha1_ok": true,
  "size": 2428
}
