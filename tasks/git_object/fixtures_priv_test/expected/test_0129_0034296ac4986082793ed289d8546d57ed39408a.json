{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDUsIEp1bmlvIEMgSGFtYW5vCiMKIyBDYWxsZWQgYnkgZ2l0LWZldGNoLXNjcmlwdAojIEV4aXRzIDIgd2hlbiB0aGUgcmVtb3RlIHNpdGUgZG9lcyBub3Qgc3VwcG9ydCBkdW1iIHNlcnZlciBwcm90b2NvbC4KCiMgVXNhZ2U6IGdpdC1mZXRjaC1kdW1iLWh0dHAgPGhlYWQtU0hBMT4gPHJlcG8+IFsgPGhlYWQ+IHwgdGFnIDx0YWc+IF0KCi4gZ2l0LXNoLXNldHVwLXNjcmlwdCB8fCBkaWUgIk5vdCBhIGdpdCBhcmNoaXZlIgpoZWFkPSIkMSIKc2hpZnQKLiBnaXQtcGFyc2UtcmVtb3RlICIkQCIKCm1lcmdlX3JlcG89IiRfcmVtb3RlX3JlcG8iCm1lcmdlX2hlYWQ9IiRfcmVtb3RlX2hlYWQiCm1lcmdlX3N0b3JlPSIkX3JlbW90ZV9zdG9yZSIKCmlmIFsgLW4gIiRHSVRfU1NMX05PX1ZFUklGWSIgXTsgdGhlbgogICAgY3VybF9leHRyYV9hcmdzPSItayIKZmkKaHR0cF9mZXRjaCAoKSB7CgkjICQxID0gUmVtb3RlLCAkMiA9IExvY2FsCgljdXJsIC1ucyAkY3VybF9leHRyYV9hcmdzICIkMSIgPiIkMiIKfQoKIyBUcnkgZHVtYiBzZXJ2ZXIgcHJvdG9jb2wKCmNsb25lX3RtcD0iLmdpdC9jbG9uZS10bXAkJCIgJiYKbWtkaXIgLXAgIiRjbG9uZV90bXAiIHx8IGV4aXQgMQp0cmFwICJybSAtcmYgJGNsb25lX3RtcCIgMCAxIDIgMyAxNQpodHRwX2ZldGNoICIkbWVyZ2VfcmVwby9pbmZvL3JlZnMiICIkY2xvbmVfdG1wL3JlZnMiICYmCmh0dHBfZmV0Y2ggIiRtZXJnZV9yZXBvL29iamVjdHMvaW5mby9wYWNrcyIgIiRjbG9uZV90bXAvcGFja3MiICYmCmh0dHBfZmV0Y2ggIiRtZXJnZV9yZXBvL2luZm8vcmV2LWNhY2hlIiAiJGNsb25lX3RtcC9yZXYtY2FjaGUiIHx8IGV4aXQgMgoKIyBXaGljaCBwYWNrcyBhcmUgd2UgaW50ZXJlc3RlZCBpbj8KaGFzX21pc3Npbmc9LAp3aGlsZSByZWFkIHRhZyBudW0gc2hhMSB0eXBlCmRvCiAgICBjYXNlICIkdGFnIiBpbgogICAgVCkgOzsKICAgICopIGNvbnRpbnVlIDs7CiAgICBlc2FjCiAgICBnaXQtY2F0LWZpbGUgLXQgIiRzaGExIiA+L2Rldi9udWxsIHx8IGhhc19taXNzaW5nPSIkaGFzX21pc3NpbmckbnVtLCIKZG9uZSA8JGNsb25lX3RtcC9wYWNrcwoKIyBTbHVycCB0aGUgcGFjayBpbmRleCB3ZSBkbyBub3QgaGF2ZSBhbGwgb2JqZWN0cyBmb3IuCnBhY2tfaXg9MAptYXlfd2FudF9wYWNrX2NvdW50PTAKd2hpbGUgcmVhZCB0YWcgcGFjawpkbwogICAgY2FzZSAiJHRhZyIgaW4KICAgIFApIDs7CiAgICAqKSBicmVhayA7OyAjIFAgcmVjb3JkcyBhbHdheXMgY29tZSBmaXJzdC4KICAgIGVzYWMKICAgIGNhc2UgIiRoYXNfbWlzc2luZyIgaW4KICAgICoiLCRwYWNrX2l4LCIqKQogICAgICAgbmFtZT1gZXhwciAiJHBhY2siIDogJ1woLipcKVwucGFjayQnYCAmJgogICAgICAgaWR4PSIkbmFtZS5pZHgiICYmCiAgICAgICBodHRwX2ZldGNoICIkbWVyZ2VfcmVwby9vYmplY3RzL3BhY2svJGlkeCIgIiRjbG9uZV90bXAvJGlkeCIgJiYKICAgICAgICMgTm90ZSB0aGF0IGlkeCBmaWxlIGlzIHNvcnRlZCAtLS0gb3RoZXJ3aXNlIHdlIG5lZWQgdG8gc29ydCBpdCBoZXJlLgogICAgICAgZ2l0LXNob3ctaW5kZXggPCIkY2xvbmVfdG1wLyRpZHgiIHwKICAgICAgIHNlZCAtZSAncy9eW14gXSogLy8nID4iJGNsb25lX3RtcC8kbmFtZS50b2MiIHx8CiAgICAgICBleGl0IDEKICAgICAgIG1heV93YW50X3BhY2tfY291bnQ9YGV4cHIgIiRtYXlfd2FudF9wYWNrX2NvdW50IiArIDFgCiAgICAgICA7OwogICAgZXNhYwogICAgcGFja19peD1gZXhwciAiJHBhY2tfaXgiICsgMWAKZG9uZSA8JGNsb25lX3RtcC9wYWNrcwoKY2FzZSAiJG1heV93YW50X3BhY2tfY291bnQiIGluCjApCiAgICBleGl0IDAgOzsKZXNhYwoKIyBXZSB3YW50ICRoZWFkLiAgV2hhdCBhcmUgdGhlIGhlYWQgb2JqZWN0cyB3ZSBhcmUgbWlzc2luZz8KZ2l0LW1pc3NpbmctcmV2cyAkY2xvbmVfdG1wL3Jldi1jYWNoZSAkaGVhZCA+JGNsb25lX3RtcC9taXNzaW5nLXJldnMgJiYKc29ydCAtbyAkY2xvbmVfdG1wL21pc3NpbmctcmV2cyAkY2xvbmVfdG1wL21pc3NpbmctcmV2cyB8fCBleGl0IDIKCmZvciB0b2MgaW4gJGNsb25lX3RtcC8qLnRvYwpkbwogICAgbmFtZT1gZXhwciAkdG9jIDogJy4qL1woW14vXSpcKVwudG9jJ2AgJiYKICAgIGNvbW0gLTEyICRjbG9uZV90bXAvbWlzc2luZy1yZXZzICR0b2MgPiRjbG9uZV90bXAvJG5hbWUuY2FuCiAgICAjIEZJWE1FOiB0aGlzIGlzIHN0dXBpZC4KICAgIGlmIHRlc3QgLXMgJGNsb25lX3RtcC8kbmFtZS5jYW4KICAgIHRoZW4KCXBhY2s9IiRuYW1lLnBhY2siIGlkeD0iJG5hbWUuaWR4IiAmJgoJaHR0cF9mZXRjaCAiJG1lcmdlX3JlcG8vb2JqZWN0cy9wYWNrLyRwYWNrIiAiJGNsb25lX3RtcC8kcGFjayIgJiYKCWdpdC12ZXJpZnktcGFjayAiJGNsb25lX3RtcC8kcGFjayIgJiYKCW1rZGlyIC1wICIkR0lUX09CSkVDVF9ESVJFQ1RPUlkvcGFjayIgJiYKCW12ICIkY2xvbmVfdG1wLyRwYWNrIiAiJGNsb25lX3RtcC8kaWR4IiBcCgkgICAgIiRHSVRfT0JKRUNUX0RJUkVDVE9SWS9wYWNrLyIgfHwgewoJICAgICMgcmVtb3RlIG1heSBqdXN0IGhhdmUgYSBzdGFsZSBkdW1iIHNlcnZlciBpbmZvcm1hdGlvbiBmaWxlcy4KCSAgICAjIGFuZCBub3JtYWwgcHVsbCBtaWdodCBzdWNjZWVkLgoJICAgIGV4aXQgMgoJfQogICAgZmkKZG9uZQoKZXhpdCAwCg==",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2005, Junio C Hamano\n#\n# Called by git-fetch-script\n# Exits 2 when the remote site does not support dumb server protocol.\n\n# Usage: git-fetch-dumb-http <head-SHA1> <repo> [ <head> | tag <tag> ]\n\n. git-sh-setup-script || die \"Not a git archive\"\nhead=\"$1\"\nshift\n. git-parse-remote \"$@\"\n\nmerge_repo=\"$_remote_repo\"\nmerge_head=\"$_remote_head\"\nmerge_store=\"$_remote_store\"\n\nif [ -n \"$GIT_SSL_NO_VERIFY\" ]; then\n    curl_extra_args=\"-k\"\nfi\nhttp_fetch () {\n\t# $1 = Remote, $2 = Local\n\tcurl -ns $curl_extra_args \"$1\" >\"$2\"\n}\n\n# Try dumb server protocol\n\nclone_tmp=\".git/clone-tmp$$\" &&\nmkdir -p \"$clone_tmp\" || exit 1\ntrap \"rm -rf $clone_tmp\" 0 1 2 3 15\nhttp_fetch \"$merge_repo/info/refs\" \"$clone_tmp/refs\" &&\nhttp_fetch \"$merge_repo/objects/info/packs\" \"$clone_tmp/packs\" &&\nhttp_fetch \"$merge_repo/info/rev-cache\" \"$clone_tmp/rev-cache\" || exit 2\n\n# Which packs are we interested in?\nhas_missing=,\nwhile read tag num sha1 type\ndo\n    case \"$tag\" in\n    T) ;;\n    *) continue ;;\n    esac\n    git-cat-file -t \"$sha1\" >/dev/null || has_missing=\"$has_missing$num,\"\ndone <$clone_tmp/packs\n\n# Slurp the pack index we do not have all objects for.\npack_ix=0\nmay_want_pack_count=0\nwhile read tag pack\ndo\n    case \"$tag\" in\n    P) ;;\n    *) break ;; # P records always come first.\n    esac\n    case \"$has_missing\" in\n    *\",$pack_ix,\"*)\n       name=`expr \"$pack\" : '\\(.*\\)\\.pack$'` &&\n       idx=\"$name.idx\" &&\n       http_fetch \"$merge_repo/objects/pack/$idx\" \"$clone_tmp/$idx\" &&\n       # Note that idx file is sorted --- otherwise we need to sort it here.\n       git-show-index <\"$clone_tmp/$idx\" |\n       sed -e 's/^[^ ]* //' >\"$clone_tmp/$name.toc\" ||\n       exit 1\n       may_want_pack_count=`expr \"$may_want_pack_count\" + 1`\n       ;;\n    esac\n    pack_ix=`expr \"$pack_ix\" + 1`\ndone <$clone_tmp/packs\n\ncase \"$may_want_pack_count\" in\n0)\n    exit 0 ;;\nesac\n\n# We want $head.  What are the head objects we are missing?\ngit-missing-revs $clone_tmp/rev-cache $head >$clone_tmp/missing-revs &&\nsort -o $clone_tmp/missing-revs $clone_tmp/missing-revs || exit 2\n\nfor toc in $clone_tmp/*.toc\ndo\n    name=`expr $toc : '.*/\\([^/]*\\)\\.toc'` &&\n    comm -12 $clone_tmp/missing-revs $toc >$clone_tmp/$name.can\n    # FIXME: this is stupid.\n    if test -s $clone_tmp/$name.can\n    then\n\tpack=\"$name.pack\" idx=\"$name.idx\" &&\n\thttp_fetch \"$merge_repo/objects/pack/$pack\" \"$clone_tmp/$pack\" &&\n\tgit-verify-pack \"$clone_tmp/$pack\" &&\n\tmkdir -p \"$GIT_OBJECT_DIRECTORY/pack\" &&\n\tmv \"$clone_tmp/$pack\" \"$clone_tmp/$idx\" \\\n\t    \"$GIT_OBJECT_DIRECTORY/pack/\" || {\n\t    # remote may just have a stale dumb server information files.\n\t    # and normal pull might succeed.\n\t    exit 2\n\t}\n    fi\ndone\n\nexit 0\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "0034296ac4986082793ed289d8546d57ed39408a",
  "sha1_ok": true,
  "size": 2698
}
