{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDcgRnJhbmsgTGljaHRlbmhlbGQKIwoKdGVzdF9kZXNjcmlwdGlvbj0nZ2l0LWN2c3NlcnZlciBhY2Nlc3MKCnRlc3RzIHJlYWQgYWNjZXNzIHRvIGEgZ2l0IHJlcG9zaXRvcnkgd2l0aCB0aGUKY3ZzIENMSSBjbGllbnQgdmlhIGdpdC1jdnNzZXJ2ZXIgc2VydmVyJwoKR0lUX1RFU1RfREVGQVVMVF9JTklUSUFMX0JSQU5DSF9OQU1FPW1haW4KZXhwb3J0IEdJVF9URVNUX0RFRkFVTFRfSU5JVElBTF9CUkFOQ0hfTkFNRQoKLiAuL3Rlc3QtbGliLnNoCgppZiAhIHRlc3RfaGF2ZV9wcmVyZXEgUEVSTDsgdGhlbgoJc2tpcF9hbGw9J3NraXBwaW5nIGdpdCBjdnNzZXJ2ZXIgdGVzdHMsIHBlcmwgbm90IGF2YWlsYWJsZScKCXRlc3RfZG9uZQpmaQpjdnMgPi9kZXYvbnVsbCAyPiYxCmlmIHRlc3QgJD8gLW5lIDEKdGhlbgogICAgc2tpcF9hbGw9J3NraXBwaW5nIGdpdC1jdnNzZXJ2ZXIgdGVzdHMsIGN2cyBub3QgZm91bmQnCiAgICB0ZXN0X2RvbmUKZmkKcGVybCAtZSAndXNlIERCSTsgdXNlIERCRDo6U1FMaXRlJyA+L2Rldi9udWxsIDI+JjEgfHwgewogICAgc2tpcF9hbGw9J3NraXBwaW5nIGdpdC1jdnNzZXJ2ZXIgdGVzdHMsIFBlcmwgU1FMaXRlIGludGVyZmFjZSB1bmF2YWlsYWJsZScKICAgIHRlc3RfZG9uZQp9CgpXT1JLRElSPSRQV0QKU0VSVkVSRElSPSRQV0QvZ2l0Y3ZzLmdpdApnaXRfY29uZmlnPSIkU0VSVkVSRElSL2NvbmZpZyIKQ1ZTUk9PVD0iOmZvcms6JFNFUlZFUkRJUiIKQ1ZTV09SSz0iJFBXRC9jdnN3b3JrIgpDVlNfU0VSVkVSPWdpdC1jdnNzZXJ2ZXIKZXhwb3J0IENWU1JPT1QgQ1ZTX1NFUlZFUgoKaWYgcGVybCAtZSAnZXhpdCgxKSBpZiBub3QgZGVmaW5lZCBjcnlwdCgiIiwgImN2IiknCnRoZW4KCVBXREhBU0g9J2xhYzJJdHVkTTMuS00nCmVsc2UKCVBXREhBU0g9JyQyYiQxMCR0OGZHdkUvYTllTG1mT0x6c1ptZTJ1T2EyUXRvTVl3SXhxOXdaQTZhQkt0RjFZYjdGSkl6aScKZmkKCnJtIC1yZiAiJENWU1dPUksiICIkU0VSVkVSRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCcgJwogIGdpdCBjb25maWcgcHVzaC5kZWZhdWx0IG1hdGNoaW5nICYmCiAgZWNobyA+ZW1wdHkgJiYKICBnaXQgYWRkIGVtcHR5ICYmCiAgZ2l0IGNvbW1pdCAtcSAtbSAiRmlyc3QgQ29tbWl0IiAmJgogIG1rZGlyIHNlY29uZHJvb3QgJiYKICAoIGNkIHNlY29uZHJvb3QgJiYKICBnaXQgaW5pdCAmJgogIHRvdWNoIHNlY29uZHJvb3RmaWxlICYmCiAgZ2l0IGFkZCBzZWNvbmRyb290ZmlsZSAmJgogIGdpdCBjb21taXQgLW0gInNlY29uZCByb290IikgJiYKICBnaXQgZmV0Y2ggc2Vjb25kcm9vdCBtYWluICYmCiAgZ2l0IG1lcmdlIC0tYWxsb3ctdW5yZWxhdGVkLWhpc3RvcmllcyBGRVRDSF9IRUFEICYmCiAgZ2l0IGNsb25lIC1xIC0tYmFyZSAiJFdPUktESVIvLmdpdCIgIiRTRVJWRVJESVIiID4vZGV2L251bGwgMj4mMSAmJgogIEdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5lbmFibGVkIHRydWUgJiYKICBHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIGdpdGN2cy5sb2dmaWxlICIkU0VSVkVSRElSL2dpdGN2cy5sb2ciICYmCiAgR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyBnaXRjdnMuYXV0aGRiICIkU0VSVkVSRElSL2F1dGguZGIiICYmCiAgZWNobyAiY3ZzdXNlcjokUFdESEFTSCIgPiIkU0VSVkVSRElSL2F1dGguZGIiCicKCiMgbm90ZSB0aGF0IGN2cyBkb2Vzbid0IGFjY2VwdCBhYnNvbHV0ZSBwYXRobmFtZXMKIyBhcyBhcmd1bWVudCB0byBjbyAtZAp0ZXN0X2V4cGVjdF9zdWNjZXNzICdiYXNpYyBjaGVja291dCcgJwoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBjbyAtZCBjdnN3b3JrIG1haW4gJiYKCXRlc3QgIiQoZWNobyAkKGdyZXAgLXYgXkQgY3Zzd29yay9DVlMvRW50cmllc3xjdXQgLWQvIC1mMiwzLDUgfCBoZWFkIC1uIDEpKSIgPSAiZW1wdHkvMS4xLyIgJiYKCXRlc3QgIiQoZWNobyAkKGdyZXAgLXYgXkQgY3Zzd29yay9DVlMvRW50cmllc3xjdXQgLWQvIC1mMiwzLDUgfCBzZWQgLW5lIFwkcCkpIiA9ICJzZWNvbmRyb290ZmlsZS8xLjEvIgonCgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgUFNFUlZFUiBBVVRIRU5USUNBVElPTgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjYXQgPnJlcXVlc3QtYW5vbnltb3VzICA8PEVPRgpCRUdJTiBBVVRIIFJFUVVFU1QKJFNFUlZFUkRJUgphbm9ueW1vdXMKCkVORCBBVVRIIFJFUVVFU1QKRU9GCgpjYXQgPnJlcXVlc3QtZ2l0ICA8PEVPRgpCRUdJTiBBVVRIIFJFUVVFU1QKJFNFUlZFUkRJUgpnaXQKCkVORCBBVVRIIFJFUVVFU1QKRU9GCgpjYXQgPmxvZ2luLWFub255bW91cyA8PEVPRgpCRUdJTiBWRVJJRklDQVRJT04gUkVRVUVTVAokU0VSVkVSRElSCmFub255bW91cwoKRU5EIFZFUklGSUNBVElPTiBSRVFVRVNUCkVPRgoKY2F0ID5sb2dpbi1naXQgPDxFT0YKQkVHSU4gVkVSSUZJQ0FUSU9OIFJFUVVFU1QKJFNFUlZFUkRJUgpnaXQKCkVORCBWRVJJRklDQVRJT04gUkVRVUVTVApFT0YKCmNhdCA+bG9naW4tZ2l0LW9rIDw8RU9GCkJFR0lOIFZFUklGSUNBVElPTiBSRVFVRVNUCiRTRVJWRVJESVIKY3ZzdXNlcgpBaDxaOnlaWjMwIGUKRU5EIFZFUklGSUNBVElPTiBSRVFVRVNUCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncHNlcnZlciBhdXRoZW50aWNhdGlvbicgJwoJY2F0IHJlcXVlc3QtYW5vbnltb3VzIHwgZ2l0LWN2c3NlcnZlciBwc2VydmVyID5sb2cgMj4mMSAmJgoJc2VkIC1uZSBcJHAgbG9nIHwgZ3JlcCAiXkkgTE9WRSBZT1VcJCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncHNlcnZlciBhdXRoZW50aWNhdGlvbiBmYWlsdXJlIChub24tYW5vbnltb3VzIHVzZXIpJyAnCglpZiBjYXQgcmVxdWVzdC1naXQgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxCgl0aGVuCgkgICAgZmFsc2UKCWVsc2UKCSAgICB0cnVlCglmaSAmJgoJc2VkIC1uZSBcJHAgbG9nIHwgZ3JlcCAiXkkgSEFURSBZT1VcJCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncHNlcnZlciBhdXRoZW50aWNhdGlvbiBzdWNjZXNzIChub24tYW5vbnltb3VzIHVzZXIgd2l0aCBwYXNzd29yZCknICcKCWNhdCBsb2dpbi1naXQtb2sgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxICYmCglzZWQgLW5lIFwkcCBsb2cgfCBncmVwICJeSSBMT1ZFIFlPVVwkIgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdwc2VydmVyIGF1dGhlbnRpY2F0aW9uIChsb2dpbiknICcKCWNhdCBsb2dpbi1hbm9ueW1vdXMgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxICYmCglzZWQgLW5lIFwkcCBsb2cgfCBncmVwICJeSSBMT1ZFIFlPVVwkIgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdwc2VydmVyIGF1dGhlbnRpY2F0aW9uIGZhaWx1cmUgKGxvZ2luL25vbi1hbm9ueW1vdXMgdXNlciknICcKCWlmIGNhdCBsb2dpbi1naXQgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxCgl0aGVuCgkgICAgZmFsc2UKCWVsc2UKCSAgICB0cnVlCglmaSAmJgoJc2VkIC1uZSBcJHAgbG9nIHwgZ3JlcCAiXkkgSEFURSBZT1VcJCIKJwoKCiMgbWlzdXNlIHBzZXJ2ZXIgYXV0aGVudGljYXRpb24gZm9yIHRlc3Rpbmcgb2YgcmVxX1Jvb3QKCmNhdCA+cmVxdWVzdC1yZWxhdGl2ZSAgPDxFT0YKQkVHSU4gQVVUSCBSRVFVRVNUCmdpdGN2cy5naXQKYW5vbnltb3VzCgpFTkQgQVVUSCBSRVFVRVNUCkVPRgoKY2F0ID5yZXF1ZXN0LWNvbmZsaWN0ICA8PEVPRgpCRUdJTiBBVVRIIFJFUVVFU1QKJFNFUlZFUkRJUgphbm9ueW1vdXMKCkVORCBBVVRIIFJFUVVFU1QKUm9vdCAkV09SS0RJUgpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IGZhaWx1cmUgKHJlbGF0aXZlIHBhdGhuYW1lKScgJwoJaWYgY2F0IHJlcXVlc3QtcmVsYXRpdmUgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxCgl0aGVuCgkJZWNobyB1bmV4cGVjdGVkIHN1Y2Nlc3MKCQlmYWxzZQoJZWxzZQoJCXRydWUKCWZpICYmCgl0YWlsIGxvZyB8IGdyZXAgIl5lcnJvciAxIFJvb3QgbXVzdCBiZSBhbiBhYnNvbHV0ZSBwYXRobmFtZSQiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IGZhaWx1cmUgKGNvbmZsaWN0aW5nIHJvb3RzKScgJwoJY2F0IHJlcXVlc3QtY29uZmxpY3QgfCBnaXQtY3Zzc2VydmVyIHBzZXJ2ZXIgPmxvZyAyPiYxICYmCgl0YWlsIGxvZyB8IGdyZXAgIl5lcnJvciAxIENvbmZsaWN0aW5nIHJvb3RzIHNwZWNpZmllZCQiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IChzdHJpY3QgcGF0aHMpJyAnCgljYXQgcmVxdWVzdC1hbm9ueW1vdXMgfCBnaXQtY3Zzc2VydmVyIC0tc3RyaWN0LXBhdGhzIHBzZXJ2ZXIgIiRTRVJWRVJESVIiID5sb2cgMj4mMSAmJgoJc2VkIC1uZSBcJHAgbG9nIHwgZ3JlcCAiXkkgTE9WRSBZT1VcJCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncmVxX1Jvb3QgZmFpbHVyZSAoc3RyaWN0LXBhdGhzKScgJwoJISBjYXQgcmVxdWVzdC1hbm9ueW1vdXMgfAoJZ2l0LWN2c3NlcnZlciAtLXN0cmljdC1wYXRocyBwc2VydmVyICIkV09SS0RJUiIgPmxvZyAyPiYxCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290ICh3L28gc3RyaWN0LXBhdGhzKScgJwoJY2F0IHJlcXVlc3QtYW5vbnltb3VzIHwgZ2l0LWN2c3NlcnZlciBwc2VydmVyICIkV09SS0RJUi8iID5sb2cgMj4mMSAmJgoJc2VkIC1uZSBcJHAgbG9nIHwgZ3JlcCAiXkkgTE9WRSBZT1VcJCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncmVxX1Jvb3QgZmFpbHVyZSAody9vIHN0cmljdC1wYXRocyknICcKCSEgY2F0IHJlcXVlc3QtYW5vbnltb3VzIHwKCWdpdC1jdnNzZXJ2ZXIgcHNlcnZlciAiJFdPUktESVIvZ2l0Y3ZzIiA+bG9nIDI+JjEKJwoKY2F0ID5yZXF1ZXN0LWJhc2UgIDw8RU9GCkJFR0lOIEFVVEggUkVRVUVTVAovZ2l0Y3ZzLmdpdAphbm9ueW1vdXMKCkVORCBBVVRIIFJFUVVFU1QKUm9vdCAvZ2l0Y3ZzLmdpdApFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IChiYXNlLXBhdGgpJyAnCgljYXQgcmVxdWVzdC1iYXNlIHwgZ2l0LWN2c3NlcnZlciAtLXN0cmljdC1wYXRocyAtLWJhc2UtcGF0aCAiJFdPUktESVIvIiBwc2VydmVyICIkU0VSVkVSRElSIiA+bG9nIDI+JjEgJiYKCXNlZCAtbmUgXCRwIGxvZyB8IGdyZXAgIl5JIExPVkUgWU9VXCQiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IGZhaWx1cmUgKGJhc2UtcGF0aCknICcKCSEgY2F0IHJlcXVlc3QtYW5vbnltb3VzIHwKCWdpdC1jdnNzZXJ2ZXIgLS1zdHJpY3QtcGF0aHMgLS1iYXNlLXBhdGggIiRXT1JLRElSIiBwc2VydmVyICIkU0VSVkVSRElSIiA+bG9nIDI+JjEKJwoKR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLmVuYWJsZWQgZmFsc2UgfHwgZXhpdCAxCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdyZXFfUm9vdCAoZXhwb3J0LWFsbCknICcKCWNhdCByZXF1ZXN0LWFub255bW91cyB8IGdpdC1jdnNzZXJ2ZXIgLS1leHBvcnQtYWxsIHBzZXJ2ZXIgIiRXT1JLRElSIiA+bG9nIDI+JjEgJiYKCXNlZCAtbmUgXCRwIGxvZyB8IGdyZXAgIl5JIExPVkUgWU9VXCQiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcV9Sb290IGZhaWx1cmUgKGV4cG9ydC1hbGwgdy9vIGRpcmVjdG9yeSBsaXN0KScgJwoJISAoY2F0IHJlcXVlc3QtYW5vbnltb3VzIHwgZ2l0LWN2c3NlcnZlciAtLWV4cG9ydC1hbGwgcHNlcnZlciA+bG9nIDI+JjEgfHwgZmFsc2UpJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncmVxX1Jvb3QgKGV2ZXJ5dGhpbmcgdG9nZXRoZXIpJyAnCgljYXQgcmVxdWVzdC1iYXNlIHwgZ2l0LWN2c3NlcnZlciAtLWV4cG9ydC1hbGwgLS1zdHJpY3QtcGF0aHMgLS1iYXNlLXBhdGggIiRXT1JLRElSLyIgcHNlcnZlciAiJFNFUlZFUkRJUiIgPmxvZyAyPiYxICYmCglzZWQgLW5lIFwkcCBsb2cgfCBncmVwICJeSSBMT1ZFIFlPVVwkIgonCgpHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIC0tYm9vbCBnaXRjdnMuZW5hYmxlZCB0cnVlIHx8IGV4aXQgMQoKIy0tLS0tLS0tLS0tLS0tCiMgQ09ORklHIFRFU1RTCiMtLS0tLS0tLS0tLS0tLQoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZ2l0Y3ZzLmVuYWJsZWQgPSBmYWxzZScgXAogICdHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIC0tYm9vbCBnaXRjdnMuZW5hYmxlZCBmYWxzZSAmJgogICBpZiBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsyIG1haW4gPmN2cy5sb2cgMj4mMQogICB0aGVuCiAgICAgZWNobyB1bmV4cGVjdGVkIGN2cyBzdWNjZXNzCiAgICAgZmFsc2UKICAgZWxzZQogICAgIHRydWUKICAgZmkgJiYKICAgZ3JlcCAiR0lUQ1ZTIGVtdWxhdGlvbiBkaXNhYmxlZCIgY3ZzLmxvZyAmJgogICB0ZXN0ICEgLWQgY3Zzd29yazInCgpybSAtZnIgY3Zzd29yazIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZ2l0Y3ZzLmV4dC5lbmFibGVkID0gdHJ1ZScgJwoJR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLmV4dC5lbmFibGVkIHRydWUgJiYKCUdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5lbmFibGVkIGZhbHNlICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsyIG1haW4gPmN2cy5sb2cgMj4mMSAmJgoJdGVzdF9jbXAgY3Zzd29yayBjdnN3b3JrMgonCgpybSAtZnIgY3Zzd29yazIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnZ2l0Y3ZzLmV4dC5lbmFibGVkID0gZmFsc2UnICcKCUdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5leHQuZW5hYmxlZCBmYWxzZSAmJgoJR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLmVuYWJsZWQgdHJ1ZSAmJgoJaWYgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBjbyAtZCBjdnN3b3JrMiBtYWluID5jdnMubG9nIDI+JjEKCXRoZW4KCQllY2hvIHVuZXhwZWN0ZWQgY3ZzIHN1Y2Nlc3MKCQlmYWxzZQoJZWxzZQoJCXRydWUKCWZpICYmCglncmVwICJHSVRDVlMgZW11bGF0aW9uIGRpc2FibGVkIiBjdnMubG9nICYmCgl0ZXN0ICEgLWQgY3Zzd29yazIKJwoKcm0gLWZyIGN2c3dvcmsyCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2dpdGN2cy5kYm5hbWUnICcKCUdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5leHQuZW5hYmxlZCB0cnVlICYmCglHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIGdpdGN2cy5kYm5hbWUgJUdnaXRjdnMuJWEuJW0uc3FsaXRlICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsyIG1haW4gPmN2cy5sb2cgMj4mMSAmJgoJdGVzdF9jbXAgY3Zzd29yayBjdnN3b3JrMiAmJgoJdGVzdCAtZiAiJFNFUlZFUkRJUi9naXRjdnMuZXh0Lm1haW4uc3FsaXRlIiAmJgoJY21wICIkU0VSVkVSRElSL2dpdGN2cy5tYWluLnNxbGl0ZSIgIiRTRVJWRVJESVIvZ2l0Y3ZzLmV4dC5tYWluLnNxbGl0ZSIKJwoKcm0gLWZyIGN2c3dvcmsyCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2dpdGN2cy5leHQuZGJuYW1lJyAnCglHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIC0tYm9vbCBnaXRjdnMuZXh0LmVuYWJsZWQgdHJ1ZSAmJgoJR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyBnaXRjdnMuZXh0LmRibmFtZSAlR2dpdGN2czEuJWEuJW0uc3FsaXRlICYmCglHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIGdpdGN2cy5kYm5hbWUgJUdnaXRjdnMyLiVhLiVtLnNxbGl0ZSAmJgoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBjbyAtZCBjdnN3b3JrMiBtYWluID5jdnMubG9nIDI+JjEgJiYKCXRlc3RfY21wIGN2c3dvcmsgY3Zzd29yazIgJiYKCXRlc3QgLWYgIiRTRVJWRVJESVIvZ2l0Y3ZzMS5leHQubWFpbi5zcWxpdGUiICYmCgl0ZXN0ICEgLWYgIiRTRVJWRVJESVIvZ2l0Y3ZzMi5leHQubWFpbi5zcWxpdGUiICYmCgljbXAgIiRTRVJWRVJESVIvZ2l0Y3ZzLm1haW4uc3FsaXRlIiAiJFNFUlZFUkRJUi9naXRjdnMxLmV4dC5tYWluLnNxbGl0ZSIKJwoKCiMtLS0tLS0tLS0tLS0KIyBDVlMgVVBEQVRFCiMtLS0tLS0tLS0tLS0KCnJtIC1mciAiJFNFUlZFUkRJUiIKY2QgIiRXT1JLRElSIiAmJgpnaXQgY2xvbmUgLXEgLS1iYXJlICIkV09SS0RJUi8uZ2l0IiAiJFNFUlZFUkRJUiIgPi9kZXYvbnVsbCAyPiYxICYmCkdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5lbmFibGVkIHRydWUgJiYKR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyBnaXRjdnMubG9nZmlsZSAiJFNFUlZFUkRJUi9naXRjdnMubG9nIiB8fApleGl0IDEKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyB1cGRhdGUgKGNyZWF0ZSBuZXcgZmlsZSknICcKCWVjaG8gdGVzdGZpbGUxID50ZXN0ZmlsZTEgJiYKCWdpdCBhZGQgdGVzdGZpbGUxICYmCglnaXQgY29tbWl0IC1xIC1tICJBZGQgdGVzdGZpbGUxIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdCAiJChlY2hvICQoZ3JlcCB0ZXN0ZmlsZTEgQ1ZTL0VudHJpZXN8Y3V0IC1kLyAtZjIsMyw1KSkiID0gInRlc3RmaWxlMS8xLjEvIiAmJgoJdGVzdF9jbXAgdGVzdGZpbGUxIC4uL3Rlc3RmaWxlMQonCgpjZCAiJFdPUktESVIiCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyB1cGRhdGUgKHVwZGF0ZSBleGlzdGluZyBmaWxlKScgJwoJZWNobyBsaW5lIDIgPj50ZXN0ZmlsZTEgJiYKCWdpdCBhZGQgdGVzdGZpbGUxICYmCglnaXQgY29tbWl0IC1xIC1tICJBcHBlbmQgdG8gdGVzdGZpbGUxIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdCAiJChlY2hvICQoZ3JlcCB0ZXN0ZmlsZTEgQ1ZTL0VudHJpZXN8Y3V0IC1kLyAtZjIsMyw1KSkiID0gInRlc3RmaWxlMS8xLjIvIiAmJgoJdGVzdF9jbXAgdGVzdGZpbGUxIC4uL3Rlc3RmaWxlMQonCgpjZCAiJFdPUktESVIiCiNUT0RPOiBjdnNzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IHVwZGF0ZSB3L28gLWQKdGVzdF9leHBlY3RfZmFpbHVyZSAiY3ZzIHVwZGF0ZSB3L28gLWQgZG9lc24ndCBjcmVhdGUgc3ViZGlyIChUT0RPKSIgJwoJbWtkaXIgdGVzdCAmJgoJZWNobyA+dGVzdC9lbXB0eSAmJgoJZ2l0IGFkZCB0ZXN0ICYmCglnaXQgY29tbWl0IC1xIC1tICJTaW5nbGUgU3ViZGlyZWN0b3J5IiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdCAhIC1kIHRlc3QKJwoKY2QgIiRXT1JLRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgdXBkYXRlIChzdWJkaXJlY3RvcmllcyknICcKCShmb3IgZGlyIGluIEEgQS9CIEEvQi9DIEEvRCBFOyBkbwoJCW1rZGlyICRkaXIgJiYKCQllY2hvICJ0ZXN0IGZpbGUgaW4gJGRpciIgPiIkZGlyL2ZpbGVfaW5fJChlY2hvICRkaXJ8c2VkIC1lICJzIy8jICNnIikiICAmJgoJCWdpdCBhZGQgJGRpciB8fCBleGl0IDEKCWRvbmUpICYmCglnaXQgY29tbWl0IC1xIC1tICJkZWVwIHN1YiBkaXJlY3Rvcnkgc3RydWN0dXJlIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAtZCAmJgoJKGZvciBkaXIgaW4gQSBBL0IgQS9CL0MgQS9EIEU7IGRvCgkJZmlsZW5hbWU9ImZpbGVfaW5fJChlY2hvICRkaXJ8c2VkIC1lICJzIy8jICNnIikiICYmCgkJaWYgdGVzdCAiJChlY2hvICQoZ3JlcCAtdiBeRCAkZGlyL0NWUy9FbnRyaWVzfGN1dCAtZC8gLWYyLDMsNSkpIiA9ICIkZmlsZW5hbWUvMS4xLyIgJiYKCQkJdGVzdF9jbXAgIiRkaXIvJGZpbGVuYW1lIiAiLi4vJGRpci8kZmlsZW5hbWUiOyB0aGVuCgkJOgoJCWVsc2UKCQkJZXhpdCAxCgkJZmkKCWRvbmUpCicKCmNkICIkV09SS0RJUiIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHVwZGF0ZSAoZGVsZXRlIGZpbGUpJyAnCglnaXQgcm0gdGVzdGZpbGUxICYmCglnaXQgY29tbWl0IC1xIC1tICJSZW1vdmUgdGVzdGZpbGUxIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdCAteiAiJChncmVwIHRlc3RmaWxlMSBDVlMvRW50cmllcykiICYmCgl0ZXN0ICEgLWYgdGVzdGZpbGUxCicKCmNkICIkV09SS0RJUiIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHVwZGF0ZSAocmUtYWRkIGRlbGV0ZWQgZmlsZSknICcKCWVjaG8gcmVhZGRlZCB0ZXN0ZmlsZSA+dGVzdGZpbGUxICYmCglnaXQgYWRkIHRlc3RmaWxlMSAmJgoJZ2l0IGNvbW1pdCAtcSAtbSAiUmUtQWRkIHRlc3RmaWxlMSIgJiYKCWdpdCBwdXNoIGdpdGN2cy5naXQgPi9kZXYvbnVsbCAmJgoJY2QgY3Zzd29yayAmJgoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSB1cGRhdGUgJiYKCXRlc3QgIiQoZWNobyAkKGdyZXAgdGVzdGZpbGUxIENWUy9FbnRyaWVzfGN1dCAtZC8gLWYyLDMsNSkpIiA9ICJ0ZXN0ZmlsZTEvMS40LyIgJiYKCXRlc3RfY21wIHRlc3RmaWxlMSAuLi90ZXN0ZmlsZTEKJwoKY2QgIiRXT1JLRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgdXBkYXRlIChtZXJnZSknICcKCWVjaG8gTGluZSAwID5leHBlY3RlZCAmJgoJZm9yIGkgaW4gMSAyIDMgNCA1IDYgNwoJZG8KCQllY2hvIExpbmUgJGkgPj5tZXJnZSAmJgoJCWVjaG8gTGluZSAkaSA+PmV4cGVjdGVkIHx8IHJldHVybiAxCglkb25lICYmCgllY2hvIExpbmUgOCA+PmV4cGVjdGVkICYmCglnaXQgYWRkIG1lcmdlICYmCglnaXQgY29tbWl0IC1xIC1tICJNZXJnZSB0ZXN0IChwcmUtbWVyZ2UpIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdCAiJChlY2hvICQoZ3JlcCBtZXJnZSBDVlMvRW50cmllc3xjdXQgLWQvIC1mMiwzLDUpKSIgPSAibWVyZ2UvMS4xLyIgJiYKCXRlc3RfY21wIG1lcmdlIC4uL21lcmdlICYmCgkoIGVjaG8gTGluZSAwICYmIGNhdCBtZXJnZSApID5tZXJnZS50bXAgJiYKCW12IG1lcmdlLnRtcCBtZXJnZSAmJgoJY2QgIiRXT1JLRElSIiAmJgoJZWNobyBMaW5lIDggPj5tZXJnZSAmJgoJZ2l0IGFkZCBtZXJnZSAmJgoJZ2l0IGNvbW1pdCAtcSAtbSAiTWVyZ2UgdGVzdCAobWVyZ2UpIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglzbGVlcCAxICYmIHRvdWNoIG1lcmdlICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdF9jbXAgbWVyZ2UgLi4vZXhwZWN0ZWQKJwoKY2QgIiRXT1JLRElSIgoKY2F0ID5leHBlY3RlZC5DIDw8RU9GCjw8PDw8PDwgbWVyZ2UubWluZQpMaW5lIDAKPT09PT09PQpMSU5FIDAKPj4+Pj4+PiBtZXJnZS4xLjMKRU9GCgpmb3IgaSBpbiAxIDIgMyA0IDUgNiA3IDgKZG8KICBlY2hvIExpbmUgJGkgPj5leHBlY3RlZC5DCmRvbmUKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyB1cGRhdGUgKGNvbmZsaWN0IG1lcmdlKScgJwoJKCBlY2hvIExJTkUgMCAmJiBjYXQgbWVyZ2UgKSA+bWVyZ2UudG1wICYmCgltdiBtZXJnZS50bXAgbWVyZ2UgJiYKCWdpdCBhZGQgbWVyZ2UgJiYKCWdpdCBjb21taXQgLXEgLW0gIk1lcmdlIHRlc3QgKGNvbmZsaWN0KSIgJiYKCWdpdCBwdXNoIGdpdGN2cy5naXQgPi9kZXYvbnVsbCAmJgoJY2QgY3Zzd29yayAmJgoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSB1cGRhdGUgJiYKCXRlc3RfY21wIG1lcmdlIC4uL2V4cGVjdGVkLkMKJwoKY2QgIiRXT1JLRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgdXBkYXRlICgtQyknICcKCWNkIGN2c3dvcmsgJiYKCUdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgLVEgdXBkYXRlIC1DICYmCgl0ZXN0X2NtcCBtZXJnZSAuLi9tZXJnZQonCgpjZCAiJFdPUktESVIiCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyB1cGRhdGUgKG1lcmdlIG5vLW9wKScgJwoJZWNobyBMaW5lIDkgPj5tZXJnZSAmJgoJY3AgbWVyZ2UgY3Zzd29yay9tZXJnZSAmJgoJZ2l0IGFkZCBtZXJnZSAmJgoJZ2l0IGNvbW1pdCAtcSAtbSAiTWVyZ2UgdGVzdCAobm8tb3ApIiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglzbGVlcCAxICYmIHRvdWNoIG1lcmdlICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHVwZGF0ZSAmJgoJdGVzdF9jbXAgbWVyZ2UgLi4vbWVyZ2UKJwoKY2QgIiRXT1JLRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgdXBkYXRlICgtcCknICcKCXRvdWNoIHJlYWxseS1lbXB0eSAmJgoJZWNobyBMaW5lIDEgPiBuby1sZiAmJgoJcHJpbnRmICJMaW5lIDIiID4+IG5vLWxmICYmCglnaXQgYWRkIHJlYWxseS1lbXB0eSBuby1sZiAmJgoJZ2l0IGNvbW1pdCAtcSAtbSAiVXBkYXRlIC1wIHRlc3QiICYmCglnaXQgcHVzaCBnaXRjdnMuZ2l0ID4vZGV2L251bGwgJiYKCWNkIGN2c3dvcmsgJiYKCUdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgdXBkYXRlICYmCglmb3IgaSBpbiBtZXJnZSBuby1sZiBlbXB0eSByZWFsbHktZW1wdHk7IGRvCgkJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyB1cGRhdGUgLXAgIiRpIiA+JGkub3V0ICYmCgkJdGVzdF9jbXAgJGkub3V0IC4uLyRpIHx8IHJldHVybiAxCglkb25lCicKCmNkICIkV09SS0RJUiIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHVwZGF0ZSAobW9kdWxlIGxpc3Qgc3VwcG9ydHMgcGFja2VkIHJlZnMpJyAnCglHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgcGFjay1yZWZzIC0tYWxsICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1uIHVwIC1kIDI+IG91dCAmJgoJZ3JlcCAiY3ZzIHVwZGF0ZTogTmV3IGRpcmVjdG9yeSBcYG1haW4nXCcnIiA8IG91dAonCgojLS0tLS0tLS0tLS0tCiMgQ1ZTIFNUQVRVUwojLS0tLS0tLS0tLS0tCgpjZCAiJFdPUktESVIiCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBzdGF0dXMnICcKCW1rZGlyIHN0YXR1cy5kaXIgJiYKCWVjaG8gTGluZSA+IHN0YXR1cy5kaXIvc3RhdHVzLmZpbGUgJiYKCWVjaG8gTGluZSA+IHN0YXR1cy5maWxlICYmCglnaXQgYWRkIHN0YXR1cy5kaXIgc3RhdHVzLmZpbGUgJiYKCWdpdCBjb21taXQgLXEgLW0gIlN0YXR1cyB0ZXN0IiAmJgoJZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIHVwZGF0ZSAmJgoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyBzdGF0dXMgfCBncmVwICJeRmlsZTogc3RhdHVzLmZpbGUiID4uLi9vdXQgJiYKCXRlc3RfbGluZV9jb3VudCA9IDIgLi4vb3V0CicKCmNkICIkV09SS0RJUiIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHN0YXR1cyAobm9ucmVjdXJzaXZlKScgJwoJY2QgY3Zzd29yayAmJgoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyBzdGF0dXMgLWwgfCBncmVwICJeRmlsZTogc3RhdHVzLmZpbGUiID4uLi9vdXQgJiYKCXRlc3RfbGluZV9jb3VudCA9IDEgLi4vb3V0CicKCmNkICIkV09SS0RJUiIKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHN0YXR1cyAobm8gc3ViZGlycyBpbiBoZWFkZXIpJyAnCgljZCBjdnN3b3JrICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIHN0YXR1cyB8IGdyZXAgXkZpbGU6ID4uLi9vdXQgJiYKCSEgZ3JlcCAvIDwuLi9vdXQKJwoKIy0tLS0tLS0tLS0tLQojIENWUyBDSEVDS09VVAojLS0tLS0tLS0tLS0tCgpjZCAiJFdPUktESVIiCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBjbyAtYyAoc2hvd3MgbW9kdWxlIGRhdGFiYXNlKScgJwoJR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyBjbyAtYyA+IG91dCAmJgoJZ3JlcCAiXm1haW5bCSBdWyAJXSptYWluJCIgPG91dCAmJgoJISBncmVwIC12ICJebWFpblsJIF1bIAldKm1haW4kIiA8b3V0CicKCiMtLS0tLS0tLS0tLS0KIyBDVlMgTE9HCiMtLS0tLS0tLS0tLS0KCiMgS25vd24gaXNzdWVzIHdpdGggZ2l0LWN2c3NlcnZlciBjdXJyZW50IGxvZyBvdXRwdXQ6CiMgIC0gSGFyZCBjb2RlZCAibGluZXM6ICsyIC0zIiBwbGFjZWhvbGRlciwgaW5zdGVhZCBvZiByZWFsIG51bWJlcnMuCiMgIC0gQ1ZTIG5vcm1hbGx5IGRvZXMgbm90IGludGVybmFsbHkgYWRkIGEgYmxhbmsgZmlyc3QgbGluZQojICAgIG9yIGEgbGFzdCBsaW5lIHdpdGggbm90aGluZyBidXQgYSBzcGFjZSB0byBsb2cgbWVzc2FnZXMuCiMgIC0gVGhlIGxhdGVzdCBjdnMgMS4xMi54IHNlcnZlciBzZW5kcyArMDAwMCB0aW1lem9uZSAod2l0aCBzb21lIGhpZGRlbiAiTVQiCiMgICAgdGFnZ2luZyBpbiB0aGUgcHJvdG9jb2wpLCBhbmQgaWYgY3ZzIDEuMTIueCBjbGllbnQgc2VlcyB0aGUgTVQgdGFncywKIyAgICBpdCBjb252ZXJ0cyB0byBsb2NhbCB0aW1lIHpvbmUuICBnaXQtY3Zzc2VydmVyIGRvZXNuJ3QgZG8gdGhlICswMDAwCiMgICAgb3IgdGhlIE1UIHRhZ3MuLi4KIyAgLSBUaGUgbGF0ZXN0IDEuMTIueCByZWxlYXNlcyBhZGQgYSAiY29tbWl0aWQ6IiBmaWVsZCBvbiB0byB0aGUgZW5kIG9mIHRoZQojICAgICJkYXRlOiIgbGluZSAoYWZ0ZXIgImxpbmVzOiIpLiAgTWF5YmUgd2UgY291bGQgc3RpY2sgZ2l0J3MgY29tbWl0IGlkCiMgICAgaW4gaXQ/ICBPciBkb2VzIENWUyBleHBlY3QgYSBjZXJ0YWluIG51bWJlciBvZiBiaXRzICh0b28gZmV3IGZvcgojICAgIGEgZnVsbCBzaGExKT8KIwojIEdpdmVuIHRoZSBhYm92ZSwgZXhwZWN0IHRoZSBmb2xsb3dpbmcgdGVzdCB0byBicmVhayBpZiBnaXQtY3Zzc2VydmVyJ3MKIyBsb2cgb3V0cHV0IGlzIGltcHJvdmVkLiAgVGhlIHRlc3QgaXMganVzdCB0byBlbnN1cmUgaXQgZG9lc24ndAojIGFjY2lkZW50YWxseSBnZXQgd29yc2UuCgpzZWQgLWUgJ3MvXngvLycgLWUgJ3MvU1AkLyAvJyA+ICIkV09SS0RJUi9leHBlY3QiIDw8RU9GCngKeFJDUyBmaWxlOiAkV09SS0RJUi9naXRjdnMuZ2l0L21haW4vbWVyZ2Usdgp4V29ya2luZyBmaWxlOiBtZXJnZQp4aGVhZDogMS40CnhicmFuY2g6Cnhsb2Nrczogc3RyaWN0CnhhY2Nlc3MgbGlzdDoKeHN5bWJvbGljIG5hbWVzOgp4a2V5d29yZCBzdWJzdGl0dXRpb246IGt2Cnh0b3RhbCByZXZpc2lvbnM6IDQ7CXNlbGVjdGVkIHJldmlzaW9uczogNAp4ZGVzY3JpcHRpb246CngtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnhyZXZpc2lvbiAxLjQKeGRhdGU6IF9fREFURV9fOyAgYXV0aG9yOiBhdXRob3I7ICBzdGF0ZTogRXhwOyAgbGluZXM6ICsyIC0zCngKeE1lcmdlIHRlc3QgKG5vLW9wKQp4U1AKeC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KeHJldmlzaW9uIDEuMwp4ZGF0ZTogX19EQVRFX187ICBhdXRob3I6IGF1dGhvcjsgIHN0YXRlOiBFeHA7ICBsaW5lczogKzIgLTMKeAp4TWVyZ2UgdGVzdCAoY29uZmxpY3QpCnhTUAp4LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp4cmV2aXNpb24gMS4yCnhkYXRlOiBfX0RBVEVfXzsgIGF1dGhvcjogYXV0aG9yOyAgc3RhdGU6IEV4cDsgIGxpbmVzOiArMiAtMwp4CnhNZXJnZSB0ZXN0IChtZXJnZSkKeFNQCngtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnhyZXZpc2lvbiAxLjEKeGRhdGU6IF9fREFURV9fOyAgYXV0aG9yOiBhdXRob3I7ICBzdGF0ZTogRXhwOyAgbGluZXM6ICsyIC0zCngKeE1lcmdlIHRlc3QgKHByZS1tZXJnZSkKeFNQCng9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQpFT0YKZXhwZWN0U3RhdD0iJD8iCgpjZCAiJFdPUktESVIiCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBsb2cnICcKCWNkIGN2c3dvcmsgJiYKCXRlc3QgeCIkZXhwZWN0U3RhdCIgPSB4IjAiICYmCglHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIGxvZyBtZXJnZSA+Li4vb3V0ICYmCnNlZCAtZSAicyUyWzAtOV1bMC05XVswLTldL1swMV1bMC05XS9bMC0zXVswLTldIFswLTJdWzAtOV06WzAtNV1bMC05XTpbMC01XVswLTldJV9fREFURV9fJSIgLi4vb3V0ID4gLi4vYWN0dWFsICYmCgl0ZXN0X2NtcCAuLi9leHBlY3QgLi4vYWN0dWFsCicKCiMtLS0tLS0tLS0tLS0KIyBDVlMgQU5OT1RBVEUKIy0tLS0tLS0tLS0tLQoKY2QgIiRXT1JLRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgYW5ub3RhdGUnICcKCWNkIGN2c3dvcmsgJiYKCUdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgYW5ub3RhdGUgbWVyZ2UgPi4uL291dCAmJgoJc2VkIC1lICJzLyAuKi8vIiAuLi9vdXQgPi4uL2FjdHVhbCAmJgoJcHJpbnRmICIxLiVkXG4iIDMgMSAxIDEgMSAxIDEgMSAyIDQgPi4uL2V4cGVjdCAmJgoJdGVzdF9jbXAgLi4vZXhwZWN0IC4uL2FjdHVhbAonCgojLS0tLS0tLS0tLS0tCiMgcnVubmluZyB2aWEgZ2l0LXNoZWxsCiMtLS0tLS0tLS0tLS0KCmNkICIkV09SS0RJUiIKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2NyZWF0ZSByZW1vdGUtY3ZzIGhlbHBlcicgJwoJd3JpdGVfc2NyaXB0IHJlbW90ZS1jdnMgPDwtXEVPRgoJZXhlYyBnaXQgc2hlbGwgLWMgImN2cyBzZXJ2ZXIiCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHNlcnZlciBkb2VzIG5vdCBydW4gd2l0aCB2YW5pbGxhIGdpdC1zaGVsbCcgJwoJKAoJCWNkIGN2c3dvcmsgJiYKCQlDVlNfU0VSVkVSPSRXT1JLRElSL3JlbW90ZS1jdnMgJiYKCQlleHBvcnQgQ1ZTX1NFUlZFUiAmJgoJCSEgY3ZzIGxvZyBtZXJnZQoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjb25maWd1cmUgZ2l0IHNoZWxsIHRvIHJ1biBjdnMgc2VydmVyJyAnCglta2RpciAiJEhPTUUiL2dpdC1zaGVsbC1jb21tYW5kcyAmJgoKCXdyaXRlX3NjcmlwdCAiJEhPTUUiL2dpdC1zaGVsbC1jb21tYW5kcy9jdnMgPDwtXEVPRiAmJgoJaWYgISB0ZXN0ICQjID0gMSAmJiB0ZXN0ICIkMSIgPSAic2VydmVyIgoJdGhlbgoJCWVjaG8gPiYyICJnaXQtY3Zzc2VydmVyIG9ubHkgaGFuZGxlcyBcInNlcnZlclwiIgoJCWV4aXQgMQoJZmkKCWV4ZWMgZ2l0IGN2c3NlcnZlciBzZXJ2ZXIKCUVPRgoKCSMgU2hvdWxkIG5vdCBiZSB1c2VkLCBidXQgcGFydCBvZiB0aGUgcmVjb21tZW5kZWQgc2V0dXAKCXdyaXRlX3NjcmlwdCAiJEhPTUUiL2dpdC1zaGVsbC1jb21tYW5kcy9uby1pbnRlcmFjdGl2ZS1sb2dpbiA8PC1cRU9GCgllY2hvIEludGVyYWN0aXZlIGxvZ2luIGZvcmJpZGRlbgoJRU9GCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBzZXJ2ZXIgY2FuIHJ1biB3aXRoIHJlY29tbWVuZGVkIGNvbmZpZycgJwoJKAoJCWNkIGN2c3dvcmsgJiYKCQlDVlNfU0VSVkVSPSRXT1JLRElSL3JlbW90ZS1jdnMgJiYKCQlleHBvcnQgQ1ZTX1NFUlZFUiAmJgoJCWN2cyBsb2cgbWVyZ2UKCSkKJwoKdGVzdF9kb25lCg==",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2007 Frank Lichtenheld\n#\n\ntest_description='git-cvsserver access\n\ntests read access to a git repository with the\ncvs CLI client via git-cvsserver server'\n\nGIT_TEST_DEFAULT_INITIAL_BRANCH_NAME=main\nexport GIT_TEST_DEFAULT_INITIAL_BRANCH_NAME\n\n. ./test-lib.sh\n\nif ! test_have_prereq PERL; then\n\tskip_all='skipping git cvsserver tests, perl not available'\n\ttest_done\nfi\ncvs >/dev/null 2>&1\nif test $? -ne 1\nthen\n    skip_all='skipping git-cvsserver tests, cvs not found'\n    test_done\nfi\nperl -e 'use DBI; use DBD::SQLite' >/dev/null 2>&1 || {\n    skip_all='skipping git-cvsserver tests, Perl SQLite interface unavailable'\n    test_done\n}\n\nWORKDIR=$PWD\nSERVERDIR=$PWD/gitcvs.git\ngit_config=\"$SERVERDIR/config\"\nCVSROOT=\":fork:$SERVERDIR\"\nCVSWORK=\"$PWD/cvswork\"\nCVS_SERVER=git-cvsserver\nexport CVSROOT CVS_SERVER\n\nif perl -e 'exit(1) if not defined crypt(\"\", \"cv\")'\nthen\n\tPWDHASH='lac2ItudM3.KM'\nelse\n\tPWDHASH='$2b$10$t8fGvE/a9eLmfOLzsZme2uOa2QtoMYwIxq9wZA6aBKtF1Yb7FJIzi'\nfi\n\nrm -rf \"$CVSWORK\" \"$SERVERDIR\"\ntest_expect_success 'setup' '\n  git config push.default matching &&\n  echo >empty &&\n  git add empty &&\n  git commit -q -m \"First Commit\" &&\n  mkdir secondroot &&\n  ( cd secondroot &&\n  git init &&\n  touch secondrootfile &&\n  git add secondrootfile &&\n  git commit -m \"second root\") &&\n  git fetch secondroot main &&\n  git merge --allow-unrelated-histories FETCH_HEAD &&\n  git clone -q --bare \"$WORKDIR/.git\" \"$SERVERDIR\" >/dev/null 2>&1 &&\n  GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled true &&\n  GIT_DIR=\"$SERVERDIR\" git config gitcvs.logfile \"$SERVERDIR/gitcvs.log\" &&\n  GIT_DIR=\"$SERVERDIR\" git config gitcvs.authdb \"$SERVERDIR/auth.db\" &&\n  echo \"cvsuser:$PWDHASH\" >\"$SERVERDIR/auth.db\"\n'\n\n# note that cvs doesn't accept absolute pathnames\n# as argument to co -d\ntest_expect_success 'basic checkout' '\n\tGIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork main &&\n\ttest \"$(echo $(grep -v ^D cvswork/CVS/Entries|cut -d/ -f2,3,5 | head -n 1))\" = \"empty/1.1/\" &&\n\ttest \"$(echo $(grep -v ^D cvswork/CVS/Entries|cut -d/ -f2,3,5 | sed -ne \\$p))\" = \"secondrootfile/1.1/\"\n'\n\n#------------------------\n# PSERVER AUTHENTICATION\n#------------------------\n\ncat >request-anonymous  <<EOF\nBEGIN AUTH REQUEST\n$SERVERDIR\nanonymous\n\nEND AUTH REQUEST\nEOF\n\ncat >request-git  <<EOF\nBEGIN AUTH REQUEST\n$SERVERDIR\ngit\n\nEND AUTH REQUEST\nEOF\n\ncat >login-anonymous <<EOF\nBEGIN VERIFICATION REQUEST\n$SERVERDIR\nanonymous\n\nEND VERIFICATION REQUEST\nEOF\n\ncat >login-git <<EOF\nBEGIN VERIFICATION REQUEST\n$SERVERDIR\ngit\n\nEND VERIFICATION REQUEST\nEOF\n\ncat >login-git-ok <<EOF\nBEGIN VERIFICATION REQUEST\n$SERVERDIR\ncvsuser\nAh<Z:yZZ30 e\nEND VERIFICATION REQUEST\nEOF\n\ntest_expect_success 'pserver authentication' '\n\tcat request-anonymous | git-cvsserver pserver >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'pserver authentication failure (non-anonymous user)' '\n\tif cat request-git | git-cvsserver pserver >log 2>&1\n\tthen\n\t    false\n\telse\n\t    true\n\tfi &&\n\tsed -ne \\$p log | grep \"^I HATE YOU\\$\"\n'\n\ntest_expect_success 'pserver authentication success (non-anonymous user with password)' '\n\tcat login-git-ok | git-cvsserver pserver >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'pserver authentication (login)' '\n\tcat login-anonymous | git-cvsserver pserver >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'pserver authentication failure (login/non-anonymous user)' '\n\tif cat login-git | git-cvsserver pserver >log 2>&1\n\tthen\n\t    false\n\telse\n\t    true\n\tfi &&\n\tsed -ne \\$p log | grep \"^I HATE YOU\\$\"\n'\n\n\n# misuse pserver authentication for testing of req_Root\n\ncat >request-relative  <<EOF\nBEGIN AUTH REQUEST\ngitcvs.git\nanonymous\n\nEND AUTH REQUEST\nEOF\n\ncat >request-conflict  <<EOF\nBEGIN AUTH REQUEST\n$SERVERDIR\nanonymous\n\nEND AUTH REQUEST\nRoot $WORKDIR\nEOF\n\ntest_expect_success 'req_Root failure (relative pathname)' '\n\tif cat request-relative | git-cvsserver pserver >log 2>&1\n\tthen\n\t\techo unexpected success\n\t\tfalse\n\telse\n\t\ttrue\n\tfi &&\n\ttail log | grep \"^error 1 Root must be an absolute pathname$\"\n'\n\ntest_expect_success 'req_Root failure (conflicting roots)' '\n\tcat request-conflict | git-cvsserver pserver >log 2>&1 &&\n\ttail log | grep \"^error 1 Conflicting roots specified$\"\n'\n\ntest_expect_success 'req_Root (strict paths)' '\n\tcat request-anonymous | git-cvsserver --strict-paths pserver \"$SERVERDIR\" >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'req_Root failure (strict-paths)' '\n\t! cat request-anonymous |\n\tgit-cvsserver --strict-paths pserver \"$WORKDIR\" >log 2>&1\n'\n\ntest_expect_success 'req_Root (w/o strict-paths)' '\n\tcat request-anonymous | git-cvsserver pserver \"$WORKDIR/\" >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'req_Root failure (w/o strict-paths)' '\n\t! cat request-anonymous |\n\tgit-cvsserver pserver \"$WORKDIR/gitcvs\" >log 2>&1\n'\n\ncat >request-base  <<EOF\nBEGIN AUTH REQUEST\n/gitcvs.git\nanonymous\n\nEND AUTH REQUEST\nRoot /gitcvs.git\nEOF\n\ntest_expect_success 'req_Root (base-path)' '\n\tcat request-base | git-cvsserver --strict-paths --base-path \"$WORKDIR/\" pserver \"$SERVERDIR\" >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'req_Root failure (base-path)' '\n\t! cat request-anonymous |\n\tgit-cvsserver --strict-paths --base-path \"$WORKDIR\" pserver \"$SERVERDIR\" >log 2>&1\n'\n\nGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled false || exit 1\n\ntest_expect_success 'req_Root (export-all)' '\n\tcat request-anonymous | git-cvsserver --export-all pserver \"$WORKDIR\" >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\ntest_expect_success 'req_Root failure (export-all w/o directory list)' '\n\t! (cat request-anonymous | git-cvsserver --export-all pserver >log 2>&1 || false)'\n\ntest_expect_success 'req_Root (everything together)' '\n\tcat request-base | git-cvsserver --export-all --strict-paths --base-path \"$WORKDIR/\" pserver \"$SERVERDIR\" >log 2>&1 &&\n\tsed -ne \\$p log | grep \"^I LOVE YOU\\$\"\n'\n\nGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled true || exit 1\n\n#--------------\n# CONFIG TESTS\n#--------------\n\ntest_expect_success 'gitcvs.enabled = false' \\\n  'GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled false &&\n   if GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 main >cvs.log 2>&1\n   then\n     echo unexpected cvs success\n     false\n   else\n     true\n   fi &&\n   grep \"GITCVS emulation disabled\" cvs.log &&\n   test ! -d cvswork2'\n\nrm -fr cvswork2\ntest_expect_success 'gitcvs.ext.enabled = true' '\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.ext.enabled true &&\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled false &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 main >cvs.log 2>&1 &&\n\ttest_cmp cvswork cvswork2\n'\n\nrm -fr cvswork2\ntest_expect_success 'gitcvs.ext.enabled = false' '\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.ext.enabled false &&\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled true &&\n\tif GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 main >cvs.log 2>&1\n\tthen\n\t\techo unexpected cvs success\n\t\tfalse\n\telse\n\t\ttrue\n\tfi &&\n\tgrep \"GITCVS emulation disabled\" cvs.log &&\n\ttest ! -d cvswork2\n'\n\nrm -fr cvswork2\ntest_expect_success 'gitcvs.dbname' '\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.ext.enabled true &&\n\tGIT_DIR=\"$SERVERDIR\" git config gitcvs.dbname %Ggitcvs.%a.%m.sqlite &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 main >cvs.log 2>&1 &&\n\ttest_cmp cvswork cvswork2 &&\n\ttest -f \"$SERVERDIR/gitcvs.ext.main.sqlite\" &&\n\tcmp \"$SERVERDIR/gitcvs.main.sqlite\" \"$SERVERDIR/gitcvs.ext.main.sqlite\"\n'\n\nrm -fr cvswork2\ntest_expect_success 'gitcvs.ext.dbname' '\n\tGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.ext.enabled true &&\n\tGIT_DIR=\"$SERVERDIR\" git config gitcvs.ext.dbname %Ggitcvs1.%a.%m.sqlite &&\n\tGIT_DIR=\"$SERVERDIR\" git config gitcvs.dbname %Ggitcvs2.%a.%m.sqlite &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 main >cvs.log 2>&1 &&\n\ttest_cmp cvswork cvswork2 &&\n\ttest -f \"$SERVERDIR/gitcvs1.ext.main.sqlite\" &&\n\ttest ! -f \"$SERVERDIR/gitcvs2.ext.main.sqlite\" &&\n\tcmp \"$SERVERDIR/gitcvs.main.sqlite\" \"$SERVERDIR/gitcvs1.ext.main.sqlite\"\n'\n\n\n#------------\n# CVS UPDATE\n#------------\n\nrm -fr \"$SERVERDIR\"\ncd \"$WORKDIR\" &&\ngit clone -q --bare \"$WORKDIR/.git\" \"$SERVERDIR\" >/dev/null 2>&1 &&\nGIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled true &&\nGIT_DIR=\"$SERVERDIR\" git config gitcvs.logfile \"$SERVERDIR/gitcvs.log\" ||\nexit 1\n\ntest_expect_success 'cvs update (create new file)' '\n\techo testfile1 >testfile1 &&\n\tgit add testfile1 &&\n\tgit commit -q -m \"Add testfile1\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest \"$(echo $(grep testfile1 CVS/Entries|cut -d/ -f2,3,5))\" = \"testfile1/1.1/\" &&\n\ttest_cmp testfile1 ../testfile1\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (update existing file)' '\n\techo line 2 >>testfile1 &&\n\tgit add testfile1 &&\n\tgit commit -q -m \"Append to testfile1\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest \"$(echo $(grep testfile1 CVS/Entries|cut -d/ -f2,3,5))\" = \"testfile1/1.2/\" &&\n\ttest_cmp testfile1 ../testfile1\n'\n\ncd \"$WORKDIR\"\n#TODO: cvsserver doesn't support update w/o -d\ntest_expect_failure \"cvs update w/o -d doesn't create subdir (TODO)\" '\n\tmkdir test &&\n\techo >test/empty &&\n\tgit add test &&\n\tgit commit -q -m \"Single Subdirectory\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest ! -d test\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (subdirectories)' '\n\t(for dir in A A/B A/B/C A/D E; do\n\t\tmkdir $dir &&\n\t\techo \"test file in $dir\" >\"$dir/file_in_$(echo $dir|sed -e \"s#/# #g\")\"  &&\n\t\tgit add $dir || exit 1\n\tdone) &&\n\tgit commit -q -m \"deep sub directory structure\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update -d &&\n\t(for dir in A A/B A/B/C A/D E; do\n\t\tfilename=\"file_in_$(echo $dir|sed -e \"s#/# #g\")\" &&\n\t\tif test \"$(echo $(grep -v ^D $dir/CVS/Entries|cut -d/ -f2,3,5))\" = \"$filename/1.1/\" &&\n\t\t\ttest_cmp \"$dir/$filename\" \"../$dir/$filename\"; then\n\t\t:\n\t\telse\n\t\t\texit 1\n\t\tfi\n\tdone)\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (delete file)' '\n\tgit rm testfile1 &&\n\tgit commit -q -m \"Remove testfile1\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest -z \"$(grep testfile1 CVS/Entries)\" &&\n\ttest ! -f testfile1\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (re-add deleted file)' '\n\techo readded testfile >testfile1 &&\n\tgit add testfile1 &&\n\tgit commit -q -m \"Re-Add testfile1\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest \"$(echo $(grep testfile1 CVS/Entries|cut -d/ -f2,3,5))\" = \"testfile1/1.4/\" &&\n\ttest_cmp testfile1 ../testfile1\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (merge)' '\n\techo Line 0 >expected &&\n\tfor i in 1 2 3 4 5 6 7\n\tdo\n\t\techo Line $i >>merge &&\n\t\techo Line $i >>expected || return 1\n\tdone &&\n\techo Line 8 >>expected &&\n\tgit add merge &&\n\tgit commit -q -m \"Merge test (pre-merge)\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest \"$(echo $(grep merge CVS/Entries|cut -d/ -f2,3,5))\" = \"merge/1.1/\" &&\n\ttest_cmp merge ../merge &&\n\t( echo Line 0 && cat merge ) >merge.tmp &&\n\tmv merge.tmp merge &&\n\tcd \"$WORKDIR\" &&\n\techo Line 8 >>merge &&\n\tgit add merge &&\n\tgit commit -q -m \"Merge test (merge)\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tsleep 1 && touch merge &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest_cmp merge ../expected\n'\n\ncd \"$WORKDIR\"\n\ncat >expected.C <<EOF\n<<<<<<< merge.mine\nLine 0\n=======\nLINE 0\n>>>>>>> merge.1.3\nEOF\n\nfor i in 1 2 3 4 5 6 7 8\ndo\n  echo Line $i >>expected.C\ndone\n\ntest_expect_success 'cvs update (conflict merge)' '\n\t( echo LINE 0 && cat merge ) >merge.tmp &&\n\tmv merge.tmp merge &&\n\tgit add merge &&\n\tgit commit -q -m \"Merge test (conflict)\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest_cmp merge ../expected.C\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (-C)' '\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update -C &&\n\ttest_cmp merge ../merge\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (merge no-op)' '\n\techo Line 9 >>merge &&\n\tcp merge cvswork/merge &&\n\tgit add merge &&\n\tgit commit -q -m \"Merge test (no-op)\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tsleep 1 && touch merge &&\n\tGIT_CONFIG=\"$git_config\" cvs -Q update &&\n\ttest_cmp merge ../merge\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (-p)' '\n\ttouch really-empty &&\n\techo Line 1 > no-lf &&\n\tprintf \"Line 2\" >> no-lf &&\n\tgit add really-empty no-lf &&\n\tgit commit -q -m \"Update -p test\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs update &&\n\tfor i in merge no-lf empty really-empty; do\n\t\tGIT_CONFIG=\"$git_config\" cvs update -p \"$i\" >$i.out &&\n\t\ttest_cmp $i.out ../$i || return 1\n\tdone\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs update (module list supports packed refs)' '\n\tGIT_DIR=\"$SERVERDIR\" git pack-refs --all &&\n\tGIT_CONFIG=\"$git_config\" cvs -n up -d 2> out &&\n\tgrep \"cvs update: New directory \\`main'\\''\" < out\n'\n\n#------------\n# CVS STATUS\n#------------\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs status' '\n\tmkdir status.dir &&\n\techo Line > status.dir/status.file &&\n\techo Line > status.file &&\n\tgit add status.dir status.file &&\n\tgit commit -q -m \"Status test\" &&\n\tgit push gitcvs.git >/dev/null &&\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs update &&\n\tGIT_CONFIG=\"$git_config\" cvs status | grep \"^File: status.file\" >../out &&\n\ttest_line_count = 2 ../out\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs status (nonrecursive)' '\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs status -l | grep \"^File: status.file\" >../out &&\n\ttest_line_count = 1 ../out\n'\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs status (no subdirs in header)' '\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs status | grep ^File: >../out &&\n\t! grep / <../out\n'\n\n#------------\n# CVS CHECKOUT\n#------------\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs co -c (shows module database)' '\n\tGIT_CONFIG=\"$git_config\" cvs co -c > out &&\n\tgrep \"^main[\t ][ \t]*main$\" <out &&\n\t! grep -v \"^main[\t ][ \t]*main$\" <out\n'\n\n#------------\n# CVS LOG\n#------------\n\n# Known issues with git-cvsserver current log output:\n#  - Hard coded \"lines: +2 -3\" placeholder, instead of real numbers.\n#  - CVS normally does not internally add a blank first line\n#    or a last line with nothing but a space to log messages.\n#  - The latest cvs 1.12.x server sends +0000 timezone (with some hidden \"MT\"\n#    tagging in the protocol), and if cvs 1.12.x client sees the MT tags,\n#    it converts to local time zone.  git-cvsserver doesn't do the +0000\n#    or the MT tags...\n#  - The latest 1.12.x releases add a \"commitid:\" field on to the end of the\n#    \"date:\" line (after \"lines:\").  Maybe we could stick git's commit id\n#    in it?  Or does CVS expect a certain number of bits (too few for\n#    a full sha1)?\n#\n# Given the above, expect the following test to break if git-cvsserver's\n# log output is improved.  The test is just to ensure it doesn't\n# accidentally get worse.\n\nsed -e 's/^x//' -e 's/SP$/ /' > \"$WORKDIR/expect\" <<EOF\nx\nxRCS file: $WORKDIR/gitcvs.git/main/merge,v\nxWorking file: merge\nxhead: 1.4\nxbranch:\nxlocks: strict\nxaccess list:\nxsymbolic names:\nxkeyword substitution: kv\nxtotal revisions: 4;\tselected revisions: 4\nxdescription:\nx----------------------------\nxrevision 1.4\nxdate: __DATE__;  author: author;  state: Exp;  lines: +2 -3\nx\nxMerge test (no-op)\nxSP\nx----------------------------\nxrevision 1.3\nxdate: __DATE__;  author: author;  state: Exp;  lines: +2 -3\nx\nxMerge test (conflict)\nxSP\nx----------------------------\nxrevision 1.2\nxdate: __DATE__;  author: author;  state: Exp;  lines: +2 -3\nx\nxMerge test (merge)\nxSP\nx----------------------------\nxrevision 1.1\nxdate: __DATE__;  author: author;  state: Exp;  lines: +2 -3\nx\nxMerge test (pre-merge)\nxSP\nx=============================================================================\nEOF\nexpectStat=\"$?\"\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs log' '\n\tcd cvswork &&\n\ttest x\"$expectStat\" = x\"0\" &&\n\tGIT_CONFIG=\"$git_config\" cvs log merge >../out &&\nsed -e \"s%2[0-9][0-9][0-9]/[01][0-9]/[0-3][0-9] [0-2][0-9]:[0-5][0-9]:[0-5][0-9]%__DATE__%\" ../out > ../actual &&\n\ttest_cmp ../expect ../actual\n'\n\n#------------\n# CVS ANNOTATE\n#------------\n\ncd \"$WORKDIR\"\ntest_expect_success 'cvs annotate' '\n\tcd cvswork &&\n\tGIT_CONFIG=\"$git_config\" cvs annotate merge >../out &&\n\tsed -e \"s/ .*//\" ../out >../actual &&\n\tprintf \"1.%d\\n\" 3 1 1 1 1 1 1 1 2 4 >../expect &&\n\ttest_cmp ../expect ../actual\n'\n\n#------------\n# running via git-shell\n#------------\n\ncd \"$WORKDIR\"\n\ntest_expect_success 'create remote-cvs helper' '\n\twrite_script remote-cvs <<-\\EOF\n\texec git shell -c \"cvs server\"\n\tEOF\n'\n\ntest_expect_success 'cvs server does not run with vanilla git-shell' '\n\t(\n\t\tcd cvswork &&\n\t\tCVS_SERVER=$WORKDIR/remote-cvs &&\n\t\texport CVS_SERVER &&\n\t\t! cvs log merge\n\t)\n'\n\ntest_expect_success 'configure git shell to run cvs server' '\n\tmkdir \"$HOME\"/git-shell-commands &&\n\n\twrite_script \"$HOME\"/git-shell-commands/cvs <<-\\EOF &&\n\tif ! test $# = 1 && test \"$1\" = \"server\"\n\tthen\n\t\techo >&2 \"git-cvsserver only handles \\\"server\\\"\"\n\t\texit 1\n\tfi\n\texec git cvsserver server\n\tEOF\n\n\t# Should not be used, but part of the recommended setup\n\twrite_script \"$HOME\"/git-shell-commands/no-interactive-login <<-\\EOF\n\techo Interactive login forbidden\n\tEOF\n'\n\ntest_expect_success 'cvs server can run with recommended config' '\n\t(\n\t\tcd cvswork &&\n\t\tCVS_SERVER=$WORKDIR/remote-cvs &&\n\t\texport CVS_SERVER &&\n\t\tcvs log merge\n\t)\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "003c0b61d0ff45864630782a509a018ff4079116",
  "sha1_ok": true,
  "size": 17665
}
