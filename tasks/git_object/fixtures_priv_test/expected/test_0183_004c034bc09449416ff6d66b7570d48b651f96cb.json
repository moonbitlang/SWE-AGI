{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBnaXQtc3VibW9kdWxlLnNoOiBhZGQsIGluaXQsIHVwZGF0ZSBvciBsaXN0IGdpdCBzdWJtb2R1bGVzCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDcgTGFycyBIamVtbGkKCmRhc2hsZXNzPSQoYmFzZW5hbWUgIiQwIiB8IHNlZCAtZSAncy8tLyAvJykKVVNBR0U9IlstLXF1aWV0XSBhZGQgWy1iIDxicmFuY2g+XSBbLWZ8LS1mb3JjZV0gWy0tbmFtZSA8bmFtZT5dIFstLXJlZmVyZW5jZSA8cmVwb3NpdG9yeT5dIFstLV0gPHJlcG9zaXRvcnk+IFs8cGF0aD5dCiAgIG9yOiAkZGFzaGxlc3MgWy0tcXVpZXRdIHN0YXR1cyBbLS1jYWNoZWRdIFstLXJlY3Vyc2l2ZV0gWy0tXSBbPHBhdGg+Li4uXQogICBvcjogJGRhc2hsZXNzIFstLXF1aWV0XSBpbml0IFstLV0gWzxwYXRoPi4uLl0KICAgb3I6ICRkYXNobGVzcyBbLS1xdWlldF0gdXBkYXRlIFstLWluaXRdIFstLXJlbW90ZV0gWy1OfC0tbm8tZmV0Y2hdIFstZnwtLWZvcmNlXSBbLS1yZWJhc2VdIFstLXJlZmVyZW5jZSA8cmVwb3NpdG9yeT5dIFstLW1lcmdlXSBbLS1yZWN1cnNpdmVdIFstLV0gWzxwYXRoPi4uLl0KICAgb3I6ICRkYXNobGVzcyBbLS1xdWlldF0gc3VtbWFyeSBbLS1jYWNoZWR8LS1maWxlc10gWy0tc3VtbWFyeS1saW1pdCA8bj5dIFtjb21taXRdIFstLV0gWzxwYXRoPi4uLl0KICAgb3I6ICRkYXNobGVzcyBbLS1xdWlldF0gZm9yZWFjaCBbLS1yZWN1cnNpdmVdIDxjb21tYW5kPgogICBvcjogJGRhc2hsZXNzIFstLXF1aWV0XSBzeW5jIFstLXJlY3Vyc2l2ZV0gWy0tXSBbPHBhdGg+Li4uXSIKT1BUSU9OU19TUEVDPQouIGdpdC1zaC1zZXR1cAouIGdpdC1zaC1pMThuCi4gZ2l0LXBhcnNlLXJlbW90ZQpyZXF1aXJlX3dvcmtfdHJlZQoKY29tbWFuZD0KYnJhbmNoPQpmb3JjZT0KcmVmZXJlbmNlPQpjYWNoZWQ9CnJlY3Vyc2l2ZT0KaW5pdD0KZmlsZXM9CnJlbW90ZT0Kbm9mZXRjaD0KdXBkYXRlPQpwcmVmaXg9CmN1c3RvbV9uYW1lPQoKIyBUaGUgZnVuY3Rpb24gdGFrZXMgYXQgbW9zdCAyIGFyZ3VtZW50cy4gVGhlIGZpcnN0IGFyZ3VtZW50IGlzIHRoZQojIFVSTCB0aGF0IG5hdmlnYXRlcyB0byB0aGUgc3VibW9kdWxlIG9yaWdpbiByZXBvLiBXaGVuIHJlbGF0aXZlLCB0aGlzIFVSTAojIGlzIHJlbGF0aXZlIHRvIHRoZSBzdXBlcnByb2plY3Qgb3JpZ2luIFVSTCByZXBvLiBUaGUgc2Vjb25kIHVwX3BhdGgKIyBhcmd1bWVudCwgaWYgc3BlY2lmaWVkLCBpcyB0aGUgcmVsYXRpdmUgcGF0aCB0aGF0IG5hdmlnYXRlcwojIGZyb20gdGhlIHN1Ym1vZHVsZSB3b3JraW5nIHRyZWUgdG8gdGhlIHN1cGVycHJvamVjdCB3b3JraW5nIHRyZWUuCiMKIyBUaGUgb3V0cHV0IG9mIHRoZSBmdW5jdGlvbiBpcyB0aGUgb3JpZ2luIFVSTCBvZiB0aGUgc3VibW9kdWxlLgojCiMgVGhlIG91dHB1dCB3aWxsIGVpdGhlciBiZSBhbiBhYnNvbHV0ZSBVUkwgb3IgZmlsZXN5c3RlbSBwYXRoIChpZiB0aGUKIyBzdXBlcnByb2plY3Qgb3JpZ2luIFVSTCBpcyBhbiBhYnNvbHV0ZSBVUkwgb3IgZmlsZXN5c3RlbSBwYXRoLAojIHJlc3BlY3RpdmVseSkgb3IgYSByZWxhdGl2ZSBmaWxlIHN5c3RlbSBwYXRoIChpZiB0aGUgc3VwZXJwcm9qZWN0CiMgb3JpZ2luIFVSTCBpcyBhIHJlbGF0aXZlIGZpbGUgc3lzdGVtIHBhdGgpLgojCiMgV2hlbiB0aGUgb3V0cHV0IGlzIGEgcmVsYXRpdmUgZmlsZSBzeXN0ZW0gcGF0aCwgdGhlIHBhdGggaXMgZWl0aGVyCiMgcmVsYXRpdmUgdG8gdGhlIHN1Ym1vZHVsZSB3b3JraW5nIHRyZWUsIGlmIHVwX3BhdGggaXMgc3BlY2lmaWVkLCBvciB0bwojIHRoZSBzdXBlcnByb2plY3Qgd29ya2luZyB0cmVlIG90aGVyd2lzZS4KcmVzb2x2ZV9yZWxhdGl2ZV91cmwgKCkKewoJcmVtb3RlPSQoZ2V0X2RlZmF1bHRfcmVtb3RlKQoJcmVtb3RldXJsPSQoZ2l0IGNvbmZpZyAicmVtb3RlLiRyZW1vdGUudXJsIikgfHwKCQlyZW1vdGV1cmw9JChwd2QpICMgdGhlIHJlcG9zaXRvcnkgaXMgaXRzIG93biBhdXRob3JpdGF0aXZlIHVwc3RyZWFtCgl1cmw9IiQxIgoJcmVtb3RldXJsPSR7cmVtb3RldXJsJS99CglzZXA9LwoJdXBfcGF0aD0iJDIiCgoJY2FzZSAiJHJlbW90ZXVybCIgaW4KCSo6KnwvKikKCQlpc19yZWxhdGl2ZT0KCQk7OwoJLi8qfC4uLyopCgkJaXNfcmVsYXRpdmU9dAoJCTs7CgkqKQoJCWlzX3JlbGF0aXZlPXQKCQlyZW1vdGV1cmw9Ii4vJHJlbW90ZXVybCIKCQk7OwoJZXNhYwoKCXdoaWxlIHRlc3QgLW4gIiR1cmwiCglkbwoJCWNhc2UgIiR1cmwiIGluCgkJLi4vKikKCQkJdXJsPSIke3VybCMuLi99IgoJCQljYXNlICIkcmVtb3RldXJsIiBpbgoJCQkqLyopCgkJCQlyZW1vdGV1cmw9IiR7cmVtb3RldXJsJS8qfSIKCQkJCTs7CgkJCSo6KikKCQkJCXJlbW90ZXVybD0iJHtyZW1vdGV1cmwlOip9IgoJCQkJc2VwPToKCQkJCTs7CgkJCSopCgkJCQlpZiB0ZXN0IC16ICIkaXNfcmVsYXRpdmUiIHx8IHRlc3QgIi4iID0gIiRyZW1vdGV1cmwiCgkJCQl0aGVuCgkJCQkJZGllICIkKGV2YWxfZ2V0dGV4dCAiY2Fubm90IHN0cmlwIG9uZSBjb21wb25lbnQgb2ZmIHVybCAnXCRyZW1vdGV1cmwnIikiCgkJCQllbHNlCgkJCQkJcmVtb3RldXJsPS4KCQkJCWZpCgkJCQk7OwoJCQllc2FjCgkJCTs7CgkJLi8qKQoJCQl1cmw9IiR7dXJsIy4vfSIKCQkJOzsKCQkqKQoJCQlicmVhazs7CgkJZXNhYwoJZG9uZQoJcmVtb3RldXJsPSIkcmVtb3RldXJsJHNlcCR7dXJsJS99IgoJZWNobyAiJHtpc19yZWxhdGl2ZTorJHt1cF9wYXRofX0ke3JlbW90ZXVybCMuL30iCn0KCiMKIyBHZXQgc3VibW9kdWxlIGluZm8gZm9yIHJlZ2lzdGVyZWQgc3VibW9kdWxlcwojICRAID0gcGF0aCB0byBsaW1pdCBzdWJtb2R1bGUgbGlzdAojCm1vZHVsZV9saXN0KCkKewoJKAoJCWdpdCBscy1maWxlcyAtLWVycm9yLXVubWF0Y2ggLS1zdGFnZSAtLSAiJEAiIHx8CgkJZWNobyAidW5tYXRjaGVkIHBhdGhzcGVjIGV4aXN0cyIKCSkgfAoJcGVybCAtZSAnCglteSAldW5tZXJnZWQgPSAoKTsKCW15ICgkbnVsbF9zaGExKSA9ICgiMCIgeCA0MCk7CglteSBAb3V0ID0gKCk7CglteSAkdW5tYXRjaGVkID0gMDsKCXdoaWxlICg8U1RESU4+KSB7CgkJaWYgKC9edW5tYXRjaGVkIHBhdGhzcGVjLykgewoJCQkkdW5tYXRjaGVkID0gMTsKCQkJbmV4dDsKCQl9CgkJY2hvbXA7CgkJbXkgKCRtb2RlLCAkc2hhMSwgJHN0YWdlLCAkcGF0aCkgPQoJCQkvXihbMC03XSspIChbMC05YS1mXXs0MH0pIChbMC0zXSlcdCguKikkLzsKCQluZXh0IHVubGVzcyAkbW9kZSBlcSAiMTYwMDAwIjsKCQlpZiAoJHN0YWdlIG5lICIwIikgewoJCQlpZiAoISR1bm1lcmdlZHskcGF0aH0rKykgewoJCQkJcHVzaCBAb3V0LCAiJG1vZGUgJG51bGxfc2hhMSBVXHQkcGF0aFxuIjsKCQkJfQoJCQluZXh0OwoJCX0KCQlwdXNoIEBvdXQsICIkX1xuIjsKCX0KCWlmICgkdW5tYXRjaGVkKSB7CgkJcHJpbnQgIiN1bm1hdGNoZWRcbiI7Cgl9IGVsc2UgewoJCXByaW50IGZvciAoQG91dCk7Cgl9CgknCn0KCmRpZV9pZl91bm1hdGNoZWQgKCkKewoJaWYgdGVzdCAiJDEiID0gIiN1bm1hdGNoZWQiCgl0aGVuCgkJZXhpdCAxCglmaQp9CgojCiMgUHJpbnQgYSBzdWJtb2R1bGUgY29uZmlndXJhdGlvbiBzZXR0aW5nCiMKIyAkMSA9IHN1Ym1vZHVsZSBuYW1lCiMgJDIgPSBvcHRpb24gbmFtZQojICQzID0gZGVmYXVsdCB2YWx1ZQojCiMgQ2hlY2tzIGluIHRoZSB1c3VhbCBnaXQtY29uZmlnIHBsYWNlcyBmaXJzdCAoZm9yIG92ZXJyaWRlcyksCiMgb3RoZXJ3aXNlIGl0IGZhbGxzIGJhY2sgb24gLmdpdG1vZHVsZXMuICBUaGlzIGFsbG93cyB5b3UgdG8KIyBkaXN0cmlidXRlIHByb2plY3Qtd2lkZSBkZWZhdWx0cyBpbiAuZ2l0bW9kdWxlcywgd2hpbGUgc3RpbGwKIyBjdXN0b21pemluZyBpbmRpdmlkdWFsIHJlcG9zaXRvcmllcyBpZiBuZWNlc3NhcnkuICBJZiB0aGUgb3B0aW9uIGlzCiMgbm90IGluIC5naXRtb2R1bGVzIGVpdGhlciwgcHJpbnQgYSBkZWZhdWx0IHZhbHVlLgojCmdldF9zdWJtb2R1bGVfY29uZmlnICgpIHsKCW5hbWU9IiQxIgoJb3B0aW9uPSIkMiIKCWRlZmF1bHQ9IiQzIgoJdmFsdWU9JChnaXQgY29uZmlnIHN1Ym1vZHVsZS4iJG5hbWUiLiIkb3B0aW9uIikKCWlmIHRlc3QgLXogIiR2YWx1ZSIKCXRoZW4KCQl2YWx1ZT0kKGdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLiIkbmFtZSIuIiRvcHRpb24iKQoJZmkKCXByaW50ZiAnJXMnICIke3ZhbHVlOi0kZGVmYXVsdH0iCn0KCgojCiMgTWFwIHN1Ym1vZHVsZSBwYXRoIHRvIHN1Ym1vZHVsZSBuYW1lCiMKIyAkMSA9IHBhdGgKIwptb2R1bGVfbmFtZSgpCnsKCSMgRG8gd2UgaGF2ZSAic3VibW9kdWxlLjxzb21ldGhpbmc+LnBhdGggPSAkMSIgZGVmaW5lZCBpbiAuZ2l0bW9kdWxlcyBmaWxlPwoJc21fcGF0aD0iJDEiCglyZT0kKHByaW50ZiAnJXNcbicgIiQxIiB8IHNlZCAtZSAncy9bXS5bXiRcXCpdL1xcJi9nJykKCW5hbWU9JCggZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyAtLWdldC1yZWdleHAgJ15zdWJtb2R1bGVcLi4qXC5wYXRoJCcgfAoJCXNlZCAtbiAtZSAnc3xec3VibW9kdWxlXC5cKC4qXClcLnBhdGggJyIkcmUiJyR8XDF8cCcgKQoJdGVzdCAteiAiJG5hbWUiICYmCglkaWUgIiQoZXZhbF9nZXR0ZXh0ICJObyBzdWJtb2R1bGUgbWFwcGluZyBmb3VuZCBpbiAuZ2l0bW9kdWxlcyBmb3IgcGF0aCAnXCRzbV9wYXRoJyIpIgoJZWNobyAiJG5hbWUiCn0KCiMKIyBDbG9uZSBhIHN1Ym1vZHVsZQojCiMgUHJpb3IgdG8gY2FsbGluZywgY21kX3VwZGF0ZSBjaGVja3MgdGhhdCBhIHBvc3NpYmx5IGV4aXN0aW5nCiMgcGF0aCBpcyBub3QgYSBnaXQgcmVwb3NpdG9yeS4KIyBMaWtld2lzZSwgY21kX2FkZCBjaGVja3MgdGhhdCBwYXRoIGRvZXMgbm90IGV4aXN0IGF0IGFsbCwKIyBzaW5jZSBpdCBpcyB0aGUgbG9jYXRpb24gb2YgYSBuZXcgc3VibW9kdWxlLgojCm1vZHVsZV9jbG9uZSgpCnsKCXNtX3BhdGg9JDEKCW5hbWU9JDIKCXVybD0kMwoJcmVmZXJlbmNlPSIkNCIKCXF1aWV0PQoJaWYgdGVzdCAtbiAiJEdJVF9RVUlFVCIKCXRoZW4KCQlxdWlldD0tcQoJZmkKCglnaXRkaXI9CglnaXRkaXJfYmFzZT0KCWJhc2VfbmFtZT0kKGRpcm5hbWUgIiRuYW1lIikKCglnaXRkaXI9JChnaXQgcmV2LXBhcnNlIC0tZ2l0LWRpcikKCWdpdGRpcl9iYXNlPSIkZ2l0ZGlyL21vZHVsZXMvJGJhc2VfbmFtZSIKCWdpdGRpcj0iJGdpdGRpci9tb2R1bGVzLyRuYW1lIgoKCWlmIHRlc3QgLWQgIiRnaXRkaXIiCgl0aGVuCgkJbWtkaXIgLXAgIiRzbV9wYXRoIgoJCXJtIC1mICIkZ2l0ZGlyL2luZGV4IgoJZWxzZQoJCW1rZGlyIC1wICIkZ2l0ZGlyX2Jhc2UiCgkJKAoJCQljbGVhcl9sb2NhbF9naXRfZW52CgkJCWdpdCBjbG9uZSAkcXVpZXQgLW4gJHtyZWZlcmVuY2U6KyIkcmVmZXJlbmNlIn0gXAoJCQkJLS1zZXBhcmF0ZS1naXQtZGlyICIkZ2l0ZGlyIiAiJHVybCIgIiRzbV9wYXRoIgoJCSkgfHwKCQlkaWUgIiQoZXZhbF9nZXR0ZXh0ICJDbG9uZSBvZiAnXCR1cmwnIGludG8gc3VibW9kdWxlIHBhdGggJ1wkc21fcGF0aCcgZmFpbGVkIikiCglmaQoKCSMgV2UgYWxyZWFkeSBhcmUgYXQgdGhlIHJvb3Qgb2YgdGhlIHdvcmsgdHJlZSBidXQgY2RfdG9fdG9wbGV2ZWwgd2lsbAoJIyByZXNvbHZlIGFueSBzeW1saW5rcyB0aGF0IG1pZ2h0IGJlIHByZXNlbnQgaW4gJFBXRAoJYT0kKGNkX3RvX3RvcGxldmVsICYmIGNkICIkZ2l0ZGlyIiAmJiBwd2QpLwoJYj0kKGNkX3RvX3RvcGxldmVsICYmIGNkICIkc21fcGF0aCIgJiYgcHdkKS8KCSMgbm9ybWFsaXplIFdpbmRvd3Mtc3R5bGUgYWJzb2x1dGUgcGF0aHMgdG8gUE9TSVgtc3R5bGUgYWJzb2x1dGUgcGF0aHMKCWNhc2UgJGEgaW4gW2EtekEtWl06LyopIGE9LyR7YSUlOip9JHthIyo6fSA7OyBlc2FjCgljYXNlICRiIGluIFthLXpBLVpdOi8qKSBiPS8ke2IlJToqfSR7YiMqOn0gOzsgZXNhYwoJIyBSZW1vdmUgYWxsIGNvbW1vbiBsZWFkaW5nIGRpcmVjdG9yaWVzIGFmdGVyIGEgc2FuaXR5IGNoZWNrCglpZiB0ZXN0ICIke2EjJGJ9IiAhPSAiJGEiIHx8IHRlc3QgIiR7YiMkYX0iICE9ICIkYiI7IHRoZW4KCQlkaWUgIiQoZXZhbF9nZXR0ZXh0ICJHaXRkaXIgJ1wkYScgaXMgcGFydCBvZiB0aGUgc3VibW9kdWxlIHBhdGggJ1wkYicgb3IgdmljZSB2ZXJzYSIpIgoJZmkKCXdoaWxlIHRlc3QgIiR7YSUlLyp9IiA9ICIke2IlJS8qfSIKCWRvCgkJYT0ke2EjKi99CgkJYj0ke2IjKi99Cglkb25lCgkjIE5vdyBjaG9wIG9mZiB0aGUgdHJhaWxpbmcgJy8ncyB0aGF0IHdlcmUgYWRkZWQgaW4gdGhlIGJlZ2lubmluZwoJYT0ke2ElL30KCWI9JHtiJS99CgoJIyBUdXJuIGVhY2ggbGVhZGluZyAiKi8iIGNvbXBvbmVudCBpbnRvICIuLi8iCglyZWw9JChlY2hvICRiIHwgc2VkIC1lICdzfFteL11bXi9dKnwuLnxnJykKCWVjaG8gImdpdGRpcjogJHJlbC8kYSIgPiIkc21fcGF0aC8uZ2l0IgoKCXJlbD0kKGVjaG8gJGEgfCBzZWQgLWUgJ3N8W14vXVteL10qfC4ufGcnKQoJKGNsZWFyX2xvY2FsX2dpdF9lbnY7IGNkICIkc21fcGF0aCIgJiYgR0lUX1dPUktfVFJFRT0uIGdpdCBjb25maWcgY29yZS53b3JrdHJlZSAiJHJlbC8kYiIpCn0KCiMKIyBBZGQgYSBuZXcgc3VibW9kdWxlIHRvIHRoZSB3b3JraW5nIHRyZWUsIC5naXRtb2R1bGVzIGFuZCB0aGUgaW5kZXgKIwojICRAID0gcmVwbyBwYXRoCiMKIyBvcHRpb25hbCBicmFuY2ggaXMgc3RvcmVkIGluIGdsb2JhbCBicmFuY2ggdmFyaWFibGUKIwpjbWRfYWRkKCkKewoJIyBwYXJzZSAkYXJncyBhZnRlciAic3VibW9kdWxlIC4uLiBhZGQiLgoJd2hpbGUgdGVzdCAkIyAtbmUgMAoJZG8KCQljYXNlICIkMSIgaW4KCQktYiB8IC0tYnJhbmNoKQoJCQljYXNlICIkMiIgaW4gJycpIHVzYWdlIDs7IGVzYWMKCQkJYnJhbmNoPSQyCgkJCXNoaWZ0CgkJCTs7CgkJLWYgfCAtLWZvcmNlKQoJCQlmb3JjZT0kMQoJCQk7OwoJCS1xfC0tcXVpZXQpCgkJCUdJVF9RVUlFVD0xCgkJCTs7CgkJLS1yZWZlcmVuY2UpCgkJCWNhc2UgIiQyIiBpbiAnJykgdXNhZ2UgOzsgZXNhYwoJCQlyZWZlcmVuY2U9Ii0tcmVmZXJlbmNlPSQyIgoJCQlzaGlmdAoJCQk7OwoJCS0tcmVmZXJlbmNlPSopCgkJCXJlZmVyZW5jZT0iJDEiCgkJCTs7CgkJLS1uYW1lKQoJCQljYXNlICIkMiIgaW4gJycpIHVzYWdlIDs7IGVzYWMKCQkJY3VzdG9tX25hbWU9JDIKCQkJc2hpZnQKCQkJOzsKCQktLSkKCQkJc2hpZnQKCQkJYnJlYWsKCQkJOzsKCQktKikKCQkJdXNhZ2UKCQkJOzsKCQkqKQoJCQlicmVhawoJCQk7OwoJCWVzYWMKCQlzaGlmdAoJZG9uZQoKCXJlcG89JDEKCXNtX3BhdGg9JDIKCglpZiB0ZXN0IC16ICIkc21fcGF0aCI7IHRoZW4KCQlzbV9wYXRoPSQoZWNobyAiJHJlcG8iIHwKCQkJc2VkIC1lICdzfC8kfHwnIC1lICdzfDoqLypcLmdpdCR8fCcgLWUgJ3N8LipbLzpdfHxnJykKCWZpCgoJaWYgdGVzdCAteiAiJHJlcG8iIC1vIC16ICIkc21fcGF0aCI7IHRoZW4KCQl1c2FnZQoJZmkKCgkjIGFzc3VyZSByZXBvIGlzIGFic29sdXRlIG9yIHJlbGF0aXZlIHRvIHBhcmVudAoJY2FzZSAiJHJlcG8iIGluCgkuLyp8Li4vKikKCQkjIGRlcmVmZXJlbmNlIHNvdXJjZSB1cmwgcmVsYXRpdmUgdG8gcGFyZW50J3MgdXJsCgkJcmVhbHJlcG89JChyZXNvbHZlX3JlbGF0aXZlX3VybCAiJHJlcG8iKSB8fCBleGl0CgkJOzsKCSo6KnwvKikKCQkjIGFic29sdXRlIHVybAoJCXJlYWxyZXBvPSRyZXBvCgkJOzsKCSopCgkJZGllICIkKGV2YWxfZ2V0dGV4dCAicmVwbyBVUkw6ICdcJHJlcG8nIG11c3QgYmUgYWJzb2x1dGUgb3IgYmVnaW4gd2l0aCAuL3wuLi8iKSIKCTs7Cgllc2FjCgoJIyBub3JtYWxpemUgcGF0aDoKCSMgbXVsdGlwbGUgLy87IGxlYWRpbmcgLi87IC8uLzsgLy4uLzsgdHJhaWxpbmcgLwoJc21fcGF0aD0kKHByaW50ZiAnJXMvXG4nICIkc21fcGF0aCIgfAoJCXNlZCAtZSAnCgkJCXN8Ly8qfC98ZwoJCQlzfF5cKFwuL1wpKnx8CgkJCXN8L1wuL3wvfGcKCQkJOnN0YXJ0CgkJCXN8XChbXi9dKlwpL1wuXC4vfHwKCQkJdHN0YXJ0CgkJCXN8LyokfHwKCQknKQoJZ2l0IGxzLWZpbGVzIC0tZXJyb3ItdW5tYXRjaCAiJHNtX3BhdGgiID4gL2Rldi9udWxsIDI+JjEgJiYKCWRpZSAiJChldmFsX2dldHRleHQgIidcJHNtX3BhdGgnIGFscmVhZHkgZXhpc3RzIGluIHRoZSBpbmRleCIpIgoKCWlmIHRlc3QgLXogIiRmb3JjZSIgJiYgISBnaXQgYWRkIC0tZHJ5LXJ1biAtLWlnbm9yZS1taXNzaW5nICIkc21fcGF0aCIgPiAvZGV2L251bGwgMj4mMQoJdGhlbgoJCWV2YWxfZ2V0dGV4dGxuICJUaGUgZm9sbG93aW5nIHBhdGggaXMgaWdub3JlZCBieSBvbmUgb2YgeW91ciAuZ2l0aWdub3JlIGZpbGVzOgpcJHNtX3BhdGgKVXNlIC1mIGlmIHlvdSByZWFsbHkgd2FudCB0byBhZGQgaXQuIiA+JjIKCQlleGl0IDEKCWZpCgoJaWYgdGVzdCAtbiAiJGN1c3RvbV9uYW1lIgoJdGhlbgoJCXNtX25hbWU9IiRjdXN0b21fbmFtZSIKCWVsc2UKCQlzbV9uYW1lPSIkc21fcGF0aCIKCWZpCgoJIyBwZXJoYXBzIHRoZSBwYXRoIGV4aXN0cyBhbmQgaXMgYWxyZWFkeSBhIGdpdCByZXBvLCBlbHNlIGNsb25lIGl0CglpZiB0ZXN0IC1lICIkc21fcGF0aCIKCXRoZW4KCQlpZiB0ZXN0IC1kICIkc21fcGF0aCIvLmdpdCAtbyAtZiAiJHNtX3BhdGgiLy5naXQKCQl0aGVuCgkJCWV2YWxfZ2V0dGV4dGxuICJBZGRpbmcgZXhpc3RpbmcgcmVwbyBhdCAnXCRzbV9wYXRoJyB0byB0aGUgaW5kZXgiCgkJZWxzZQoJCQlkaWUgIiQoZXZhbF9nZXR0ZXh0ICInXCRzbV9wYXRoJyBhbHJlYWR5IGV4aXN0cyBhbmQgaXMgbm90IGEgdmFsaWQgZ2l0IHJlcG8iKSIKCQlmaQoKCWVsc2UKCQlpZiB0ZXN0IC1kICIuZ2l0L21vZHVsZXMvJHNtX25hbWUiCgkJdGhlbgoJCQlpZiB0ZXN0IC16ICIkZm9yY2UiCgkJCXRoZW4KCQkJCWVjaG8gPiYyICIkKGV2YWxfZ2V0dGV4dCAiQSBnaXQgZGlyZWN0b3J5IGZvciAnXCRzbV9uYW1lJyBpcyBmb3VuZCBsb2NhbGx5IHdpdGggcmVtb3RlKHMpOiIpIgoJCQkJR0lUX0RJUj0iLmdpdC9tb2R1bGVzLyRzbV9uYW1lIiBHSVRfV09SS19UUkVFPS4gZ2l0IHJlbW90ZSAtdiB8IGdyZXAgJyhmZXRjaCknIHwgc2VkIC1lIHMsXiwiICAiLCAtZSBzLCcgKGZldGNoKScsLCA+JjIKCQkJCWVjaG8gPiYyICIkKGV2YWxfZ2V0dGV4dCAiSWYgeW91IHdhbnQgdG8gcmV1c2UgdGhpcyBsb2NhbCBnaXQgZGlyZWN0b3J5IGluc3RlYWQgb2YgY2xvbmluZyBhZ2FpbiBmcm9tIikiCgkJCQllY2hvID4mMiAiICAkcmVhbHJlcG8iCgkJCQllY2hvID4mMiAiJChldmFsX2dldHRleHQgInVzZSB0aGUgJy0tZm9yY2UnIG9wdGlvbi4gSWYgdGhlIGxvY2FsIGdpdCBkaXJlY3RvcnkgaXMgbm90IHRoZSBjb3JyZWN0IHJlcG8iKSIKCQkJCWRpZSAiJChldmFsX2dldHRleHQgIm9yIHlvdSBhcmUgdW5zdXJlIHdoYXQgdGhpcyBtZWFucyBjaG9vc2UgYW5vdGhlciBuYW1lIHdpdGggdGhlICctLW5hbWUnIG9wdGlvbi4iKSIKCQkJZWxzZQoJCQkJZWNobyAiJChldmFsX2dldHRleHQgIlJlYWN0aXZhdGluZyBsb2NhbCBnaXQgZGlyZWN0b3J5IGZvciBzdWJtb2R1bGUgJ1wkc21fbmFtZScuIikiCgkJCWZpCgkJZmkKCQltb2R1bGVfY2xvbmUgIiRzbV9wYXRoIiAiJHNtX25hbWUiICIkcmVhbHJlcG8iICIkcmVmZXJlbmNlIiB8fCBleGl0CgkJKAoJCQljbGVhcl9sb2NhbF9naXRfZW52CgkJCWNkICIkc21fcGF0aCIgJiYKCQkJIyBhc2ggZmFpbHMgdG8gd29yZHNwbGl0ICR7YnJhbmNoOistYiAiJGJyYW5jaCIuLi59CgkJCWNhc2UgIiRicmFuY2giIGluCgkJCScnKSBnaXQgY2hlY2tvdXQgLWYgLXEgOzsKCQkJPyopIGdpdCBjaGVja291dCAtZiAtcSAtQiAiJGJyYW5jaCIgIm9yaWdpbi8kYnJhbmNoIiA7OwoJCQllc2FjCgkJKSB8fCBkaWUgIiQoZXZhbF9nZXR0ZXh0ICJVbmFibGUgdG8gY2hlY2tvdXQgc3VibW9kdWxlICdcJHNtX3BhdGgnIikiCglmaQoJZ2l0IGNvbmZpZyBzdWJtb2R1bGUuIiRzbV9uYW1lIi51cmwgIiRyZWFscmVwbyIKCglnaXQgYWRkICRmb3JjZSAiJHNtX3BhdGgiIHx8CglkaWUgIiQoZXZhbF9nZXR0ZXh0ICJGYWlsZWQgdG8gYWRkIHN1Ym1vZHVsZSAnXCRzbV9wYXRoJyIpIgoKCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLiIkc21fbmFtZSIucGF0aCAiJHNtX3BhdGgiICYmCglnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS4iJHNtX25hbWUiLnVybCAiJHJlcG8iICYmCglpZiB0ZXN0IC1uICIkYnJhbmNoIgoJdGhlbgoJCWdpdCBjb25maWcgLWYgLmdpdG1vZHVsZXMgc3VibW9kdWxlLiIkc21fbmFtZSIuYnJhbmNoICIkYnJhbmNoIgoJZmkgJiYKCWdpdCBhZGQgLS1mb3JjZSAuZ2l0bW9kdWxlcyB8fAoJZGllICIkKGV2YWxfZ2V0dGV4dCAiRmFpbGVkIHRvIHJlZ2lzdGVyIHN1Ym1vZHVsZSAnXCRzbV9wYXRoJyIpIgp9CgojCiMgRXhlY3V0ZSBhbiBhcmJpdHJhcnkgY29tbWFuZCBzZXF1ZW5jZSBpbiBlYWNoIGNoZWNrZWQgb3V0CiMgc3VibW9kdWxlCiMKIyAkQCA9IGNvbW1hbmQgdG8gZXhlY3V0ZQojCmNtZF9mb3JlYWNoKCkKewoJIyBwYXJzZSAkYXJncyBhZnRlciAic3VibW9kdWxlIC4uLiBmb3JlYWNoIi4KCXdoaWxlIHRlc3QgJCMgLW5lIDAKCWRvCgkJY2FzZSAiJDEiIGluCgkJLXF8LS1xdWlldCkKCQkJR0lUX1FVSUVUPTEKCQkJOzsKCQktLXJlY3Vyc2l2ZSkKCQkJcmVjdXJzaXZlPTEKCQkJOzsKCQktKikKCQkJdXNhZ2UKCQkJOzsKCQkqKQoJCQlicmVhawoJCQk7OwoJCWVzYWMKCQlzaGlmdAoJZG9uZQoKCXRvcGxldmVsPSQocHdkKQoKCSMgZHVwIHN0ZGluIHNvIHRoYXQgaXQgY2FuIGJlIHJlc3RvcmVkIHdoZW4gcnVubmluZyB0aGUgZXh0ZXJuYWwKCSMgY29tbWFuZCBpbiB0aGUgc3Vic2hlbGwgKGFuZCBhIHJlY3Vyc2l2ZSBjYWxsIHRvIHRoaXMgZnVuY3Rpb24pCglleGVjIDM8JjAKCgltb2R1bGVfbGlzdCB8Cgl3aGlsZSByZWFkIG1vZGUgc2hhMSBzdGFnZSBzbV9wYXRoCglkbwoJCWRpZV9pZl91bm1hdGNoZWQgIiRtb2RlIgoJCWlmIHRlc3QgLWUgIiRzbV9wYXRoIi8uZ2l0CgkJdGhlbgoJCQlzYXkgIiQoZXZhbF9nZXR0ZXh0ICJFbnRlcmluZyAnXCRwcmVmaXhcJHNtX3BhdGgnIikiCgkJCW5hbWU9JChtb2R1bGVfbmFtZSAiJHNtX3BhdGgiKQoJCQkoCgkJCQlwcmVmaXg9IiRwcmVmaXgkc21fcGF0aC8iCgkJCQljbGVhcl9sb2NhbF9naXRfZW52CgkJCQkjIHdlIG1ha2UgJHBhdGggYXZhaWxhYmxlIHRvIHNjcmlwdHMgLi4uCgkJCQlwYXRoPSRzbV9wYXRoCgkJCQljZCAiJHNtX3BhdGgiICYmCgkJCQlldmFsICIkQCIgJiYKCQkJCWlmIHRlc3QgLW4gIiRyZWN1cnNpdmUiCgkJCQl0aGVuCgkJCQkJY21kX2ZvcmVhY2ggIi0tcmVjdXJzaXZlIiAiJEAiCgkJCQlmaQoJCQkpIDwmMyAzPCYtIHx8CgkJCWRpZSAiJChldmFsX2dldHRleHQgIlN0b3BwaW5nIGF0ICdcJHNtX3BhdGgnOyBzY3JpcHQgcmV0dXJuZWQgbm9uLXplcm8gc3RhdHVzLiIpIgoJCWZpCglkb25lCn0KCiMKIyBSZWdpc3RlciBzdWJtb2R1bGVzIGluIC5naXQvY29uZmlnCiMKIyAkQCA9IHJlcXVlc3RlZCBwYXRocyAoZGVmYXVsdCB0byBhbGwpCiMKY21kX2luaXQoKQp7CgkjIHBhcnNlICRhcmdzIGFmdGVyICJzdWJtb2R1bGUgLi4uIGluaXQiLgoJd2hpbGUgdGVzdCAkIyAtbmUgMAoJZG8KCQljYXNlICIkMSIgaW4KCQktcXwtLXF1aWV0KQoJCQlHSVRfUVVJRVQ9MQoJCQk7OwoJCS0tKQoJCQlzaGlmdAoJCQlicmVhawoJCQk7OwoJCS0qKQoJCQl1c2FnZQoJCQk7OwoJCSopCgkJCWJyZWFrCgkJCTs7CgkJZXNhYwoJCXNoaWZ0Cglkb25lCgoJbW9kdWxlX2xpc3QgIiRAIiB8Cgl3aGlsZSByZWFkIG1vZGUgc2hhMSBzdGFnZSBzbV9wYXRoCglkbwoJCWRpZV9pZl91bm1hdGNoZWQgIiRtb2RlIgoJCW5hbWU9JChtb2R1bGVfbmFtZSAiJHNtX3BhdGgiKSB8fCBleGl0CgoJCSMgQ29weSB1cmwgc2V0dGluZyB3aGVuIGl0IGlzIG5vdCBzZXQgeWV0CgkJaWYgdGVzdCAteiAiJChnaXQgY29uZmlnICJzdWJtb2R1bGUuJG5hbWUudXJsIikiCgkJdGhlbgoJCQl1cmw9JChnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS4iJG5hbWUiLnVybCkKCQkJdGVzdCAteiAiJHVybCIgJiYKCQkJZGllICIkKGV2YWxfZ2V0dGV4dCAiTm8gdXJsIGZvdW5kIGZvciBzdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJyBpbiAuZ2l0bW9kdWxlcyIpIgoKCQkJIyBQb3NzaWJseSBhIHVybCByZWxhdGl2ZSB0byBwYXJlbnQKCQkJY2FzZSAiJHVybCIgaW4KCQkJLi8qfC4uLyopCgkJCQl1cmw9JChyZXNvbHZlX3JlbGF0aXZlX3VybCAiJHVybCIpIHx8IGV4aXQKCQkJCTs7CgkJCWVzYWMKCQkJZ2l0IGNvbmZpZyBzdWJtb2R1bGUuIiRuYW1lIi51cmwgIiR1cmwiIHx8CgkJCWRpZSAiJChldmFsX2dldHRleHQgIkZhaWxlZCB0byByZWdpc3RlciB1cmwgZm9yIHN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnIikiCgoJCQlzYXkgIiQoZXZhbF9nZXR0ZXh0ICJTdWJtb2R1bGUgJ1wkbmFtZScgKFwkdXJsKSByZWdpc3RlcmVkIGZvciBwYXRoICdcJHNtX3BhdGgnIikiCgkJZmkKCgkJIyBDb3B5ICJ1cGRhdGUiIHNldHRpbmcgd2hlbiBpdCBpcyBub3Qgc2V0IHlldAoJCXVwZD0iJChnaXQgY29uZmlnIC1mIC5naXRtb2R1bGVzIHN1Ym1vZHVsZS4iJG5hbWUiLnVwZGF0ZSkiCgkJdGVzdCAteiAiJHVwZCIgfHwKCQl0ZXN0IC1uICIkKGdpdCBjb25maWcgc3VibW9kdWxlLiIkbmFtZSIudXBkYXRlKSIgfHwKCQlnaXQgY29uZmlnIHN1Ym1vZHVsZS4iJG5hbWUiLnVwZGF0ZSAiJHVwZCIgfHwKCQlkaWUgIiQoZXZhbF9nZXR0ZXh0ICJGYWlsZWQgdG8gcmVnaXN0ZXIgdXBkYXRlIG1vZGUgZm9yIHN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnIikiCglkb25lCn0KCiMKIyBVcGRhdGUgZWFjaCBzdWJtb2R1bGUgcGF0aCB0byBjb3JyZWN0IHJldmlzaW9uLCB1c2luZyBjbG9uZSBhbmQgY2hlY2tvdXQgYXMgbmVlZGVkCiMKIyAkQCA9IHJlcXVlc3RlZCBwYXRocyAoZGVmYXVsdCB0byBhbGwpCiMKY21kX3VwZGF0ZSgpCnsKCSMgcGFyc2UgJGFyZ3MgYWZ0ZXIgInN1Ym1vZHVsZSAuLi4gdXBkYXRlIi4KCW9yaWdfZmxhZ3M9Cgl3aGlsZSB0ZXN0ICQjIC1uZSAwCglkbwoJCWNhc2UgIiQxIiBpbgoJCS1xfC0tcXVpZXQpCgkJCUdJVF9RVUlFVD0xCgkJCTs7CgkJLWl8LS1pbml0KQoJCQlpbml0PTEKCQkJOzsKCQktLXJlbW90ZSkKCQkJcmVtb3RlPTEKCQkJOzsKCQktTnwtLW5vLWZldGNoKQoJCQlub2ZldGNoPTEKCQkJOzsKCQktZnwtLWZvcmNlKQoJCQlmb3JjZT0kMQoJCQk7OwoJCS1yfC0tcmViYXNlKQoJCQl1cGRhdGU9InJlYmFzZSIKCQkJOzsKCQktLXJlZmVyZW5jZSkKCQkJY2FzZSAiJDIiIGluICcnKSB1c2FnZSA7OyBlc2FjCgkJCXJlZmVyZW5jZT0iLS1yZWZlcmVuY2U9JDIiCgkJCW9yaWdfZmxhZ3M9IiRvcmlnX2ZsYWdzICQoZ2l0IHJldi1wYXJzZSAtLXNxLXF1b3RlICIkMSIpIgoJCQlzaGlmdAoJCQk7OwoJCS0tcmVmZXJlbmNlPSopCgkJCXJlZmVyZW5jZT0iJDEiCgkJCTs7CgkJLW18LS1tZXJnZSkKCQkJdXBkYXRlPSJtZXJnZSIKCQkJOzsKCQktLXJlY3Vyc2l2ZSkKCQkJcmVjdXJzaXZlPTEKCQkJOzsKCQktLWNoZWNrb3V0KQoJCQl1cGRhdGU9ImNoZWNrb3V0IgoJCQk7OwoJCS0tKQoJCQlzaGlmdAoJCQlicmVhawoJCQk7OwoJCS0qKQoJCQl1c2FnZQoJCQk7OwoJCSopCgkJCWJyZWFrCgkJCTs7CgkJZXNhYwoJCW9yaWdfZmxhZ3M9IiRvcmlnX2ZsYWdzICQoZ2l0IHJldi1wYXJzZSAtLXNxLXF1b3RlICIkMSIpIgoJCXNoaWZ0Cglkb25lCgoJaWYgdGVzdCAtbiAiJGluaXQiCgl0aGVuCgkJY21kX2luaXQgIi0tIiAiJEAiIHx8IHJldHVybgoJZmkKCgljbG9uZWRfbW9kdWxlcz0KCW1vZHVsZV9saXN0ICIkQCIgfCB7CgllcnI9Cgl3aGlsZSByZWFkIG1vZGUgc2hhMSBzdGFnZSBzbV9wYXRoCglkbwoJCWRpZV9pZl91bm1hdGNoZWQgIiRtb2RlIgoJCWlmIHRlc3QgIiRzdGFnZSIgPSBVCgkJdGhlbgoJCQllY2hvID4mMiAiU2tpcHBpbmcgdW5tZXJnZWQgc3VibW9kdWxlICRzbV9wYXRoIgoJCQljb250aW51ZQoJCWZpCgkJbmFtZT0kKG1vZHVsZV9uYW1lICIkc21fcGF0aCIpIHx8IGV4aXQKCQl1cmw9JChnaXQgY29uZmlnIHN1Ym1vZHVsZS4iJG5hbWUiLnVybCkKCQlicmFuY2g9JChnZXRfc3VibW9kdWxlX2NvbmZpZyAiJG5hbWUiIGJyYW5jaCBtYXN0ZXIpCgkJaWYgISB0ZXN0IC16ICIkdXBkYXRlIgoJCXRoZW4KCQkJdXBkYXRlX21vZHVsZT0kdXBkYXRlCgkJZWxzZQoJCQl1cGRhdGVfbW9kdWxlPSQoZ2l0IGNvbmZpZyBzdWJtb2R1bGUuIiRuYW1lIi51cGRhdGUpCgkJZmkKCgkJaWYgdGVzdCAiJHVwZGF0ZV9tb2R1bGUiID0gIm5vbmUiCgkJdGhlbgoJCQllY2hvICJTa2lwcGluZyBzdWJtb2R1bGUgJyRzbV9wYXRoJyIKCQkJY29udGludWUKCQlmaQoKCQlpZiB0ZXN0IC16ICIkdXJsIgoJCXRoZW4KCQkJIyBPbmx5IG1lbnRpb24gdW5pbml0aWFsaXplZCBzdWJtb2R1bGVzIHdoZW4gaXRzCgkJCSMgcGF0aCBoYXZlIGJlZW4gc3BlY2lmaWVkCgkJCXRlc3QgIiQjIiAhPSAiMCIgJiYKCQkJc2F5ICIkKGV2YWxfZ2V0dGV4dCAiU3VibW9kdWxlIHBhdGggJ1wkc21fcGF0aCcgbm90IGluaXRpYWxpemVkCk1heWJlIHlvdSB3YW50IHRvIHVzZSAndXBkYXRlIC0taW5pdCc/IikiCgkJCWNvbnRpbnVlCgkJZmkKCgkJaWYgISB0ZXN0IC1kICIkc21fcGF0aCIvLmdpdCAtbyAtZiAiJHNtX3BhdGgiLy5naXQKCQl0aGVuCgkJCW1vZHVsZV9jbG9uZSAiJHNtX3BhdGgiICIkbmFtZSIgIiR1cmwiICIkcmVmZXJlbmNlIiB8fCBleGl0CgkJCWNsb25lZF9tb2R1bGVzPSIkY2xvbmVkX21vZHVsZXM7JG5hbWUiCgkJCXN1YnNoYTE9CgkJZWxzZQoJCQlzdWJzaGExPSQoY2xlYXJfbG9jYWxfZ2l0X2VudjsgY2QgIiRzbV9wYXRoIiAmJgoJCQkJZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEKSB8fAoJCQlkaWUgIiQoZXZhbF9nZXR0ZXh0ICJVbmFibGUgdG8gZmluZCBjdXJyZW50IHJldmlzaW9uIGluIHN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnIikiCgkJZmkKCgkJaWYgdGVzdCAtbiAiJHJlbW90ZSIKCQl0aGVuCgkJCWlmIHRlc3QgLXogIiRub2ZldGNoIgoJCQl0aGVuCgkJCQkjIEZldGNoIHJlbW90ZSBiZWZvcmUgZGV0ZXJtaW5pbmcgdHJhY2tpbmcgJHNoYTEKCQkJCShjbGVhcl9sb2NhbF9naXRfZW52OyBjZCAiJHNtX3BhdGgiICYmIGdpdC1mZXRjaCkgfHwKCQkJCWRpZSAiJChldmFsX2dldHRleHQgIlVuYWJsZSB0byBmZXRjaCBpbiBzdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJyIpIgoJCQlmaQoJCQlyZW1vdGVfbmFtZT0kKGNsZWFyX2xvY2FsX2dpdF9lbnY7IGNkICIkc21fcGF0aCIgJiYgZ2V0X2RlZmF1bHRfcmVtb3RlKQoJCQlzaGExPSQoY2xlYXJfbG9jYWxfZ2l0X2VudjsgY2QgIiRzbV9wYXRoIiAmJgoJCQkJZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSAiJHtyZW1vdGVfbmFtZX0vJHticmFuY2h9IikgfHwKCQkJZGllICIkKGV2YWxfZ2V0dGV4dCAiVW5hYmxlIHRvIGZpbmQgY3VycmVudCAke3JlbW90ZV9uYW1lfS8ke2JyYW5jaH0gcmV2aXNpb24gaW4gc3VibW9kdWxlIHBhdGggJ1wkc21fcGF0aCciKSIKCQlmaQoKCQlpZiB0ZXN0ICIkc3Vic2hhMSIgIT0gIiRzaGExIiAtbyAtbiAiJGZvcmNlIgoJCXRoZW4KCQkJc3ViZm9yY2U9JGZvcmNlCgkJCSMgSWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgLWYgZmxhZyBhbmQgdGhlIHN1Ym1vZHVsZSBoYXMgbmV2ZXIgYmVlbiBjaGVja2VkIG91dAoJCQlpZiB0ZXN0IC16ICIkc3Vic2hhMSIgLWEgLXogIiRmb3JjZSIKCQkJdGhlbgoJCQkJc3ViZm9yY2U9Ii1mIgoJCQlmaQoKCQkJaWYgdGVzdCAteiAiJG5vZmV0Y2giCgkJCXRoZW4KCQkJCSMgUnVuIGZldGNoIG9ubHkgaWYgJHNoYTEgaXNuJ3QgcHJlc2VudCBvciBpdAoJCQkJIyBpcyBub3QgcmVhY2hhYmxlIGZyb20gYSByZWYuCgkJCQkoY2xlYXJfbG9jYWxfZ2l0X2VudjsgY2QgIiRzbV9wYXRoIiAmJgoJCQkJCSggKHJldj0kKGdpdCByZXYtbGlzdCAtbiAxICRzaGExIC0tbm90IC0tYWxsIDI+L2Rldi9udWxsKSAmJgoJCQkJCSB0ZXN0IC16ICIkcmV2IikgfHwgZ2l0LWZldGNoKSkgfHwKCQkJCWRpZSAiJChldmFsX2dldHRleHQgIlVuYWJsZSB0byBmZXRjaCBpbiBzdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJyIpIgoJCQlmaQoKCQkJIyBJcyB0aGlzIHNvbWV0aGluZyB3ZSBqdXN0IGNsb25lZD8KCQkJY2FzZSAiOyRjbG9uZWRfbW9kdWxlczsiIGluCgkJCSoiOyRuYW1lOyIqKQoJCQkJIyB0aGVuIHRoZXJlIGlzIG5vIGxvY2FsIGNoYW5nZSB0byBpbnRlZ3JhdGUKCQkJCXVwZGF0ZV9tb2R1bGU9IDs7CgkJCWVzYWMKCgkJCW11c3RfZGllX29uX2ZhaWx1cmU9CgkJCWNhc2UgIiR1cGRhdGVfbW9kdWxlIiBpbgoJCQlyZWJhc2UpCgkJCQljb21tYW5kPSJnaXQgcmViYXNlIgoJCQkJZGllX21zZz0iJChldmFsX2dldHRleHQgIlVuYWJsZSB0byByZWJhc2UgJ1wkc2hhMScgaW4gc3VibW9kdWxlIHBhdGggJ1wkc21fcGF0aCciKSIKCQkJCXNheV9tc2c9IiQoZXZhbF9nZXR0ZXh0ICJTdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJzogcmViYXNlZCBpbnRvICdcJHNoYTEnIikiCgkJCQltdXN0X2RpZV9vbl9mYWlsdXJlPXllcwoJCQkJOzsKCQkJbWVyZ2UpCgkJCQljb21tYW5kPSJnaXQgbWVyZ2UiCgkJCQlkaWVfbXNnPSIkKGV2YWxfZ2V0dGV4dCAiVW5hYmxlIHRvIG1lcmdlICdcJHNoYTEnIGluIHN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnIikiCgkJCQlzYXlfbXNnPSIkKGV2YWxfZ2V0dGV4dCAiU3VibW9kdWxlIHBhdGggJ1wkc21fcGF0aCc6IG1lcmdlZCBpbiAnXCRzaGExJyIpIgoJCQkJbXVzdF9kaWVfb25fZmFpbHVyZT15ZXMKCQkJCTs7CgkJCSopCgkJCQljb21tYW5kPSJnaXQgY2hlY2tvdXQgJHN1YmZvcmNlIC1xIgoJCQkJZGllX21zZz0iJChldmFsX2dldHRleHQgIlVuYWJsZSB0byBjaGVja291dCAnXCRzaGExJyBpbiBzdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJyIpIgoJCQkJc2F5X21zZz0iJChldmFsX2dldHRleHQgIlN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnOiBjaGVja2VkIG91dCAnXCRzaGExJyIpIgoJCQkJOzsKCQkJZXNhYwoKCQkJaWYgKGNsZWFyX2xvY2FsX2dpdF9lbnY7IGNkICIkc21fcGF0aCIgJiYgJGNvbW1hbmQgIiRzaGExIikKCQkJdGhlbgoJCQkJc2F5ICIkc2F5X21zZyIKCQkJZWxpZiB0ZXN0IC1uICIkbXVzdF9kaWVfb25fZmFpbHVyZSIKCQkJdGhlbgoJCQkJZGllX3dpdGhfc3RhdHVzIDIgIiRkaWVfbXNnIgoJCQllbHNlCgkJCQllcnI9IiR7ZXJyfTskZGllX21zZyIKCQkJCWNvbnRpbnVlCgkJCWZpCgkJZmkKCgkJaWYgdGVzdCAtbiAiJHJlY3Vyc2l2ZSIKCQl0aGVuCgkJCShjbGVhcl9sb2NhbF9naXRfZW52OyBjZCAiJHNtX3BhdGgiICYmIGV2YWwgY21kX3VwZGF0ZSAiJG9yaWdfZmxhZ3MiKQoJCQlyZXM9JD8KCQkJaWYgdGVzdCAkcmVzIC1ndCAwCgkJCXRoZW4KCQkJCWRpZV9tc2c9IiQoZXZhbF9nZXR0ZXh0ICJGYWlsZWQgdG8gcmVjdXJzZSBpbnRvIHN1Ym1vZHVsZSBwYXRoICdcJHNtX3BhdGgnIikiCgkJCQlpZiB0ZXN0ICRyZXMgLWVxIDEKCQkJCXRoZW4KCQkJCQllcnI9IiR7ZXJyfTskZGllX21zZyIKCQkJCQljb250aW51ZQoJCQkJZWxzZQoJCQkJCWRpZV93aXRoX3N0YXR1cyAkcmVzICIkZGllX21zZyIKCQkJCWZpCgkJCWZpCgkJZmkKCWRvbmUKCglpZiB0ZXN0IC1uICIkZXJyIgoJdGhlbgoJCU9JRlM9JElGUwoJCUlGUz0nOycKCQlmb3IgZSBpbiAkZXJyCgkJZG8KCQkJaWYgdGVzdCAtbiAiJGUiCgkJCXRoZW4KCQkJCWVjaG8gPiYyICIkZSIKCQkJZmkKCQlkb25lCgkJSUZTPSRPSUZTCgkJZXhpdCAxCglmaQoJfQp9CgpzZXRfbmFtZV9yZXYgKCkgewoJcmV2bmFtZT0kKCAoCgkJY2xlYXJfbG9jYWxfZ2l0X2VudgoJCWNkICIkMSIgJiYgewoJCQlnaXQgZGVzY3JpYmUgIiQyIiAyPi9kZXYvbnVsbCB8fAoJCQlnaXQgZGVzY3JpYmUgLS10YWdzICIkMiIgMj4vZGV2L251bGwgfHwKCQkJZ2l0IGRlc2NyaWJlIC0tY29udGFpbnMgIiQyIiAyPi9kZXYvbnVsbCB8fAoJCQlnaXQgZGVzY3JpYmUgLS1hbGwgLS1hbHdheXMgIiQyIgoJCX0KCSkgKQoJdGVzdCAteiAiJHJldm5hbWUiIHx8IHJldm5hbWU9IiAoJHJldm5hbWUpIgp9CiMKIyBTaG93IGNvbW1pdCBzdW1tYXJ5IGZvciBzdWJtb2R1bGVzIGluIGluZGV4IG9yIHdvcmtpbmcgdHJlZQojCiMgSWYgJy0tY2FjaGVkJyBpcyBnaXZlbiwgc2hvdyBzdW1tYXJ5IGJldHdlZW4gaW5kZXggYW5kIGdpdmVuIGNvbW1pdCwKIyBvciBiZXR3ZWVuIHdvcmtpbmcgdHJlZSBhbmQgZ2l2ZW4gY29tbWl0CiMKIyAkQCA9IFtjb21taXQgKGRlZmF1bHQgJ0hFQUQnKSxdIHJlcXVlc3RlZCBwYXRocyAoZGVmYXVsdCBhbGwpCiMKY21kX3N1bW1hcnkoKSB7CglzdW1tYXJ5X2xpbWl0PS0xCglmb3Jfc3RhdHVzPQoJZGlmZl9jbWQ9ZGlmZi1pbmRleAoKCSMgcGFyc2UgJGFyZ3MgYWZ0ZXIgInN1Ym1vZHVsZSAuLi4gc3VtbWFyeSIuCgl3aGlsZSB0ZXN0ICQjIC1uZSAwCglkbwoJCWNhc2UgIiQxIiBpbgoJCS0tY2FjaGVkKQoJCQljYWNoZWQ9IiQxIgoJCQk7OwoJCS0tZmlsZXMpCgkJCWZpbGVzPSIkMSIKCQkJOzsKCQktLWZvci1zdGF0dXMpCgkJCWZvcl9zdGF0dXM9IiQxIgoJCQk7OwoJCS1ufC0tc3VtbWFyeS1saW1pdCkKCQkJaWYgc3VtbWFyeV9saW1pdD0kKCgkMiArIDApKSAyPi9kZXYvbnVsbCAmJiB0ZXN0ICIkc3VtbWFyeV9saW1pdCIgPSAiJDIiCgkJCXRoZW4KCQkJCToKCQkJZWxzZQoJCQkJdXNhZ2UKCQkJZmkKCQkJc2hpZnQKCQkJOzsKCQktLSkKCQkJc2hpZnQKCQkJYnJlYWsKCQkJOzsKCQktKikKCQkJdXNhZ2UKCQkJOzsKCQkqKQoJCQlicmVhawoJCQk7OwoJCWVzYWMKCQlzaGlmdAoJZG9uZQoKCXRlc3QgJHN1bW1hcnlfbGltaXQgPSAwICYmIHJldHVybgoKCWlmIHJldj0kKGdpdCByZXYtcGFyc2UgLXEgLS12ZXJpZnkgLS1kZWZhdWx0IEhFQUQgJHsxKyIkMSJ9KQoJdGhlbgoJCWhlYWQ9JHJldgoJCXRlc3QgJCMgPSAwIHx8IHNoaWZ0CgllbGlmIHRlc3QgLXogIiQxIiAtbyAiJDEiID0gIkhFQUQiCgl0aGVuCgkJIyBiZWZvcmUgdGhlIGZpcnN0IGNvbW1pdDogY29tcGFyZSB3aXRoIGFuIGVtcHR5IHRyZWUKCQloZWFkPSQoZ2l0IGhhc2gtb2JqZWN0IC13IC10IHRyZWUgLS1zdGRpbiA8L2Rldi9udWxsKQoJCXRlc3QgLXogIiQxIiB8fCBzaGlmdAoJZWxzZQoJCWhlYWQ9IkhFQUQiCglmaQoKCWlmIFsgLW4gIiRmaWxlcyIgXQoJdGhlbgoJCXRlc3QgLW4gIiRjYWNoZWQiICYmCgkJZGllICIkKGdldHRleHQgIlRoZSAtLWNhY2hlZCBvcHRpb24gY2Fubm90IGJlIHVzZWQgd2l0aCB0aGUgLS1maWxlcyBvcHRpb24iKSIKCQlkaWZmX2NtZD1kaWZmLWZpbGVzCgkJaGVhZD0KCWZpCgoJY2RfdG9fdG9wbGV2ZWwKCSMgR2V0IG1vZGlmaWVkIG1vZHVsZXMgY2FyZWQgYnkgdXNlcgoJbW9kdWxlcz0kKGdpdCAkZGlmZl9jbWQgJGNhY2hlZCAtLWlnbm9yZS1zdWJtb2R1bGVzPWRpcnR5IC0tcmF3ICRoZWFkIC0tICIkQCIgfAoJCXNhbmVfZWdyZXAgJ146KFswLTddKiApPzE2MDAwMCcgfAoJCXdoaWxlIHJlYWQgbW9kX3NyYyBtb2RfZHN0IHNoYTFfc3JjIHNoYTFfZHN0IHN0YXR1cyBuYW1lCgkJZG8KCQkJIyBBbHdheXMgc2hvdyBtb2R1bGVzIGRlbGV0ZWQgb3IgdHlwZS1jaGFuZ2VkIChibG9iPC0+bW9kdWxlKQoJCQl0ZXN0ICRzdGF0dXMgPSBEIC1vICRzdGF0dXMgPSBUICYmIGVjaG8gIiRuYW1lIiAmJiBjb250aW51ZQoJCQkjIEFsc28gc2hvdyBhZGRlZCBvciBtb2RpZmllZCBtb2R1bGVzIHdoaWNoIGFyZSBjaGVja2VkIG91dAoJCQlHSVRfRElSPSIkbmFtZS8uZ2l0IiBnaXQtcmV2LXBhcnNlIC0tZ2l0LWRpciA+L2Rldi9udWxsIDI+JjEgJiYKCQkJZWNobyAiJG5hbWUiCgkJZG9uZQoJKQoKCXRlc3QgLXogIiRtb2R1bGVzIiAmJiByZXR1cm4KCglnaXQgJGRpZmZfY21kICRjYWNoZWQgLS1pZ25vcmUtc3VibW9kdWxlcz1kaXJ0eSAtLXJhdyAkaGVhZCAtLSAkbW9kdWxlcyB8CglzYW5lX2VncmVwICdeOihbMC03XSogKT8xNjAwMDAnIHwKCWN1dCAtYzItIHwKCXdoaWxlIHJlYWQgbW9kX3NyYyBtb2RfZHN0IHNoYTFfc3JjIHNoYTFfZHN0IHN0YXR1cyBuYW1lCglkbwoJCWlmIHRlc3QgLXogIiRjYWNoZWQiICYmCgkJCXRlc3QgJHNoYTFfZHN0ID0gMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAoJCXRoZW4KCQkJY2FzZSAiJG1vZF9kc3QiIGluCgkJCTE2MDAwMCkKCQkJCXNoYTFfZHN0PSQoR0lUX0RJUj0iJG5hbWUvLmdpdCIgZ2l0IHJldi1wYXJzZSBIRUFEKQoJCQkJOzsKCQkJMTAwNjQ0IHwgMTAwNzU1IHwgMTIwMDAwKQoJCQkJc2hhMV9kc3Q9JChnaXQgaGFzaC1vYmplY3QgJG5hbWUpCgkJCQk7OwoJCQkwMDAwMDApCgkJCQk7OyAjIHJlbW92ZWQKCQkJKikKCQkJCSMgdW5leHBlY3RlZCB0eXBlCgkJCQlldmFsX2dldHRleHRsbiAidW5leHBlY3RlZCBtb2RlIFwkbW9kX2RzdCIgPiYyCgkJCQljb250aW51ZSA7OwoJCQllc2FjCgkJZmkKCQltaXNzaW5nX3NyYz0KCQltaXNzaW5nX2RzdD0KCgkJdGVzdCAkbW9kX3NyYyA9IDE2MDAwMCAmJgoJCSEgR0lUX0RJUj0iJG5hbWUvLmdpdCIgZ2l0LXJldi1wYXJzZSAtcSAtLXZlcmlmeSAkc2hhMV9zcmNeMCA+L2Rldi9udWxsICYmCgkJbWlzc2luZ19zcmM9dAoKCQl0ZXN0ICRtb2RfZHN0ID0gMTYwMDAwICYmCgkJISBHSVRfRElSPSIkbmFtZS8uZ2l0IiBnaXQtcmV2LXBhcnNlIC1xIC0tdmVyaWZ5ICRzaGExX2RzdF4wID4vZGV2L251bGwgJiYKCQltaXNzaW5nX2RzdD10CgoJCXRvdGFsX2NvbW1pdHM9CgkJY2FzZSAiJG1pc3Npbmdfc3JjLCRtaXNzaW5nX2RzdCIgaW4KCQl0LCkKCQkJZXJybXNnPSIkKGV2YWxfZ2V0dGV4dCAiICBXYXJuOiBcJG5hbWUgZG9lc24ndCBjb250YWluIGNvbW1pdCBcJHNoYTFfc3JjIikiCgkJCTs7CgkJLHQpCgkJCWVycm1zZz0iJChldmFsX2dldHRleHQgIiAgV2FybjogXCRuYW1lIGRvZXNuJ3QgY29udGFpbiBjb21taXQgXCRzaGExX2RzdCIpIgoJCQk7OwoJCXQsdCkKCQkJZXJybXNnPSIkKGV2YWxfZ2V0dGV4dCAiICBXYXJuOiBcJG5hbWUgZG9lc24ndCBjb250YWluIGNvbW1pdHMgXCRzaGExX3NyYyBhbmQgXCRzaGExX2RzdCIpIgoJCQk7OwoJCSopCgkJCWVycm1zZz0KCQkJdG90YWxfY29tbWl0cz0kKAoJCQlpZiB0ZXN0ICRtb2Rfc3JjID0gMTYwMDAwIC1hICRtb2RfZHN0ID0gMTYwMDAwCgkJCXRoZW4KCQkJCXJhbmdlPSIkc2hhMV9zcmMuLi4kc2hhMV9kc3QiCgkJCWVsaWYgdGVzdCAkbW9kX3NyYyA9IDE2MDAwMAoJCQl0aGVuCgkJCQlyYW5nZT0kc2hhMV9zcmMKCQkJZWxzZQoJCQkJcmFuZ2U9JHNoYTFfZHN0CgkJCWZpCgkJCUdJVF9ESVI9IiRuYW1lLy5naXQiIFwKCQkJZ2l0IHJldi1saXN0IC0tZmlyc3QtcGFyZW50ICRyYW5nZSAtLSB8IHdjIC1sCgkJCSkKCQkJdG90YWxfY29tbWl0cz0iICgkKCgkdG90YWxfY29tbWl0cyArIDApKSkiCgkJCTs7CgkJZXNhYwoKCQlzaGExX2FiYnJfc3JjPSQoZWNobyAkc2hhMV9zcmMgfCBjdXQgLWMxLTcpCgkJc2hhMV9hYmJyX2RzdD0kKGVjaG8gJHNoYTFfZHN0IHwgY3V0IC1jMS03KQoJCWlmIHRlc3QgJHN0YXR1cyA9IFQKCQl0aGVuCgkJCWJsb2I9IiQoZ2V0dGV4dCAiYmxvYiIpIgoJCQlzdWJtb2R1bGU9IiQoZ2V0dGV4dCAic3VibW9kdWxlIikiCgkJCWlmIHRlc3QgJG1vZF9kc3QgPSAxNjAwMDAKCQkJdGhlbgoJCQkJZWNobyAiKiAkbmFtZSAkc2hhMV9hYmJyX3NyYygkYmxvYiktPiRzaGExX2FiYnJfZHN0KCRzdWJtb2R1bGUpJHRvdGFsX2NvbW1pdHM6IgoJCQllbHNlCgkJCQllY2hvICIqICRuYW1lICRzaGExX2FiYnJfc3JjKCRzdWJtb2R1bGUpLT4kc2hhMV9hYmJyX2RzdCgkYmxvYikkdG90YWxfY29tbWl0czoiCgkJCWZpCgkJZWxzZQoJCQllY2hvICIqICRuYW1lICRzaGExX2FiYnJfc3JjLi4uJHNoYTFfYWJicl9kc3QkdG90YWxfY29tbWl0czoiCgkJZmkKCQlpZiB0ZXN0IC1uICIkZXJybXNnIgoJCXRoZW4KCQkJIyBEb24ndCBnaXZlIGVycm9yIG1zZyBmb3IgbW9kaWZpY2F0aW9uIHdob3NlIGRzdCBpcyBub3Qgc3VibW9kdWxlCgkJCSMgaS5lLiBkZWxldGVkIG9yIGNoYW5nZWQgdG8gYmxvYgoJCQl0ZXN0ICRtb2RfZHN0ID0gMTYwMDAwICYmIGVjaG8gIiRlcnJtc2ciCgkJZWxzZQoJCQlpZiB0ZXN0ICRtb2Rfc3JjID0gMTYwMDAwIC1hICRtb2RfZHN0ID0gMTYwMDAwCgkJCXRoZW4KCQkJCWxpbWl0PQoJCQkJdGVzdCAkc3VtbWFyeV9saW1pdCAtZ3QgMCAmJiBsaW1pdD0iLSRzdW1tYXJ5X2xpbWl0IgoJCQkJR0lUX0RJUj0iJG5hbWUvLmdpdCIgXAoJCQkJZ2l0IGxvZyAkbGltaXQgLS1wcmV0dHk9J2Zvcm1hdDogICVtICVzJyBcCgkJCQktLWZpcnN0LXBhcmVudCAkc2hhMV9zcmMuLi4kc2hhMV9kc3QKCQkJZWxpZiB0ZXN0ICRtb2RfZHN0ID0gMTYwMDAwCgkJCXRoZW4KCQkJCUdJVF9ESVI9IiRuYW1lLy5naXQiIFwKCQkJCWdpdCBsb2cgLS1wcmV0dHk9J2Zvcm1hdDogID4gJXMnIC0xICRzaGExX2RzdAoJCQllbHNlCgkJCQlHSVRfRElSPSIkbmFtZS8uZ2l0IiBcCgkJCQlnaXQgbG9nIC0tcHJldHR5PSdmb3JtYXQ6ICA8ICVzJyAtMSAkc2hhMV9zcmMKCQkJZmkKCQkJZWNobwoJCWZpCgkJZWNobwoJZG9uZSB8CglpZiB0ZXN0IC1uICIkZm9yX3N0YXR1cyI7IHRoZW4KCQlpZiBbIC1uICIkZmlsZXMiIF07IHRoZW4KCQkJZ2V0dGV4dGxuICJTdWJtb2R1bGVzIGNoYW5nZWQgYnV0IG5vdCB1cGRhdGVkOiIgfCBnaXQgc3RyaXBzcGFjZSAtYwoJCWVsc2UKCQkJZ2V0dGV4dGxuICJTdWJtb2R1bGUgY2hhbmdlcyB0byBiZSBjb21taXR0ZWQ6IiB8IGdpdCBzdHJpcHNwYWNlIC1jCgkJZmkKCQlwcmludGYgIlxuIiB8IGdpdCBzdHJpcHNwYWNlIC1jCgkJZ2l0IHN0cmlwc3BhY2UgLWMKCWVsc2UKCQljYXQKCWZpCn0KIwojIExpc3QgYWxsIHN1Ym1vZHVsZXMsIHByZWZpeGVkIHdpdGg6CiMgIC0gc3VibW9kdWxlIG5vdCBpbml0aWFsaXplZAojICArIGRpZmZlcmVudCByZXZpc2lvbiBjaGVja2VkIG91dAojCiMgSWYgLS1jYWNoZWQgd2FzIHNwZWNpZmllZCB0aGUgcmV2aXNpb24gaW4gdGhlIGluZGV4IHdpbGwgYmUgcHJpbnRlZAojIGluc3RlYWQgb2YgdGhlIGN1cnJlbnRseSBjaGVja2VkIG91dCByZXZpc2lvbi4KIwojICRAID0gcmVxdWVzdGVkIHBhdGhzIChkZWZhdWx0IHRvIGFsbCkKIwpjbWRfc3RhdHVzKCkKewoJIyBwYXJzZSAkYXJncyBhZnRlciAic3VibW9kdWxlIC4uLiBzdGF0dXMiLgoJd2hpbGUgdGVzdCAkIyAtbmUgMAoJZG8KCQljYXNlICIkMSIgaW4KCQktcXwtLXF1aWV0KQoJCQlHSVRfUVVJRVQ9MQoJCQk7OwoJCS0tY2FjaGVkKQoJCQljYWNoZWQ9MQoJCQk7OwoJCS0tcmVjdXJzaXZlKQoJCQlyZWN1cnNpdmU9MQoJCQk7OwoJCS0tKQoJCQlzaGlmdAoJCQlicmVhawoJCQk7OwoJCS0qKQoJCQl1c2FnZQoJCQk7OwoJCSopCgkJCWJyZWFrCgkJCTs7CgkJZXNhYwoJCXNoaWZ0Cglkb25lCgoJbW9kdWxlX2xpc3QgIiRAIiB8Cgl3aGlsZSByZWFkIG1vZGUgc2hhMSBzdGFnZSBzbV9wYXRoCglkbwoJCWRpZV9pZl91bm1hdGNoZWQgIiRtb2RlIgoJCW5hbWU9JChtb2R1bGVfbmFtZSAiJHNtX3BhdGgiKSB8fCBleGl0CgkJdXJsPSQoZ2l0IGNvbmZpZyBzdWJtb2R1bGUuIiRuYW1lIi51cmwpCgkJZGlzcGxheXBhdGg9IiRwcmVmaXgkc21fcGF0aCIKCQlpZiB0ZXN0ICIkc3RhZ2UiID0gVQoJCXRoZW4KCQkJc2F5ICJVJHNoYTEgJGRpc3BsYXlwYXRoIgoJCQljb250aW51ZQoJCWZpCgkJaWYgdGVzdCAteiAiJHVybCIgfHwgISB0ZXN0IC1kICIkc21fcGF0aCIvLmdpdCAtbyAtZiAiJHNtX3BhdGgiLy5naXQKCQl0aGVuCgkJCXNheSAiLSRzaGExICRkaXNwbGF5cGF0aCIKCQkJY29udGludWU7CgkJZmkKCQlzZXRfbmFtZV9yZXYgIiRzbV9wYXRoIiAiJHNoYTEiCgkJaWYgZ2l0IGRpZmYtZmlsZXMgLS1pZ25vcmUtc3VibW9kdWxlcz1kaXJ0eSAtLXF1aWV0IC0tICIkc21fcGF0aCIKCQl0aGVuCgkJCXNheSAiICRzaGExICRkaXNwbGF5cGF0aCRyZXZuYW1lIgoJCWVsc2UKCQkJaWYgdGVzdCAteiAiJGNhY2hlZCIKCQkJdGhlbgoJCQkJc2hhMT0kKGNsZWFyX2xvY2FsX2dpdF9lbnY7IGNkICIkc21fcGF0aCIgJiYgZ2l0IHJldi1wYXJzZSAtLXZlcmlmeSBIRUFEKQoJCQkJc2V0X25hbWVfcmV2ICIkc21fcGF0aCIgIiRzaGExIgoJCQlmaQoJCQlzYXkgIiskc2hhMSAkZGlzcGxheXBhdGgkcmV2bmFtZSIKCQlmaQoKCQlpZiB0ZXN0IC1uICIkcmVjdXJzaXZlIgoJCXRoZW4KCQkJKAoJCQkJcHJlZml4PSIkZGlzcGxheXBhdGgvIgoJCQkJY2xlYXJfbG9jYWxfZ2l0X2VudgoJCQkJY2QgIiRzbV9wYXRoIiAmJgoJCQkJZXZhbCBjbWRfc3RhdHVzCgkJCSkgfHwKCQkJZGllICIkKGV2YWxfZ2V0dGV4dCAiRmFpbGVkIHRvIHJlY3Vyc2UgaW50byBzdWJtb2R1bGUgcGF0aCAnXCRzbV9wYXRoJyIpIgoJCWZpCglkb25lCn0KIwojIFN5bmMgcmVtb3RlIHVybHMgZm9yIHN1Ym1vZHVsZXMKIyBUaGlzIG1ha2VzIHRoZSB2YWx1ZSBmb3IgcmVtb3RlLiRyZW1vdGUudXJsIG1hdGNoIHRoZSB2YWx1ZQojIHNwZWNpZmllZCBpbiAuZ2l0bW9kdWxlcy4KIwpjbWRfc3luYygpCnsKCXdoaWxlIHRlc3QgJCMgLW5lIDAKCWRvCgkJY2FzZSAiJDEiIGluCgkJLXF8LS1xdWlldCkKCQkJR0lUX1FVSUVUPTEKCQkJc2hpZnQKCQkJOzsKCQktLXJlY3Vyc2l2ZSkKCQkJcmVjdXJzaXZlPTEKCQkJc2hpZnQKCQkJOzsKCQktLSkKCQkJc2hpZnQKCQkJYnJlYWsKCQkJOzsKCQktKikKCQkJdXNhZ2UKCQkJOzsKCQkqKQoJCQlicmVhawoJCQk7OwoJCWVzYWMKCWRvbmUKCWNkX3RvX3RvcGxldmVsCgltb2R1bGVfbGlzdCAiJEAiIHwKCXdoaWxlIHJlYWQgbW9kZSBzaGExIHN0YWdlIHNtX3BhdGgKCWRvCgkJZGllX2lmX3VubWF0Y2hlZCAiJG1vZGUiCgkJbmFtZT0kKG1vZHVsZV9uYW1lICIkc21fcGF0aCIpCgkJdXJsPSQoZ2l0IGNvbmZpZyAtZiAuZ2l0bW9kdWxlcyAtLWdldCBzdWJtb2R1bGUuIiRuYW1lIi51cmwpCgoJCSMgUG9zc2libHkgYSB1cmwgcmVsYXRpdmUgdG8gcGFyZW50CgkJY2FzZSAiJHVybCIgaW4KCQkuLyp8Li4vKikKCQkJIyByZXdyaXRlIGZvby9iYXIgYXMgLi4vLi4gdG8gZmluZCBwYXRoIGZyb20KCQkJIyBzdWJtb2R1bGUgd29yayB0cmVlIHRvIHN1cGVycHJvamVjdCB3b3JrIHRyZWUKCQkJdXBfcGF0aD0iJChlY2hvICIkc21fcGF0aCIgfCBzZWQgInMvW14vXVteL10qLy4uL2ciKSIgJiYKCQkJIyBndWFyYW50ZWUgYSB0cmFpbGluZyAvCgkJCXVwX3BhdGg9JHt1cF9wYXRoJS99LyAmJgoJCQkjIHBhdGggZnJvbSBzdWJtb2R1bGUgd29yayB0cmVlIHRvIHN1Ym1vZHVsZSBvcmlnaW4gcmVwbwoJCQlzdWJfb3JpZ2luX3VybD0kKHJlc29sdmVfcmVsYXRpdmVfdXJsICIkdXJsIiAiJHVwX3BhdGgiKSAmJgoJCQkjIHBhdGggZnJvbSBzdXBlcnByb2plY3Qgd29yayB0cmVlIHRvIHN1Ym1vZHVsZSBvcmlnaW4gcmVwbwoJCQlzdXBlcl9jb25maWdfdXJsPSQocmVzb2x2ZV9yZWxhdGl2ZV91cmwgIiR1cmwiKSB8fCBleGl0CgkJCTs7CgkJKikKCQkJc3ViX29yaWdpbl91cmw9IiR1cmwiCgkJCXN1cGVyX2NvbmZpZ191cmw9IiR1cmwiCgkJCTs7CgkJZXNhYwoKCQlpZiBnaXQgY29uZmlnICJzdWJtb2R1bGUuJG5hbWUudXJsIiA+L2Rldi9udWxsIDI+L2Rldi9udWxsCgkJdGhlbgoJCQlzYXkgIiQoZXZhbF9nZXR0ZXh0ICJTeW5jaHJvbml6aW5nIHN1Ym1vZHVsZSB1cmwgZm9yICdcJHByZWZpeFwkc21fcGF0aCciKSIKCQkJZ2l0IGNvbmZpZyBzdWJtb2R1bGUuIiRuYW1lIi51cmwgIiRzdXBlcl9jb25maWdfdXJsIgoKCQkJaWYgdGVzdCAtZSAiJHNtX3BhdGgiLy5naXQKCQkJdGhlbgoJCQkoCgkJCQljbGVhcl9sb2NhbF9naXRfZW52CgkJCQljZCAiJHNtX3BhdGgiCgkJCQlyZW1vdGU9JChnZXRfZGVmYXVsdF9yZW1vdGUpCgkJCQlnaXQgY29uZmlnIHJlbW90ZS4iJHJlbW90ZSIudXJsICIkc3ViX29yaWdpbl91cmwiCgoJCQkJaWYgdGVzdCAtbiAiJHJlY3Vyc2l2ZSIKCQkJCXRoZW4KCQkJCQlwcmVmaXg9IiRwcmVmaXgkc21fcGF0aC8iCgkJCQkJZXZhbCBjbWRfc3luYwoJCQkJZmkKCQkJKQoJCQlmaQoJCWZpCglkb25lCn0KCiMgVGhpcyBsb29wIHBhcnNlcyB0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50cyB0byBmaW5kIHRoZQojIHN1YmNvbW1hbmQgbmFtZSB0byBkaXNwYXRjaC4gIFBhcnNpbmcgb2YgdGhlIHN1YmNvbW1hbmQgc3BlY2lmaWMKIyBvcHRpb25zIGFyZSBwcmltYXJpbHkgZG9uZSBieSB0aGUgc3ViY29tbWFuZCBpbXBsZW1lbnRhdGlvbnMuCiMgU3ViY29tbWFuZCBzcGVjaWZpYyBvcHRpb25zIHN1Y2ggYXMgLS1icmFuY2ggYW5kIC0tY2FjaGVkIGFyZQojIHBhcnNlZCBoZXJlIGFzIHdlbGwsIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LgoKd2hpbGUgdGVzdCAkIyAhPSAwICYmIHRlc3QgLXogIiRjb21tYW5kIgpkbwoJY2FzZSAiJDEiIGluCglhZGQgfCBmb3JlYWNoIHwgaW5pdCB8IHVwZGF0ZSB8IHN0YXR1cyB8IHN1bW1hcnkgfCBzeW5jKQoJCWNvbW1hbmQ9JDEKCQk7OwoJLXF8LS1xdWlldCkKCQlHSVRfUVVJRVQ9MQoJCTs7CgktYnwtLWJyYW5jaCkKCQljYXNlICIkMiIgaW4KCQknJykKCQkJdXNhZ2UKCQkJOzsKCQllc2FjCgkJYnJhbmNoPSIkMiI7IHNoaWZ0CgkJOzsKCS0tY2FjaGVkKQoJCWNhY2hlZD0iJDEiCgkJOzsKCS0tKQoJCWJyZWFrCgkJOzsKCS0qKQoJCXVzYWdlCgkJOzsKCSopCgkJYnJlYWsKCQk7OwoJZXNhYwoJc2hpZnQKZG9uZQoKIyBObyBjb21tYW5kIHdvcmQgZGVmYXVsdHMgdG8gInN0YXR1cyIKaWYgdGVzdCAteiAiJGNvbW1hbmQiCnRoZW4KICAgIGlmIHRlc3QgJCMgPSAwCiAgICB0aGVuCgljb21tYW5kPXN0YXR1cwogICAgZWxzZQoJdXNhZ2UKICAgIGZpCmZpCgojICItYiBicmFuY2giIGlzIGFjY2VwdGVkIG9ubHkgYnkgImFkZCIKaWYgdGVzdCAtbiAiJGJyYW5jaCIgJiYgdGVzdCAiJGNvbW1hbmQiICE9IGFkZAp0aGVuCgl1c2FnZQpmaQoKIyAiLS1jYWNoZWQiIGlzIGFjY2VwdGVkIG9ubHkgYnkgInN0YXR1cyIgYW5kICJzdW1tYXJ5IgppZiB0ZXN0IC1uICIkY2FjaGVkIiAmJiB0ZXN0ICIkY29tbWFuZCIgIT0gc3RhdHVzIC1hICIkY29tbWFuZCIgIT0gc3VtbWFyeQp0aGVuCgl1c2FnZQpmaQoKImNtZF8kY29tbWFuZCIgIiRAIgo=",
    "text": "#!/bin/sh\n#\n# git-submodule.sh: add, init, update or list git submodules\n#\n# Copyright (c) 2007 Lars Hjemli\n\ndashless=$(basename \"$0\" | sed -e 's/-/ /')\nUSAGE=\"[--quiet] add [-b <branch>] [-f|--force] [--name <name>] [--reference <repository>] [--] <repository> [<path>]\n   or: $dashless [--quiet] status [--cached] [--recursive] [--] [<path>...]\n   or: $dashless [--quiet] init [--] [<path>...]\n   or: $dashless [--quiet] update [--init] [--remote] [-N|--no-fetch] [-f|--force] [--rebase] [--reference <repository>] [--merge] [--recursive] [--] [<path>...]\n   or: $dashless [--quiet] summary [--cached|--files] [--summary-limit <n>] [commit] [--] [<path>...]\n   or: $dashless [--quiet] foreach [--recursive] <command>\n   or: $dashless [--quiet] sync [--recursive] [--] [<path>...]\"\nOPTIONS_SPEC=\n. git-sh-setup\n. git-sh-i18n\n. git-parse-remote\nrequire_work_tree\n\ncommand=\nbranch=\nforce=\nreference=\ncached=\nrecursive=\ninit=\nfiles=\nremote=\nnofetch=\nupdate=\nprefix=\ncustom_name=\n\n# The function takes at most 2 arguments. The first argument is the\n# URL that navigates to the submodule origin repo. When relative, this URL\n# is relative to the superproject origin URL repo. The second up_path\n# argument, if specified, is the relative path that navigates\n# from the submodule working tree to the superproject working tree.\n#\n# The output of the function is the origin URL of the submodule.\n#\n# The output will either be an absolute URL or filesystem path (if the\n# superproject origin URL is an absolute URL or filesystem path,\n# respectively) or a relative file system path (if the superproject\n# origin URL is a relative file system path).\n#\n# When the output is a relative file system path, the path is either\n# relative to the submodule working tree, if up_path is specified, or to\n# the superproject working tree otherwise.\nresolve_relative_url ()\n{\n\tremote=$(get_default_remote)\n\tremoteurl=$(git config \"remote.$remote.url\") ||\n\t\tremoteurl=$(pwd) # the repository is its own authoritative upstream\n\turl=\"$1\"\n\tremoteurl=${remoteurl%/}\n\tsep=/\n\tup_path=\"$2\"\n\n\tcase \"$remoteurl\" in\n\t*:*|/*)\n\t\tis_relative=\n\t\t;;\n\t./*|../*)\n\t\tis_relative=t\n\t\t;;\n\t*)\n\t\tis_relative=t\n\t\tremoteurl=\"./$remoteurl\"\n\t\t;;\n\tesac\n\n\twhile test -n \"$url\"\n\tdo\n\t\tcase \"$url\" in\n\t\t../*)\n\t\t\turl=\"${url#../}\"\n\t\t\tcase \"$remoteurl\" in\n\t\t\t*/*)\n\t\t\t\tremoteurl=\"${remoteurl%/*}\"\n\t\t\t\t;;\n\t\t\t*:*)\n\t\t\t\tremoteurl=\"${remoteurl%:*}\"\n\t\t\t\tsep=:\n\t\t\t\t;;\n\t\t\t*)\n\t\t\t\tif test -z \"$is_relative\" || test \".\" = \"$remoteurl\"\n\t\t\t\tthen\n\t\t\t\t\tdie \"$(eval_gettext \"cannot strip one component off url '\\$remoteurl'\")\"\n\t\t\t\telse\n\t\t\t\t\tremoteurl=.\n\t\t\t\tfi\n\t\t\t\t;;\n\t\t\tesac\n\t\t\t;;\n\t\t./*)\n\t\t\turl=\"${url#./}\"\n\t\t\t;;\n\t\t*)\n\t\t\tbreak;;\n\t\tesac\n\tdone\n\tremoteurl=\"$remoteurl$sep${url%/}\"\n\techo \"${is_relative:+${up_path}}${remoteurl#./}\"\n}\n\n#\n# Get submodule info for registered submodules\n# $@ = path to limit submodule list\n#\nmodule_list()\n{\n\t(\n\t\tgit ls-files --error-unmatch --stage -- \"$@\" ||\n\t\techo \"unmatched pathspec exists\"\n\t) |\n\tperl -e '\n\tmy %unmerged = ();\n\tmy ($null_sha1) = (\"0\" x 40);\n\tmy @out = ();\n\tmy $unmatched = 0;\n\twhile (<STDIN>) {\n\t\tif (/^unmatched pathspec/) {\n\t\t\t$unmatched = 1;\n\t\t\tnext;\n\t\t}\n\t\tchomp;\n\t\tmy ($mode, $sha1, $stage, $path) =\n\t\t\t/^([0-7]+) ([0-9a-f]{40}) ([0-3])\\t(.*)$/;\n\t\tnext unless $mode eq \"160000\";\n\t\tif ($stage ne \"0\") {\n\t\t\tif (!$unmerged{$path}++) {\n\t\t\t\tpush @out, \"$mode $null_sha1 U\\t$path\\n\";\n\t\t\t}\n\t\t\tnext;\n\t\t}\n\t\tpush @out, \"$_\\n\";\n\t}\n\tif ($unmatched) {\n\t\tprint \"#unmatched\\n\";\n\t} else {\n\t\tprint for (@out);\n\t}\n\t'\n}\n\ndie_if_unmatched ()\n{\n\tif test \"$1\" = \"#unmatched\"\n\tthen\n\t\texit 1\n\tfi\n}\n\n#\n# Print a submodule configuration setting\n#\n# $1 = submodule name\n# $2 = option name\n# $3 = default value\n#\n# Checks in the usual git-config places first (for overrides),\n# otherwise it falls back on .gitmodules.  This allows you to\n# distribute project-wide defaults in .gitmodules, while still\n# customizing individual repositories if necessary.  If the option is\n# not in .gitmodules either, print a default value.\n#\nget_submodule_config () {\n\tname=\"$1\"\n\toption=\"$2\"\n\tdefault=\"$3\"\n\tvalue=$(git config submodule.\"$name\".\"$option\")\n\tif test -z \"$value\"\n\tthen\n\t\tvalue=$(git config -f .gitmodules submodule.\"$name\".\"$option\")\n\tfi\n\tprintf '%s' \"${value:-$default}\"\n}\n\n\n#\n# Map submodule path to submodule name\n#\n# $1 = path\n#\nmodule_name()\n{\n\t# Do we have \"submodule.<something>.path = $1\" defined in .gitmodules file?\n\tsm_path=\"$1\"\n\tre=$(printf '%s\\n' \"$1\" | sed -e 's/[].[^$\\\\*]/\\\\&/g')\n\tname=$( git config -f .gitmodules --get-regexp '^submodule\\..*\\.path$' |\n\t\tsed -n -e 's|^submodule\\.\\(.*\\)\\.path '\"$re\"'$|\\1|p' )\n\ttest -z \"$name\" &&\n\tdie \"$(eval_gettext \"No submodule mapping found in .gitmodules for path '\\$sm_path'\")\"\n\techo \"$name\"\n}\n\n#\n# Clone a submodule\n#\n# Prior to calling, cmd_update checks that a possibly existing\n# path is not a git repository.\n# Likewise, cmd_add checks that path does not exist at all,\n# since it is the location of a new submodule.\n#\nmodule_clone()\n{\n\tsm_path=$1\n\tname=$2\n\turl=$3\n\treference=\"$4\"\n\tquiet=\n\tif test -n \"$GIT_QUIET\"\n\tthen\n\t\tquiet=-q\n\tfi\n\n\tgitdir=\n\tgitdir_base=\n\tbase_name=$(dirname \"$name\")\n\n\tgitdir=$(git rev-parse --git-dir)\n\tgitdir_base=\"$gitdir/modules/$base_name\"\n\tgitdir=\"$gitdir/modules/$name\"\n\n\tif test -d \"$gitdir\"\n\tthen\n\t\tmkdir -p \"$sm_path\"\n\t\trm -f \"$gitdir/index\"\n\telse\n\t\tmkdir -p \"$gitdir_base\"\n\t\t(\n\t\t\tclear_local_git_env\n\t\t\tgit clone $quiet -n ${reference:+\"$reference\"} \\\n\t\t\t\t--separate-git-dir \"$gitdir\" \"$url\" \"$sm_path\"\n\t\t) ||\n\t\tdie \"$(eval_gettext \"Clone of '\\$url' into submodule path '\\$sm_path' failed\")\"\n\tfi\n\n\t# We already are at the root of the work tree but cd_to_toplevel will\n\t# resolve any symlinks that might be present in $PWD\n\ta=$(cd_to_toplevel && cd \"$gitdir\" && pwd)/\n\tb=$(cd_to_toplevel && cd \"$sm_path\" && pwd)/\n\t# normalize Windows-style absolute paths to POSIX-style absolute paths\n\tcase $a in [a-zA-Z]:/*) a=/${a%%:*}${a#*:} ;; esac\n\tcase $b in [a-zA-Z]:/*) b=/${b%%:*}${b#*:} ;; esac\n\t# Remove all common leading directories after a sanity check\n\tif test \"${a#$b}\" != \"$a\" || test \"${b#$a}\" != \"$b\"; then\n\t\tdie \"$(eval_gettext \"Gitdir '\\$a' is part of the submodule path '\\$b' or vice versa\")\"\n\tfi\n\twhile test \"${a%%/*}\" = \"${b%%/*}\"\n\tdo\n\t\ta=${a#*/}\n\t\tb=${b#*/}\n\tdone\n\t# Now chop off the trailing '/'s that were added in the beginning\n\ta=${a%/}\n\tb=${b%/}\n\n\t# Turn each leading \"*/\" component into \"../\"\n\trel=$(echo $b | sed -e 's|[^/][^/]*|..|g')\n\techo \"gitdir: $rel/$a\" >\"$sm_path/.git\"\n\n\trel=$(echo $a | sed -e 's|[^/][^/]*|..|g')\n\t(clear_local_git_env; cd \"$sm_path\" && GIT_WORK_TREE=. git config core.worktree \"$rel/$b\")\n}\n\n#\n# Add a new submodule to the working tree, .gitmodules and the index\n#\n# $@ = repo path\n#\n# optional branch is stored in global branch variable\n#\ncmd_add()\n{\n\t# parse $args after \"submodule ... add\".\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-b | --branch)\n\t\t\tcase \"$2\" in '') usage ;; esac\n\t\t\tbranch=$2\n\t\t\tshift\n\t\t\t;;\n\t\t-f | --force)\n\t\t\tforce=$1\n\t\t\t;;\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\t;;\n\t\t--reference)\n\t\t\tcase \"$2\" in '') usage ;; esac\n\t\t\treference=\"--reference=$2\"\n\t\t\tshift\n\t\t\t;;\n\t\t--reference=*)\n\t\t\treference=\"$1\"\n\t\t\t;;\n\t\t--name)\n\t\t\tcase \"$2\" in '') usage ;; esac\n\t\t\tcustom_name=$2\n\t\t\tshift\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\tshift\n\tdone\n\n\trepo=$1\n\tsm_path=$2\n\n\tif test -z \"$sm_path\"; then\n\t\tsm_path=$(echo \"$repo\" |\n\t\t\tsed -e 's|/$||' -e 's|:*/*\\.git$||' -e 's|.*[/:]||g')\n\tfi\n\n\tif test -z \"$repo\" -o -z \"$sm_path\"; then\n\t\tusage\n\tfi\n\n\t# assure repo is absolute or relative to parent\n\tcase \"$repo\" in\n\t./*|../*)\n\t\t# dereference source url relative to parent's url\n\t\trealrepo=$(resolve_relative_url \"$repo\") || exit\n\t\t;;\n\t*:*|/*)\n\t\t# absolute url\n\t\trealrepo=$repo\n\t\t;;\n\t*)\n\t\tdie \"$(eval_gettext \"repo URL: '\\$repo' must be absolute or begin with ./|../\")\"\n\t;;\n\tesac\n\n\t# normalize path:\n\t# multiple //; leading ./; /./; /../; trailing /\n\tsm_path=$(printf '%s/\\n' \"$sm_path\" |\n\t\tsed -e '\n\t\t\ts|//*|/|g\n\t\t\ts|^\\(\\./\\)*||\n\t\t\ts|/\\./|/|g\n\t\t\t:start\n\t\t\ts|\\([^/]*\\)/\\.\\./||\n\t\t\ttstart\n\t\t\ts|/*$||\n\t\t')\n\tgit ls-files --error-unmatch \"$sm_path\" > /dev/null 2>&1 &&\n\tdie \"$(eval_gettext \"'\\$sm_path' already exists in the index\")\"\n\n\tif test -z \"$force\" && ! git add --dry-run --ignore-missing \"$sm_path\" > /dev/null 2>&1\n\tthen\n\t\teval_gettextln \"The following path is ignored by one of your .gitignore files:\n\\$sm_path\nUse -f if you really want to add it.\" >&2\n\t\texit 1\n\tfi\n\n\tif test -n \"$custom_name\"\n\tthen\n\t\tsm_name=\"$custom_name\"\n\telse\n\t\tsm_name=\"$sm_path\"\n\tfi\n\n\t# perhaps the path exists and is already a git repo, else clone it\n\tif test -e \"$sm_path\"\n\tthen\n\t\tif test -d \"$sm_path\"/.git -o -f \"$sm_path\"/.git\n\t\tthen\n\t\t\teval_gettextln \"Adding existing repo at '\\$sm_path' to the index\"\n\t\telse\n\t\t\tdie \"$(eval_gettext \"'\\$sm_path' already exists and is not a valid git repo\")\"\n\t\tfi\n\n\telse\n\t\tif test -d \".git/modules/$sm_name\"\n\t\tthen\n\t\t\tif test -z \"$force\"\n\t\t\tthen\n\t\t\t\techo >&2 \"$(eval_gettext \"A git directory for '\\$sm_name' is found locally with remote(s):\")\"\n\t\t\t\tGIT_DIR=\".git/modules/$sm_name\" GIT_WORK_TREE=. git remote -v | grep '(fetch)' | sed -e s,^,\"  \", -e s,' (fetch)',, >&2\n\t\t\t\techo >&2 \"$(eval_gettext \"If you want to reuse this local git directory instead of cloning again from\")\"\n\t\t\t\techo >&2 \"  $realrepo\"\n\t\t\t\techo >&2 \"$(eval_gettext \"use the '--force' option. If the local git directory is not the correct repo\")\"\n\t\t\t\tdie \"$(eval_gettext \"or you are unsure what this means choose another name with the '--name' option.\")\"\n\t\t\telse\n\t\t\t\techo \"$(eval_gettext \"Reactivating local git directory for submodule '\\$sm_name'.\")\"\n\t\t\tfi\n\t\tfi\n\t\tmodule_clone \"$sm_path\" \"$sm_name\" \"$realrepo\" \"$reference\" || exit\n\t\t(\n\t\t\tclear_local_git_env\n\t\t\tcd \"$sm_path\" &&\n\t\t\t# ash fails to wordsplit ${branch:+-b \"$branch\"...}\n\t\t\tcase \"$branch\" in\n\t\t\t'') git checkout -f -q ;;\n\t\t\t?*) git checkout -f -q -B \"$branch\" \"origin/$branch\" ;;\n\t\t\tesac\n\t\t) || die \"$(eval_gettext \"Unable to checkout submodule '\\$sm_path'\")\"\n\tfi\n\tgit config submodule.\"$sm_name\".url \"$realrepo\"\n\n\tgit add $force \"$sm_path\" ||\n\tdie \"$(eval_gettext \"Failed to add submodule '\\$sm_path'\")\"\n\n\tgit config -f .gitmodules submodule.\"$sm_name\".path \"$sm_path\" &&\n\tgit config -f .gitmodules submodule.\"$sm_name\".url \"$repo\" &&\n\tif test -n \"$branch\"\n\tthen\n\t\tgit config -f .gitmodules submodule.\"$sm_name\".branch \"$branch\"\n\tfi &&\n\tgit add --force .gitmodules ||\n\tdie \"$(eval_gettext \"Failed to register submodule '\\$sm_path'\")\"\n}\n\n#\n# Execute an arbitrary command sequence in each checked out\n# submodule\n#\n# $@ = command to execute\n#\ncmd_foreach()\n{\n\t# parse $args after \"submodule ... foreach\".\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\t;;\n\t\t--recursive)\n\t\t\trecursive=1\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\tshift\n\tdone\n\n\ttoplevel=$(pwd)\n\n\t# dup stdin so that it can be restored when running the external\n\t# command in the subshell (and a recursive call to this function)\n\texec 3<&0\n\n\tmodule_list |\n\twhile read mode sha1 stage sm_path\n\tdo\n\t\tdie_if_unmatched \"$mode\"\n\t\tif test -e \"$sm_path\"/.git\n\t\tthen\n\t\t\tsay \"$(eval_gettext \"Entering '\\$prefix\\$sm_path'\")\"\n\t\t\tname=$(module_name \"$sm_path\")\n\t\t\t(\n\t\t\t\tprefix=\"$prefix$sm_path/\"\n\t\t\t\tclear_local_git_env\n\t\t\t\t# we make $path available to scripts ...\n\t\t\t\tpath=$sm_path\n\t\t\t\tcd \"$sm_path\" &&\n\t\t\t\teval \"$@\" &&\n\t\t\t\tif test -n \"$recursive\"\n\t\t\t\tthen\n\t\t\t\t\tcmd_foreach \"--recursive\" \"$@\"\n\t\t\t\tfi\n\t\t\t) <&3 3<&- ||\n\t\t\tdie \"$(eval_gettext \"Stopping at '\\$sm_path'; script returned non-zero status.\")\"\n\t\tfi\n\tdone\n}\n\n#\n# Register submodules in .git/config\n#\n# $@ = requested paths (default to all)\n#\ncmd_init()\n{\n\t# parse $args after \"submodule ... init\".\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\tshift\n\tdone\n\n\tmodule_list \"$@\" |\n\twhile read mode sha1 stage sm_path\n\tdo\n\t\tdie_if_unmatched \"$mode\"\n\t\tname=$(module_name \"$sm_path\") || exit\n\n\t\t# Copy url setting when it is not set yet\n\t\tif test -z \"$(git config \"submodule.$name.url\")\"\n\t\tthen\n\t\t\turl=$(git config -f .gitmodules submodule.\"$name\".url)\n\t\t\ttest -z \"$url\" &&\n\t\t\tdie \"$(eval_gettext \"No url found for submodule path '\\$sm_path' in .gitmodules\")\"\n\n\t\t\t# Possibly a url relative to parent\n\t\t\tcase \"$url\" in\n\t\t\t./*|../*)\n\t\t\t\turl=$(resolve_relative_url \"$url\") || exit\n\t\t\t\t;;\n\t\t\tesac\n\t\t\tgit config submodule.\"$name\".url \"$url\" ||\n\t\t\tdie \"$(eval_gettext \"Failed to register url for submodule path '\\$sm_path'\")\"\n\n\t\t\tsay \"$(eval_gettext \"Submodule '\\$name' (\\$url) registered for path '\\$sm_path'\")\"\n\t\tfi\n\n\t\t# Copy \"update\" setting when it is not set yet\n\t\tupd=\"$(git config -f .gitmodules submodule.\"$name\".update)\"\n\t\ttest -z \"$upd\" ||\n\t\ttest -n \"$(git config submodule.\"$name\".update)\" ||\n\t\tgit config submodule.\"$name\".update \"$upd\" ||\n\t\tdie \"$(eval_gettext \"Failed to register update mode for submodule path '\\$sm_path'\")\"\n\tdone\n}\n\n#\n# Update each submodule path to correct revision, using clone and checkout as needed\n#\n# $@ = requested paths (default to all)\n#\ncmd_update()\n{\n\t# parse $args after \"submodule ... update\".\n\torig_flags=\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\t;;\n\t\t-i|--init)\n\t\t\tinit=1\n\t\t\t;;\n\t\t--remote)\n\t\t\tremote=1\n\t\t\t;;\n\t\t-N|--no-fetch)\n\t\t\tnofetch=1\n\t\t\t;;\n\t\t-f|--force)\n\t\t\tforce=$1\n\t\t\t;;\n\t\t-r|--rebase)\n\t\t\tupdate=\"rebase\"\n\t\t\t;;\n\t\t--reference)\n\t\t\tcase \"$2\" in '') usage ;; esac\n\t\t\treference=\"--reference=$2\"\n\t\t\torig_flags=\"$orig_flags $(git rev-parse --sq-quote \"$1\")\"\n\t\t\tshift\n\t\t\t;;\n\t\t--reference=*)\n\t\t\treference=\"$1\"\n\t\t\t;;\n\t\t-m|--merge)\n\t\t\tupdate=\"merge\"\n\t\t\t;;\n\t\t--recursive)\n\t\t\trecursive=1\n\t\t\t;;\n\t\t--checkout)\n\t\t\tupdate=\"checkout\"\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\torig_flags=\"$orig_flags $(git rev-parse --sq-quote \"$1\")\"\n\t\tshift\n\tdone\n\n\tif test -n \"$init\"\n\tthen\n\t\tcmd_init \"--\" \"$@\" || return\n\tfi\n\n\tcloned_modules=\n\tmodule_list \"$@\" | {\n\terr=\n\twhile read mode sha1 stage sm_path\n\tdo\n\t\tdie_if_unmatched \"$mode\"\n\t\tif test \"$stage\" = U\n\t\tthen\n\t\t\techo >&2 \"Skipping unmerged submodule $sm_path\"\n\t\t\tcontinue\n\t\tfi\n\t\tname=$(module_name \"$sm_path\") || exit\n\t\turl=$(git config submodule.\"$name\".url)\n\t\tbranch=$(get_submodule_config \"$name\" branch master)\n\t\tif ! test -z \"$update\"\n\t\tthen\n\t\t\tupdate_module=$update\n\t\telse\n\t\t\tupdate_module=$(git config submodule.\"$name\".update)\n\t\tfi\n\n\t\tif test \"$update_module\" = \"none\"\n\t\tthen\n\t\t\techo \"Skipping submodule '$sm_path'\"\n\t\t\tcontinue\n\t\tfi\n\n\t\tif test -z \"$url\"\n\t\tthen\n\t\t\t# Only mention uninitialized submodules when its\n\t\t\t# path have been specified\n\t\t\ttest \"$#\" != \"0\" &&\n\t\t\tsay \"$(eval_gettext \"Submodule path '\\$sm_path' not initialized\nMaybe you want to use 'update --init'?\")\"\n\t\t\tcontinue\n\t\tfi\n\n\t\tif ! test -d \"$sm_path\"/.git -o -f \"$sm_path\"/.git\n\t\tthen\n\t\t\tmodule_clone \"$sm_path\" \"$name\" \"$url\" \"$reference\" || exit\n\t\t\tcloned_modules=\"$cloned_modules;$name\"\n\t\t\tsubsha1=\n\t\telse\n\t\t\tsubsha1=$(clear_local_git_env; cd \"$sm_path\" &&\n\t\t\t\tgit rev-parse --verify HEAD) ||\n\t\t\tdie \"$(eval_gettext \"Unable to find current revision in submodule path '\\$sm_path'\")\"\n\t\tfi\n\n\t\tif test -n \"$remote\"\n\t\tthen\n\t\t\tif test -z \"$nofetch\"\n\t\t\tthen\n\t\t\t\t# Fetch remote before determining tracking $sha1\n\t\t\t\t(clear_local_git_env; cd \"$sm_path\" && git-fetch) ||\n\t\t\t\tdie \"$(eval_gettext \"Unable to fetch in submodule path '\\$sm_path'\")\"\n\t\t\tfi\n\t\t\tremote_name=$(clear_local_git_env; cd \"$sm_path\" && get_default_remote)\n\t\t\tsha1=$(clear_local_git_env; cd \"$sm_path\" &&\n\t\t\t\tgit rev-parse --verify \"${remote_name}/${branch}\") ||\n\t\t\tdie \"$(eval_gettext \"Unable to find current ${remote_name}/${branch} revision in submodule path '\\$sm_path'\")\"\n\t\tfi\n\n\t\tif test \"$subsha1\" != \"$sha1\" -o -n \"$force\"\n\t\tthen\n\t\t\tsubforce=$force\n\t\t\t# If we don't already have a -f flag and the submodule has never been checked out\n\t\t\tif test -z \"$subsha1\" -a -z \"$force\"\n\t\t\tthen\n\t\t\t\tsubforce=\"-f\"\n\t\t\tfi\n\n\t\t\tif test -z \"$nofetch\"\n\t\t\tthen\n\t\t\t\t# Run fetch only if $sha1 isn't present or it\n\t\t\t\t# is not reachable from a ref.\n\t\t\t\t(clear_local_git_env; cd \"$sm_path\" &&\n\t\t\t\t\t( (rev=$(git rev-list -n 1 $sha1 --not --all 2>/dev/null) &&\n\t\t\t\t\t test -z \"$rev\") || git-fetch)) ||\n\t\t\t\tdie \"$(eval_gettext \"Unable to fetch in submodule path '\\$sm_path'\")\"\n\t\t\tfi\n\n\t\t\t# Is this something we just cloned?\n\t\t\tcase \";$cloned_modules;\" in\n\t\t\t*\";$name;\"*)\n\t\t\t\t# then there is no local change to integrate\n\t\t\t\tupdate_module= ;;\n\t\t\tesac\n\n\t\t\tmust_die_on_failure=\n\t\t\tcase \"$update_module\" in\n\t\t\trebase)\n\t\t\t\tcommand=\"git rebase\"\n\t\t\t\tdie_msg=\"$(eval_gettext \"Unable to rebase '\\$sha1' in submodule path '\\$sm_path'\")\"\n\t\t\t\tsay_msg=\"$(eval_gettext \"Submodule path '\\$sm_path': rebased into '\\$sha1'\")\"\n\t\t\t\tmust_die_on_failure=yes\n\t\t\t\t;;\n\t\t\tmerge)\n\t\t\t\tcommand=\"git merge\"\n\t\t\t\tdie_msg=\"$(eval_gettext \"Unable to merge '\\$sha1' in submodule path '\\$sm_path'\")\"\n\t\t\t\tsay_msg=\"$(eval_gettext \"Submodule path '\\$sm_path': merged in '\\$sha1'\")\"\n\t\t\t\tmust_die_on_failure=yes\n\t\t\t\t;;\n\t\t\t*)\n\t\t\t\tcommand=\"git checkout $subforce -q\"\n\t\t\t\tdie_msg=\"$(eval_gettext \"Unable to checkout '\\$sha1' in submodule path '\\$sm_path'\")\"\n\t\t\t\tsay_msg=\"$(eval_gettext \"Submodule path '\\$sm_path': checked out '\\$sha1'\")\"\n\t\t\t\t;;\n\t\t\tesac\n\n\t\t\tif (clear_local_git_env; cd \"$sm_path\" && $command \"$sha1\")\n\t\t\tthen\n\t\t\t\tsay \"$say_msg\"\n\t\t\telif test -n \"$must_die_on_failure\"\n\t\t\tthen\n\t\t\t\tdie_with_status 2 \"$die_msg\"\n\t\t\telse\n\t\t\t\terr=\"${err};$die_msg\"\n\t\t\t\tcontinue\n\t\t\tfi\n\t\tfi\n\n\t\tif test -n \"$recursive\"\n\t\tthen\n\t\t\t(clear_local_git_env; cd \"$sm_path\" && eval cmd_update \"$orig_flags\")\n\t\t\tres=$?\n\t\t\tif test $res -gt 0\n\t\t\tthen\n\t\t\t\tdie_msg=\"$(eval_gettext \"Failed to recurse into submodule path '\\$sm_path'\")\"\n\t\t\t\tif test $res -eq 1\n\t\t\t\tthen\n\t\t\t\t\terr=\"${err};$die_msg\"\n\t\t\t\t\tcontinue\n\t\t\t\telse\n\t\t\t\t\tdie_with_status $res \"$die_msg\"\n\t\t\t\tfi\n\t\t\tfi\n\t\tfi\n\tdone\n\n\tif test -n \"$err\"\n\tthen\n\t\tOIFS=$IFS\n\t\tIFS=';'\n\t\tfor e in $err\n\t\tdo\n\t\t\tif test -n \"$e\"\n\t\t\tthen\n\t\t\t\techo >&2 \"$e\"\n\t\t\tfi\n\t\tdone\n\t\tIFS=$OIFS\n\t\texit 1\n\tfi\n\t}\n}\n\nset_name_rev () {\n\trevname=$( (\n\t\tclear_local_git_env\n\t\tcd \"$1\" && {\n\t\t\tgit describe \"$2\" 2>/dev/null ||\n\t\t\tgit describe --tags \"$2\" 2>/dev/null ||\n\t\t\tgit describe --contains \"$2\" 2>/dev/null ||\n\t\t\tgit describe --all --always \"$2\"\n\t\t}\n\t) )\n\ttest -z \"$revname\" || revname=\" ($revname)\"\n}\n#\n# Show commit summary for submodules in index or working tree\n#\n# If '--cached' is given, show summary between index and given commit,\n# or between working tree and given commit\n#\n# $@ = [commit (default 'HEAD'),] requested paths (default all)\n#\ncmd_summary() {\n\tsummary_limit=-1\n\tfor_status=\n\tdiff_cmd=diff-index\n\n\t# parse $args after \"submodule ... summary\".\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t--cached)\n\t\t\tcached=\"$1\"\n\t\t\t;;\n\t\t--files)\n\t\t\tfiles=\"$1\"\n\t\t\t;;\n\t\t--for-status)\n\t\t\tfor_status=\"$1\"\n\t\t\t;;\n\t\t-n|--summary-limit)\n\t\t\tif summary_limit=$(($2 + 0)) 2>/dev/null && test \"$summary_limit\" = \"$2\"\n\t\t\tthen\n\t\t\t\t:\n\t\t\telse\n\t\t\t\tusage\n\t\t\tfi\n\t\t\tshift\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\tshift\n\tdone\n\n\ttest $summary_limit = 0 && return\n\n\tif rev=$(git rev-parse -q --verify --default HEAD ${1+\"$1\"})\n\tthen\n\t\thead=$rev\n\t\ttest $# = 0 || shift\n\telif test -z \"$1\" -o \"$1\" = \"HEAD\"\n\tthen\n\t\t# before the first commit: compare with an empty tree\n\t\thead=$(git hash-object -w -t tree --stdin </dev/null)\n\t\ttest -z \"$1\" || shift\n\telse\n\t\thead=\"HEAD\"\n\tfi\n\n\tif [ -n \"$files\" ]\n\tthen\n\t\ttest -n \"$cached\" &&\n\t\tdie \"$(gettext \"The --cached option cannot be used with the --files option\")\"\n\t\tdiff_cmd=diff-files\n\t\thead=\n\tfi\n\n\tcd_to_toplevel\n\t# Get modified modules cared by user\n\tmodules=$(git $diff_cmd $cached --ignore-submodules=dirty --raw $head -- \"$@\" |\n\t\tsane_egrep '^:([0-7]* )?160000' |\n\t\twhile read mod_src mod_dst sha1_src sha1_dst status name\n\t\tdo\n\t\t\t# Always show modules deleted or type-changed (blob<->module)\n\t\t\ttest $status = D -o $status = T && echo \"$name\" && continue\n\t\t\t# Also show added or modified modules which are checked out\n\t\t\tGIT_DIR=\"$name/.git\" git-rev-parse --git-dir >/dev/null 2>&1 &&\n\t\t\techo \"$name\"\n\t\tdone\n\t)\n\n\ttest -z \"$modules\" && return\n\n\tgit $diff_cmd $cached --ignore-submodules=dirty --raw $head -- $modules |\n\tsane_egrep '^:([0-7]* )?160000' |\n\tcut -c2- |\n\twhile read mod_src mod_dst sha1_src sha1_dst status name\n\tdo\n\t\tif test -z \"$cached\" &&\n\t\t\ttest $sha1_dst = 0000000000000000000000000000000000000000\n\t\tthen\n\t\t\tcase \"$mod_dst\" in\n\t\t\t160000)\n\t\t\t\tsha1_dst=$(GIT_DIR=\"$name/.git\" git rev-parse HEAD)\n\t\t\t\t;;\n\t\t\t100644 | 100755 | 120000)\n\t\t\t\tsha1_dst=$(git hash-object $name)\n\t\t\t\t;;\n\t\t\t000000)\n\t\t\t\t;; # removed\n\t\t\t*)\n\t\t\t\t# unexpected type\n\t\t\t\teval_gettextln \"unexpected mode \\$mod_dst\" >&2\n\t\t\t\tcontinue ;;\n\t\t\tesac\n\t\tfi\n\t\tmissing_src=\n\t\tmissing_dst=\n\n\t\ttest $mod_src = 160000 &&\n\t\t! GIT_DIR=\"$name/.git\" git-rev-parse -q --verify $sha1_src^0 >/dev/null &&\n\t\tmissing_src=t\n\n\t\ttest $mod_dst = 160000 &&\n\t\t! GIT_DIR=\"$name/.git\" git-rev-parse -q --verify $sha1_dst^0 >/dev/null &&\n\t\tmissing_dst=t\n\n\t\ttotal_commits=\n\t\tcase \"$missing_src,$missing_dst\" in\n\t\tt,)\n\t\t\terrmsg=\"$(eval_gettext \"  Warn: \\$name doesn't contain commit \\$sha1_src\")\"\n\t\t\t;;\n\t\t,t)\n\t\t\terrmsg=\"$(eval_gettext \"  Warn: \\$name doesn't contain commit \\$sha1_dst\")\"\n\t\t\t;;\n\t\tt,t)\n\t\t\terrmsg=\"$(eval_gettext \"  Warn: \\$name doesn't contain commits \\$sha1_src and \\$sha1_dst\")\"\n\t\t\t;;\n\t\t*)\n\t\t\terrmsg=\n\t\t\ttotal_commits=$(\n\t\t\tif test $mod_src = 160000 -a $mod_dst = 160000\n\t\t\tthen\n\t\t\t\trange=\"$sha1_src...$sha1_dst\"\n\t\t\telif test $mod_src = 160000\n\t\t\tthen\n\t\t\t\trange=$sha1_src\n\t\t\telse\n\t\t\t\trange=$sha1_dst\n\t\t\tfi\n\t\t\tGIT_DIR=\"$name/.git\" \\\n\t\t\tgit rev-list --first-parent $range -- | wc -l\n\t\t\t)\n\t\t\ttotal_commits=\" ($(($total_commits + 0)))\"\n\t\t\t;;\n\t\tesac\n\n\t\tsha1_abbr_src=$(echo $sha1_src | cut -c1-7)\n\t\tsha1_abbr_dst=$(echo $sha1_dst | cut -c1-7)\n\t\tif test $status = T\n\t\tthen\n\t\t\tblob=\"$(gettext \"blob\")\"\n\t\t\tsubmodule=\"$(gettext \"submodule\")\"\n\t\t\tif test $mod_dst = 160000\n\t\t\tthen\n\t\t\t\techo \"* $name $sha1_abbr_src($blob)->$sha1_abbr_dst($submodule)$total_commits:\"\n\t\t\telse\n\t\t\t\techo \"* $name $sha1_abbr_src($submodule)->$sha1_abbr_dst($blob)$total_commits:\"\n\t\t\tfi\n\t\telse\n\t\t\techo \"* $name $sha1_abbr_src...$sha1_abbr_dst$total_commits:\"\n\t\tfi\n\t\tif test -n \"$errmsg\"\n\t\tthen\n\t\t\t# Don't give error msg for modification whose dst is not submodule\n\t\t\t# i.e. deleted or changed to blob\n\t\t\ttest $mod_dst = 160000 && echo \"$errmsg\"\n\t\telse\n\t\t\tif test $mod_src = 160000 -a $mod_dst = 160000\n\t\t\tthen\n\t\t\t\tlimit=\n\t\t\t\ttest $summary_limit -gt 0 && limit=\"-$summary_limit\"\n\t\t\t\tGIT_DIR=\"$name/.git\" \\\n\t\t\t\tgit log $limit --pretty='format:  %m %s' \\\n\t\t\t\t--first-parent $sha1_src...$sha1_dst\n\t\t\telif test $mod_dst = 160000\n\t\t\tthen\n\t\t\t\tGIT_DIR=\"$name/.git\" \\\n\t\t\t\tgit log --pretty='format:  > %s' -1 $sha1_dst\n\t\t\telse\n\t\t\t\tGIT_DIR=\"$name/.git\" \\\n\t\t\t\tgit log --pretty='format:  < %s' -1 $sha1_src\n\t\t\tfi\n\t\t\techo\n\t\tfi\n\t\techo\n\tdone |\n\tif test -n \"$for_status\"; then\n\t\tif [ -n \"$files\" ]; then\n\t\t\tgettextln \"Submodules changed but not updated:\" | git stripspace -c\n\t\telse\n\t\t\tgettextln \"Submodule changes to be committed:\" | git stripspace -c\n\t\tfi\n\t\tprintf \"\\n\" | git stripspace -c\n\t\tgit stripspace -c\n\telse\n\t\tcat\n\tfi\n}\n#\n# List all submodules, prefixed with:\n#  - submodule not initialized\n#  + different revision checked out\n#\n# If --cached was specified the revision in the index will be printed\n# instead of the currently checked out revision.\n#\n# $@ = requested paths (default to all)\n#\ncmd_status()\n{\n\t# parse $args after \"submodule ... status\".\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\t;;\n\t\t--cached)\n\t\t\tcached=1\n\t\t\t;;\n\t\t--recursive)\n\t\t\trecursive=1\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\t\tshift\n\tdone\n\n\tmodule_list \"$@\" |\n\twhile read mode sha1 stage sm_path\n\tdo\n\t\tdie_if_unmatched \"$mode\"\n\t\tname=$(module_name \"$sm_path\") || exit\n\t\turl=$(git config submodule.\"$name\".url)\n\t\tdisplaypath=\"$prefix$sm_path\"\n\t\tif test \"$stage\" = U\n\t\tthen\n\t\t\tsay \"U$sha1 $displaypath\"\n\t\t\tcontinue\n\t\tfi\n\t\tif test -z \"$url\" || ! test -d \"$sm_path\"/.git -o -f \"$sm_path\"/.git\n\t\tthen\n\t\t\tsay \"-$sha1 $displaypath\"\n\t\t\tcontinue;\n\t\tfi\n\t\tset_name_rev \"$sm_path\" \"$sha1\"\n\t\tif git diff-files --ignore-submodules=dirty --quiet -- \"$sm_path\"\n\t\tthen\n\t\t\tsay \" $sha1 $displaypath$revname\"\n\t\telse\n\t\t\tif test -z \"$cached\"\n\t\t\tthen\n\t\t\t\tsha1=$(clear_local_git_env; cd \"$sm_path\" && git rev-parse --verify HEAD)\n\t\t\t\tset_name_rev \"$sm_path\" \"$sha1\"\n\t\t\tfi\n\t\t\tsay \"+$sha1 $displaypath$revname\"\n\t\tfi\n\n\t\tif test -n \"$recursive\"\n\t\tthen\n\t\t\t(\n\t\t\t\tprefix=\"$displaypath/\"\n\t\t\t\tclear_local_git_env\n\t\t\t\tcd \"$sm_path\" &&\n\t\t\t\teval cmd_status\n\t\t\t) ||\n\t\t\tdie \"$(eval_gettext \"Failed to recurse into submodule path '\\$sm_path'\")\"\n\t\tfi\n\tdone\n}\n#\n# Sync remote urls for submodules\n# This makes the value for remote.$remote.url match the value\n# specified in .gitmodules.\n#\ncmd_sync()\n{\n\twhile test $# -ne 0\n\tdo\n\t\tcase \"$1\" in\n\t\t-q|--quiet)\n\t\t\tGIT_QUIET=1\n\t\t\tshift\n\t\t\t;;\n\t\t--recursive)\n\t\t\trecursive=1\n\t\t\tshift\n\t\t\t;;\n\t\t--)\n\t\t\tshift\n\t\t\tbreak\n\t\t\t;;\n\t\t-*)\n\t\t\tusage\n\t\t\t;;\n\t\t*)\n\t\t\tbreak\n\t\t\t;;\n\t\tesac\n\tdone\n\tcd_to_toplevel\n\tmodule_list \"$@\" |\n\twhile read mode sha1 stage sm_path\n\tdo\n\t\tdie_if_unmatched \"$mode\"\n\t\tname=$(module_name \"$sm_path\")\n\t\turl=$(git config -f .gitmodules --get submodule.\"$name\".url)\n\n\t\t# Possibly a url relative to parent\n\t\tcase \"$url\" in\n\t\t./*|../*)\n\t\t\t# rewrite foo/bar as ../.. to find path from\n\t\t\t# submodule work tree to superproject work tree\n\t\t\tup_path=\"$(echo \"$sm_path\" | sed \"s/[^/][^/]*/../g\")\" &&\n\t\t\t# guarantee a trailing /\n\t\t\tup_path=${up_path%/}/ &&\n\t\t\t# path from submodule work tree to submodule origin repo\n\t\t\tsub_origin_url=$(resolve_relative_url \"$url\" \"$up_path\") &&\n\t\t\t# path from superproject work tree to submodule origin repo\n\t\t\tsuper_config_url=$(resolve_relative_url \"$url\") || exit\n\t\t\t;;\n\t\t*)\n\t\t\tsub_origin_url=\"$url\"\n\t\t\tsuper_config_url=\"$url\"\n\t\t\t;;\n\t\tesac\n\n\t\tif git config \"submodule.$name.url\" >/dev/null 2>/dev/null\n\t\tthen\n\t\t\tsay \"$(eval_gettext \"Synchronizing submodule url for '\\$prefix\\$sm_path'\")\"\n\t\t\tgit config submodule.\"$name\".url \"$super_config_url\"\n\n\t\t\tif test -e \"$sm_path\"/.git\n\t\t\tthen\n\t\t\t(\n\t\t\t\tclear_local_git_env\n\t\t\t\tcd \"$sm_path\"\n\t\t\t\tremote=$(get_default_remote)\n\t\t\t\tgit config remote.\"$remote\".url \"$sub_origin_url\"\n\n\t\t\t\tif test -n \"$recursive\"\n\t\t\t\tthen\n\t\t\t\t\tprefix=\"$prefix$sm_path/\"\n\t\t\t\t\teval cmd_sync\n\t\t\t\tfi\n\t\t\t)\n\t\t\tfi\n\t\tfi\n\tdone\n}\n\n# This loop parses the command line arguments to find the\n# subcommand name to dispatch.  Parsing of the subcommand specific\n# options are primarily done by the subcommand implementations.\n# Subcommand specific options such as --branch and --cached are\n# parsed here as well, for backward compatibility.\n\nwhile test $# != 0 && test -z \"$command\"\ndo\n\tcase \"$1\" in\n\tadd | foreach | init | update | status | summary | sync)\n\t\tcommand=$1\n\t\t;;\n\t-q|--quiet)\n\t\tGIT_QUIET=1\n\t\t;;\n\t-b|--branch)\n\t\tcase \"$2\" in\n\t\t'')\n\t\t\tusage\n\t\t\t;;\n\t\tesac\n\t\tbranch=\"$2\"; shift\n\t\t;;\n\t--cached)\n\t\tcached=\"$1\"\n\t\t;;\n\t--)\n\t\tbreak\n\t\t;;\n\t-*)\n\t\tusage\n\t\t;;\n\t*)\n\t\tbreak\n\t\t;;\n\tesac\n\tshift\ndone\n\n# No command word defaults to \"status\"\nif test -z \"$command\"\nthen\n    if test $# = 0\n    then\n\tcommand=status\n    else\n\tusage\n    fi\nfi\n\n# \"-b branch\" is accepted only by \"add\"\nif test -n \"$branch\" && test \"$command\" != add\nthen\n\tusage\nfi\n\n# \"--cached\" is accepted only by \"status\" and \"summary\"\nif test -n \"$cached\" && test \"$command\" != status -a \"$command\" != summary\nthen\n\tusage\nfi\n\n\"cmd_$command\" \"$@\"\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "004c034bc09449416ff6d66b7570d48b651f96cb",
  "sha1_ok": true,
  "size": 27194
}
