{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdjaGVjayBzdm4gZHVtcGZpbGUgaW1wb3J0ZXInCgouIC4vdGVzdC1saWIuc2gKCnJlaW5pdF9naXQgKCkgewoJaWYgISB0ZXN0X2RlY2xhcmVkX3ByZXJlcSBQSVBFCgl0aGVuCgkJZWNobyA+JjQgInJlaW5pdF9naXQ6IG5lZWQgdG8gZGVjbGFyZSBQSVBFIHByZXJlcXVpc2l0ZSIKCQlyZXR1cm4gMTI3CglmaQoJcm0gLWZyIC5naXQgJiYKCXJtIC1mIHN0cmVhbSBiYWNrZmxvdyAmJgoJZ2l0IGluaXQgJiYKCW1rZmlmbyBzdHJlYW0gYmFja2Zsb3cKfQoKdHJ5X2R1bXAgKCkgewoJaW5wdXQ9JDEgJiYKCW1heWJlX2ZhaWw9JHsyOit0ZXN0XyQyfSAmJgoKCXsKCQkkbWF5YmVfZmFpbCB0ZXN0LXN2bi1mZSAiJGlucHV0IiA+c3RyZWFtIDM8YmFja2Zsb3cgJgoJfSAmJgoJZ2l0IGZhc3QtaW1wb3J0IC0tY2F0LWJsb2ItZmQ9MyA8c3RyZWFtIDM+YmFja2Zsb3cgJiYKCXdhaXQgJCEKfQoKcHJvcGVydGllcyAoKSB7Cgl3aGlsZSB0ZXN0ICIkIyIgLW5lIDAKCWRvCgkJcHJvcGVydHk9IiQxIiAmJgoJCXZhbHVlPSIkMiIgJiYKCQlwcmludGYgIiVzXG4iICJLICR7I3Byb3BlcnR5fSIgJiYKCQlwcmludGYgIiVzXG4iICIkcHJvcGVydHkiICYmCgkJcHJpbnRmICIlc1xuIiAiViAkeyN2YWx1ZX0iICYmCgkJcHJpbnRmICIlc1xuIiAiJHZhbHVlIiAmJgoJCXNoaWZ0IDIgfHwKCQlyZXR1cm4gMQoJZG9uZQp9Cgp0ZXh0X25vX3Byb3BzICgpIHsKCXRleHQ9IiQxCiIgJiYKCXByaW50ZiAiJXNcbiIgIlByb3AtY29udGVudC1sZW5ndGg6IDEwIiAmJgoJcHJpbnRmICIlc1xuIiAiVGV4dC1jb250ZW50LWxlbmd0aDogJHsjdGV4dH0iICYmCglwcmludGYgIiVzXG4iICJDb250ZW50LWxlbmd0aDogJCgoJHsjdGV4dH0gKyAxMCkpIiAmJgoJcHJpbnRmICIlc1xuIiAiIiAiUFJPUFMtRU5EIiAmJgoJcHJpbnRmICIlc1xuIiAiJHRleHQiCn0KCj5lbXB0eQoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXA6IGhhdmUgcGlwZXM/JyAnCglybSAtZiBmcm9iICYmCglpZiBta2ZpZm8gZnJvYgoJdGhlbgoJCXRlc3Rfc2V0X3ByZXJlcSBQSVBFCglmaQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ2VtcHR5IGR1bXAnICcKCXJlaW5pdF9naXQgJiYKCWVjaG8gIlNWTi1mcy1kdW1wLWZvcm1hdC12ZXJzaW9uOiAyIiA+aW5wdXQgJiYKCXRyeV9kdW1wIGlucHV0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgUElQRSAndjQgZHVtcHMgbm90IHN1cHBvcnRlZCcgJwoJcmVpbml0X2dpdCAmJgoJZWNobyAiU1ZOLWZzLWR1bXAtZm9ybWF0LXZlcnNpb246IDQiID52NC5kdW1wICYmCgl0cnlfZHVtcCB2NC5kdW1wIG11c3RfZmFpbAonCgp0ZXN0X2V4cGVjdF9mYWlsdXJlIFBJUEUgJ2VtcHR5IHJldmlzaW9uJyAnCglyZWluaXRfZ2l0ICYmCglwcmludGYgInJldiA8bm9ib2R5LCBub2JvZHlAbG9jYWw+OiAlc1xuIiAiIiAiIiA+ZXhwZWN0ICYmCgljYXQgPmVtcHR5cmV2LmR1bXAgPDwtXEVPRiAmJgoJU1ZOLWZzLWR1bXAtZm9ybWF0LXZlcnNpb246IDMKCglSZXZpc2lvbi1udW1iZXI6IDEKCVByb3AtY29udGVudC1sZW5ndGg6IDAKCUNvbnRlbnQtbGVuZ3RoOiAwCgoJUmV2aXNpb24tbnVtYmVyOiAyCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiAwCglDb250ZW50LWxlbmd0aDogMAoKCUVPRgoJdHJ5X2R1bXAgZW1wdHlyZXYuZHVtcCAmJgoJZ2l0IGxvZyAtcCAtLWZvcm1hdD0icmV2IDwlYW4sICVhZT46ICVzIiBIRUFEID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBQSVBFICdlbXB0eSBwcm9wZXJ0aWVzJyAnCglyZWluaXRfZ2l0ICYmCglwcmludGYgInJldiA8bm9ib2R5LCBub2JvZHlAbG9jYWw+OiAlc1xuIiAiIiAiIiA+ZXhwZWN0ICYmCgljYXQgPmVtcHR5cHJvcC5kdW1wIDw8LVxFT0YgJiYKCVNWTi1mcy1kdW1wLWZvcm1hdC12ZXJzaW9uOiAzCgoJUmV2aXNpb24tbnVtYmVyOiAxCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiAxMAoJQ29udGVudC1sZW5ndGg6IDEwCgoJUFJPUFMtRU5ECgoJUmV2aXNpb24tbnVtYmVyOiAyCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiAxMAoJQ29udGVudC1sZW5ndGg6IDEwCgoJUFJPUFMtRU5ECglFT0YKCXRyeV9kdW1wIGVtcHR5cHJvcC5kdW1wICYmCglnaXQgbG9nIC1wIC0tZm9ybWF0PSJyZXYgPCVhbiwgJWFlPjogJXMiIEhFQUQgPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ2F1dGhvciBuYW1lIGFuZCBjb21taXQgbWVzc2FnZScgJwoJcmVpbml0X2dpdCAmJgoJZWNobyAiPGF1dGhvckBleGFtcGxlLmNvbSwgYXV0aG9yQGV4YW1wbGUuY29tQGxvY2FsPiIgPmV4cGVjdC5hdXRob3IgJiYKCWNhdCA+bWVzc2FnZSA8PC1cRU9GICYmCglBIGNvbmNpc2Ugc3VtbWFyeSBvZiB0aGUgY2hhbmdlCgoJQSBkZXRhaWxlZCBkZXNjcmlwdGlvbiBvZiB0aGUgY2hhbmdlLCB3aHkgaXQgaXMgbmVlZGVkLCB3aGF0Cgl3YXMgYnJva2VuIGFuZCB3aHkgYXBwbHlpbmcgdGhpcyBpcyB0aGUgYmVzdCBjb3Vyc2Ugb2YgYWN0aW9uLgoKCSogZmlsZS5jCgkgICAgRGV0YWlscyBwZXJ0YWluaW5nIHRvIGFuIGluZGl2aWR1YWwgZmlsZS4KCUVPRgoJewoJCXByb3BlcnRpZXMgXAoJCQlzdm46YXV0aG9yIGF1dGhvckBleGFtcGxlLmNvbSBcCgkJCXN2bjpsb2cgIiQoY2F0IG1lc3NhZ2UpIiAmJgoJCWVjaG8gUFJPUFMtRU5ECgl9ID5wcm9wcyAmJgoJewoJCWVjaG8gIlNWTi1mcy1kdW1wLWZvcm1hdC12ZXJzaW9uOiAzIiAmJgoJCWVjaG8gJiYKCQllY2hvICJSZXZpc2lvbi1udW1iZXI6IDEiICYmCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcykgJiYKCQllY2hvIENvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcykgJiYKCQllY2hvICYmCgkJY2F0IHByb3BzCgl9ID5sb2cuZHVtcCAmJgoJdHJ5X2R1bXAgbG9nLmR1bXAgJiYKCWdpdCBsb2cgLXAgLS1mb3JtYXQ9IiVCIiBIRUFEID5hY3R1YWwubG9nICYmCglnaXQgbG9nIC0tZm9ybWF0PSI8JWFuLCAlYWU+IiA+YWN0dWFsLmF1dGhvciAmJgoJdGVzdF9jbXAgbWVzc2FnZSBhY3R1YWwubG9nICYmCgl0ZXN0X2NtcCBleHBlY3QuYXV0aG9yIGFjdHVhbC5hdXRob3IKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBQSVBFICd1bnN1cHBvcnRlZCBwcm9wZXJ0aWVzIGFyZSBpZ25vcmVkJyAnCglyZWluaXRfZ2l0ICYmCgllY2hvIGF1dGhvciA+ZXhwZWN0ICYmCgljYXQgPmV4dHJhcHJvcC5kdW1wIDw8LVxFT0YgJiYKCVNWTi1mcy1kdW1wLWZvcm1hdC12ZXJzaW9uOiAzCgoJUmV2aXNpb24tbnVtYmVyOiAxCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiA1NgoJQ29udGVudC1sZW5ndGg6IDU2CgoJSyA4Cglub25zZW5zZQoJViAxCgl5CglLIDEwCglzdm46YXV0aG9yCglWIDYKCWF1dGhvcgoJUFJPUFMtRU5ECglFT0YKCXRyeV9kdW1wIGV4dHJhcHJvcC5kdW1wICYmCglnaXQgbG9nIC1wIC0tZm9ybWF0PSVhbiBIRUFEID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKJwoKdGVzdF9leHBlY3RfZmFpbHVyZSBQSVBFICd0aW1lc3RhbXAgYW5kIGVtcHR5IGZpbGUnICcKCWVjaG8gYXV0aG9yQGV4YW1wbGUuY29tID5leHBlY3QuYXV0aG9yICYmCgllY2hvIDE5OTktMDEtMDEgPmV4cGVjdC5kYXRlICYmCgllY2hvIGZpbGUgPmV4cGVjdC5maWxlcyAmJgoJcmVpbml0X2dpdCAmJgoJewoJCXByb3BlcnRpZXMgXAoJCQlzdm46YXV0aG9yIGF1dGhvckBleGFtcGxlLmNvbSBcCgkJCXN2bjpkYXRlICIxOTk5LTAxLTAxVDAwOjAxOjAwMi4wMDAwMDBaIiBcCgkJCXN2bjpsb2cgImFkZCBlbXB0eSBmaWxlIiAmJgoJCWVjaG8gUFJPUFMtRU5ECgl9ID5wcm9wcyAmJgoJewoJCWNhdCA8PC1FT0YgJiYKCQlTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCQlSZXZpc2lvbi1udW1iZXI6IDEKCQlFT0YKCQllY2hvIFByb3AtY29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gQ29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gJiYKCQljYXQgcHJvcHMgJiYKCQljYXQgPDwtXEVPRgoKCQlOb2RlLXBhdGg6IGVtcHR5LWZpbGUKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogYWRkCgkJQ29udGVudC1sZW5ndGg6IDAKCgkJRU9GCgl9ID5lbXB0eWZpbGUuZHVtcCAmJgoJdHJ5X2R1bXAgZW1wdHlmaWxlLmR1bXAgJiYKCWdpdCBsb2cgLS1mb3JtYXQ9JWFuIEhFQUQgPmFjdHVhbC5hdXRob3IgJiYKCWdpdCBsb2cgLS1kYXRlPXNob3J0IC0tZm9ybWF0PSVhZCBIRUFEID5hY3R1YWwuZGF0ZSAmJgoJZ2l0IGxzLXRyZWUgLXIgLS1uYW1lLW9ubHkgSEVBRCA+YWN0dWFsLmZpbGVzICYmCgl0ZXN0X2NtcCBleHBlY3QuYXV0aG9yIGFjdHVhbC5hdXRob3IgJiYKCXRlc3RfY21wIGV4cGVjdC5kYXRlIGFjdHVhbC5kYXRlICYmCgl0ZXN0X2NtcCBleHBlY3QuZmlsZXMgYWN0dWFsLmZpbGVzICYmCglnaXQgY2hlY2tvdXQgSEVBRCBlbXB0eS1maWxlICYmCgl0ZXN0X2NtcCBlbXB0eSBmaWxlCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgUElQRSAnZGlyZWN0b3J5IHdpdGggZmlsZXMnICcKCXJlaW5pdF9naXQgJiYKCXByaW50ZiAiJXNcbiIgZGlyZWN0b3J5L2ZpbGUxIGRpcmVjdG9yeS9maWxlMiA+ZXhwZWN0LmZpbGVzICYmCgllY2hvIGhpID5oaSAmJgoJZWNobyBoZWxsbyA+aGVsbG8gJiYKCXsKCQlwcm9wZXJ0aWVzIFwKCQkJc3ZuOmF1dGhvciBhdXRob3JAZXhhbXBsZS5jb20gXAoJCQlzdm46ZGF0ZSAiMTk5OS0wMi0wMVQwMDowMTowMDIuMDAwMDAwWiIgXAoJCQlzdm46bG9nICJhZGQgZGlyZWN0b3J5IHdpdGggc29tZSBmaWxlcyBpbiBpdCIgJiYKCQllY2hvIFBST1BTLUVORAoJfSA+cHJvcHMgJiYKCXsKCQljYXQgPDwtRU9GICYmCgkJU1ZOLWZzLWR1bXAtZm9ybWF0LXZlcnNpb246IDMKCgkJUmV2aXNpb24tbnVtYmVyOiAxCgkJRU9GCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcykgJiYKCQllY2hvIENvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcykgJiYKCQllY2hvICYmCgkJY2F0IHByb3BzICYmCgkJY2F0IDw8LVxFT0YgJiYKCgkJTm9kZS1wYXRoOiBkaXJlY3RvcnkKCQlOb2RlLWtpbmQ6IGRpcgoJCU5vZGUtYWN0aW9uOiBhZGQKCQlQcm9wLWNvbnRlbnQtbGVuZ3RoOiAxMAoJCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCQlQUk9QUy1FTkQKCgkJTm9kZS1wYXRoOiBkaXJlY3RvcnkvZmlsZTEKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogYWRkCgkJRU9GCgkJdGV4dF9ub19wcm9wcyBoZWxsbyAmJgoJCWNhdCA8PC1cRU9GICYmCgkJTm9kZS1wYXRoOiBkaXJlY3RvcnkvZmlsZTIKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogYWRkCgkJRU9GCgkJdGV4dF9ub19wcm9wcyBoaQoJfSA+ZGlyZWN0b3J5LmR1bXAgJiYKCXRyeV9kdW1wIGRpcmVjdG9yeS5kdW1wICYmCgoJZ2l0IGxzLXRyZWUgLXIgLS1uYW1lLW9ubHkgSEVBRCA+YWN0dWFsLmZpbGVzICYmCglnaXQgY2hlY2tvdXQgSEVBRCBkaXJlY3RvcnkgJiYKCXRlc3RfY21wIGV4cGVjdC5maWxlcyBhY3R1YWwuZmlsZXMgJiYKCXRlc3RfY21wIGhlbGxvIGRpcmVjdG9yeS9maWxlMSAmJgoJdGVzdF9jbXAgaGkgZGlyZWN0b3J5L2ZpbGUyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgUElQRSAnYnJhbmNoIG5hbWUgd2l0aCBiYWNrc2xhc2gnICcKCXJlaW5pdF9naXQgJiYKCXNvcnQgPDwtXEVPRiA+ZXhwZWN0LmJyYW5jaC1maWxlcyAmJgoJdHJ1bmsvZmlsZTEKCXRydW5rL2ZpbGUyCgkiYnJhbmNoZXMvVXBkYXRlRk9QdG8wOTRcXC9maWxlMSIKCSJicmFuY2hlcy9VcGRhdGVGT1B0bzA5NFxcL2ZpbGUyIgoJRU9GCgoJZWNobyBoaSA+aGkgJiYKCWVjaG8gaGVsbG8gPmhlbGxvICYmCgl7CgkJcHJvcGVydGllcyBcCgkJCXN2bjphdXRob3IgYXV0aG9yQGV4YW1wbGUuY29tIFwKCQkJc3ZuOmRhdGUgIjE5OTktMDItMDJUMDA6MDE6MDIuMDAwMDAwWiIgXAoJCQlzdm46bG9nICJhZGQgZGlyZWN0b3J5IHdpdGggc29tZSBmaWxlcyBpbiBpdCIgJiYKCQllY2hvIFBST1BTLUVORAoJfSA+cHJvcHMuc2V0dXAgJiYKCXsKCQlwcm9wZXJ0aWVzIFwKCQkJc3ZuOmF1dGhvciBicmFuY2hlckBleGFtcGxlLmNvbSBcCgkJCXN2bjpkYXRlICIyMDA3LTEyLTA2VDIxOjM4OjM0LjAwMDAwMFoiIFwKCQkJc3ZuOmxvZyAiVXBkYXRpbmcgZm9wIHRvIC45NCBhbmQgYWRqdXN0IGZvLXN0eWxlc2hlZXRzIiAmJgoJCWVjaG8gUFJPUFMtRU5ECgl9ID5wcm9wcy5icmFuY2ggJiYKCXsKCQljYXQgPDwtRU9GICYmCgkJU1ZOLWZzLWR1bXAtZm9ybWF0LXZlcnNpb246IDMKCgkJUmV2aXNpb24tbnVtYmVyOiAxCgkJRU9GCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcy5zZXR1cCkgJiYKCQllY2hvIENvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcy5zZXR1cCkgJiYKCQllY2hvICYmCgkJY2F0IHByb3BzLnNldHVwICYmCgkJY2F0IDw8LVxFT0YgJiYKCgkJTm9kZS1wYXRoOiB0cnVuawoJCU5vZGUta2luZDogZGlyCgkJTm9kZS1hY3Rpb246IGFkZAoJCVByb3AtY29udGVudC1sZW5ndGg6IDEwCgkJQ29udGVudC1sZW5ndGg6IDEwCgoJCVBST1BTLUVORAoKCQlOb2RlLXBhdGg6IGJyYW5jaGVzCgkJTm9kZS1raW5kOiBkaXIKCQlOb2RlLWFjdGlvbjogYWRkCgkJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCQlDb250ZW50LWxlbmd0aDogMTAKCgkJUFJPUFMtRU5ECgoJCU5vZGUtcGF0aDogdHJ1bmsvZmlsZTEKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogYWRkCgkJRU9GCgkJdGV4dF9ub19wcm9wcyBoZWxsbyAmJgoJCWNhdCA8PC1cRU9GICYmCgkJTm9kZS1wYXRoOiB0cnVuay9maWxlMgoJCU5vZGUta2luZDogZmlsZQoJCU5vZGUtYWN0aW9uOiBhZGQKCQlFT0YKCQl0ZXh0X25vX3Byb3BzIGhpICYmCgkJY2F0IDw8LVxFT0YgJiYKCgkJUmV2aXNpb24tbnVtYmVyOiAyCgkJRU9GCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wcy5icmFuY2gpICYmCgkJZWNobyBDb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cHJvcHMuYnJhbmNoKSAmJgoJCWVjaG8gJiYKCQljYXQgcHJvcHMuYnJhbmNoICYmCgkJY2F0IDw8LVxFT0YKCgkJTm9kZS1wYXRoOiBicmFuY2hlcy9VcGRhdGVGT1B0bzA5NFwKCQlOb2RlLWtpbmQ6IGRpcgoJCU5vZGUtYWN0aW9uOiBhZGQKCQlOb2RlLWNvcHlmcm9tLXJldjogMQoJCU5vZGUtY29weWZyb20tcGF0aDogdHJ1bmsKCgkJTm9kZS1raW5kOiBkaXIKCQlOb2RlLWFjdGlvbjogYWRkCgkJUHJvcC1jb250ZW50LWxlbmd0aDogMzQKCQlDb250ZW50LWxlbmd0aDogMzQKCgkJSyAxMwoJCXN2bjptZXJnZWluZm8KCQlWIDAKCgkJUFJPUFMtRU5ECgkJRU9GCgl9ID5icmFuY2guZHVtcCAmJgoJdHJ5X2R1bXAgYnJhbmNoLmR1bXAgJiYKCglnaXQgbHMtdHJlZSAtciAtLW5hbWUtb25seSBIRUFEIHwKCXNvcnQgPmFjdHVhbC5icmFuY2gtZmlsZXMgJiYKCXRlc3RfY21wIGV4cGVjdC5icmFuY2gtZmlsZXMgYWN0dWFsLmJyYW5jaC1maWxlcwonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ25vZGUgd2l0aG91dCBhY3Rpb24nICcKCXJlaW5pdF9naXQgJiYKCWNhdCA+aW5hY3Rpb24uZHVtcCA8PC1cRU9GICYmCglTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCVJldmlzaW9uLW51bWJlcjogMQoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogZGlyZWN0b3J5CglOb2RlLWtpbmQ6IGRpcgoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoJRU9GCgl0cnlfZHVtcCBpbmFjdGlvbi5kdW1wIG11c3RfZmFpbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ2FjdGlvbjogYWRkIG5vZGUgd2l0aG91dCB0ZXh0JyAnCglyZWluaXRfZ2l0ICYmCgljYXQgPnRleHRsZXNzLmR1bXAgPDwtXEVPRiAmJgoJU1ZOLWZzLWR1bXAtZm9ybWF0LXZlcnNpb246IDMKCglSZXZpc2lvbi1udW1iZXI6IDEKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCglOb2RlLXBhdGg6IHRleHRsZXNzCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBhZGQKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCUVPRgoJdHJ5X2R1bXAgdGV4dGxlc3MuZHVtcCBtdXN0X2ZhaWwKJwoKdGVzdF9leHBlY3RfZmFpbHVyZSBQSVBFICdjaGFuZ2UgZmlsZSBtb2RlIGJ1dCBrZWVwIG9sZCBjb250ZW50JyAnCglyZWluaXRfZ2l0ICYmCgljYXQgPmV4cGVjdCA8PC1cRU9GICYmCglPQkpJRAoJOjEyMDAwMCAxMDA2NDQgT0JKSUQgT0JKSUQgVAlncmVldGluZwoJT0JKSUQKCToxMDA2NDQgMTIwMDAwIE9CSklEIE9CSklEIFQJZ3JlZXRpbmcKCU9CSklECgk6MDAwMDAwIDEwMDY0NCBPQkpJRCBPQkpJRCBBCWdyZWV0aW5nCglFT0YKCWVjaG8gImxpbmsgaGVsbG8iID5leHBlY3QuYmxvYiAmJgoJZWNobyBoZWxsbyA+aGVsbG8gJiYKCWNhdCA+ZmlsZW1vZGUuZHVtcCA8PC1cRU9GICYmCglTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCVJldmlzaW9uLW51bWJlcjogMQoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogZ3JlZXRpbmcKCU5vZGUta2luZDogZmlsZQoJTm9kZS1hY3Rpb246IGFkZAoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCVRleHQtY29udGVudC1sZW5ndGg6IDExCglDb250ZW50LWxlbmd0aDogMjEKCglQUk9QUy1FTkQKCWxpbmsgaGVsbG8KCglSZXZpc2lvbi1udW1iZXI6IDIKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCglOb2RlLXBhdGg6IGdyZWV0aW5nCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtY29udGVudC1sZW5ndGg6IDMzCglDb250ZW50LWxlbmd0aDogMzMKCglLIDExCglzdm46c3BlY2lhbAoJViAxCgkqCglQUk9QUy1FTkQKCglSZXZpc2lvbi1udW1iZXI6IDMKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCglOb2RlLXBhdGg6IGdyZWV0aW5nCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCUVPRgoJdHJ5X2R1bXAgZmlsZW1vZGUuZHVtcCAmJgoJewoJCWdpdCByZXYtbGlzdCBIRUFEIHwKCQlnaXQgZGlmZi10cmVlIC0tcm9vdCAtLXN0ZGluIHwKCQlzZWQgInMvJF94NDAvT0JKSUQvZyIKCX0gPmFjdHVhbCAmJgoJZ2l0IHNob3cgSEVBRDpncmVldGluZyA+YWN0dWFsLmJsb2IgJiYKCWdpdCBzaG93IEhFQUReOmdyZWV0aW5nID5hY3R1YWwudGFyZ2V0ICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QuYmxvYiBhY3R1YWwuYmxvYiAmJgoJdGVzdF9jbXAgaGVsbG8gYWN0dWFsLnRhcmdldAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ05VTCBpbiBwcm9wZXJ0eSB2YWx1ZScgJwoJcmVpbml0X2dpdCAmJgoJZWNobyAiY29tbWl0IG1lc3NhZ2UiID5leHBlY3QubWVzc2FnZSAmJgoJewoJCXByb3BlcnRpZXMgXAoJCQl1bmltcG9ydGFudCAic29tZXRoaW5nIHdpdGggYSBOVUwgKFEpIiBcCgkJCXN2bjpsb2cgImNvbW1pdCBtZXNzYWdlIiYmCgkJZWNobyBQUk9QUy1FTkQKCX0gfAoJcV90b19udWwgPnByb3BzICYmCgl7CgkJY2F0IDw8LVxFT0YgJiYKCQlTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCQlSZXZpc2lvbi1udW1iZXI6IDEKCQlFT0YKCQllY2hvIFByb3AtY29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gQ29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gJiYKCQljYXQgcHJvcHMKCX0gPm51bHByb3AuZHVtcCAmJgoJdHJ5X2R1bXAgbnVscHJvcC5kdW1wICYmCglnaXQgZGlmZi10cmVlIC0tYWx3YXlzIC1zIC0tZm9ybWF0PSVzIEhFQUQgPmFjdHVhbC5tZXNzYWdlICYmCgl0ZXN0X2NtcCBleHBlY3QubWVzc2FnZSBhY3R1YWwubWVzc2FnZQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ05VTCBpbiBsb2cgbWVzc2FnZSwgZmlsZSBjb250ZW50LCBhbmQgcHJvcGVydHkgbmFtZScgJwoJIyBDYXZlYXQ6IHN2bmFkbWluIDEuNi4xNiAocjEwNzM1MjkpIHRydW5jYXRlcyBhdCBcMCBpbiB0aGUKCSMgc3ZuOnNwZWNpYWxRbm90cmVhbGx5IGV4YW1wbGUuCglyZWluaXRfZ2l0ICYmCgljYXQgPmV4cGVjdCA8PC1cRU9GICYmCglPQkpJRAoJOjEwMDY0NCAxMDA2NDQgT0JKSUQgT0JKSUQgTQlncmVldGluZwoJT0JKSUQKCTowMDAwMDAgMTAwNjQ0IE9CSklEIE9CSklEIEEJZ3JlZXRpbmcKCUVPRgoJcHJpbnRmICJcbiVzXG4iICJzb21ldGhpbmcgd2l0aCBhbiBBU0NJSSBOVUwgKFEpIiA+ZXhwZWN0Lm1lc3NhZ2UgJiYKCXByaW50ZiAiJXNcbiIgImhlbFFvIiA+ZXhwZWN0LmhlbGxvMSAmJgoJcHJpbnRmICIlc1xuIiAibGluayBoZWxsbyIgPmV4cGVjdC5oZWxsbzIgJiYKCXsKCQlwcm9wZXJ0aWVzIHN2bjpsb2cgInNvbWV0aGluZyB3aXRoIGFuIEFTQ0lJIE5VTCAoUSkiICYmCgkJZWNobyBQUk9QUy1FTkQKCX0gfAoJcV90b19udWwgPnByb3BzICYmCgl7CgkJcV90b19udWwgPDwtXEVPRiAmJgoJCVNWTi1mcy1kdW1wLWZvcm1hdC12ZXJzaW9uOiAzCgoJCVJldmlzaW9uLW51bWJlcjogMQoJCVByb3AtY29udGVudC1sZW5ndGg6IDEwCgkJQ29udGVudC1sZW5ndGg6IDEwCgoJCVBST1BTLUVORAoKCQlOb2RlLXBhdGg6IGdyZWV0aW5nCgkJTm9kZS1raW5kOiBmaWxlCgkJTm9kZS1hY3Rpb246IGFkZAoJCVByb3AtY29udGVudC1sZW5ndGg6IDEwCgkJVGV4dC1jb250ZW50LWxlbmd0aDogNgoJCUNvbnRlbnQtbGVuZ3RoOiAxNgoKCQlQUk9QUy1FTkQKCQloZWxRbwoKCQlSZXZpc2lvbi1udW1iZXI6IDIKCQlFT0YKCQllY2hvIFByb3AtY29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gQ29udGVudC1sZW5ndGg6ICQod2MgLWMgPHByb3BzKSAmJgoJCWVjaG8gJiYKCQljYXQgcHJvcHMgJiYKCQlxX3RvX251bCA8PC1cRU9GCgoJCU5vZGUtcGF0aDogZ3JlZXRpbmcKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogY2hhbmdlCgkJUHJvcC1jb250ZW50LWxlbmd0aDogNDMKCQlUZXh0LWNvbnRlbnQtbGVuZ3RoOiAxMQoJCUNvbnRlbnQtbGVuZ3RoOiA1NAoKCQlLIDIxCgkJc3ZuOnNwZWNpYWxRbm90cmVhbGx5CgkJViAxCgkJKgoJCVBST1BTLUVORAoJCWxpbmsgaGVsbG8KCQlFT0YKCX0gPjhiaXRjbGVhbi5kdW1wICYmCgl0cnlfZHVtcCA4Yml0Y2xlYW4uZHVtcCAmJgoJewoJCWdpdCByZXYtbGlzdCBIRUFEIHwKCQlnaXQgZGlmZi10cmVlIC0tcm9vdCAtLXN0ZGluIHwKCQlzZWQgInMvJF94NDAvT0JKSUQvZyIKCX0gPmFjdHVhbCAmJgoJewoJCWdpdCBjYXQtZmlsZSBjb21taXQgSEVBRCB8IG51bF90b19xICYmCgkJZWNobwoJfSB8CglzZWQgLW5lICIvXlwkLyxcJCBwIiA+YWN0dWFsLm1lc3NhZ2UgJiYKCWdpdCBjYXQtZmlsZSBibG9iIEhFQUReOmdyZWV0aW5nIHwgbnVsX3RvX3EgPmFjdHVhbC5oZWxsbzEgJiYKCWdpdCBjYXQtZmlsZSBibG9iIEhFQUQ6Z3JlZXRpbmcgfCBudWxfdG9fcSA+YWN0dWFsLmhlbGxvMiAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0Lm1lc3NhZ2UgYWN0dWFsLm1lc3NhZ2UgJiYKCXRlc3RfY21wIGV4cGVjdC5oZWxsbzEgYWN0dWFsLmhlbGxvMSAmJgoJdGVzdF9jbXAgZXhwZWN0LmhlbGxvMiBhY3R1YWwuaGVsbG8yCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgUElQRSAnY2hhbmdlIGZpbGUgbW9kZSBhbmQgcmVpdGVyYXRlIGNvbnRlbnQnICcKCXJlaW5pdF9naXQgJiYKCWNhdCA+ZXhwZWN0IDw8LVxFT0YgJiYKCU9CSklECgk6MTIwMDAwIDEwMDY0NCBPQkpJRCBPQkpJRCBUCWdyZWV0aW5nCglPQkpJRAoJOjEwMDY0NCAxMjAwMDAgT0JKSUQgT0JKSUQgVAlncmVldGluZwoJT0JKSUQKCTowMDAwMDAgMTAwNjQ0IE9CSklEIE9CSklEIEEJZ3JlZXRpbmcKCUVPRgoJZWNobyAibGluayBoZWxsbyIgPmV4cGVjdC5ibG9iICYmCgllY2hvIGhlbGxvID5oZWxsbyAmJgoJY2F0ID5maWxlbW9kZTIuZHVtcCA8PC1cRU9GICYmCglTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCVJldmlzaW9uLW51bWJlcjogMQoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogZ3JlZXRpbmcKCU5vZGUta2luZDogZmlsZQoJTm9kZS1hY3Rpb246IGFkZAoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCVRleHQtY29udGVudC1sZW5ndGg6IDExCglDb250ZW50LWxlbmd0aDogMjEKCglQUk9QUy1FTkQKCWxpbmsgaGVsbG8KCglSZXZpc2lvbi1udW1iZXI6IDIKCVByb3AtY29udGVudC1sZW5ndGg6IDEwCglDb250ZW50LWxlbmd0aDogMTAKCglQUk9QUy1FTkQKCglOb2RlLXBhdGg6IGdyZWV0aW5nCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtY29udGVudC1sZW5ndGg6IDMzCglUZXh0LWNvbnRlbnQtbGVuZ3RoOiAxMQoJQ29udGVudC1sZW5ndGg6IDQ0CgoJSyAxMQoJc3ZuOnNwZWNpYWwKCVYgMQoJKgoJUFJPUFMtRU5ECglsaW5rIGhlbGxvCgoJUmV2aXNpb24tbnVtYmVyOiAzCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiAxMAoJQ29udGVudC1sZW5ndGg6IDEwCgoJUFJPUFMtRU5ECgoJTm9kZS1wYXRoOiBncmVldGluZwoJTm9kZS1raW5kOiBmaWxlCglOb2RlLWFjdGlvbjogY2hhbmdlCglQcm9wLWNvbnRlbnQtbGVuZ3RoOiAxMAoJVGV4dC1jb250ZW50LWxlbmd0aDogMTEKCUNvbnRlbnQtbGVuZ3RoOiAyMQoKCVBST1BTLUVORAoJbGluayBoZWxsbwoJRU9GCgl0cnlfZHVtcCBmaWxlbW9kZTIuZHVtcCAmJgoJewoJCWdpdCByZXYtbGlzdCBIRUFEIHwKCQlnaXQgZGlmZi10cmVlIC0tcm9vdCAtLXN0ZGluIHwKCQlzZWQgInMvJF94NDAvT0JKSUQvZyIKCX0gPmFjdHVhbCAmJgoJZ2l0IHNob3cgSEVBRDpncmVldGluZyA+YWN0dWFsLmJsb2IgJiYKCWdpdCBzaG93IEhFQUReOmdyZWV0aW5nID5hY3R1YWwudGFyZ2V0ICYmCgl0ZXN0X2NtcCBleHBlY3QgYWN0dWFsICYmCgl0ZXN0X2NtcCBleHBlY3QuYmxvYiBhY3R1YWwuYmxvYiAmJgoJdGVzdF9jbXAgaGVsbG8gYWN0dWFsLnRhcmdldAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ2RlbHRhcyBub3Qgc3VwcG9ydGVkJyAnCglyZWluaXRfZ2l0ICYmCgl7CgkJIyAob2xkKSBoICsgKGlubGluZSkgZWxsbyArIChvbGQpIFxuCgkJcHJpbnRmICJTVk5RJWIlYiVzIiAiUVwwMDNcMDA2XDAwNVwwMDQiICJcMDAxUVwwMjA0XDAwMVwwMDIiICJlbGxvIiB8CgkJcV90b19udWwKCX0gPmRlbHRhICYmCgl7CgkJcHJvcGVydGllcyBcCgkJCXN2bjphdXRob3IgYXV0aG9yQGV4YW1wbGUuY29tIFwKCQkJc3ZuOmRhdGUgIjE5OTktMDEtMDVUMDA6MDE6MDAyLjAwMDAwMFoiIFwKCQkJc3ZuOmxvZyAiYWRkIGdyZWV0aW5nIiAmJgoJCWVjaG8gUFJPUFMtRU5ECgl9ID5wcm9wcyAmJgoJewoJCXByb3BlcnRpZXMgXAoJCQlzdm46YXV0aG9yIGF1dGhvckBleGFtcGxlLmNvbSBcCgkJCXN2bjpkYXRlICIxOTk5LTAxLTA2VDAwOjAxOjAwMi4wMDAwMDBaIiBcCgkJCXN2bjpsb2cgImNoYW5nZSBpdCIgJiYKCQllY2hvIFBST1BTLUVORAoJfSA+cHJvcHMyICYmCgl7CgkJZWNobyBTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMyAmJgoJCWVjaG8gJiYKCQllY2hvIFJldmlzaW9uLW51bWJlcjogMSAmJgoJCWVjaG8gUHJvcC1jb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cHJvcHMpICYmCgkJZWNobyBDb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cHJvcHMpICYmCgkJZWNobyAmJgoJCWNhdCBwcm9wcyAmJgoJCWNhdCA8PC1cRU9GICYmCgoJCU5vZGUtcGF0aDogaGVsbG8KCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogYWRkCgkJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCQlUZXh0LWNvbnRlbnQtbGVuZ3RoOiAzCgkJQ29udGVudC1sZW5ndGg6IDEzCgoJCVBST1BTLUVORAoJCWhpCgoJCUVPRgoJCWVjaG8gUmV2aXNpb24tbnVtYmVyOiAyICYmCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxwcm9wczIpICYmCgkJZWNobyBDb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cHJvcHMyKSAmJgoJCWVjaG8gJiYKCQljYXQgcHJvcHMyICYmCgkJY2F0IDw8LVxFT0YgJiYKCgkJTm9kZS1wYXRoOiBoZWxsbwoJCU5vZGUta2luZDogZmlsZQoJCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCQlUZXh0LWRlbHRhOiB0cnVlCgkJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCQlFT0YKCQllY2hvIFRleHQtY29udGVudC1sZW5ndGg6ICQod2MgLWMgPGRlbHRhKSAmJgoJCWVjaG8gQ29udGVudC1sZW5ndGg6ICQoKDEwICsgJCh3YyAtYyA8ZGVsdGEpKSkgJiYKCQllY2hvICYmCgkJZWNobyBQUk9QUy1FTkQgJiYKCQljYXQgZGVsdGEKCX0gPmRlbHRhLmR1bXAgJiYKCXRlc3RfbXVzdF9mYWlsIHRyeV9kdW1wIGRlbHRhLmR1bXAKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBQSVBFICdwcm9wZXJ0eSBkZWx0YXMgc3VwcG9ydGVkJyAnCglyZWluaXRfZ2l0ICYmCgljYXQgPmV4cGVjdCA8PC1cRU9GICYmCglPQkpJRAoJOjEwMDc1NSAxMDA2NDQgT0JKSUQgT0JKSUQgTQlzY3JpcHQuc2gKCUVPRgoJewoJCXByb3BlcnRpZXMgXAoJCQlzdm46YXV0aG9yIGF1dGhvckBleGFtcGxlLmNvbSBcCgkJCXN2bjpkYXRlICIxOTk5LTAzLTA2VDAwOjAxOjAwMi4wMDAwMDBaIiBcCgkJCXN2bjpsb2cgIm1ha2UgYW4gZXhlY3V0YWJsZSwgb3IgY2htb2QgLXggaXQiICYmCgkJZWNobyBQUk9QUy1FTkQKCX0gPnJldnByb3BzICYmCgl7CgkJZWNobyBTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMyAmJgoJCWVjaG8gJiYKCQllY2hvIFJldmlzaW9uLW51bWJlcjogMSAmJgoJCWVjaG8gUHJvcC1jb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cmV2cHJvcHMpICYmCgkJZWNobyBDb250ZW50LWxlbmd0aDogJCh3YyAtYyA8cmV2cHJvcHMpICYmCgkJZWNobyAmJgoJCWNhdCByZXZwcm9wcyAmJgoJCWVjaG8gJiYKCQljYXQgPDwtXEVPRiAmJgoJCU5vZGUtcGF0aDogc2NyaXB0LnNoCgkJTm9kZS1raW5kOiBmaWxlCgkJTm9kZS1hY3Rpb246IGFkZAoJCVRleHQtY29udGVudC1sZW5ndGg6IDAKCQlQcm9wLWNvbnRlbnQtbGVuZ3RoOiAzOQoJCUNvbnRlbnQtbGVuZ3RoOiAzOQoKCQlLIDE0CgkJc3ZuOmV4ZWN1dGFibGUKCQlWIDQKCQl0cnVlCgkJUFJPUFMtRU5ECgoJCUVPRgoJCWVjaG8gUmV2aXNpb24tbnVtYmVyOiAyICYmCgkJZWNobyBQcm9wLWNvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxyZXZwcm9wcykgJiYKCQllY2hvIENvbnRlbnQtbGVuZ3RoOiAkKHdjIC1jIDxyZXZwcm9wcykgJiYKCQllY2hvICYmCgkJY2F0IHJldnByb3BzICYmCgkJZWNobyAmJgoJCWNhdCA8PC1cRU9GCgkJTm9kZS1wYXRoOiBzY3JpcHQuc2gKCQlOb2RlLWtpbmQ6IGZpbGUKCQlOb2RlLWFjdGlvbjogY2hhbmdlCgkJUHJvcC1kZWx0YTogdHJ1ZQoJCVByb3AtY29udGVudC1sZW5ndGg6IDMwCgkJQ29udGVudC1sZW5ndGg6IDMwCgoJCUQgMTQKCQlzdm46ZXhlY3V0YWJsZQoJCVBST1BTLUVORAoJCUVPRgoJfSA+cHJvcGRlbHRhLmR1bXAgJiYKCXRyeV9kdW1wIHByb3BkZWx0YS5kdW1wICYmCgl7CgkJZ2l0IHJldi1saXN0IEhFQUQgfAoJCWdpdCBkaWZmLXRyZWUgLS1zdGRpbiB8CgkJc2VkICJzLyRfeDQwL09CSklEL2ciCgl9ID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyBQSVBFICdwcm9wZXJ0aWVzIG9uIC8nICcKCXJlaW5pdF9naXQgJiYKCWNhdCA8PC1cRU9GID5leHBlY3QgJiYKCU9CSklECglPQkpJRAoJOjAwMDAwMCAxMDA2NDQgT0JKSUQgT0JKSUQgQQlncmVldGluZwoJRU9GCglzZWQgLWUgInMvWCQvLyIgPDwtXEVPRiA+Y2hhbmdlcm9vdC5kdW1wICYmCglTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCVJldmlzaW9uLW51bWJlcjogMQoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogZ3JlZXRpbmcKCU5vZGUta2luZDogZmlsZQoJTm9kZS1hY3Rpb246IGFkZAoJVGV4dC1jb250ZW50LWxlbmd0aDogMAoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCVJldmlzaW9uLW51bWJlcjogMgoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogWAoJTm9kZS1raW5kOiBkaXIKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtZGVsdGE6IHRydWUKCVByb3AtY29udGVudC1sZW5ndGg6IDQzCglDb250ZW50LWxlbmd0aDogNDMKCglLIDEwCglzdm46aWdub3JlCglWIDExCglidWlsZC1hcmVhCgoJUFJPUFMtRU5ECglFT0YKCXRyeV9kdW1wIGNoYW5nZXJvb3QuZHVtcCAmJgoJewoJCWdpdCByZXYtbGlzdCBIRUFEIHwKCQlnaXQgZGlmZi10cmVlIC0tcm9vdCAtLWFsd2F5cyAtLXN0ZGluIHwKCQlzZWQgInMvJF94NDAvT0JKSUQvZyIKCX0gPmFjdHVhbCAmJgoJdGVzdF9jbXAgZXhwZWN0IGFjdHVhbAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFBJUEUgJ2RlbHRhcyBmb3IgdHlwZWNoYW5nZScgJwoJcmVpbml0X2dpdCAmJgoJY2F0ID5leHBlY3QgPDwtXEVPRiAmJgoJT0JKSUQKCToxMjAwMDAgMTAwNjQ0IE9CSklEIE9CSklEIFQJdGVzdC1maWxlCglPQkpJRAoJOjEwMDc1NSAxMjAwMDAgT0JKSUQgT0JKSUQgVAl0ZXN0LWZpbGUKCU9CSklECgk6MDAwMDAwIDEwMDc1NSBPQkpJRCBPQkpJRCBBCXRlc3QtZmlsZQoJRU9GCgljYXQgPmRlbGV0ZXByb3AuZHVtcCA8PC1cRU9GICYmCglTVk4tZnMtZHVtcC1mb3JtYXQtdmVyc2lvbjogMwoKCVJldmlzaW9uLW51bWJlcjogMQoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogdGVzdC1maWxlCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBhZGQKCVByb3AtZGVsdGE6IHRydWUKCVByb3AtY29udGVudC1sZW5ndGg6IDM1CglUZXh0LWNvbnRlbnQtbGVuZ3RoOiAxNwoJQ29udGVudC1sZW5ndGg6IDUyCgoJSyAxNAoJc3ZuOmV4ZWN1dGFibGUKCVYgMAoKCVBST1BTLUVORAoJbGluayB0ZXN0aW5nIDEyMwoKCVJldmlzaW9uLW51bWJlcjogMgoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogdGVzdC1maWxlCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtZGVsdGE6IHRydWUKCVByb3AtY29udGVudC1sZW5ndGg6IDUzCglUZXh0LWNvbnRlbnQtbGVuZ3RoOiAxNwoJQ29udGVudC1sZW5ndGg6IDcwCgoJSyAxMQoJc3ZuOnNwZWNpYWwKCVYgMQoJKgoJRCAxNAoJc3ZuOmV4ZWN1dGFibGUKCVBST1BTLUVORAoJbGluayB0ZXN0aW5nIDIzMQoKCVJldmlzaW9uLW51bWJlcjogMwoJUHJvcC1jb250ZW50LWxlbmd0aDogMTAKCUNvbnRlbnQtbGVuZ3RoOiAxMAoKCVBST1BTLUVORAoKCU5vZGUtcGF0aDogdGVzdC1maWxlCglOb2RlLWtpbmQ6IGZpbGUKCU5vZGUtYWN0aW9uOiBjaGFuZ2UKCVByb3AtZGVsdGE6IHRydWUKCVByb3AtY29udGVudC1sZW5ndGg6IDI3CglUZXh0LWNvbnRlbnQtbGVuZ3RoOiAxNwoJQ29udGVudC1sZW5ndGg6IDQ0CgoJRCAxMQoJc3ZuOnNwZWNpYWwKCVBST1BTLUVORAoJbGluayB0ZXN0aW5nIDMyMQoJRU9GCgl0cnlfZHVtcCBkZWxldGVwcm9wLmR1bXAgJiYKCXsKCQlnaXQgcmV2LWxpc3QgSEVBRCB8CgkJZ2l0IGRpZmYtdHJlZSAtLXJvb3QgLS1zdGRpbiB8CgkJc2VkICJzLyRfeDQwL09CSklEL2ciCgl9ID5hY3R1YWwgJiYKCXRlc3RfY21wIGV4cGVjdCBhY3R1YWwKJwoKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldCB1cCBzdm4gcmVwbycgJwoJc3ZuY29uZj0kUFdEL3N2bmNvbmYgJiYKCW1rZGlyIC1wICIkc3ZuY29uZiIgJiYKCglpZgoJCXN2bmFkbWluIC1oID4vZGV2L251bGwgMj4mMSAmJgoJCXN2bmFkbWluIGNyZWF0ZSBzaW1wbGUtc3ZuICYmCgkJc3ZuYWRtaW4gbG9hZCBzaW1wbGUtc3ZuIDwiJFRFU1RfRElSRUNUT1JZL3Q5MTM1L3N2bi5kdW1wIiAmJgoJCXN2biBleHBvcnQgLS1jb25maWctZGlyICIkc3ZuY29uZiIgImZpbGU6Ly8kUFdEL3NpbXBsZS1zdm4iIHNpbXBsZS1zdm5jbwoJdGhlbgoJCXRlc3Rfc2V0X3ByZXJlcSBTVk5SRVBPCglmaQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFNWTlJFUE8sUElQRSAndDkxMzUvc3ZuLmR1bXAnICcKCW1rZGlyIC1wIHNpbXBsZS1naXQgJiYKCSgKCQljZCBzaW1wbGUtZ2l0ICYmCgkJcmVpbml0X2dpdCAmJgoJCXRyeV9kdW1wICIkVEVTVF9ESVJFQ1RPUlkvdDkxMzUvc3ZuLmR1bXAiCgkpICYmCgkoCgkJY2Qgc2ltcGxlLXN2bmNvICYmCgkJZ2l0IGluaXQgJiYKCQlnaXQgYWRkIC4gJiYKCQlnaXQgZmV0Y2ggLi4vc2ltcGxlLWdpdCBtYXN0ZXIgJiYKCQlnaXQgZGlmZiAtLWV4aXQtY29kZSBGRVRDSF9IRUFECgkpCicKCnRlc3RfZG9uZQo=",
    "text": "#!/bin/sh\n\ntest_description='check svn dumpfile importer'\n\n. ./test-lib.sh\n\nreinit_git () {\n\tif ! test_declared_prereq PIPE\n\tthen\n\t\techo >&4 \"reinit_git: need to declare PIPE prerequisite\"\n\t\treturn 127\n\tfi\n\trm -fr .git &&\n\trm -f stream backflow &&\n\tgit init &&\n\tmkfifo stream backflow\n}\n\ntry_dump () {\n\tinput=$1 &&\n\tmaybe_fail=${2:+test_$2} &&\n\n\t{\n\t\t$maybe_fail test-svn-fe \"$input\" >stream 3<backflow &\n\t} &&\n\tgit fast-import --cat-blob-fd=3 <stream 3>backflow &&\n\twait $!\n}\n\nproperties () {\n\twhile test \"$#\" -ne 0\n\tdo\n\t\tproperty=\"$1\" &&\n\t\tvalue=\"$2\" &&\n\t\tprintf \"%s\\n\" \"K ${#property}\" &&\n\t\tprintf \"%s\\n\" \"$property\" &&\n\t\tprintf \"%s\\n\" \"V ${#value}\" &&\n\t\tprintf \"%s\\n\" \"$value\" &&\n\t\tshift 2 ||\n\t\treturn 1\n\tdone\n}\n\ntext_no_props () {\n\ttext=\"$1\n\" &&\n\tprintf \"%s\\n\" \"Prop-content-length: 10\" &&\n\tprintf \"%s\\n\" \"Text-content-length: ${#text}\" &&\n\tprintf \"%s\\n\" \"Content-length: $((${#text} + 10))\" &&\n\tprintf \"%s\\n\" \"\" \"PROPS-END\" &&\n\tprintf \"%s\\n\" \"$text\"\n}\n\n>empty\n\ntest_expect_success 'setup: have pipes?' '\n\trm -f frob &&\n\tif mkfifo frob\n\tthen\n\t\ttest_set_prereq PIPE\n\tfi\n'\n\ntest_expect_success PIPE 'empty dump' '\n\treinit_git &&\n\techo \"SVN-fs-dump-format-version: 2\" >input &&\n\ttry_dump input\n'\n\ntest_expect_success PIPE 'v4 dumps not supported' '\n\treinit_git &&\n\techo \"SVN-fs-dump-format-version: 4\" >v4.dump &&\n\ttry_dump v4.dump must_fail\n'\n\ntest_expect_failure PIPE 'empty revision' '\n\treinit_git &&\n\tprintf \"rev <nobody, nobody@local>: %s\\n\" \"\" \"\" >expect &&\n\tcat >emptyrev.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 0\n\tContent-length: 0\n\n\tRevision-number: 2\n\tProp-content-length: 0\n\tContent-length: 0\n\n\tEOF\n\ttry_dump emptyrev.dump &&\n\tgit log -p --format=\"rev <%an, %ae>: %s\" HEAD >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success PIPE 'empty properties' '\n\treinit_git &&\n\tprintf \"rev <nobody, nobody@local>: %s\\n\" \"\" \"\" >expect &&\n\tcat >emptyprop.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tRevision-number: 2\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\tEOF\n\ttry_dump emptyprop.dump &&\n\tgit log -p --format=\"rev <%an, %ae>: %s\" HEAD >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success PIPE 'author name and commit message' '\n\treinit_git &&\n\techo \"<author@example.com, author@example.com@local>\" >expect.author &&\n\tcat >message <<-\\EOF &&\n\tA concise summary of the change\n\n\tA detailed description of the change, why it is needed, what\n\twas broken and why applying this is the best course of action.\n\n\t* file.c\n\t    Details pertaining to an individual file.\n\tEOF\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:log \"$(cat message)\" &&\n\t\techo PROPS-END\n\t} >props &&\n\t{\n\t\techo \"SVN-fs-dump-format-version: 3\" &&\n\t\techo &&\n\t\techo \"Revision-number: 1\" &&\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props\n\t} >log.dump &&\n\ttry_dump log.dump &&\n\tgit log -p --format=\"%B\" HEAD >actual.log &&\n\tgit log --format=\"<%an, %ae>\" >actual.author &&\n\ttest_cmp message actual.log &&\n\ttest_cmp expect.author actual.author\n'\n\ntest_expect_success PIPE 'unsupported properties are ignored' '\n\treinit_git &&\n\techo author >expect &&\n\tcat >extraprop.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 56\n\tContent-length: 56\n\n\tK 8\n\tnonsense\n\tV 1\n\ty\n\tK 10\n\tsvn:author\n\tV 6\n\tauthor\n\tPROPS-END\n\tEOF\n\ttry_dump extraprop.dump &&\n\tgit log -p --format=%an HEAD >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_failure PIPE 'timestamp and empty file' '\n\techo author@example.com >expect.author &&\n\techo 1999-01-01 >expect.date &&\n\techo file >expect.files &&\n\treinit_git &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-01-01T00:01:002.000000Z\" \\\n\t\t\tsvn:log \"add empty file\" &&\n\t\techo PROPS-END\n\t} >props &&\n\t{\n\t\tcat <<-EOF &&\n\t\tSVN-fs-dump-format-version: 3\n\n\t\tRevision-number: 1\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props &&\n\t\tcat <<-\\EOF\n\n\t\tNode-path: empty-file\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tContent-length: 0\n\n\t\tEOF\n\t} >emptyfile.dump &&\n\ttry_dump emptyfile.dump &&\n\tgit log --format=%an HEAD >actual.author &&\n\tgit log --date=short --format=%ad HEAD >actual.date &&\n\tgit ls-tree -r --name-only HEAD >actual.files &&\n\ttest_cmp expect.author actual.author &&\n\ttest_cmp expect.date actual.date &&\n\ttest_cmp expect.files actual.files &&\n\tgit checkout HEAD empty-file &&\n\ttest_cmp empty file\n'\n\ntest_expect_success PIPE 'directory with files' '\n\treinit_git &&\n\tprintf \"%s\\n\" directory/file1 directory/file2 >expect.files &&\n\techo hi >hi &&\n\techo hello >hello &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-02-01T00:01:002.000000Z\" \\\n\t\t\tsvn:log \"add directory with some files in it\" &&\n\t\techo PROPS-END\n\t} >props &&\n\t{\n\t\tcat <<-EOF &&\n\t\tSVN-fs-dump-format-version: 3\n\n\t\tRevision-number: 1\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props &&\n\t\tcat <<-\\EOF &&\n\n\t\tNode-path: directory\n\t\tNode-kind: dir\n\t\tNode-action: add\n\t\tProp-content-length: 10\n\t\tContent-length: 10\n\n\t\tPROPS-END\n\n\t\tNode-path: directory/file1\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tEOF\n\t\ttext_no_props hello &&\n\t\tcat <<-\\EOF &&\n\t\tNode-path: directory/file2\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tEOF\n\t\ttext_no_props hi\n\t} >directory.dump &&\n\ttry_dump directory.dump &&\n\n\tgit ls-tree -r --name-only HEAD >actual.files &&\n\tgit checkout HEAD directory &&\n\ttest_cmp expect.files actual.files &&\n\ttest_cmp hello directory/file1 &&\n\ttest_cmp hi directory/file2\n'\n\ntest_expect_success PIPE 'branch name with backslash' '\n\treinit_git &&\n\tsort <<-\\EOF >expect.branch-files &&\n\ttrunk/file1\n\ttrunk/file2\n\t\"branches/UpdateFOPto094\\\\/file1\"\n\t\"branches/UpdateFOPto094\\\\/file2\"\n\tEOF\n\n\techo hi >hi &&\n\techo hello >hello &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-02-02T00:01:02.000000Z\" \\\n\t\t\tsvn:log \"add directory with some files in it\" &&\n\t\techo PROPS-END\n\t} >props.setup &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author brancher@example.com \\\n\t\t\tsvn:date \"2007-12-06T21:38:34.000000Z\" \\\n\t\t\tsvn:log \"Updating fop to .94 and adjust fo-stylesheets\" &&\n\t\techo PROPS-END\n\t} >props.branch &&\n\t{\n\t\tcat <<-EOF &&\n\t\tSVN-fs-dump-format-version: 3\n\n\t\tRevision-number: 1\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props.setup) &&\n\t\techo Content-length: $(wc -c <props.setup) &&\n\t\techo &&\n\t\tcat props.setup &&\n\t\tcat <<-\\EOF &&\n\n\t\tNode-path: trunk\n\t\tNode-kind: dir\n\t\tNode-action: add\n\t\tProp-content-length: 10\n\t\tContent-length: 10\n\n\t\tPROPS-END\n\n\t\tNode-path: branches\n\t\tNode-kind: dir\n\t\tNode-action: add\n\t\tProp-content-length: 10\n\t\tContent-length: 10\n\n\t\tPROPS-END\n\n\t\tNode-path: trunk/file1\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tEOF\n\t\ttext_no_props hello &&\n\t\tcat <<-\\EOF &&\n\t\tNode-path: trunk/file2\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tEOF\n\t\ttext_no_props hi &&\n\t\tcat <<-\\EOF &&\n\n\t\tRevision-number: 2\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props.branch) &&\n\t\techo Content-length: $(wc -c <props.branch) &&\n\t\techo &&\n\t\tcat props.branch &&\n\t\tcat <<-\\EOF\n\n\t\tNode-path: branches/UpdateFOPto094\\\n\t\tNode-kind: dir\n\t\tNode-action: add\n\t\tNode-copyfrom-rev: 1\n\t\tNode-copyfrom-path: trunk\n\n\t\tNode-kind: dir\n\t\tNode-action: add\n\t\tProp-content-length: 34\n\t\tContent-length: 34\n\n\t\tK 13\n\t\tsvn:mergeinfo\n\t\tV 0\n\n\t\tPROPS-END\n\t\tEOF\n\t} >branch.dump &&\n\ttry_dump branch.dump &&\n\n\tgit ls-tree -r --name-only HEAD |\n\tsort >actual.branch-files &&\n\ttest_cmp expect.branch-files actual.branch-files\n'\n\ntest_expect_success PIPE 'node without action' '\n\treinit_git &&\n\tcat >inaction.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: directory\n\tNode-kind: dir\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\tEOF\n\ttry_dump inaction.dump must_fail\n'\n\ntest_expect_success PIPE 'action: add node without text' '\n\treinit_git &&\n\tcat >textless.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: textless\n\tNode-kind: file\n\tNode-action: add\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\tEOF\n\ttry_dump textless.dump must_fail\n'\n\ntest_expect_failure PIPE 'change file mode but keep old content' '\n\treinit_git &&\n\tcat >expect <<-\\EOF &&\n\tOBJID\n\t:120000 100644 OBJID OBJID T\tgreeting\n\tOBJID\n\t:100644 120000 OBJID OBJID T\tgreeting\n\tOBJID\n\t:000000 100644 OBJID OBJID A\tgreeting\n\tEOF\n\techo \"link hello\" >expect.blob &&\n\techo hello >hello &&\n\tcat >filemode.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: add\n\tProp-content-length: 10\n\tText-content-length: 11\n\tContent-length: 21\n\n\tPROPS-END\n\tlink hello\n\n\tRevision-number: 2\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: change\n\tProp-content-length: 33\n\tContent-length: 33\n\n\tK 11\n\tsvn:special\n\tV 1\n\t*\n\tPROPS-END\n\n\tRevision-number: 3\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: change\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\tEOF\n\ttry_dump filemode.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --root --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\tgit show HEAD:greeting >actual.blob &&\n\tgit show HEAD^:greeting >actual.target &&\n\ttest_cmp expect actual &&\n\ttest_cmp expect.blob actual.blob &&\n\ttest_cmp hello actual.target\n'\n\ntest_expect_success PIPE 'NUL in property value' '\n\treinit_git &&\n\techo \"commit message\" >expect.message &&\n\t{\n\t\tproperties \\\n\t\t\tunimportant \"something with a NUL (Q)\" \\\n\t\t\tsvn:log \"commit message\"&&\n\t\techo PROPS-END\n\t} |\n\tq_to_nul >props &&\n\t{\n\t\tcat <<-\\EOF &&\n\t\tSVN-fs-dump-format-version: 3\n\n\t\tRevision-number: 1\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props\n\t} >nulprop.dump &&\n\ttry_dump nulprop.dump &&\n\tgit diff-tree --always -s --format=%s HEAD >actual.message &&\n\ttest_cmp expect.message actual.message\n'\n\ntest_expect_success PIPE 'NUL in log message, file content, and property name' '\n\t# Caveat: svnadmin 1.6.16 (r1073529) truncates at \\0 in the\n\t# svn:specialQnotreally example.\n\treinit_git &&\n\tcat >expect <<-\\EOF &&\n\tOBJID\n\t:100644 100644 OBJID OBJID M\tgreeting\n\tOBJID\n\t:000000 100644 OBJID OBJID A\tgreeting\n\tEOF\n\tprintf \"\\n%s\\n\" \"something with an ASCII NUL (Q)\" >expect.message &&\n\tprintf \"%s\\n\" \"helQo\" >expect.hello1 &&\n\tprintf \"%s\\n\" \"link hello\" >expect.hello2 &&\n\t{\n\t\tproperties svn:log \"something with an ASCII NUL (Q)\" &&\n\t\techo PROPS-END\n\t} |\n\tq_to_nul >props &&\n\t{\n\t\tq_to_nul <<-\\EOF &&\n\t\tSVN-fs-dump-format-version: 3\n\n\t\tRevision-number: 1\n\t\tProp-content-length: 10\n\t\tContent-length: 10\n\n\t\tPROPS-END\n\n\t\tNode-path: greeting\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tProp-content-length: 10\n\t\tText-content-length: 6\n\t\tContent-length: 16\n\n\t\tPROPS-END\n\t\thelQo\n\n\t\tRevision-number: 2\n\t\tEOF\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props &&\n\t\tq_to_nul <<-\\EOF\n\n\t\tNode-path: greeting\n\t\tNode-kind: file\n\t\tNode-action: change\n\t\tProp-content-length: 43\n\t\tText-content-length: 11\n\t\tContent-length: 54\n\n\t\tK 21\n\t\tsvn:specialQnotreally\n\t\tV 1\n\t\t*\n\t\tPROPS-END\n\t\tlink hello\n\t\tEOF\n\t} >8bitclean.dump &&\n\ttry_dump 8bitclean.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --root --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\t{\n\t\tgit cat-file commit HEAD | nul_to_q &&\n\t\techo\n\t} |\n\tsed -ne \"/^\\$/,\\$ p\" >actual.message &&\n\tgit cat-file blob HEAD^:greeting | nul_to_q >actual.hello1 &&\n\tgit cat-file blob HEAD:greeting | nul_to_q >actual.hello2 &&\n\ttest_cmp expect actual &&\n\ttest_cmp expect.message actual.message &&\n\ttest_cmp expect.hello1 actual.hello1 &&\n\ttest_cmp expect.hello2 actual.hello2\n'\n\ntest_expect_success PIPE 'change file mode and reiterate content' '\n\treinit_git &&\n\tcat >expect <<-\\EOF &&\n\tOBJID\n\t:120000 100644 OBJID OBJID T\tgreeting\n\tOBJID\n\t:100644 120000 OBJID OBJID T\tgreeting\n\tOBJID\n\t:000000 100644 OBJID OBJID A\tgreeting\n\tEOF\n\techo \"link hello\" >expect.blob &&\n\techo hello >hello &&\n\tcat >filemode2.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: add\n\tProp-content-length: 10\n\tText-content-length: 11\n\tContent-length: 21\n\n\tPROPS-END\n\tlink hello\n\n\tRevision-number: 2\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: change\n\tProp-content-length: 33\n\tText-content-length: 11\n\tContent-length: 44\n\n\tK 11\n\tsvn:special\n\tV 1\n\t*\n\tPROPS-END\n\tlink hello\n\n\tRevision-number: 3\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: change\n\tProp-content-length: 10\n\tText-content-length: 11\n\tContent-length: 21\n\n\tPROPS-END\n\tlink hello\n\tEOF\n\ttry_dump filemode2.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --root --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\tgit show HEAD:greeting >actual.blob &&\n\tgit show HEAD^:greeting >actual.target &&\n\ttest_cmp expect actual &&\n\ttest_cmp expect.blob actual.blob &&\n\ttest_cmp hello actual.target\n'\n\ntest_expect_success PIPE 'deltas not supported' '\n\treinit_git &&\n\t{\n\t\t# (old) h + (inline) ello + (old) \\n\n\t\tprintf \"SVNQ%b%b%s\" \"Q\\003\\006\\005\\004\" \"\\001Q\\0204\\001\\002\" \"ello\" |\n\t\tq_to_nul\n\t} >delta &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-01-05T00:01:002.000000Z\" \\\n\t\t\tsvn:log \"add greeting\" &&\n\t\techo PROPS-END\n\t} >props &&\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-01-06T00:01:002.000000Z\" \\\n\t\t\tsvn:log \"change it\" &&\n\t\techo PROPS-END\n\t} >props2 &&\n\t{\n\t\techo SVN-fs-dump-format-version: 3 &&\n\t\techo &&\n\t\techo Revision-number: 1 &&\n\t\techo Prop-content-length: $(wc -c <props) &&\n\t\techo Content-length: $(wc -c <props) &&\n\t\techo &&\n\t\tcat props &&\n\t\tcat <<-\\EOF &&\n\n\t\tNode-path: hello\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tProp-content-length: 10\n\t\tText-content-length: 3\n\t\tContent-length: 13\n\n\t\tPROPS-END\n\t\thi\n\n\t\tEOF\n\t\techo Revision-number: 2 &&\n\t\techo Prop-content-length: $(wc -c <props2) &&\n\t\techo Content-length: $(wc -c <props2) &&\n\t\techo &&\n\t\tcat props2 &&\n\t\tcat <<-\\EOF &&\n\n\t\tNode-path: hello\n\t\tNode-kind: file\n\t\tNode-action: change\n\t\tText-delta: true\n\t\tProp-content-length: 10\n\t\tEOF\n\t\techo Text-content-length: $(wc -c <delta) &&\n\t\techo Content-length: $((10 + $(wc -c <delta))) &&\n\t\techo &&\n\t\techo PROPS-END &&\n\t\tcat delta\n\t} >delta.dump &&\n\ttest_must_fail try_dump delta.dump\n'\n\ntest_expect_success PIPE 'property deltas supported' '\n\treinit_git &&\n\tcat >expect <<-\\EOF &&\n\tOBJID\n\t:100755 100644 OBJID OBJID M\tscript.sh\n\tEOF\n\t{\n\t\tproperties \\\n\t\t\tsvn:author author@example.com \\\n\t\t\tsvn:date \"1999-03-06T00:01:002.000000Z\" \\\n\t\t\tsvn:log \"make an executable, or chmod -x it\" &&\n\t\techo PROPS-END\n\t} >revprops &&\n\t{\n\t\techo SVN-fs-dump-format-version: 3 &&\n\t\techo &&\n\t\techo Revision-number: 1 &&\n\t\techo Prop-content-length: $(wc -c <revprops) &&\n\t\techo Content-length: $(wc -c <revprops) &&\n\t\techo &&\n\t\tcat revprops &&\n\t\techo &&\n\t\tcat <<-\\EOF &&\n\t\tNode-path: script.sh\n\t\tNode-kind: file\n\t\tNode-action: add\n\t\tText-content-length: 0\n\t\tProp-content-length: 39\n\t\tContent-length: 39\n\n\t\tK 14\n\t\tsvn:executable\n\t\tV 4\n\t\ttrue\n\t\tPROPS-END\n\n\t\tEOF\n\t\techo Revision-number: 2 &&\n\t\techo Prop-content-length: $(wc -c <revprops) &&\n\t\techo Content-length: $(wc -c <revprops) &&\n\t\techo &&\n\t\tcat revprops &&\n\t\techo &&\n\t\tcat <<-\\EOF\n\t\tNode-path: script.sh\n\t\tNode-kind: file\n\t\tNode-action: change\n\t\tProp-delta: true\n\t\tProp-content-length: 30\n\t\tContent-length: 30\n\n\t\tD 14\n\t\tsvn:executable\n\t\tPROPS-END\n\t\tEOF\n\t} >propdelta.dump &&\n\ttry_dump propdelta.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success PIPE 'properties on /' '\n\treinit_git &&\n\tcat <<-\\EOF >expect &&\n\tOBJID\n\tOBJID\n\t:000000 100644 OBJID OBJID A\tgreeting\n\tEOF\n\tsed -e \"s/X$//\" <<-\\EOF >changeroot.dump &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: greeting\n\tNode-kind: file\n\tNode-action: add\n\tText-content-length: 0\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tRevision-number: 2\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: X\n\tNode-kind: dir\n\tNode-action: change\n\tProp-delta: true\n\tProp-content-length: 43\n\tContent-length: 43\n\n\tK 10\n\tsvn:ignore\n\tV 11\n\tbuild-area\n\n\tPROPS-END\n\tEOF\n\ttry_dump changeroot.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --root --always --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\ttest_cmp expect actual\n'\n\ntest_expect_success PIPE 'deltas for typechange' '\n\treinit_git &&\n\tcat >expect <<-\\EOF &&\n\tOBJID\n\t:120000 100644 OBJID OBJID T\ttest-file\n\tOBJID\n\t:100755 120000 OBJID OBJID T\ttest-file\n\tOBJID\n\t:000000 100755 OBJID OBJID A\ttest-file\n\tEOF\n\tcat >deleteprop.dump <<-\\EOF &&\n\tSVN-fs-dump-format-version: 3\n\n\tRevision-number: 1\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: test-file\n\tNode-kind: file\n\tNode-action: add\n\tProp-delta: true\n\tProp-content-length: 35\n\tText-content-length: 17\n\tContent-length: 52\n\n\tK 14\n\tsvn:executable\n\tV 0\n\n\tPROPS-END\n\tlink testing 123\n\n\tRevision-number: 2\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: test-file\n\tNode-kind: file\n\tNode-action: change\n\tProp-delta: true\n\tProp-content-length: 53\n\tText-content-length: 17\n\tContent-length: 70\n\n\tK 11\n\tsvn:special\n\tV 1\n\t*\n\tD 14\n\tsvn:executable\n\tPROPS-END\n\tlink testing 231\n\n\tRevision-number: 3\n\tProp-content-length: 10\n\tContent-length: 10\n\n\tPROPS-END\n\n\tNode-path: test-file\n\tNode-kind: file\n\tNode-action: change\n\tProp-delta: true\n\tProp-content-length: 27\n\tText-content-length: 17\n\tContent-length: 44\n\n\tD 11\n\tsvn:special\n\tPROPS-END\n\tlink testing 321\n\tEOF\n\ttry_dump deleteprop.dump &&\n\t{\n\t\tgit rev-list HEAD |\n\t\tgit diff-tree --root --stdin |\n\t\tsed \"s/$_x40/OBJID/g\"\n\t} >actual &&\n\ttest_cmp expect actual\n'\n\n\ntest_expect_success 'set up svn repo' '\n\tsvnconf=$PWD/svnconf &&\n\tmkdir -p \"$svnconf\" &&\n\n\tif\n\t\tsvnadmin -h >/dev/null 2>&1 &&\n\t\tsvnadmin create simple-svn &&\n\t\tsvnadmin load simple-svn <\"$TEST_DIRECTORY/t9135/svn.dump\" &&\n\t\tsvn export --config-dir \"$svnconf\" \"file://$PWD/simple-svn\" simple-svnco\n\tthen\n\t\ttest_set_prereq SVNREPO\n\tfi\n'\n\ntest_expect_success SVNREPO,PIPE 't9135/svn.dump' '\n\tmkdir -p simple-git &&\n\t(\n\t\tcd simple-git &&\n\t\treinit_git &&\n\t\ttry_dump \"$TEST_DIRECTORY/t9135/svn.dump\"\n\t) &&\n\t(\n\t\tcd simple-svnco &&\n\t\tgit init &&\n\t\tgit add . &&\n\t\tgit fetch ../simple-git master &&\n\t\tgit diff --exit-code FETCH_HEAD\n\t)\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "003395c5f6f05bf7afe2aef35146518a3323af02",
  "sha1_ok": true,
  "size": 18773
}
