{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDggTWF0dGhldyBPZ2lsdmllCiMgUGFydHMgYWRhcHRlZCBmcm9tIG90aGVyIHRlc3RzLgojCgp0ZXN0X2Rlc2NyaXB0aW9uPSdnaXQtY3Zzc2VydmVyIC1rYiBtb2RlcwoKdGVzdHMgLWtiIG1vZGUgZm9yIGJpbmFyeSBmaWxlcyB3aGVuIGFjY2Vzc2luZyBhIGdpdApyZXBvc2l0b3J5IHVzaW5nIGN2cyBDTEkgY2xpZW50IHZpYSBnaXQtY3Zzc2VydmVyIHNlcnZlcicKCkdJVF9URVNUX0RFRkFVTFRfSU5JVElBTF9CUkFOQ0hfTkFNRT1tYXN0ZXIKZXhwb3J0IEdJVF9URVNUX0RFRkFVTFRfSU5JVElBTF9CUkFOQ0hfTkFNRQoKLiAuL3Rlc3QtbGliLnNoCgptYXJrZWRfYXMgKCkgewogICAgZm91bmRFbnRyeT0iJChncmVwICJeLyQyLyIgIiQxL0NWUy9FbnRyaWVzIikiCiAgICBpZiBbIHgiJGZvdW5kRW50cnkiID0geCIiIF0gOyB0aGVuCiAgICAgICBlY2hvICJOT1QgRk9VTkQ6ICQxICQyIDEgJDMiID4+ICIke1dPUktESVJ9L21hcmtlZC5sb2ciCiAgICAgICByZXR1cm4gMQogICAgZmkKICAgIHRlc3QgeCIkKGdyZXAgIl4vJDIvIiAiJDEvQ1ZTL0VudHJpZXMiIHwgY3V0IC1kLyAtZjUpIiA9IHgiJDMiCiAgICBzdGF0PSQ/CiAgICBlY2hvICIkMSAkMiAkc3RhdCAnJDMnIiA+PiAiJHtXT1JLRElSfS9tYXJrZWQubG9nIgogICAgcmV0dXJuICRzdGF0Cn0KCm5vdF9wcmVzZW50KCkgewogICAgZm91bmRFbnRyeT0iJChncmVwICJeLyQyLyIgIiQxL0NWUy9FbnRyaWVzIikiCiAgICBpZiBbIC1yICIkMS8kMiIgXSA7IHRoZW4KICAgICAgICBlY2hvICJFcnJvcjogRmlsZSBzdGlsbCBleGlzdHM6ICQxICQyIiA+PiAiJHtXT1JLRElSfS9tYXJrZWQubG9nIgogICAgICAgIHJldHVybiAxOwogICAgZmkKICAgIGlmIFsgeCIkZm91bmRFbnRyeSIgIT0geCIiIF0gOyB0aGVuCiAgICAgICAgZWNobyAiRXJyb3I6IHNob3VsZCBub3QgaGF2ZSBmb3VuZDogJDEgJDIiID4+ICIke1dPUktESVJ9L21hcmtlZC5sb2ciCiAgICAgICAgcmV0dXJuIDE7CiAgICBlbHNlCiAgICAgICAgZWNobyAiQ29ycmVjdGx5IG5vdCBmb3VuZDogJDEgJDIiID4+ICIke1dPUktESVJ9L21hcmtlZC5sb2ciCiAgICAgICAgcmV0dXJuIDA7CiAgICBmaQp9CgpjaGVja19zdGF0dXNfb3B0aW9ucygpIHsKICAgIChjZCAiJDEiICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHN0YXR1cyAiJDIiID4gIiR7V09SS0RJUn0vc3RhdHVzLm91dCIgMj4mMQogICAgKQogICAgaWYgWyB4IiQ/IiAhPSB4IjAiIF0gOyB0aGVuCgllY2hvICJFcnJvciBmcm9tIGN2cyBzdGF0dXM6ICQxICQyIiA+PiAiJHtXT1JLRElSfS9tYXJrZWQubG9nIgoJcmV0dXJuIDE7CiAgICBmaQogICAgZ290PSIkKHNlZCAtbiAtZSAncy9eWyAJXSpTdGlja3kgT3B0aW9uczpbIAldKi8vcCcgIiR7V09SS0RJUn0vc3RhdHVzLm91dCIpIgogICAgZXhwZWN0PSIkMyIKICAgIGlmIFsgeCIkZXhwZWN0IiA9IHgiIiBdIDsgdGhlbgoJZXhwZWN0PSIobm9uZSkiCiAgICBmaQogICAgdGVzdCB4IiRnb3QiID0geCIkZXhwZWN0IgogICAgc3RhdD0kPwogICAgZWNobyAiY3ZzIHN0YXR1czogJDEgJDIgJHN0YXQgJyQzJyAnJGdvdCciID4+ICIke1dPUktESVJ9L21hcmtlZC5sb2ciCiAgICByZXR1cm4gJHN0YXQKfQoKY3ZzID4vZGV2L251bGwgMj4mMQppZiB0ZXN0ICQ/IC1uZSAxCnRoZW4KICAgIHNraXBfYWxsPSdza2lwcGluZyBnaXQtY3Zzc2VydmVyIHRlc3RzLCBjdnMgbm90IGZvdW5kJwogICAgdGVzdF9kb25lCmZpCmlmICEgdGVzdF9oYXZlX3ByZXJlcSBQRVJMCnRoZW4KICAgIHNraXBfYWxsPSdza2lwcGluZyBnaXQtY3Zzc2VydmVyIHRlc3RzLCBwZXJsIG5vdCBhdmFpbGFibGUnCiAgICB0ZXN0X2RvbmUKZmkKcGVybCAtZSAndXNlIERCSTsgdXNlIERCRDo6U1FMaXRlJyA+L2Rldi9udWxsIDI+JjEgfHwgewogICAgc2tpcF9hbGw9J3NraXBwaW5nIGdpdC1jdnNzZXJ2ZXIgdGVzdHMsIFBlcmwgU1FMaXRlIGludGVyZmFjZSB1bmF2YWlsYWJsZScKICAgIHRlc3RfZG9uZQp9Cgp1bnNldCBHSVRfRElSIEdJVF9DT05GSUcKV09SS0RJUj0kUFdEClNFUlZFUkRJUj0kUFdEL2dpdGN2cy5naXQKZ2l0X2NvbmZpZz0iJFNFUlZFUkRJUi9jb25maWciCkNWU1JPT1Q9Ijpmb3JrOiRTRVJWRVJESVIiCkNWU1dPUks9IiRQV0QvY3Zzd29yayIKQ1ZTX1NFUlZFUj1naXQtY3Zzc2VydmVyCmV4cG9ydCBDVlNST09UIENWU19TRVJWRVIKCnJtIC1yZiAiJENWU1dPUksiICIkU0VSVkVSRElSIgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzZXR1cCcgJwogICAgZ2l0IGNvbmZpZyBwdXNoLmRlZmF1bHQgbWF0Y2hpbmcgJiYKICAgIGVjaG8gIlNpbXBsZSB0ZXh0IGZpbGUiID50ZXh0ZmlsZS5jICYmCiAgICBlY2hvICJGaWxlIHdpdGggZW1iZWRkZWQgTlVMOiBRIDwtIHRoZXJlIiB8IHFfdG9fbnVsID4gYmluZmlsZS5iaW4gJiYKICAgIG1rZGlyIHN1YmRpciAmJgogICAgZWNobyAiQW5vdGhlciB0ZXh0IGZpbGUiID4gc3ViZGlyL2ZpbGUuaCAmJgogICAgZWNobyAiQW5vdGhlciBiaW5hcnk6IFEgKHRoaXMgdGltZSBDUikiIHwgcV90b19jciA+IHN1YmRpci93aXRoQ3IuYmluICYmCiAgICBlY2hvICJNaXhlZCB1cCBOVUwsIGJ1dCBtYXJrZWQgdGV4dDogUSA8LSB0aGVyZSIgfCBxX3RvX251bCA+IG1peGVkVXAuYyAmJgogICAgZWNobyAiVW5zcGVjaWZpZWQiID4gc3ViZGlyL3Vuc3BlY2lmaWVkLm90aGVyICYmCiAgICBlY2hvICIvKi5iaW4gLWNybGYiID4gLmdpdGF0dHJpYnV0ZXMgJiYKICAgIGVjaG8gIi8qLmMgY3JsZiIgPj4gLmdpdGF0dHJpYnV0ZXMgJiYKICAgIGVjaG8gInN1YmRpci8qLmJpbiAtY3JsZiIgPj4gLmdpdGF0dHJpYnV0ZXMgJiYKICAgIGVjaG8gInN1YmRpci8qLmMgY3JsZiIgPj4gLmdpdGF0dHJpYnV0ZXMgJiYKICAgIGVjaG8gInN1YmRpci9maWxlLmggY3JsZiIgPj4gLmdpdGF0dHJpYnV0ZXMgJiYKICAgIGdpdCBhZGQgLmdpdGF0dHJpYnV0ZXMgdGV4dGZpbGUuYyBiaW5maWxlLmJpbiBtaXhlZFVwLmMgc3ViZGlyLyogJiYKICAgIGdpdCBjb21taXQgLXEgLW0gIkZpcnN0IENvbW1pdCIgJiYKICAgIGdpdCBjbG9uZSAtcSAtLWJhcmUgIiRXT1JLRElSLy5naXQiICIkU0VSVkVSRElSIiA+L2Rldi9udWxsIDI+JjEgJiYKICAgIEdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgLS1ib29sIGdpdGN2cy5lbmFibGVkIHRydWUgJiYKICAgIEdJVF9ESVI9IiRTRVJWRVJESVIiIGdpdCBjb25maWcgZ2l0Y3ZzLmxvZ2ZpbGUgIiRTRVJWRVJESVIvZ2l0Y3ZzLmxvZyIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIGNvIChkZWZhdWx0IGNybGYpJyAnCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsgbWFzdGVyID5jdnMubG9nIDI+JjEgJiYKICAgIHRlc3QgeCIkKGdyZXAgJy8taycgY3Zzd29yay9DVlMvRW50cmllcyBjdnN3b3JrL3N1YmRpci9DVlMvRW50cmllcykiID0geCIiCicKCnJtIC1yZiBjdnN3b3JrCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBjbyAoYWxsYmluYXJ5KScgJwogICAgR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLmFsbGJpbmFyeSB0cnVlICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsgbWFzdGVyID5jdnMubG9nIDI+JjEgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yayBiaW5maWxlLmJpbiAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIC5naXRhdHRyaWJ1dGVzIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgbWl4ZWRVcC5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgZmlsZS5oIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHVuc3BlY2lmaWVkLm90aGVyIC1rYgonCgpybSAtcmYgY3Zzd29yayBjdnMubG9nCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBjbyAodXNlIGF0dHJpYnV0ZXMvYWxsYmluYXJ5KScgJwogICAgR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLnVzZWNybGZhdHRyIHRydWUgJiYKICAgIEdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgLVEgY28gLWQgY3Zzd29yayBtYXN0ZXIgPmN2cy5sb2cgMj4mMSAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgdGV4dGZpbGUuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgYmluZmlsZS5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yayAuZ2l0YXR0cmlidXRlcyAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgZmlsZS5oICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgdW5zcGVjaWZpZWQub3RoZXIgLWtiCicKCnJtIC1yZiBjdnN3b3JrCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2N2cyBjbyAodXNlIGF0dHJpYnV0ZXMpJyAnCiAgICBHSVRfRElSPSIkU0VSVkVSRElSIiBnaXQgY29uZmlnIC0tYm9vbCBnaXRjdnMuYWxsYmluYXJ5IGZhbHNlICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsgbWFzdGVyID5jdnMubG9nIDI+JjEgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgZmlsZS5oICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgdW5zcGVjaWZpZWQub3RoZXIgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWRkaW5nIGZpbGVzJyAnCiAgICAoY2QgY3Zzd29yayAmJgogICAgKGNkIHN1YmRpciAmJgogICAgZWNobyAibW9yZSB0ZXh0IiA+IHNyYy5jICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGFkZCBzcmMuYyA+Y3ZzLmxvZyAyPiYxICYmCiAgICBtYXJrZWRfYXMgLiBzcmMuYyAiIiAmJgogICAgZWNobyAicHNldWRvLWJpbmFyeSIgPiB0ZW1wLmJpbgogICAgKSAmJgogICAgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBhZGQgc3ViZGlyL3RlbXAuYmluID5jdnMubG9nIDI+JjEgJiYKICAgIG1hcmtlZF9hcyBzdWJkaXIgdGVtcC5iaW4gIi1rYiIgJiYKICAgIGNkIHN1YmRpciAmJgogICAgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBjaSAtbSAiYWRkaW5nIGZpbGVzIiA+Y3ZzLmxvZyAyPiYxICYmCiAgICBtYXJrZWRfYXMgLiB0ZW1wLmJpbiAiLWtiIiAmJgogICAgbWFya2VkX2FzIC4gc3JjLmMgIiIKICAgICkKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXBkYXRpbmcnICcKICAgIGdpdCBwdWxsIGdpdGN2cy5naXQgJiYKICAgIGVjaG8gImhpIiA+c3ViZGlyL25ld2ZpbGUuYmluICYmCiAgICBlY2hvICJqdW5rIiA+c3ViZGlyL2ZpbGUuaCAmJgogICAgZWNobyAiaGkiID5zdWJkaXIvbmV3ZmlsZS5jICYmCiAgICBlY2hvICJoZWxsbyIgPj5iaW5maWxlLmJpbiAmJgogICAgZ2l0IGFkZCBzdWJkaXIvbmV3ZmlsZS5iaW4gc3ViZGlyL2ZpbGUuaCBzdWJkaXIvbmV3ZmlsZS5jIGJpbmZpbGUuYmluICYmCiAgICBnaXQgY29tbWl0IC1xIC1tICJBZGQgYW5kIGNoYW5nZSBzb21lIGZpbGVzIiAmJgogICAgZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCiAgICAoY2QgY3Zzd29yayAmJgogICAgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSB1cGRhdGUKICAgICkgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgZmlsZS5oICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgdW5zcGVjaWZpZWQub3RoZXIgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmJpbiAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmMgIiIgJiYKICAgIGVjaG8gIkZpbGUgd2l0aCBlbWJlZGRlZCBOVUw6IFEgPC0gdGhlcmUiIHwgcV90b19udWwgPiB0bXBFeHBlY3QxICYmCiAgICBlY2hvICJoZWxsbyIgPj4gdG1wRXhwZWN0MSAmJgogICAgY21wIGN2c3dvcmsvYmluZmlsZS5iaW4gdG1wRXhwZWN0MQonCgpybSAtcmYgY3Zzd29yawp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgY28gKHVzZSBhdHRyaWJ1dGVzL2d1ZXNzKScgJwogICAgR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyBnaXRjdnMuYWxsYmluYXJ5IGd1ZXNzICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsgbWFzdGVyID5jdnMubG9nIDI+JjEgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgZmlsZS5oICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgdW5zcGVjaWZpZWQub3RoZXIgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmJpbiAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmMgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgbXVsdGktbGluZSBmaWxlcycgJwogICAgKCBlY2hvICJsaW5lIDEiICYmCiAgICAgIGVjaG8gImxpbmUgMiIgJiYKICAgICAgZWNobyAibGluZSAzIiAmJgogICAgICBlY2hvICJsaW5lIDQgd2l0aCBOVUw6IFEgPC0iICkgfCBxX3RvX251bCA+IG11bHRpbGluZS5jICYmCiAgICBnaXQgYWRkIG11bHRpbGluZS5jICYmCiAgICAoIGVjaG8gImxpbmUgMSIgJiYKICAgICAgZWNobyAibGluZSAyIiAmJgogICAgICBlY2hvICJsaW5lIDMiICYmCiAgICAgIGVjaG8gImxpbmUgNCIgKSB8IHFfdG9fbnVsID4gbXVsdGlsaW5lVHh0LmMgJiYKICAgIGdpdCBhZGQgbXVsdGlsaW5lVHh0LmMgJiYKICAgIGdpdCBjb21taXQgLXEgLW0gIm11bHRpbGluZSBmaWxlcyIgJiYKICAgIGdpdCBwdXNoIGdpdGN2cy5naXQgPi9kZXYvbnVsbAonCgpybSAtcmYgY3Zzd29yawp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdnMgY28gKGd1ZXNzKScgJwogICAgR0lUX0RJUj0iJFNFUlZFUkRJUiIgZ2l0IGNvbmZpZyAtLWJvb2wgZ2l0Y3ZzLnVzZWNybGZhdHRyIGZhbHNlICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsgbWFzdGVyID5jdnMubG9nIDI+JjEgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG11bHRpbGluZS5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgbXVsdGlsaW5lVHh0LmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciB3aXRoQ3IuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIGZpbGUuaCAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHVuc3BlY2lmaWVkLm90aGVyICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgbmV3ZmlsZS5iaW4gIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmMgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIGNvIGFub3RoZXIgY29weSAoZ3Vlc3MpJyAnCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNvIC1kIGN2c3dvcmsyIG1hc3RlciA+Y3ZzLmxvZyAyPiYxICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgdGV4dGZpbGUuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIC5naXRhdHRyaWJ1dGVzICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgbWl4ZWRVcC5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIG11bHRpbGluZS5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIG11bHRpbGluZVR4dC5jICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIvc3ViZGlyIHdpdGhDci5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIvc3ViZGlyIGZpbGUuaCAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciB1bnNwZWNpZmllZC5vdGhlciAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciBuZXdmaWxlLmJpbiAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciBuZXdmaWxlLmMgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIHN0YXR1cyAtIHN0aWNreSBvcHRpb25zJyAnCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMiB0ZXh0ZmlsZS5jICIiICYmCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMiBiaW5maWxlLmJpbiAta2IgJiYKICAgIGNoZWNrX3N0YXR1c19vcHRpb25zIGN2c3dvcmsyIC5naXRhdHRyaWJ1dGVzICIiICYmCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMiBtaXhlZFVwLmMgLWtiICYmCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMiBtdWx0aWxpbmUuYyAta2IgJiYKICAgIGNoZWNrX3N0YXR1c19vcHRpb25zIGN2c3dvcmsyIG11bHRpbGluZVR4dC5jICIiICYmCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMi9zdWJkaXIgd2l0aENyLmJpbiAta2IgJiYKICAgIGNoZWNrX3N0YXR1c19vcHRpb25zIGN2c3dvcmsyIHN1YmRpci93aXRoQ3IuYmluIC1rYiAmJgogICAgY2hlY2tfc3RhdHVzX29wdGlvbnMgY3Zzd29yazIvc3ViZGlyIGZpbGUuaCAiIiAmJgogICAgY2hlY2tfc3RhdHVzX29wdGlvbnMgY3Zzd29yazIgc3ViZGlyL2ZpbGUuaCAiIiAmJgogICAgY2hlY2tfc3RhdHVzX29wdGlvbnMgY3Zzd29yazIvc3ViZGlyIHVuc3BlY2lmaWVkLm90aGVyICIiICYmCiAgICBjaGVja19zdGF0dXNfb3B0aW9ucyBjdnN3b3JrMi9zdWJkaXIgbmV3ZmlsZS5iaW4gIiIgJiYKICAgIGNoZWNrX3N0YXR1c19vcHRpb25zIGN2c3dvcmsyL3N1YmRpciBuZXdmaWxlLmMgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWRkIHRleHQgKGd1ZXNzKScgJwogICAgKGNkIGN2c3dvcmsgJiYKICAgIGVjaG8gInNpbXBsZVRleHQiID4gc2ltcGxlVGV4dC5jICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGFkZCBzaW1wbGVUZXh0LmMKICAgICkgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHNpbXBsZVRleHQuYyAiIgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhZGQgYmluIChndWVzcyknICcKICAgIChjZCBjdnN3b3JrICYmCiAgICBlY2hvICJzaW1wbGVCaW46IE5VTDogUSA8LSB0aGVyZSIgfCBxX3RvX251bCA+IHNpbXBsZUJpbi5iaW4gJiYKICAgIEdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgLVEgYWRkIHNpbXBsZUJpbi5iaW4KICAgICkgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHNpbXBsZUJpbi5iaW4gLWtiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlbW92ZSBmaWxlcyAoZ3Vlc3MpJyAnCiAgICAoY2QgY3Zzd29yayAmJgogICAgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyAtUSBybSAtZiBzdWJkaXIvZmlsZS5oICYmCiAgICAoY2Qgc3ViZGlyICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIHJtIC1mIHdpdGhDci5iaW4KICAgICkpICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgd2l0aENyLmJpbiAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBmaWxlLmggIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY3ZzIGNpIChndWVzcyknICcKICAgIChjZCBjdnN3b3JrICYmCiAgICBHSVRfQ09ORklHPSIkZ2l0X2NvbmZpZyIgY3ZzIC1RIGNpIC1tICJhZGQvcm0gZmlsZXMiID5jdnMubG9nIDI+JjEKICAgICkgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHRleHRmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG1peGVkVXAuYyAta2IgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIG11bHRpbGluZS5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsgbXVsdGlsaW5lVHh0LmMgIiIgJiYKICAgIG5vdF9wcmVzZW50IGN2c3dvcmsvc3ViZGlyIHdpdGhDci5iaW4gJiYKICAgIG5vdF9wcmVzZW50IGN2c3dvcmsvc3ViZGlyIGZpbGUuaCAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsvc3ViZGlyIHVuc3BlY2lmaWVkLm90aGVyICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yay9zdWJkaXIgbmV3ZmlsZS5iaW4gIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrL3N1YmRpciBuZXdmaWxlLmMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrIHNpbXBsZUJpbi5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yayBzaW1wbGVUZXh0LmMgIiIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndXBkYXRlIHN1YmRpciBvZiBvdGhlciBjb3B5IChndWVzcyknICcKICAgIChjZCBjdnN3b3JrMi9zdWJkaXIgJiYKICAgIEdJVF9DT05GSUc9IiRnaXRfY29uZmlnIiBjdnMgLVEgdXBkYXRlCiAgICApICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgdGV4dGZpbGUuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIGJpbmZpbGUuYmluIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIC5naXRhdHRyaWJ1dGVzICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgbWl4ZWRVcC5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIG11bHRpbGluZS5jIC1rYiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIG11bHRpbGluZVR4dC5jICIiICYmCiAgICBub3RfcHJlc2VudCBjdnN3b3JrMi9zdWJkaXIgd2l0aENyLmJpbiAmJgogICAgbm90X3ByZXNlbnQgY3Zzd29yazIvc3ViZGlyIGZpbGUuaCAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciB1bnNwZWNpZmllZC5vdGhlciAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciBuZXdmaWxlLmJpbiAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyL3N1YmRpciBuZXdmaWxlLmMgIiIgJiYKICAgIG5vdF9wcmVzZW50IGN2c3dvcmsyIHNpbXBsZUJpbi5iaW4gJiYKICAgIG5vdF9wcmVzZW50IGN2c3dvcmsyIHNpbXBsZVRleHQuYwonCgplY2hvICJzdGFydGluZyB1cGRhdGUvbWVyZ2UiID4+ICIke1dPUktESVJ9L21hcmtlZC5sb2ciCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3VwZGF0ZS9tZXJnZSBmdWxsIG90aGVyIGNvcHkgKGd1ZXNzKScgJwogICAgZ2l0IHB1bGwgZ2l0Y3ZzLmdpdCBtYXN0ZXIgJiYKICAgIHNlZCAicy8zL3JlcGxhY2VkXzMvIiA8IG11bHRpbGluZVR4dC5jID4gbWwudGVtcCAmJgogICAgbXYgbWwudGVtcCBtdWx0aWxpbmVUeHQuYyAmJgogICAgZ2l0IGFkZCBtdWx0aWxpbmVUeHQuYyAmJgogICAgZ2l0IGNvbW1pdCAtcSAtbSAibW9kaWZ5IG11bHRpbGluZSBmaWxlIiA+PiAiJHtXT1JLRElSfS9tYXJrZWQubG9nIiAmJgogICAgZ2l0IHB1c2ggZ2l0Y3ZzLmdpdCA+L2Rldi9udWxsICYmCiAgICAoY2QgY3Zzd29yazIgJiYKICAgIHNlZCAicy8xL3JlcGxhY2VkXzEvIiA8IG11bHRpbGluZVR4dC5jID4gbWwudGVtcCAmJgogICAgbXYgbWwudGVtcCBtdWx0aWxpbmVUeHQuYyAmJgogICAgR0lUX0NPTkZJRz0iJGdpdF9jb25maWciIGN2cyB1cGRhdGUgPiBjdnMubG9nIDI+JjEKICAgICkgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrMiB0ZXh0ZmlsZS5jICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgYmluZmlsZS5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgLmdpdGF0dHJpYnV0ZXMgIiIgJiYKICAgIG1hcmtlZF9hcyBjdnN3b3JrMiBtaXhlZFVwLmMgLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgbXVsdGlsaW5lLmMgLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgbXVsdGlsaW5lVHh0LmMgIiIgJiYKICAgIG5vdF9wcmVzZW50IGN2c3dvcmsyL3N1YmRpciB3aXRoQ3IuYmluICYmCiAgICBub3RfcHJlc2VudCBjdnN3b3JrMi9zdWJkaXIgZmlsZS5oICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIvc3ViZGlyIHVuc3BlY2lmaWVkLm90aGVyICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIvc3ViZGlyIG5ld2ZpbGUuYmluICIiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIvc3ViZGlyIG5ld2ZpbGUuYyAiIiAmJgogICAgbWFya2VkX2FzIGN2c3dvcmsyIHNpbXBsZUJpbi5iaW4gLWtiICYmCiAgICBtYXJrZWRfYXMgY3Zzd29yazIgc2ltcGxlVGV4dC5jICIiICYmCiAgICBlY2hvICJsaW5lIHJlcGxhY2VkXzEiID4gdG1wRXhwZWN0MiAmJgogICAgZWNobyAibGluZSAyIiA+PiB0bXBFeHBlY3QyICYmCiAgICBlY2hvICJsaW5lIHJlcGxhY2VkXzMiID4+IHRtcEV4cGVjdDIgJiYKICAgIGVjaG8gImxpbmUgNCIgfCBxX3RvX251bCA+PiB0bXBFeHBlY3QyICYmCiAgICBjbXAgY3Zzd29yazIvbXVsdGlsaW5lVHh0LmMgdG1wRXhwZWN0MgonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2008 Matthew Ogilvie\n# Parts adapted from other tests.\n#\n\ntest_description='git-cvsserver -kb modes\n\ntests -kb mode for binary files when accessing a git\nrepository using cvs CLI client via git-cvsserver server'\n\nGIT_TEST_DEFAULT_INITIAL_BRANCH_NAME=master\nexport GIT_TEST_DEFAULT_INITIAL_BRANCH_NAME\n\n. ./test-lib.sh\n\nmarked_as () {\n    foundEntry=\"$(grep \"^/$2/\" \"$1/CVS/Entries\")\"\n    if [ x\"$foundEntry\" = x\"\" ] ; then\n       echo \"NOT FOUND: $1 $2 1 $3\" >> \"${WORKDIR}/marked.log\"\n       return 1\n    fi\n    test x\"$(grep \"^/$2/\" \"$1/CVS/Entries\" | cut -d/ -f5)\" = x\"$3\"\n    stat=$?\n    echo \"$1 $2 $stat '$3'\" >> \"${WORKDIR}/marked.log\"\n    return $stat\n}\n\nnot_present() {\n    foundEntry=\"$(grep \"^/$2/\" \"$1/CVS/Entries\")\"\n    if [ -r \"$1/$2\" ] ; then\n        echo \"Error: File still exists: $1 $2\" >> \"${WORKDIR}/marked.log\"\n        return 1;\n    fi\n    if [ x\"$foundEntry\" != x\"\" ] ; then\n        echo \"Error: should not have found: $1 $2\" >> \"${WORKDIR}/marked.log\"\n        return 1;\n    else\n        echo \"Correctly not found: $1 $2\" >> \"${WORKDIR}/marked.log\"\n        return 0;\n    fi\n}\n\ncheck_status_options() {\n    (cd \"$1\" &&\n    GIT_CONFIG=\"$git_config\" cvs -Q status \"$2\" > \"${WORKDIR}/status.out\" 2>&1\n    )\n    if [ x\"$?\" != x\"0\" ] ; then\n\techo \"Error from cvs status: $1 $2\" >> \"${WORKDIR}/marked.log\"\n\treturn 1;\n    fi\n    got=\"$(sed -n -e 's/^[ \t]*Sticky Options:[ \t]*//p' \"${WORKDIR}/status.out\")\"\n    expect=\"$3\"\n    if [ x\"$expect\" = x\"\" ] ; then\n\texpect=\"(none)\"\n    fi\n    test x\"$got\" = x\"$expect\"\n    stat=$?\n    echo \"cvs status: $1 $2 $stat '$3' '$got'\" >> \"${WORKDIR}/marked.log\"\n    return $stat\n}\n\ncvs >/dev/null 2>&1\nif test $? -ne 1\nthen\n    skip_all='skipping git-cvsserver tests, cvs not found'\n    test_done\nfi\nif ! test_have_prereq PERL\nthen\n    skip_all='skipping git-cvsserver tests, perl not available'\n    test_done\nfi\nperl -e 'use DBI; use DBD::SQLite' >/dev/null 2>&1 || {\n    skip_all='skipping git-cvsserver tests, Perl SQLite interface unavailable'\n    test_done\n}\n\nunset GIT_DIR GIT_CONFIG\nWORKDIR=$PWD\nSERVERDIR=$PWD/gitcvs.git\ngit_config=\"$SERVERDIR/config\"\nCVSROOT=\":fork:$SERVERDIR\"\nCVSWORK=\"$PWD/cvswork\"\nCVS_SERVER=git-cvsserver\nexport CVSROOT CVS_SERVER\n\nrm -rf \"$CVSWORK\" \"$SERVERDIR\"\ntest_expect_success 'setup' '\n    git config push.default matching &&\n    echo \"Simple text file\" >textfile.c &&\n    echo \"File with embedded NUL: Q <- there\" | q_to_nul > binfile.bin &&\n    mkdir subdir &&\n    echo \"Another text file\" > subdir/file.h &&\n    echo \"Another binary: Q (this time CR)\" | q_to_cr > subdir/withCr.bin &&\n    echo \"Mixed up NUL, but marked text: Q <- there\" | q_to_nul > mixedUp.c &&\n    echo \"Unspecified\" > subdir/unspecified.other &&\n    echo \"/*.bin -crlf\" > .gitattributes &&\n    echo \"/*.c crlf\" >> .gitattributes &&\n    echo \"subdir/*.bin -crlf\" >> .gitattributes &&\n    echo \"subdir/*.c crlf\" >> .gitattributes &&\n    echo \"subdir/file.h crlf\" >> .gitattributes &&\n    git add .gitattributes textfile.c binfile.bin mixedUp.c subdir/* &&\n    git commit -q -m \"First Commit\" &&\n    git clone -q --bare \"$WORKDIR/.git\" \"$SERVERDIR\" >/dev/null 2>&1 &&\n    GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.enabled true &&\n    GIT_DIR=\"$SERVERDIR\" git config gitcvs.logfile \"$SERVERDIR/gitcvs.log\"\n'\n\ntest_expect_success 'cvs co (default crlf)' '\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    test x\"$(grep '/-k' cvswork/CVS/Entries cvswork/subdir/CVS/Entries)\" = x\"\"\n'\n\nrm -rf cvswork\ntest_expect_success 'cvs co (allbinary)' '\n    GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.allbinary true &&\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    marked_as cvswork textfile.c -kb &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes -kb &&\n    marked_as cvswork mixedUp.c -kb &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h -kb &&\n    marked_as cvswork/subdir unspecified.other -kb\n'\n\nrm -rf cvswork cvs.log\ntest_expect_success 'cvs co (use attributes/allbinary)' '\n    GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.usecrlfattr true &&\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes -kb &&\n    marked_as cvswork mixedUp.c \"\" &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\" &&\n    marked_as cvswork/subdir unspecified.other -kb\n'\n\nrm -rf cvswork\ntest_expect_success 'cvs co (use attributes)' '\n    GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.allbinary false &&\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes \"\" &&\n    marked_as cvswork mixedUp.c \"\" &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\" &&\n    marked_as cvswork/subdir unspecified.other \"\"\n'\n\ntest_expect_success 'adding files' '\n    (cd cvswork &&\n    (cd subdir &&\n    echo \"more text\" > src.c &&\n    GIT_CONFIG=\"$git_config\" cvs -Q add src.c >cvs.log 2>&1 &&\n    marked_as . src.c \"\" &&\n    echo \"pseudo-binary\" > temp.bin\n    ) &&\n    GIT_CONFIG=\"$git_config\" cvs -Q add subdir/temp.bin >cvs.log 2>&1 &&\n    marked_as subdir temp.bin \"-kb\" &&\n    cd subdir &&\n    GIT_CONFIG=\"$git_config\" cvs -Q ci -m \"adding files\" >cvs.log 2>&1 &&\n    marked_as . temp.bin \"-kb\" &&\n    marked_as . src.c \"\"\n    )\n'\n\ntest_expect_success 'updating' '\n    git pull gitcvs.git &&\n    echo \"hi\" >subdir/newfile.bin &&\n    echo \"junk\" >subdir/file.h &&\n    echo \"hi\" >subdir/newfile.c &&\n    echo \"hello\" >>binfile.bin &&\n    git add subdir/newfile.bin subdir/file.h subdir/newfile.c binfile.bin &&\n    git commit -q -m \"Add and change some files\" &&\n    git push gitcvs.git >/dev/null &&\n    (cd cvswork &&\n    GIT_CONFIG=\"$git_config\" cvs -Q update\n    ) &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes \"\" &&\n    marked_as cvswork mixedUp.c \"\" &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\" &&\n    marked_as cvswork/subdir unspecified.other \"\" &&\n    marked_as cvswork/subdir newfile.bin -kb &&\n    marked_as cvswork/subdir newfile.c \"\" &&\n    echo \"File with embedded NUL: Q <- there\" | q_to_nul > tmpExpect1 &&\n    echo \"hello\" >> tmpExpect1 &&\n    cmp cvswork/binfile.bin tmpExpect1\n'\n\nrm -rf cvswork\ntest_expect_success 'cvs co (use attributes/guess)' '\n    GIT_DIR=\"$SERVERDIR\" git config gitcvs.allbinary guess &&\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes \"\" &&\n    marked_as cvswork mixedUp.c \"\" &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\" &&\n    marked_as cvswork/subdir unspecified.other \"\" &&\n    marked_as cvswork/subdir newfile.bin -kb &&\n    marked_as cvswork/subdir newfile.c \"\"\n'\n\ntest_expect_success 'setup multi-line files' '\n    ( echo \"line 1\" &&\n      echo \"line 2\" &&\n      echo \"line 3\" &&\n      echo \"line 4 with NUL: Q <-\" ) | q_to_nul > multiline.c &&\n    git add multiline.c &&\n    ( echo \"line 1\" &&\n      echo \"line 2\" &&\n      echo \"line 3\" &&\n      echo \"line 4\" ) | q_to_nul > multilineTxt.c &&\n    git add multilineTxt.c &&\n    git commit -q -m \"multiline files\" &&\n    git push gitcvs.git >/dev/null\n'\n\nrm -rf cvswork\ntest_expect_success 'cvs co (guess)' '\n    GIT_DIR=\"$SERVERDIR\" git config --bool gitcvs.usecrlfattr false &&\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork master >cvs.log 2>&1 &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes \"\" &&\n    marked_as cvswork mixedUp.c -kb &&\n    marked_as cvswork multiline.c -kb &&\n    marked_as cvswork multilineTxt.c \"\" &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\" &&\n    marked_as cvswork/subdir unspecified.other \"\" &&\n    marked_as cvswork/subdir newfile.bin \"\" &&\n    marked_as cvswork/subdir newfile.c \"\"\n'\n\ntest_expect_success 'cvs co another copy (guess)' '\n    GIT_CONFIG=\"$git_config\" cvs -Q co -d cvswork2 master >cvs.log 2>&1 &&\n    marked_as cvswork2 textfile.c \"\" &&\n    marked_as cvswork2 binfile.bin -kb &&\n    marked_as cvswork2 .gitattributes \"\" &&\n    marked_as cvswork2 mixedUp.c -kb &&\n    marked_as cvswork2 multiline.c -kb &&\n    marked_as cvswork2 multilineTxt.c \"\" &&\n    marked_as cvswork2/subdir withCr.bin -kb &&\n    marked_as cvswork2/subdir file.h \"\" &&\n    marked_as cvswork2/subdir unspecified.other \"\" &&\n    marked_as cvswork2/subdir newfile.bin \"\" &&\n    marked_as cvswork2/subdir newfile.c \"\"\n'\n\ntest_expect_success 'cvs status - sticky options' '\n    check_status_options cvswork2 textfile.c \"\" &&\n    check_status_options cvswork2 binfile.bin -kb &&\n    check_status_options cvswork2 .gitattributes \"\" &&\n    check_status_options cvswork2 mixedUp.c -kb &&\n    check_status_options cvswork2 multiline.c -kb &&\n    check_status_options cvswork2 multilineTxt.c \"\" &&\n    check_status_options cvswork2/subdir withCr.bin -kb &&\n    check_status_options cvswork2 subdir/withCr.bin -kb &&\n    check_status_options cvswork2/subdir file.h \"\" &&\n    check_status_options cvswork2 subdir/file.h \"\" &&\n    check_status_options cvswork2/subdir unspecified.other \"\" &&\n    check_status_options cvswork2/subdir newfile.bin \"\" &&\n    check_status_options cvswork2/subdir newfile.c \"\"\n'\n\ntest_expect_success 'add text (guess)' '\n    (cd cvswork &&\n    echo \"simpleText\" > simpleText.c &&\n    GIT_CONFIG=\"$git_config\" cvs -Q add simpleText.c\n    ) &&\n    marked_as cvswork simpleText.c \"\"\n'\n\ntest_expect_success 'add bin (guess)' '\n    (cd cvswork &&\n    echo \"simpleBin: NUL: Q <- there\" | q_to_nul > simpleBin.bin &&\n    GIT_CONFIG=\"$git_config\" cvs -Q add simpleBin.bin\n    ) &&\n    marked_as cvswork simpleBin.bin -kb\n'\n\ntest_expect_success 'remove files (guess)' '\n    (cd cvswork &&\n    GIT_CONFIG=\"$git_config\" cvs -Q rm -f subdir/file.h &&\n    (cd subdir &&\n    GIT_CONFIG=\"$git_config\" cvs -Q rm -f withCr.bin\n    )) &&\n    marked_as cvswork/subdir withCr.bin -kb &&\n    marked_as cvswork/subdir file.h \"\"\n'\n\ntest_expect_success 'cvs ci (guess)' '\n    (cd cvswork &&\n    GIT_CONFIG=\"$git_config\" cvs -Q ci -m \"add/rm files\" >cvs.log 2>&1\n    ) &&\n    marked_as cvswork textfile.c \"\" &&\n    marked_as cvswork binfile.bin -kb &&\n    marked_as cvswork .gitattributes \"\" &&\n    marked_as cvswork mixedUp.c -kb &&\n    marked_as cvswork multiline.c -kb &&\n    marked_as cvswork multilineTxt.c \"\" &&\n    not_present cvswork/subdir withCr.bin &&\n    not_present cvswork/subdir file.h &&\n    marked_as cvswork/subdir unspecified.other \"\" &&\n    marked_as cvswork/subdir newfile.bin \"\" &&\n    marked_as cvswork/subdir newfile.c \"\" &&\n    marked_as cvswork simpleBin.bin -kb &&\n    marked_as cvswork simpleText.c \"\"\n'\n\ntest_expect_success 'update subdir of other copy (guess)' '\n    (cd cvswork2/subdir &&\n    GIT_CONFIG=\"$git_config\" cvs -Q update\n    ) &&\n    marked_as cvswork2 textfile.c \"\" &&\n    marked_as cvswork2 binfile.bin -kb &&\n    marked_as cvswork2 .gitattributes \"\" &&\n    marked_as cvswork2 mixedUp.c -kb &&\n    marked_as cvswork2 multiline.c -kb &&\n    marked_as cvswork2 multilineTxt.c \"\" &&\n    not_present cvswork2/subdir withCr.bin &&\n    not_present cvswork2/subdir file.h &&\n    marked_as cvswork2/subdir unspecified.other \"\" &&\n    marked_as cvswork2/subdir newfile.bin \"\" &&\n    marked_as cvswork2/subdir newfile.c \"\" &&\n    not_present cvswork2 simpleBin.bin &&\n    not_present cvswork2 simpleText.c\n'\n\necho \"starting update/merge\" >> \"${WORKDIR}/marked.log\"\ntest_expect_success 'update/merge full other copy (guess)' '\n    git pull gitcvs.git master &&\n    sed \"s/3/replaced_3/\" < multilineTxt.c > ml.temp &&\n    mv ml.temp multilineTxt.c &&\n    git add multilineTxt.c &&\n    git commit -q -m \"modify multiline file\" >> \"${WORKDIR}/marked.log\" &&\n    git push gitcvs.git >/dev/null &&\n    (cd cvswork2 &&\n    sed \"s/1/replaced_1/\" < multilineTxt.c > ml.temp &&\n    mv ml.temp multilineTxt.c &&\n    GIT_CONFIG=\"$git_config\" cvs update > cvs.log 2>&1\n    ) &&\n    marked_as cvswork2 textfile.c \"\" &&\n    marked_as cvswork2 binfile.bin -kb &&\n    marked_as cvswork2 .gitattributes \"\" &&\n    marked_as cvswork2 mixedUp.c -kb &&\n    marked_as cvswork2 multiline.c -kb &&\n    marked_as cvswork2 multilineTxt.c \"\" &&\n    not_present cvswork2/subdir withCr.bin &&\n    not_present cvswork2/subdir file.h &&\n    marked_as cvswork2/subdir unspecified.other \"\" &&\n    marked_as cvswork2/subdir newfile.bin \"\" &&\n    marked_as cvswork2/subdir newfile.c \"\" &&\n    marked_as cvswork2 simpleBin.bin -kb &&\n    marked_as cvswork2 simpleText.c \"\" &&\n    echo \"line replaced_1\" > tmpExpect2 &&\n    echo \"line 2\" >> tmpExpect2 &&\n    echo \"line replaced_3\" >> tmpExpect2 &&\n    echo \"line 4\" | q_to_nul >> tmpExpect2 &&\n    cmp cvswork2/multilineTxt.c tmpExpect2\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "0062341dbf156e022288045662db3825a71acc04",
  "sha1_ok": true,
  "size": 13149
}
