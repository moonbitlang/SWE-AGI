{
  "content": {
    "base64": "ZGVmYXVsdDoKICB0aW1lb3V0OiAyaAoKc3RhZ2VzOgogIC0gYnVpbGQKICAtIHRlc3QKICAtIGFuYWx5emUKCndvcmtmbG93OgogIHJ1bGVzOgogICAgLSBpZjogJENJX1BJUEVMSU5FX1NPVVJDRSA9PSAibWVyZ2VfcmVxdWVzdF9ldmVudCIKICAgIC0gaWY6ICRDSV9DT01NSVRfVEFHCiAgICAtIGlmOiAkQ0lfQ09NTUlUX1JFRl9QUk9URUNURUQgPT0gInRydWUiCgp0ZXN0OmxpbnV4OgogIGltYWdlOiAkaW1hZ2UKICBzdGFnZTogdGVzdAogIG5lZWRzOiBbIF0KICB0YWdzOgogICAgLSBzYWFzLWxpbnV4LW1lZGl1bS1hbWQ2NAogIHZhcmlhYmxlczoKICAgIENVU1RPTV9QQVRIOiAiL2N1c3RvbSIKICAgIFRFU1RfT1VUUFVUX0RJUkVDVE9SWTogIi90bXAvdGVzdC1vdXRwdXQiCiAgYmVmb3JlX3NjcmlwdDoKICAgIC0gLi9jaS9pbnN0YWxsLWRlcGVuZGVuY2llcy5zaAogIHNjcmlwdDoKICAgIC0gdXNlcmFkZCBidWlsZGVyIC0tY3JlYXRlLWhvbWUKICAgIC0gY2hvd24gLVIgYnVpbGRlciAiJHtDSV9QUk9KRUNUX0RJUn0iCiAgICAtIHN1ZG8gLS1wcmVzZXJ2ZS1lbnYgLS1zZXQtaG9tZSAtLXVzZXI9YnVpbGRlciAuL2NpL3J1bi1idWlsZC1hbmQtdGVzdHMuc2gKICBhZnRlcl9zY3JpcHQ6CiAgICAtIHwKICAgICAgaWYgdGVzdCAiJENJX0pPQl9TVEFUVVMiICE9ICdzdWNjZXNzJwogICAgICB0aGVuCiAgICAgICAgc3VkbyAtLXByZXNlcnZlLWVudiAtLXNldC1ob21lIC0tdXNlcj1idWlsZGVyIC4vY2kvcHJpbnQtdGVzdC1mYWlsdXJlcy5zaAogICAgICAgIG12ICIkVEVTVF9PVVRQVVRfRElSRUNUT1JZIi9mYWlsZWQtdGVzdC1hcnRpZmFjdHMgdC8KICAgICAgZmkKICBwYXJhbGxlbDoKICAgIG1hdHJpeDoKICAgICAgLSBqb2JuYW1lOiBsaW51eC1zaGEyNTYKICAgICAgICBpbWFnZTogdWJ1bnR1OmxhdGVzdAogICAgICAgIENDOiBjbGFuZwogICAgICAtIGpvYm5hbWU6IGxpbnV4LXJlZnRhYmxlCiAgICAgICAgaW1hZ2U6IHVidW50dTpsYXRlc3QKICAgICAgICBDQzogY2xhbmcKICAgICAgLSBqb2JuYW1lOiBsaW51eC1nY2MKICAgICAgICBpbWFnZTogdWJ1bnR1OjIwLjA0CiAgICAgICAgQ0M6IGdjYwogICAgICAgIENDX1BBQ0tBR0U6IGdjYy04CiAgICAgIC0gam9ibmFtZTogbGludXgtVEVTVC12YXJzCiAgICAgICAgaW1hZ2U6IHVidW50dToyMC4wNAogICAgICAgIENDOiBnY2MKICAgICAgICBDQ19QQUNLQUdFOiBnY2MtOAogICAgICAtIGpvYm5hbWU6IGxpbnV4LWdjYy1kZWZhdWx0CiAgICAgICAgaW1hZ2U6IHVidW50dTpsYXRlc3QKICAgICAgICBDQzogZ2NjCiAgICAgIC0gam9ibmFtZTogbGludXgtbGVha3MKICAgICAgICBpbWFnZTogdWJ1bnR1OmxhdGVzdAogICAgICAgIENDOiBnY2MKICAgICAgLSBqb2JuYW1lOiBsaW51eC1yZWZ0YWJsZS1sZWFrcwogICAgICAgIGltYWdlOiB1YnVudHU6bGF0ZXN0CiAgICAgICAgQ0M6IGdjYwogICAgICAtIGpvYm5hbWU6IGxpbnV4LWFzYW4tdWJzYW4KICAgICAgICBpbWFnZTogdWJ1bnR1OmxhdGVzdAogICAgICAgIENDOiBjbGFuZwogICAgICAtIGpvYm5hbWU6IHBlZGFudGljCiAgICAgICAgaW1hZ2U6IGZlZG9yYTpsYXRlc3QKICAgICAgLSBqb2JuYW1lOiBsaW51eC1tdXNsCiAgICAgICAgaW1hZ2U6IGFscGluZTpsYXRlc3QKICAgICAgLSBqb2JuYW1lOiBsaW51eC1tZXNvbgogICAgICAgIGltYWdlOiB1YnVudHU6bGF0ZXN0CiAgICAgICAgQ0M6IGdjYwogIGFydGlmYWN0czoKICAgIHBhdGhzOgogICAgICAtIHQvZmFpbGVkLXRlc3QtYXJ0aWZhY3RzCiAgICB3aGVuOiBvbl9mYWlsdXJlCgp0ZXN0Om9zeDoKICBpbWFnZTogJGltYWdlCiAgc3RhZ2U6IHRlc3QKICBuZWVkczogWyBdCiAgdGFnczoKICAgIC0gc2Fhcy1tYWNvcy1tZWRpdW0tbTEKICB2YXJpYWJsZXM6CiAgICBURVNUX09VVFBVVF9ESVJFQ1RPUlk6ICIvVm9sdW1lcy9SQU1EaXNrIgogIGJlZm9yZV9zY3JpcHQ6CiAgICAjIENyZWF0ZSBhIDRHQiBSQU0gZGlzayB0aGF0IHdlIHVzZSB0byBzdG9yZSB0ZXN0IG91dHB1dCBvbi4gVGhpcyBzbWFsbCBoYWNrCiAgICAjIHNpZ25pZmljYW50bHkgc3BlZWRzIHVwIHRlc3RzIGJ5IG1vcmUgdGhhbiBhIGZhY3RvciBvZiAyIGJlY2F1c2UgdGhlCiAgICAjIG1hY09TIHJ1bm5lcnMgdXNlIG5ldHdvcmstYXR0YWNoZWQgc3RvcmFnZSBhcyBkaXNrcywgd2hpY2ggaXMgX3JlYWxseV8KICAgICMgc2xvdyB3aXRoIHRoZSBtYW55IHNtYWxsIHdyaXRlcyB0aGF0IG91ciB0ZXN0cyBkby4KICAgIC0gc3VkbyBkaXNrdXRpbCBhcGZzIGNyZWF0ZSAkKGhkaXV0aWwgYXR0YWNoIC1ub21vdW50IHJhbTovLzgxOTIwMDApIFJBTURpc2sKICAgIC0gLi9jaS9pbnN0YWxsLWRlcGVuZGVuY2llcy5zaAogIHNjcmlwdDoKICAgIC0gLi9jaS9ydW4tYnVpbGQtYW5kLXRlc3RzLnNoCiAgYWZ0ZXJfc2NyaXB0OgogICAgLSB8CiAgICAgIGlmIHRlc3QgIiRDSV9KT0JfU1RBVFVTIiAhPSAnc3VjY2VzcycKICAgICAgdGhlbgogICAgICAgIC4vY2kvcHJpbnQtdGVzdC1mYWlsdXJlcy5zaAogICAgICAgIG12ICIkVEVTVF9PVVRQVVRfRElSRUNUT1JZIi9mYWlsZWQtdGVzdC1hcnRpZmFjdHMgdC8KICAgICAgZmkKICBwYXJhbGxlbDoKICAgIG1hdHJpeDoKICAgICAgLSBqb2JuYW1lOiBvc3gtY2xhbmcKICAgICAgICBpbWFnZTogbWFjb3MtMTQteGNvZGUtMTUKICAgICAgICBDQzogY2xhbmcKICAgICAgLSBqb2JuYW1lOiBvc3gtcmVmdGFibGUKICAgICAgICBpbWFnZTogbWFjb3MtMTQteGNvZGUtMTUKICAgICAgICBDQzogY2xhbmcKICAgICAgLSBqb2JuYW1lOiBvc3gtbWVzb24KICAgICAgICBpbWFnZTogbWFjb3MtMTQteGNvZGUtMTUKICAgICAgICBDQzogY2xhbmcKICBhcnRpZmFjdHM6CiAgICBwYXRoczoKICAgICAgLSB0L2ZhaWxlZC10ZXN0LWFydGlmYWN0cwogICAgd2hlbjogb25fZmFpbHVyZQoKYnVpbGQ6bWluZ3c2NDoKICBzdGFnZTogYnVpbGQKICB0YWdzOgogICAgLSBzYWFzLXdpbmRvd3MtbWVkaXVtLWFtZDY0CiAgdmFyaWFibGVzOgogICAgTk9fUEVSTDogMQogIGJlZm9yZV9zY3JpcHQ6CiAgICAtIC4vY2kvaW5zdGFsbC1zZGsucHMxIC1kaXJlY3RvcnkgImdpdC1zZGsiCiAgc2NyaXB0OgogICAgLSBnaXQtc2RrL3Vzci9iaW4vYmFzaC5leGUgLWwgLWMgJ2NpL21ha2UtdGVzdC1hcnRpZmFjdHMuc2ggYXJ0aWZhY3RzJwogIGFydGlmYWN0czoKICAgIHBhdGhzOgogICAgICAtIGFydGlmYWN0cwogICAgICAtIGdpdC1zZGsKCnRlc3Q6bWluZ3c2NDoKICBzdGFnZTogdGVzdAogIHRhZ3M6CiAgICAtIHNhYXMtd2luZG93cy1tZWRpdW0tYW1kNjQKICBuZWVkczoKICAgIC0gam9iOiAiYnVpbGQ6bWluZ3c2NCIKICAgICAgYXJ0aWZhY3RzOiB0cnVlCiAgYmVmb3JlX3NjcmlwdDoKICAgIC0gZ2l0LXNkay91c3IvYmluL2Jhc2guZXhlIC1sIC1jICd0YXIgeGYgYXJ0aWZhY3RzL2FydGlmYWN0cy50YXIuZ3onCiAgICAtIE5ldy1JdGVtIC1QYXRoIC5naXQvaW5mbyAtSXRlbVR5cGUgRGlyZWN0b3J5CiAgICAtIE5ldy1JdGVtIC5naXQvaW5mby9leGNsdWRlIC1JdGVtVHlwZSBGaWxlIC1WYWx1ZSAiL2dpdC1zZGsiCiAgc2NyaXB0OgogICAgLSBnaXQtc2RrL3Vzci9iaW4vYmFzaC5leGUgLWwgLWMgImNpL3J1bi10ZXN0LXNsaWNlLnNoICRDSV9OT0RFX0lOREVYICRDSV9OT0RFX1RPVEFMIgogIGFmdGVyX3NjcmlwdDoKICAgIC0gZ2l0LXNkay91c3IvYmluL2Jhc2guZXhlIC1sIC1jICdjaS9wcmludC10ZXN0LWZhaWx1cmVzLnNoJwogIHBhcmFsbGVsOiAxMAoKdGVzdDpmdXp6LXNtb2tlLXRlc3RzOgogIGltYWdlOiB1YnVudHU6bGF0ZXN0CiAgc3RhZ2U6IHRlc3QKICBuZWVkczogWyBdCiAgdmFyaWFibGVzOgogICAgQ0M6IGNsYW5nCiAgYmVmb3JlX3NjcmlwdDoKICAgIC0gLi9jaS9pbnN0YWxsLWRlcGVuZGVuY2llcy5zaAogIHNjcmlwdDoKICAgIC0gLi9jaS9ydW4tYnVpbGQtYW5kLW1pbmltYWwtZnV6emVycy5zaAoKc3RhdGljLWFuYWx5c2lzOgogIGltYWdlOiB1YnVudHU6MjIuMDQKICBzdGFnZTogYW5hbHl6ZQogIG5lZWRzOiBbIF0KICB2YXJpYWJsZXM6CiAgICBqb2JuYW1lOiBTdGF0aWNBbmFseXNpcwogIGJlZm9yZV9zY3JpcHQ6CiAgICAtIC4vY2kvaW5zdGFsbC1kZXBlbmRlbmNpZXMuc2gKICBzY3JpcHQ6CiAgICAtIC4vY2kvcnVuLXN0YXRpYy1hbmFseXNpcy5zaAogICAgLSAuL2NpL2NoZWNrLWRpcmVjdGlvbmFsLWZvcm1hdHRpbmcuYmFzaAoKY2hlY2std2hpdGVzcGFjZToKICBpbWFnZTogdWJ1bnR1OmxhdGVzdAogIHN0YWdlOiBhbmFseXplCiAgbmVlZHM6IFsgXQogIGJlZm9yZV9zY3JpcHQ6CiAgICAtIC4vY2kvaW5zdGFsbC1kZXBlbmRlbmNpZXMuc2gKICAjIFNpbmNlICRDSV9NRVJHRV9SRVFVRVNUX1RBUkdFVF9CUkFOQ0hfU0hBIGlzIG9ubHkgZGVmaW5lZCBmb3IgbWVyZ2VkCiAgIyBwaXBlbGluZXMsIHdlIGZhbGxiYWNrIHRvICRDSV9NRVJHRV9SRVFVRVNUX0RJRkZfQkFTRV9TSEEsIHdoaWNoIHNob3VsZAogICMgYmUgZGVmaW5lZCBpbiBhbGwgcGlwZWxpbmVzLgogIHNjcmlwdDoKICAgIC0gfAogICAgICBSPSR7Q0lfTUVSR0VfUkVRVUVTVF9UQVJHRVRfQlJBTkNIX1NIQS0ke0NJX01FUkdFX1JFUVVFU1RfRElGRl9CQVNFX1NIQTo/fX0gfHwgZXhpdAogICAgICAuL2NpL2NoZWNrLXdoaXRlc3BhY2Uuc2ggIiRSIgogIHJ1bGVzOgogICAgLSBpZjogJENJX1BJUEVMSU5FX1NPVVJDRSA9PSAnbWVyZ2VfcmVxdWVzdF9ldmVudCcKCmNoZWNrLXN0eWxlOgogIGltYWdlOiB1YnVudHU6bGF0ZXN0CiAgc3RhZ2U6IGFuYWx5emUKICBuZWVkczogWyBdCiAgYWxsb3dfZmFpbHVyZTogdHJ1ZQogIHZhcmlhYmxlczoKICAgIENDOiBjbGFuZwogICAgam9ibmFtZTogQ2xhbmdGb3JtYXQKICBiZWZvcmVfc2NyaXB0OgogICAgLSAuL2NpL2luc3RhbGwtZGVwZW5kZW5jaWVzLnNoCiAgIyBTaW5jZSAkQ0lfTUVSR0VfUkVRVUVTVF9UQVJHRVRfQlJBTkNIX1NIQSBpcyBvbmx5IGRlZmluZWQgZm9yIG1lcmdlZAogICMgcGlwZWxpbmVzLCB3ZSBmYWxsYmFjayB0byAkQ0lfTUVSR0VfUkVRVUVTVF9ESUZGX0JBU0VfU0hBLCB3aGljaCBzaG91bGQKICAjIGJlIGRlZmluZWQgaW4gYWxsIHBpcGVsaW5lcy4KICBzY3JpcHQ6CiAgICAtIHwKICAgICAgUj0ke0NJX01FUkdFX1JFUVVFU1RfVEFSR0VUX0JSQU5DSF9TSEEtJHtDSV9NRVJHRV9SRVFVRVNUX0RJRkZfQkFTRV9TSEE6P319IHx8IGV4aXQKICAgICAgLi9jaS9ydW4tc3R5bGUtY2hlY2suc2ggIiRSIgogIHJ1bGVzOgogICAgLSBpZjogJENJX1BJUEVMSU5FX1NPVVJDRSA9PSAnbWVyZ2VfcmVxdWVzdF9ldmVudCcKCmRvY3VtZW50YXRpb246CiAgaW1hZ2U6IHVidW50dTpsYXRlc3QKICBzdGFnZTogYW5hbHl6ZQogIG5lZWRzOiBbIF0KICB2YXJpYWJsZXM6CiAgICBqb2JuYW1lOiBEb2N1bWVudGF0aW9uCiAgYmVmb3JlX3NjcmlwdDoKICAgIC0gLi9jaS9pbnN0YWxsLWRlcGVuZGVuY2llcy5zaAogIHNjcmlwdDoKICAgIC0gLi9jaS90ZXN0LWRvY3VtZW50YXRpb24uc2gK",
    "text": "default:\n  timeout: 2h\n\nstages:\n  - build\n  - test\n  - analyze\n\nworkflow:\n  rules:\n    - if: $CI_PIPELINE_SOURCE == \"merge_request_event\"\n    - if: $CI_COMMIT_TAG\n    - if: $CI_COMMIT_REF_PROTECTED == \"true\"\n\ntest:linux:\n  image: $image\n  stage: test\n  needs: [ ]\n  tags:\n    - saas-linux-medium-amd64\n  variables:\n    CUSTOM_PATH: \"/custom\"\n    TEST_OUTPUT_DIRECTORY: \"/tmp/test-output\"\n  before_script:\n    - ./ci/install-dependencies.sh\n  script:\n    - useradd builder --create-home\n    - chown -R builder \"${CI_PROJECT_DIR}\"\n    - sudo --preserve-env --set-home --user=builder ./ci/run-build-and-tests.sh\n  after_script:\n    - |\n      if test \"$CI_JOB_STATUS\" != 'success'\n      then\n        sudo --preserve-env --set-home --user=builder ./ci/print-test-failures.sh\n        mv \"$TEST_OUTPUT_DIRECTORY\"/failed-test-artifacts t/\n      fi\n  parallel:\n    matrix:\n      - jobname: linux-sha256\n        image: ubuntu:latest\n        CC: clang\n      - jobname: linux-reftable\n        image: ubuntu:latest\n        CC: clang\n      - jobname: linux-gcc\n        image: ubuntu:20.04\n        CC: gcc\n        CC_PACKAGE: gcc-8\n      - jobname: linux-TEST-vars\n        image: ubuntu:20.04\n        CC: gcc\n        CC_PACKAGE: gcc-8\n      - jobname: linux-gcc-default\n        image: ubuntu:latest\n        CC: gcc\n      - jobname: linux-leaks\n        image: ubuntu:latest\n        CC: gcc\n      - jobname: linux-reftable-leaks\n        image: ubuntu:latest\n        CC: gcc\n      - jobname: linux-asan-ubsan\n        image: ubuntu:latest\n        CC: clang\n      - jobname: pedantic\n        image: fedora:latest\n      - jobname: linux-musl\n        image: alpine:latest\n      - jobname: linux-meson\n        image: ubuntu:latest\n        CC: gcc\n  artifacts:\n    paths:\n      - t/failed-test-artifacts\n    when: on_failure\n\ntest:osx:\n  image: $image\n  stage: test\n  needs: [ ]\n  tags:\n    - saas-macos-medium-m1\n  variables:\n    TEST_OUTPUT_DIRECTORY: \"/Volumes/RAMDisk\"\n  before_script:\n    # Create a 4GB RAM disk that we use to store test output on. This small hack\n    # significantly speeds up tests by more than a factor of 2 because the\n    # macOS runners use network-attached storage as disks, which is _really_\n    # slow with the many small writes that our tests do.\n    - sudo diskutil apfs create $(hdiutil attach -nomount ram://8192000) RAMDisk\n    - ./ci/install-dependencies.sh\n  script:\n    - ./ci/run-build-and-tests.sh\n  after_script:\n    - |\n      if test \"$CI_JOB_STATUS\" != 'success'\n      then\n        ./ci/print-test-failures.sh\n        mv \"$TEST_OUTPUT_DIRECTORY\"/failed-test-artifacts t/\n      fi\n  parallel:\n    matrix:\n      - jobname: osx-clang\n        image: macos-14-xcode-15\n        CC: clang\n      - jobname: osx-reftable\n        image: macos-14-xcode-15\n        CC: clang\n      - jobname: osx-meson\n        image: macos-14-xcode-15\n        CC: clang\n  artifacts:\n    paths:\n      - t/failed-test-artifacts\n    when: on_failure\n\nbuild:mingw64:\n  stage: build\n  tags:\n    - saas-windows-medium-amd64\n  variables:\n    NO_PERL: 1\n  before_script:\n    - ./ci/install-sdk.ps1 -directory \"git-sdk\"\n  script:\n    - git-sdk/usr/bin/bash.exe -l -c 'ci/make-test-artifacts.sh artifacts'\n  artifacts:\n    paths:\n      - artifacts\n      - git-sdk\n\ntest:mingw64:\n  stage: test\n  tags:\n    - saas-windows-medium-amd64\n  needs:\n    - job: \"build:mingw64\"\n      artifacts: true\n  before_script:\n    - git-sdk/usr/bin/bash.exe -l -c 'tar xf artifacts/artifacts.tar.gz'\n    - New-Item -Path .git/info -ItemType Directory\n    - New-Item .git/info/exclude -ItemType File -Value \"/git-sdk\"\n  script:\n    - git-sdk/usr/bin/bash.exe -l -c \"ci/run-test-slice.sh $CI_NODE_INDEX $CI_NODE_TOTAL\"\n  after_script:\n    - git-sdk/usr/bin/bash.exe -l -c 'ci/print-test-failures.sh'\n  parallel: 10\n\ntest:fuzz-smoke-tests:\n  image: ubuntu:latest\n  stage: test\n  needs: [ ]\n  variables:\n    CC: clang\n  before_script:\n    - ./ci/install-dependencies.sh\n  script:\n    - ./ci/run-build-and-minimal-fuzzers.sh\n\nstatic-analysis:\n  image: ubuntu:22.04\n  stage: analyze\n  needs: [ ]\n  variables:\n    jobname: StaticAnalysis\n  before_script:\n    - ./ci/install-dependencies.sh\n  script:\n    - ./ci/run-static-analysis.sh\n    - ./ci/check-directional-formatting.bash\n\ncheck-whitespace:\n  image: ubuntu:latest\n  stage: analyze\n  needs: [ ]\n  before_script:\n    - ./ci/install-dependencies.sh\n  # Since $CI_MERGE_REQUEST_TARGET_BRANCH_SHA is only defined for merged\n  # pipelines, we fallback to $CI_MERGE_REQUEST_DIFF_BASE_SHA, which should\n  # be defined in all pipelines.\n  script:\n    - |\n      R=${CI_MERGE_REQUEST_TARGET_BRANCH_SHA-${CI_MERGE_REQUEST_DIFF_BASE_SHA:?}} || exit\n      ./ci/check-whitespace.sh \"$R\"\n  rules:\n    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'\n\ncheck-style:\n  image: ubuntu:latest\n  stage: analyze\n  needs: [ ]\n  allow_failure: true\n  variables:\n    CC: clang\n    jobname: ClangFormat\n  before_script:\n    - ./ci/install-dependencies.sh\n  # Since $CI_MERGE_REQUEST_TARGET_BRANCH_SHA is only defined for merged\n  # pipelines, we fallback to $CI_MERGE_REQUEST_DIFF_BASE_SHA, which should\n  # be defined in all pipelines.\n  script:\n    - |\n      R=${CI_MERGE_REQUEST_TARGET_BRANCH_SHA-${CI_MERGE_REQUEST_DIFF_BASE_SHA:?}} || exit\n      ./ci/run-style-check.sh \"$R\"\n  rules:\n    - if: $CI_PIPELINE_SOURCE == 'merge_request_event'\n\ndocumentation:\n  image: ubuntu:latest\n  stage: analyze\n  needs: [ ]\n  variables:\n    jobname: Documentation\n  before_script:\n    - ./ci/install-dependencies.sh\n  script:\n    - ./ci/test-documentation.sh\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00bc727865031620752771af4a9030c7de1b73df",
  "sha1_ok": true,
  "size": 5535
}
