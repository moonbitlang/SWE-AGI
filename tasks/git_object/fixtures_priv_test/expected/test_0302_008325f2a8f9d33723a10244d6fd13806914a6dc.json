{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDcgSm9oYW5uZXMgRS4gU2NoaW5kZWxpbgojCgp0ZXN0X2Rlc2NyaXB0aW9uPSdUZXN0IGN1c3RvbSBkaWZmIGZ1bmN0aW9uIG5hbWUgcGF0dGVybnMnCgouIC4vdGVzdC1saWIuc2gKCkxGPScKJwpjYXQgPkJlZXIuamF2YSA8PFxFT0YKcHVibGljIGNsYXNzIEJlZXIKewoJaW50IHNwZWNpYWw7CglwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmcgYXJnc1tdKQoJewoJCVN0cmluZyBzPSIgIjsKCQlmb3IoaW50IHggPSA5OTsgeCA+IDA7IHgtLSkKCQl7CgkJCVN5c3RlbS5vdXQucHJpbnQoeCArICIgYm90dGxlcyBvZiBiZWVyIG9uIHRoZSB3YWxsICIKCQkJCSsgeCArICIgYm90dGxlcyBvZiBiZWVyXG4iCgkJCQkrICJUYWtlIG9uZSBkb3duLCBwYXNzIGl0IGFyb3VuZCwgIiArICh4IC0gMSkKCQkJCSsgIiBib3R0bGVzIG9mIGJlZXIgb24gdGhlIHdhbGwuXG4iKTsKCQl9CgkJU3lzdGVtLm91dC5wcmludCgiR28gdG8gdGhlIHN0b3JlLCBidXkgc29tZSBtb3JlLFxuIgoJCQkrICI5OSBib3R0bGVzIG9mIGJlZXIgb24gdGhlIHdhbGwuXG4iKTsKCX0KfQpFT0YKc2VkICdzL2JlZXJcXC9iZWVyLFxcLycgPEJlZXIuamF2YSA+QmVlci1jb3JyZWN0LmphdmEKCnRlc3RfZXhwZWN0X2Z1bmNuYW1lICgpIHsKCWxhbmc9JHsyLWphdmF9Cgl0ZXN0X2V4cGVjdF9jb2RlIDEgZ2l0IGRpZmYgLS1uby1pbmRleCAtVTEgXAoJCSJCZWVyLiRsYW5nIiAiQmVlci1jb3JyZWN0LiRsYW5nIiA+ZGlmZiAmJgoJZ3JlcCAiXkBALipAQCAkMSIgZGlmZgp9CgpkaWZmcGF0dGVybnM9IgoJYWRhCgliaWJ0ZXgKCWNwcAoJY3NoYXJwCglmb3J0cmFuCglodG1sCglqYXZhCgltYXRsYWIKCW9iamMKCXBhc2NhbAoJcGVybAoJcGhwCglweXRob24KCXJ1YnkKCXRleAoiCgpmb3IgcCBpbiAkZGlmZnBhdHRlcm5zCmRvCgl0ZXN0X2V4cGVjdF9zdWNjZXNzICJidWlsdGluICRwIHBhdHRlcm4gY29tcGlsZXMiICcKCQllY2hvICIqLmphdmEgZGlmZj0kcCIgPi5naXRhdHRyaWJ1dGVzICYmCgkJdGVzdF9leHBlY3RfY29kZSAxIGdpdCBkaWZmIC0tbm8taW5kZXggXAoJCQlCZWVyLmphdmEgQmVlci1jb3JyZWN0LmphdmEgMj5tc2cgJiYKCQkhIGdyZXAgZmF0YWwgbXNnICYmCgkJISBncmVwIGVycm9yIG1zZwoJJwoJdGVzdF9leHBlY3Rfc3VjY2VzcyAiYnVpbHRpbiAkcCB3b3JkUmVnZXggcGF0dGVybiBjb21waWxlcyIgJwoJCWVjaG8gIiouamF2YSBkaWZmPSRwIiA+LmdpdGF0dHJpYnV0ZXMgJiYKCQl0ZXN0X2V4cGVjdF9jb2RlIDEgZ2l0IGRpZmYgLS1uby1pbmRleCAtLXdvcmQtZGlmZiBcCgkJCUJlZXIuamF2YSBCZWVyLWNvcnJlY3QuamF2YSAyPm1zZyAmJgoJCSEgZ3JlcCBmYXRhbCBtc2cgJiYKCQkhIGdyZXAgZXJyb3IgbXNnCgknCmRvbmUKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldCB1cCAuZ2l0YXR0cmlidXRlcyBkZWNsYXJpbmcgZHJpdmVycyB0byB0ZXN0JyAnCgljYXQgPi5naXRhdHRyaWJ1dGVzIDw8LVxFT0YKCSouamF2YSBkaWZmPWphdmEKCUVPRgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdjdXN0b20gcGF0dGVybicgJwoJdGVzdF9jb25maWcgZGlmZi5qYXZhLmZ1bmNuYW1lICIhc3RhdGljCiFTdHJpbmcKW14gCV0uKnMuKiIgJiYKCXRlc3RfZXhwZWN0X2Z1bmNuYW1lICJpbnQgc3BlY2lhbDtcJCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbGFzdCByZWdleHAgbXVzdCBub3QgYmUgbmVnYXRlZCcgJwoJdGVzdF9jb25maWcgZGlmZi5qYXZhLmZ1bmNuYW1lICIhc3RhdGljIiAmJgoJdGVzdF9leHBlY3RfY29kZSAxMjggZ2l0IGRpZmYgLS1uby1pbmRleCBCZWVyLmphdmEgQmVlci1jb3JyZWN0LmphdmEgMj5tc2cgJiYKCWdyZXAgIjogTGFzdCBleHByZXNzaW9uIG11c3Qgbm90IGJlIG5lZ2F0ZWQ6IiBtc2cKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncGF0dGVybiB3aGljaCBtYXRjaGVzIHRvIGVuZCBvZiBsaW5lJyAnCgl0ZXN0X2NvbmZpZyBkaWZmLmphdmEuZnVuY25hbWUgIkJlZXJcJCIgJiYKCXRlc3RfZXhwZWN0X2Z1bmNuYW1lICJCZWVyXCQiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FsdGVybmF0aW9uIGluIHBhdHRlcm4nICcKCXRlc3RfY29uZmlnIGRpZmYuamF2YS5mdW5jbmFtZSAiQmVlciQiICYmCgl0ZXN0X2NvbmZpZyBkaWZmLmphdmEueGZ1bmNuYW1lICJeWyAJXSooKHB1YmxpY3xzdGF0aWMpLiopJCIgJiYKCXRlc3RfZXhwZWN0X2Z1bmNuYW1lICJwdWJsaWMgc3RhdGljIHZvaWQgbWFpbigiCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwIGh1bmsgaGVhZGVyIHRlc3RzJyAnCglmb3IgaSBpbiAkZGlmZnBhdHRlcm5zCglkbwoJCWVjaG8gIiRpLSogZGlmZj0kaSIKCWRvbmUgPiAuZ2l0YXR0cmlidXRlcyAmJgoKCSMgYWRkIGFsbCB0ZXN0IGZpbGVzIHRvIHRoZSBpbmRleAoJKAoJCWNkICIkVEVTVF9ESVJFQ1RPUlkiL3Q0MDE4ICYmCgkJZ2l0IC0tZ2l0LWRpcj0iJFRSQVNIX0RJUkVDVE9SWS8uZ2l0IiBhZGQgLgoJKSAmJgoKCSMgcGxhY2UgbW9kaWZpZWQgZmlsZXMgaW4gdGhlIHdvcmt0cmVlCglmb3IgaSBpbiAkKGdpdCBscy1maWxlcykKCWRvCgkJc2VkIC1lICJzL0NoYW5nZU1lL0lXYXNDaGFuZ2VkLyIgPCIkVEVTVF9ESVJFQ1RPUlkvdDQwMTgvJGkiID4iJGkiIHx8IHJldHVybiAxCglkb25lCicKCiMgY2hlY2sgZWFjaCBpbmRpdmlkdWFsIGZpbGUKZm9yIGkgaW4gJChnaXQgbHMtZmlsZXMpCmRvCglpZiBncmVwIGJyb2tlbiAiJGkiID4vZGV2L251bGwgMj4mMQoJdGhlbgoJCXJlc3VsdD1mYWlsdXJlCgllbHNlCgkJcmVzdWx0PXN1Y2Nlc3MKCWZpCgl0ZXN0X2V4cGVjdF8kcmVzdWx0ICJodW5rIGhlYWRlcjogJGkiICIKCQl0ZXN0X3doZW5fZmluaXNoZWQgJ2NhdCBhY3R1YWwnICYmCSMgZm9yIGRlYnVnZ2luZyBvbmx5CgkJZ2l0IGRpZmYgLVUxICRpID5hY3R1YWwgJiYKCQlncmVwICdAQCAuKiBAQC4qUklHSFQnIGFjdHVhbAoJIgpkb25lCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2007 Johannes E. Schindelin\n#\n\ntest_description='Test custom diff function name patterns'\n\n. ./test-lib.sh\n\nLF='\n'\ncat >Beer.java <<\\EOF\npublic class Beer\n{\n\tint special;\n\tpublic static void main(String args[])\n\t{\n\t\tString s=\" \";\n\t\tfor(int x = 99; x > 0; x--)\n\t\t{\n\t\t\tSystem.out.print(x + \" bottles of beer on the wall \"\n\t\t\t\t+ x + \" bottles of beer\\n\"\n\t\t\t\t+ \"Take one down, pass it around, \" + (x - 1)\n\t\t\t\t+ \" bottles of beer on the wall.\\n\");\n\t\t}\n\t\tSystem.out.print(\"Go to the store, buy some more,\\n\"\n\t\t\t+ \"99 bottles of beer on the wall.\\n\");\n\t}\n}\nEOF\nsed 's/beer\\\\/beer,\\\\/' <Beer.java >Beer-correct.java\n\ntest_expect_funcname () {\n\tlang=${2-java}\n\ttest_expect_code 1 git diff --no-index -U1 \\\n\t\t\"Beer.$lang\" \"Beer-correct.$lang\" >diff &&\n\tgrep \"^@@.*@@ $1\" diff\n}\n\ndiffpatterns=\"\n\tada\n\tbibtex\n\tcpp\n\tcsharp\n\tfortran\n\thtml\n\tjava\n\tmatlab\n\tobjc\n\tpascal\n\tperl\n\tphp\n\tpython\n\truby\n\ttex\n\"\n\nfor p in $diffpatterns\ndo\n\ttest_expect_success \"builtin $p pattern compiles\" '\n\t\techo \"*.java diff=$p\" >.gitattributes &&\n\t\ttest_expect_code 1 git diff --no-index \\\n\t\t\tBeer.java Beer-correct.java 2>msg &&\n\t\t! grep fatal msg &&\n\t\t! grep error msg\n\t'\n\ttest_expect_success \"builtin $p wordRegex pattern compiles\" '\n\t\techo \"*.java diff=$p\" >.gitattributes &&\n\t\ttest_expect_code 1 git diff --no-index --word-diff \\\n\t\t\tBeer.java Beer-correct.java 2>msg &&\n\t\t! grep fatal msg &&\n\t\t! grep error msg\n\t'\ndone\n\ntest_expect_success 'set up .gitattributes declaring drivers to test' '\n\tcat >.gitattributes <<-\\EOF\n\t*.java diff=java\n\tEOF\n'\n\ntest_expect_success 'custom pattern' '\n\ttest_config diff.java.funcname \"!static\n!String\n[^ \t].*s.*\" &&\n\ttest_expect_funcname \"int special;\\$\"\n'\n\ntest_expect_success 'last regexp must not be negated' '\n\ttest_config diff.java.funcname \"!static\" &&\n\ttest_expect_code 128 git diff --no-index Beer.java Beer-correct.java 2>msg &&\n\tgrep \": Last expression must not be negated:\" msg\n'\n\ntest_expect_success 'pattern which matches to end of line' '\n\ttest_config diff.java.funcname \"Beer\\$\" &&\n\ttest_expect_funcname \"Beer\\$\"\n'\n\ntest_expect_success 'alternation in pattern' '\n\ttest_config diff.java.funcname \"Beer$\" &&\n\ttest_config diff.java.xfuncname \"^[ \t]*((public|static).*)$\" &&\n\ttest_expect_funcname \"public static void main(\"\n'\n\ntest_expect_success 'setup hunk header tests' '\n\tfor i in $diffpatterns\n\tdo\n\t\techo \"$i-* diff=$i\"\n\tdone > .gitattributes &&\n\n\t# add all test files to the index\n\t(\n\t\tcd \"$TEST_DIRECTORY\"/t4018 &&\n\t\tgit --git-dir=\"$TRASH_DIRECTORY/.git\" add .\n\t) &&\n\n\t# place modified files in the worktree\n\tfor i in $(git ls-files)\n\tdo\n\t\tsed -e \"s/ChangeMe/IWasChanged/\" <\"$TEST_DIRECTORY/t4018/$i\" >\"$i\" || return 1\n\tdone\n'\n\n# check each individual file\nfor i in $(git ls-files)\ndo\n\tif grep broken \"$i\" >/dev/null 2>&1\n\tthen\n\t\tresult=failure\n\telse\n\t\tresult=success\n\tfi\n\ttest_expect_$result \"hunk header: $i\" \"\n\t\ttest_when_finished 'cat actual' &&\t# for debugging only\n\t\tgit diff -U1 $i >actual &&\n\t\tgrep '@@ .* @@.*RIGHT' actual\n\t\"\ndone\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "008325f2a8f9d33723a10244d6fd13806914a6dc",
  "sha1_ok": true,
  "size": 2997
}
