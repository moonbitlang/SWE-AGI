{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSdmZXRjaC9yZWNlaXZlIHN0cmljdCBtb2RlJwouIC4vdGVzdC1saWIuc2gKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwIGFuZCBpbmplY3QgImNvcnJ1cHQgb3IgbWlzc2luZyIgb2JqZWN0JyAnCgllY2hvIGhlbGxvID5ncmVldGluZ3MgJiYKCWdpdCBhZGQgZ3JlZXRpbmdzICYmCglnaXQgY29tbWl0IC1tIGdyZWV0aW5ncyAmJgoKCVM9JChnaXQgcmV2LXBhcnNlIDpncmVldGluZ3MgfCBzZWQgLWUgInN8Xi4ufCYvfCIpICYmCglYPSQoZWNobyBieWUgfCBnaXQgaGFzaC1vYmplY3QgLXcgLS1zdGRpbiB8IHNlZCAtZSAic3xeLi58Ji98IikgJiYKCWVjaG8gJFMgPlMgJiYKCWVjaG8gJFggPlggJiYKCWNwIC5naXQvb2JqZWN0cy8kUyAuZ2l0L29iamVjdHMvJFMuYmFjayAmJgoJbXYgLWYgLmdpdC9vYmplY3RzLyRYIC5naXQvb2JqZWN0cy8kUyAmJgoKCXRlc3RfbXVzdF9mYWlsIGdpdCBmc2NrCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ZldGNoIHdpdGhvdXQgc3RyaWN0JyAnCglybSAtcmYgZHN0ICYmCglnaXQgaW5pdCBkc3QgJiYKCSgKCQljZCBkc3QgJiYKCQlnaXQgY29uZmlnIGZldGNoLmZzY2tvYmplY3RzIGZhbHNlICYmCgkJZ2l0IGNvbmZpZyB0cmFuc2Zlci5mc2Nrb2JqZWN0cyBmYWxzZSAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBmZXRjaCAuLi8uZ2l0IG1hc3RlcgoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdmZXRjaCB3aXRoICFmZXRjaC5mc2Nrb2JqZWN0cycgJwoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCgkoCgkJY2QgZHN0ICYmCgkJZ2l0IGNvbmZpZyBmZXRjaC5mc2Nrb2JqZWN0cyBmYWxzZSAmJgoJCWdpdCBjb25maWcgdHJhbnNmZXIuZnNja29iamVjdHMgdHJ1ZSAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBmZXRjaCAuLi8uZ2l0IG1hc3RlcgoJKQonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdmZXRjaCB3aXRoIGZldGNoLmZzY2tvYmplY3RzJyAnCglybSAtcmYgZHN0ICYmCglnaXQgaW5pdCBkc3QgJiYKCSgKCQljZCBkc3QgJiYKCQlnaXQgY29uZmlnIGZldGNoLmZzY2tvYmplY3RzIHRydWUgJiYKCQlnaXQgY29uZmlnIHRyYW5zZmVyLmZzY2tvYmplY3RzIGZhbHNlICYmCgkJdGVzdF9tdXN0X2ZhaWwgZ2l0IGZldGNoIC4uLy5naXQgbWFzdGVyCgkpCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ZldGNoIHdpdGggdHJhbnNmZXIuZnNja29iamVjdHMnICcKCXJtIC1yZiBkc3QgJiYKCWdpdCBpbml0IGRzdCAmJgoJKAoJCWNkIGRzdCAmJgoJCWdpdCBjb25maWcgdHJhbnNmZXIuZnNja29iamVjdHMgdHJ1ZSAmJgoJCXRlc3RfbXVzdF9mYWlsIGdpdCBmZXRjaCAuLi8uZ2l0IG1hc3RlcgoJKQonCgpjYXQgPmV4cCA8PEVPRgpUbyBkc3QKIQlyZWZzL2hlYWRzL21hc3RlcjpyZWZzL2hlYWRzL3Rlc3QJW3JlbW90ZSByZWplY3RlZF0gKG1pc3NpbmcgbmVjZXNzYXJ5IG9iamVjdHMpCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncHVzaCB3aXRob3V0IHN0cmljdCcgJwoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCgkoCgkJY2QgZHN0ICYmCgkJZ2l0IGNvbmZpZyBmZXRjaC5mc2Nrb2JqZWN0cyBmYWxzZSAmJgoJCWdpdCBjb25maWcgdHJhbnNmZXIuZnNja29iamVjdHMgZmFsc2UKCSkgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBwdXNoIC0tcG9yY2VsYWluIGRzdCBtYXN0ZXI6cmVmcy9oZWFkcy90ZXN0ID5hY3QgJiYKCXRlc3RfY21wIGV4cCBhY3QKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAncHVzaCB3aXRoICFyZWNlaXZlLmZzY2tvYmplY3RzJyAnCglybSAtcmYgZHN0ICYmCglnaXQgaW5pdCBkc3QgJiYKCSgKCQljZCBkc3QgJiYKCQlnaXQgY29uZmlnIHJlY2VpdmUuZnNja29iamVjdHMgZmFsc2UgJiYKCQlnaXQgY29uZmlnIHRyYW5zZmVyLmZzY2tvYmplY3RzIHRydWUKCSkgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBwdXNoIC0tcG9yY2VsYWluIGRzdCBtYXN0ZXI6cmVmcy9oZWFkcy90ZXN0ID5hY3QgJiYKCXRlc3RfY21wIGV4cCBhY3QKJwoKY2F0ID5leHAgPDxFT0YKVG8gZHN0CiEJcmVmcy9oZWFkcy9tYXN0ZXI6cmVmcy9oZWFkcy90ZXN0CVtyZW1vdGUgcmVqZWN0ZWRdICh1bnBhY2tlciBlcnJvcikKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdwdXNoIHdpdGggcmVjZWl2ZS5mc2Nrb2JqZWN0cycgJwoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCgkoCgkJY2QgZHN0ICYmCgkJZ2l0IGNvbmZpZyByZWNlaXZlLmZzY2tvYmplY3RzIHRydWUgJiYKCQlnaXQgY29uZmlnIHRyYW5zZmVyLmZzY2tvYmplY3RzIGZhbHNlCgkpICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgcHVzaCAtLXBvcmNlbGFpbiBkc3QgbWFzdGVyOnJlZnMvaGVhZHMvdGVzdCA+YWN0ICYmCgl0ZXN0X2NtcCBleHAgYWN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3B1c2ggd2l0aCB0cmFuc2Zlci5mc2Nrb2JqZWN0cycgJwoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCgkoCgkJY2QgZHN0ICYmCgkJZ2l0IGNvbmZpZyB0cmFuc2Zlci5mc2Nrb2JqZWN0cyB0cnVlCgkpICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgcHVzaCAtLXBvcmNlbGFpbiBkc3QgbWFzdGVyOnJlZnMvaGVhZHMvdGVzdCA+YWN0ICYmCgl0ZXN0X2NtcCBleHAgYWN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3JlcGFpciB0aGUgImNvcnJ1cHQgb3IgbWlzc2luZyIgb2JqZWN0JyAnCgltdiAtZiAuZ2l0L29iamVjdHMvJChjYXQgUykgLmdpdC9vYmplY3RzLyQoY2F0IFgpICYmCgltdiAuZ2l0L29iamVjdHMvJChjYXQgUykuYmFjayAuZ2l0L29iamVjdHMvJChjYXQgUykgJiYKCXJtIC1yZiAuZ2l0L29iamVjdHMvJChjYXQgWCkgJiYKCWdpdCBmc2NrCicKCmNhdCA+Ym9ndXMtY29tbWl0IDw8RU9GCnRyZWUgJEVNUFRZX1RSRUUKYXV0aG9yIEJ1Z3MgQnVubnkgMTIzNDU2Nzg5MCArMDAwMApjb21taXR0ZXIgQnVncyBCdW5ueSA8YnVnc0BidW4ubmk+IDEyMzQ1Njc4OTAgKzAwMDAKClRoaXMgY29tbWl0IG9iamVjdCBpbnRlbnRpb25hbGx5IGJyb2tlbgpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3B1c2ggd2l0aCByZWNlaXZlLmZzY2suc2tpcExpc3QnICcKCWNvbW1pdD0iJChnaXQgaGFzaC1vYmplY3QgLXQgY29tbWl0IC13IC0tc3RkaW4gPGJvZ3VzLWNvbW1pdCkiICYmCglnaXQgcHVzaCAuICRjb21taXQ6cmVmcy9oZWFkcy9ib2d1cyAmJgoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCglnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGNvbmZpZyByZWNlaXZlLmZzY2tPYmplY3RzIHRydWUgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBwdXNoIC0tcG9yY2VsYWluIGRzdCBib2d1cyAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgcmVjZWl2ZS5mc2NrLnNraXBMaXN0IFNLSVAgJiYKCWVjaG8gJGNvbW1pdCA+ZHN0Ly5naXQvU0tJUCAmJgoJZ2l0IHB1c2ggLS1wb3JjZWxhaW4gZHN0IGJvZ3VzCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ZldGNoIHdpdGggZmV0Y2guZnNjay5za2lwTGlzdCcgJwoJY29tbWl0PSIkKGdpdCBoYXNoLW9iamVjdCAtdCBjb21taXQgLXcgLS1zdGRpbiA8Ym9ndXMtY29tbWl0KSIgJiYKCXJlZnNwZWM9cmVmcy9oZWFkcy9ib2d1czpyZWZzL2hlYWRzL2JvZ3VzICYmCglnaXQgcHVzaCAuICRjb21taXQ6cmVmcy9oZWFkcy9ib2d1cyAmJgoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCglnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGNvbmZpZyBmZXRjaC5mc2NrT2JqZWN0cyB0cnVlICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGZldGNoICJmaWxlOi8vJChwd2QpIiAkcmVmc3BlYyAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgZmV0Y2guZnNjay5za2lwTGlzdCBkc3QvLmdpdC9TS0lQICYmCgllY2hvICRjb21taXQgPmRzdC8uZ2l0L1NLSVAgJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgZmV0Y2ggImZpbGU6Ly8kKHB3ZCkiICRyZWZzcGVjCicKCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdwdXNoIHdpdGggcmVjZWl2ZS5mc2NrLm1pc3NpbmdFbWFpbD13YXJuJyAnCgljb21taXQ9IiQoZ2l0IGhhc2gtb2JqZWN0IC10IGNvbW1pdCAtdyAtLXN0ZGluIDxib2d1cy1jb21taXQpIiAmJgoJZ2l0IHB1c2ggLiAkY29tbWl0OnJlZnMvaGVhZHMvYm9ndXMgJiYKCXJtIC1yZiBkc3QgJiYKCWdpdCBpbml0IGRzdCAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgcmVjZWl2ZS5mc2Nrb2JqZWN0cyB0cnVlICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgcHVzaCAtLXBvcmNlbGFpbiBkc3QgYm9ndXMgJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgY29uZmlnIFwKCQlyZWNlaXZlLmZzY2subWlzc2luZ0VtYWlsIHdhcm4gJiYKCWdpdCBwdXNoIC0tcG9yY2VsYWluIGRzdCBib2d1cyA+YWN0IDI+JjEgJiYKCWdyZXAgIm1pc3NpbmdFbWFpbCIgYWN0ICYmCglnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGJyYW5jaCAtRCBib2d1cyAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgLS1hZGQgXAoJCXJlY2VpdmUuZnNjay5taXNzaW5nRW1haWwgaWdub3JlICYmCglnaXQgcHVzaCAtLXBvcmNlbGFpbiBkc3QgYm9ndXMgPmFjdCAyPiYxICYmCgkhIGdyZXAgIm1pc3NpbmdFbWFpbCIgYWN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ZldGNoIHdpdGggZmV0Y2guZnNjay5taXNzaW5nRW1haWw9d2FybicgJwoJY29tbWl0PSIkKGdpdCBoYXNoLW9iamVjdCAtdCBjb21taXQgLXcgLS1zdGRpbiA8Ym9ndXMtY29tbWl0KSIgJiYKCXJlZnNwZWM9cmVmcy9oZWFkcy9ib2d1czpyZWZzL2hlYWRzL2JvZ3VzICYmCglnaXQgcHVzaCAuICRjb21taXQ6cmVmcy9oZWFkcy9ib2d1cyAmJgoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCglnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGNvbmZpZyBmZXRjaC5mc2Nrb2JqZWN0cyB0cnVlICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGZldGNoICJmaWxlOi8vJChwd2QpIiAkcmVmc3BlYyAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgXAoJCWZldGNoLmZzY2subWlzc2luZ0VtYWlsIHdhcm4gJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgZmV0Y2ggImZpbGU6Ly8kKHB3ZCkiICRyZWZzcGVjID5hY3QgMj4mMSAmJgoJZ3JlcCAibWlzc2luZ0VtYWlsIiBhY3QgJiYKCXJtIC1yZiBkc3QgJiYKCWdpdCBpbml0IGRzdCAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgZmV0Y2guZnNja29iamVjdHMgdHJ1ZSAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBjb25maWcgXAoJCWZldGNoLmZzY2subWlzc2luZ0VtYWlsIGlnbm9yZSAmJgoJZ2l0IC0tZ2l0LWRpcj1kc3QvLmdpdCBmZXRjaCAiZmlsZTovLyQocHdkKSIgJHJlZnNwZWMgPmFjdCAyPiYxICYmCgkhIGdyZXAgIm1pc3NpbmdFbWFpbCIgYWN0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgXAoJJ3JlY2VpdmUuZnNjay51bnRlcm1pbmF0ZWRIZWFkZXI9d2FybiB0cmlnZ2VycyBlcnJvcicgJwoJcm0gLXJmIGRzdCAmJgoJZ2l0IGluaXQgZHN0ICYmCglnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGNvbmZpZyByZWNlaXZlLmZzY2tvYmplY3RzIHRydWUgJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgY29uZmlnIFwKCQlyZWNlaXZlLmZzY2sudW50ZXJtaW5hdGVkaGVhZGVyIHdhcm4gJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBwdXNoIC0tcG9yY2VsYWluIGRzdCBIRUFEID5hY3QgMj4mMSAmJgoJZ3JlcCAiQ2Fubm90IGRlbW90ZSB1bnRlcm1pbmF0ZWRoZWFkZXIiIGFjdAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzIFwKCSdmZXRjaC5mc2NrLnVudGVybWluYXRlZEhlYWRlcj13YXJuIHRyaWdnZXJzIGVycm9yJyAnCglybSAtcmYgZHN0ICYmCglnaXQgaW5pdCBkc3QgJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgY29uZmlnIGZldGNoLmZzY2tvYmplY3RzIHRydWUgJiYKCWdpdCAtLWdpdC1kaXI9ZHN0Ly5naXQgY29uZmlnIFwKCQlmZXRjaC5mc2NrLnVudGVybWluYXRlZGhlYWRlciB3YXJuICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgLS1naXQtZGlyPWRzdC8uZ2l0IGZldGNoICJmaWxlOi8vJChwd2QpIiBIRUFEICYmCglncmVwICJDYW5ub3QgZGVtb3RlIHVudGVybWluYXRlZGhlYWRlciIgYWN0CicKCnRlc3RfZG9uZQo=",
    "text": "#!/bin/sh\n\ntest_description='fetch/receive strict mode'\n. ./test-lib.sh\n\ntest_expect_success 'setup and inject \"corrupt or missing\" object' '\n\techo hello >greetings &&\n\tgit add greetings &&\n\tgit commit -m greetings &&\n\n\tS=$(git rev-parse :greetings | sed -e \"s|^..|&/|\") &&\n\tX=$(echo bye | git hash-object -w --stdin | sed -e \"s|^..|&/|\") &&\n\techo $S >S &&\n\techo $X >X &&\n\tcp .git/objects/$S .git/objects/$S.back &&\n\tmv -f .git/objects/$X .git/objects/$S &&\n\n\ttest_must_fail git fsck\n'\n\ntest_expect_success 'fetch without strict' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config fetch.fsckobjects false &&\n\t\tgit config transfer.fsckobjects false &&\n\t\ttest_must_fail git fetch ../.git master\n\t)\n'\n\ntest_expect_success 'fetch with !fetch.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config fetch.fsckobjects false &&\n\t\tgit config transfer.fsckobjects true &&\n\t\ttest_must_fail git fetch ../.git master\n\t)\n'\n\ntest_expect_success 'fetch with fetch.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config fetch.fsckobjects true &&\n\t\tgit config transfer.fsckobjects false &&\n\t\ttest_must_fail git fetch ../.git master\n\t)\n'\n\ntest_expect_success 'fetch with transfer.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config transfer.fsckobjects true &&\n\t\ttest_must_fail git fetch ../.git master\n\t)\n'\n\ncat >exp <<EOF\nTo dst\n!\trefs/heads/master:refs/heads/test\t[remote rejected] (missing necessary objects)\nEOF\n\ntest_expect_success 'push without strict' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config fetch.fsckobjects false &&\n\t\tgit config transfer.fsckobjects false\n\t) &&\n\ttest_must_fail git push --porcelain dst master:refs/heads/test >act &&\n\ttest_cmp exp act\n'\n\ntest_expect_success 'push with !receive.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config receive.fsckobjects false &&\n\t\tgit config transfer.fsckobjects true\n\t) &&\n\ttest_must_fail git push --porcelain dst master:refs/heads/test >act &&\n\ttest_cmp exp act\n'\n\ncat >exp <<EOF\nTo dst\n!\trefs/heads/master:refs/heads/test\t[remote rejected] (unpacker error)\nEOF\n\ntest_expect_success 'push with receive.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config receive.fsckobjects true &&\n\t\tgit config transfer.fsckobjects false\n\t) &&\n\ttest_must_fail git push --porcelain dst master:refs/heads/test >act &&\n\ttest_cmp exp act\n'\n\ntest_expect_success 'push with transfer.fsckobjects' '\n\trm -rf dst &&\n\tgit init dst &&\n\t(\n\t\tcd dst &&\n\t\tgit config transfer.fsckobjects true\n\t) &&\n\ttest_must_fail git push --porcelain dst master:refs/heads/test >act &&\n\ttest_cmp exp act\n'\n\ntest_expect_success 'repair the \"corrupt or missing\" object' '\n\tmv -f .git/objects/$(cat S) .git/objects/$(cat X) &&\n\tmv .git/objects/$(cat S).back .git/objects/$(cat S) &&\n\trm -rf .git/objects/$(cat X) &&\n\tgit fsck\n'\n\ncat >bogus-commit <<EOF\ntree $EMPTY_TREE\nauthor Bugs Bunny 1234567890 +0000\ncommitter Bugs Bunny <bugs@bun.ni> 1234567890 +0000\n\nThis commit object intentionally broken\nEOF\n\ntest_expect_success 'push with receive.fsck.skipList' '\n\tcommit=\"$(git hash-object -t commit -w --stdin <bogus-commit)\" &&\n\tgit push . $commit:refs/heads/bogus &&\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config receive.fsckObjects true &&\n\ttest_must_fail git push --porcelain dst bogus &&\n\tgit --git-dir=dst/.git config receive.fsck.skipList SKIP &&\n\techo $commit >dst/.git/SKIP &&\n\tgit push --porcelain dst bogus\n'\n\ntest_expect_success 'fetch with fetch.fsck.skipList' '\n\tcommit=\"$(git hash-object -t commit -w --stdin <bogus-commit)\" &&\n\trefspec=refs/heads/bogus:refs/heads/bogus &&\n\tgit push . $commit:refs/heads/bogus &&\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config fetch.fsckObjects true &&\n\ttest_must_fail git --git-dir=dst/.git fetch \"file://$(pwd)\" $refspec &&\n\tgit --git-dir=dst/.git config fetch.fsck.skipList dst/.git/SKIP &&\n\techo $commit >dst/.git/SKIP &&\n\tgit --git-dir=dst/.git fetch \"file://$(pwd)\" $refspec\n'\n\n\ntest_expect_success 'push with receive.fsck.missingEmail=warn' '\n\tcommit=\"$(git hash-object -t commit -w --stdin <bogus-commit)\" &&\n\tgit push . $commit:refs/heads/bogus &&\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config receive.fsckobjects true &&\n\ttest_must_fail git push --porcelain dst bogus &&\n\tgit --git-dir=dst/.git config \\\n\t\treceive.fsck.missingEmail warn &&\n\tgit push --porcelain dst bogus >act 2>&1 &&\n\tgrep \"missingEmail\" act &&\n\tgit --git-dir=dst/.git branch -D bogus &&\n\tgit --git-dir=dst/.git config --add \\\n\t\treceive.fsck.missingEmail ignore &&\n\tgit push --porcelain dst bogus >act 2>&1 &&\n\t! grep \"missingEmail\" act\n'\n\ntest_expect_success 'fetch with fetch.fsck.missingEmail=warn' '\n\tcommit=\"$(git hash-object -t commit -w --stdin <bogus-commit)\" &&\n\trefspec=refs/heads/bogus:refs/heads/bogus &&\n\tgit push . $commit:refs/heads/bogus &&\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config fetch.fsckobjects true &&\n\ttest_must_fail git --git-dir=dst/.git fetch \"file://$(pwd)\" $refspec &&\n\tgit --git-dir=dst/.git config \\\n\t\tfetch.fsck.missingEmail warn &&\n\tgit --git-dir=dst/.git fetch \"file://$(pwd)\" $refspec >act 2>&1 &&\n\tgrep \"missingEmail\" act &&\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config fetch.fsckobjects true &&\n\tgit --git-dir=dst/.git config \\\n\t\tfetch.fsck.missingEmail ignore &&\n\tgit --git-dir=dst/.git fetch \"file://$(pwd)\" $refspec >act 2>&1 &&\n\t! grep \"missingEmail\" act\n'\n\ntest_expect_success \\\n\t'receive.fsck.unterminatedHeader=warn triggers error' '\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config receive.fsckobjects true &&\n\tgit --git-dir=dst/.git config \\\n\t\treceive.fsck.unterminatedheader warn &&\n\ttest_must_fail git push --porcelain dst HEAD >act 2>&1 &&\n\tgrep \"Cannot demote unterminatedheader\" act\n'\n\ntest_expect_success \\\n\t'fetch.fsck.unterminatedHeader=warn triggers error' '\n\trm -rf dst &&\n\tgit init dst &&\n\tgit --git-dir=dst/.git config fetch.fsckobjects true &&\n\tgit --git-dir=dst/.git config \\\n\t\tfetch.fsck.unterminatedheader warn &&\n\ttest_must_fail git --git-dir=dst/.git fetch \"file://$(pwd)\" HEAD &&\n\tgrep \"Cannot demote unterminatedheader\" act\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "004bfebe983928547d7944dd0343840b358ab79b",
  "sha1_ok": true,
  "size": 6164
}
