{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSd0ZXN0IGh0dHAgYXV0aCBoZWFkZXIgYW5kIGNyZWRlbnRpYWwgaGVscGVyIGludGVyb3AnCgouIC4vdGVzdC1saWIuc2gKLiAiJFRFU1RfRElSRUNUT1JZIi9saWItaHR0cGQuc2gKCmVuYWJsZV9jZ2lwYXNzYXV0aAppZiAhIHRlc3RfaGF2ZV9wcmVyZXEgQ0dJUEFTU0FVVEgKdGhlbgoJc2tpcF9hbGw9Im5vIENHSVBhc3NBdXRoIHN1cHBvcnQiCgl0ZXN0X2RvbmUKZmkKc3RhcnRfaHR0cGQKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NldHVwX2NyZWRlbnRpYWxfaGVscGVyJyAnCglta2RpciAiJFRSQVNIX0RJUkVDVE9SWS9iaW4iICYmCglQQVRIPSRQQVRIOiIkVFJBU0hfRElSRUNUT1JZL2JpbiIgJiYKCWV4cG9ydCBQQVRIICYmCgoJQ1JFREVOVElBTF9IRUxQRVI9IiRUUkFTSF9ESVJFQ1RPUlkvYmluL2dpdC1jcmVkZW50aWFsLXRlc3QtaGVscGVyIiAmJgoJd3JpdGVfc2NyaXB0ICIkQ1JFREVOVElBTF9IRUxQRVIiIDw8LVxFT0YKCWNtZD0kMQoJdGVlZmlsZT0kY21kLXF1ZXJ5LXRlbXAuY3JlZAoJY2F0ZmlsZT0kY21kLXJlcGx5LmNyZWQKCXNlZCAtbiAtZSAiL14kL3EiIC1lICJwIiA+PiR0ZWVmaWxlCglzdGF0ZT0kKHNlZCAtbmUgInMvXnN0YXRlXFtcXT1oZWxwZXI6Ly9wIiAiJHRlZWZpbGUiKQoJaWYgdGVzdCAteiAiJHN0YXRlIgoJdGhlbgoJCW12ICIkdGVlZmlsZSIgIiRjbWQtcXVlcnkuY3JlZCIKCWVsc2UKCQltdiAiJHRlZWZpbGUiICIkY21kLXF1ZXJ5LSRzdGF0ZS5jcmVkIgoJCWNhdGZpbGU9IiRjbWQtcmVwbHktJHN0YXRlLmNyZWQiCglmaQoJaWYgdGVzdCAiJGNtZCIgPSAiZ2V0IgoJdGhlbgoJCWNhdCAkY2F0ZmlsZQoJZmkKCUVPRgonCgpzZXRfY3JlZGVudGlhbF9yZXBseSAoKSB7Cglsb2NhbCBzdWZmaXg9IiQodGVzdCAtbiAiJDIiICYmIGVjaG8gIi0kMiIpIgoJY2F0ID4iJFRSQVNIX0RJUkVDVE9SWS8kMS1yZXBseSRzdWZmaXguY3JlZCIKfQoKZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgKCkgewoJbG9jYWwgc3VmZml4PSIkKHRlc3QgLW4gIiQyIiAmJiBlY2hvICItJDIiKSIKCWNhdCA+IiRUUkFTSF9ESVJFQ1RPUlkvJDEtZXhwZWN0JHN1ZmZpeC5jcmVkIiAmJgoJdGVzdF9jbXAgIiRUUkFTSF9ESVJFQ1RPUlkvJDEtZXhwZWN0JHN1ZmZpeC5jcmVkIiBcCgkJICIkVFJBU0hfRElSRUNUT1JZLyQxLXF1ZXJ5JHN1ZmZpeC5jcmVkIgp9CgpwZXJfdGVzdF9jbGVhbnVwICgpIHsKCXJtIC1mICouY3JlZCAmJgoJcm0gLWYgIiRIVFRQRF9ST09UX1BBVEgiL2N1c3RvbS1hdXRoLnZhbGlkIFwKCSAgICAgICIkSFRUUERfUk9PVF9QQVRIIi9jdXN0b20tYXV0aC5jaGFsbGVuZ2UKfQoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2V0dXAgcmVwb3NpdG9yeScgJwoJdGVzdF9jb21taXQgZm9vICYmCglnaXQgaW5pdCAtLWJhcmUgIiRIVFRQRF9ET0NVTUVOVF9ST09UX1BBVEgvcmVwby5naXQiICYmCglnaXQgcHVzaCAtLW1pcnJvciAiJEhUVFBEX0RPQ1VNRU5UX1JPT1RfUEFUSC9yZXBvLmdpdCIKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGJhc2ljIGF1dGgnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicGVyX3Rlc3RfY2xlYW51cCIgJiYKCglzZXRfY3JlZGVudGlhbF9yZXBseSBnZXQgPDwtRU9GICYmCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYWxpY2U6c2VjcmV0LXBhc3N3ZCkKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CYXNpYyBZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09CglFT0YKCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCglnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl3d3dhdXRoW109QmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgc3RvcmUgPDwtRU9GCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FjY2VzcyB1c2luZyBiYXNpYyBhdXRoIHZpYSBhdXRodHlwZScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJwZXJfdGVzdF9jbGVhbnVwIiAmJgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJYXV0aHR5cGU9QmFzaWMKCWNyZWRlbnRpYWw9WVd4cFkyVTZjMlZqY21WMExYQmhjM04zWkE9PQoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYWxpY2U6c2VjcmV0LXBhc3N3ZCkKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CYXNpYyBZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09CglFT0YKCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCglHSVRfQ1VSTF9WRVJCT1NFPTEgZ2l0IGxzLXJlbW90ZSAiJEhUVFBEX1VSTC9jdXN0b21fYXV0aC9yZXBvLmdpdCIgJiYKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPUJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IHN0b3JlIDw8LUVPRgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCglhdXRodHlwZT1CYXNpYwoJY3JlZGVudGlhbD1ZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09Cglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGJhc2ljIGF1dGggaW52YWxpZCBjcmVkZW50aWFscycgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJwZXJfdGVzdF9jbGVhbnVwIiAmJgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCA8PC1FT0YgJiYKCXVzZXJuYW1lPWJhZHVzZXIKCXBhc3N3b3JkPXdyb25nLXBhc3N3ZAoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYWxpY2U6c2VjcmV0LXBhc3N3ZCkKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CYXNpYyBZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09CglFT0YKCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCgl0ZXN0X211c3RfZmFpbCBnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl3d3dhdXRoW109QmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgZXJhc2UgPDwtRU9GCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl1c2VybmFtZT1iYWR1c2VyCglwYXNzd29yZD13cm9uZy1wYXNzd2QKCXd3d2F1dGhbXT1CYXNpYyByZWFsbT0iZXhhbXBsZS5jb20iCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGJhc2ljIHByb2FjdGl2ZSBhdXRoJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInBlcl90ZXN0X2NsZWFudXAiICYmCgoJc2V0X2NyZWRlbnRpYWxfcmVwbHkgZ2V0IDw8LUVPRiAmJgoJdXNlcm5hbWU9YWxpY2UKCXBhc3N3b3JkPXNlY3JldC1wYXNzd2QKCUVPRgoKCSMgQmFzaWMgYmFzZTY0KGFsaWNlOnNlY3JldC1wYXNzd2QpCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLnZhbGlkIiA8PC1FT0YgJiYKCWlkPTEgY3JlZHM9QmFzaWMgWVd4cFkyVTZjMlZqY21WMExYQmhjM04zWkE9PQoJRU9GCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiIDw8LUVPRiAmJgoJaWQ9MSBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHN0YXR1cz00MDMKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJdGVzdF9jb25maWdfZ2xvYmFsIGh0dHAucHJvYWN0aXZlQXV0aCBiYXNpYyAmJgoJZ2l0IGxzLXJlbW90ZSAiJEhUVFBEX1VSTC9jdXN0b21fYXV0aC9yZXBvLmdpdCIgJiYKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPUJhc2ljCglFT0YKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBzdG9yZSA8PC1FT0YKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXVzZXJuYW1lPWFsaWNlCglwYXNzd29yZD1zZWNyZXQtcGFzc3dkCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGF1dG8gcHJvYWN0aXZlIGF1dGggd2l0aCBiYXNpYyBkZWZhdWx0JyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInBlcl90ZXN0X2NsZWFudXAiICYmCgoJc2V0X2NyZWRlbnRpYWxfcmVwbHkgZ2V0IDw8LUVPRiAmJgoJdXNlcm5hbWU9YWxpY2UKCXBhc3N3b3JkPXNlY3JldC1wYXNzd2QKCUVPRgoKCSMgQmFzaWMgYmFzZTY0KGFsaWNlOnNlY3JldC1wYXNzd2QpCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLnZhbGlkIiA8PC1FT0YgJiYKCWlkPTEgY3JlZHM9QmFzaWMgWVd4cFkyVTZjMlZqY21WMExYQmhjM04zWkE9PQoJRU9GCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiIDw8LUVPRiAmJgoJaWQ9MSBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHN0YXR1cz00MDMKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJdGVzdF9jb25maWdfZ2xvYmFsIGh0dHAucHJvYWN0aXZlQXV0aCBhdXRvICYmCglnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCglFT0YKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBzdG9yZSA8PC1FT0YKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXVzZXJuYW1lPWFsaWNlCglwYXNzd29yZD1zZWNyZXQtcGFzc3dkCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGF1dG8gcHJvYWN0aXZlIGF1dGggd2l0aCBhdXRodHlwZSBmcm9tIGNyZWRlbnRpYWwgaGVscGVyJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInBlcl90ZXN0X2NsZWFudXAiICYmCgoJc2V0X2NyZWRlbnRpYWxfcmVwbHkgZ2V0IDw8LUVPRiAmJgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCglhdXRodHlwZT1CZWFyZXIKCWNyZWRlbnRpYWw9WVMxbmFYUXRkRzlyWlc0PQoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYS1naXQtdG9rZW4pCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLnZhbGlkIiA8PC1FT0YgJiYKCWlkPTEgY3JlZHM9QmVhcmVyIFlTMW5hWFF0ZEc5clpXND0KCUVPRgoKCUNIQUxMRU5HRT0iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiICYmCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiIDw8LUVPRiAmJgoJaWQ9MSBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHN0YXR1cz00MDMKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJdGVzdF9jb25maWdfZ2xvYmFsIGh0dHAucHJvYWN0aXZlQXV0aCBhdXRvICYmCglnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCglFT0YKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBzdG9yZSA8PC1FT0YKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJYXV0aHR5cGU9QmVhcmVyCgljcmVkZW50aWFsPVlTMW5hWFF0ZEc5clpXND0KCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCUVPRgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhY2Nlc3MgdXNpbmcgYmFzaWMgYXV0aCB3aXRoIGV4dHJhIGNoYWxsZW5nZXMnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicGVyX3Rlc3RfY2xlYW51cCIgJiYKCglzZXRfY3JlZGVudGlhbF9yZXBseSBnZXQgPDwtRU9GICYmCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYWxpY2U6c2VjcmV0LXBhc3N3ZCkKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CYXNpYyBZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09CglFT0YKCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogRm9vQmFyIHBhcmFtMT0idmFsdWUxIiBwYXJhbTI9InZhbHVlMiIKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJZ2l0IGxzLXJlbW90ZSAiJEhUVFBEX1VSTC9jdXN0b21fYXV0aC9yZXBvLmdpdCIgJiYKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPUZvb0JhciBwYXJhbTE9InZhbHVlMSIgcGFyYW0yPSJ2YWx1ZTIiCgl3d3dhdXRoW109QmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCgl3d3dhdXRoW109QmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgc3RvcmUgPDwtRU9GCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FjY2VzcyB1c2luZyBiYXNpYyBhdXRoIG1peGVkLWNhc2Ugd3d3YXV0aCBoZWFkZXIgbmFtZScgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJwZXJfdGVzdF9jbGVhbnVwIiAmJgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCA8PC1FT0YgJiYKCXVzZXJuYW1lPWFsaWNlCglwYXNzd29yZD1zZWNyZXQtcGFzc3dkCglFT0YKCgkjIEJhc2ljIGJhc2U2NChhbGljZTpzZWNyZXQtcGFzc3dkKQoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC52YWxpZCIgPDwtRU9GICYmCglpZD0xIGNyZWRzPUJhc2ljIFlXeHBZMlU2YzJWamNtVjBMWEJoYzNOM1pBPT0KCUVPRgoKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGguY2hhbGxlbmdlIiA8PC1FT0YgJiYKCWlkPTEgc3RhdHVzPTIwMAoJaWQ9ZGVmYXVsdCByZXNwb25zZT13d3ctYXV0aGVudGljYXRlOiBmb29iYXIgcGFyYW0xPSJ2YWx1ZTEiIHBhcmFtMj0idmFsdWUyIgoJaWQ9ZGVmYXVsdCByZXNwb25zZT1XV1ctQVVUSEVOVElDQVRFOiBCRUFSRVIgYXV0aG9yaXplX3VyaT0iaWQuZXhhbXBsZS5jb20iIHA9MSBxPTAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V3dXLWFVdEhlTnRJY0F0RTogYmFTaUMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCglnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl3d3dhdXRoW109Zm9vYmFyIHBhcmFtMT0idmFsdWUxIiBwYXJhbTI9InZhbHVlMiIKCXd3d2F1dGhbXT1CRUFSRVIgYXV0aG9yaXplX3VyaT0iaWQuZXhhbXBsZS5jb20iIHA9MSBxPTAKCXd3d2F1dGhbXT1iYVNpQyByZWFsbT0iZXhhbXBsZS5jb20iCglFT0YKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBzdG9yZSA8PC1FT0YKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXVzZXJuYW1lPWFsaWNlCglwYXNzd29yZD1zZWNyZXQtcGFzc3dkCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGJhc2ljIGF1dGggd2l0aCB3d3dhdXRoIGhlYWRlciBjb250aW51YXRpb25zJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInBlcl90ZXN0X2NsZWFudXAiICYmCgoJc2V0X2NyZWRlbnRpYWxfcmVwbHkgZ2V0IDw8LUVPRiAmJgoJdXNlcm5hbWU9YWxpY2UKCXBhc3N3b3JkPXNlY3JldC1wYXNzd2QKCUVPRgoKCSMgQmFzaWMgYmFzZTY0KGFsaWNlOnNlY3JldC1wYXNzd2QpCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLnZhbGlkIiA8PC1FT0YgJiYKCWlkPTEgY3JlZHM9QmFzaWMgWVd4cFkyVTZjMlZqY21WMExYQmhjM04zWkE9PQoJRU9GCgoJIyBOb3RlIHRoYXQgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBpcyBpbXBvcnRhbnQgdG8gY29ycmVjdGx5CgkjIHNpbXVsYXRlIGEgY29udGludWF0aW9uL2ZvbGRlZCBoZWFkZXIuCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogRm9vQmFyIHBhcmFtMT0idmFsdWUxIgoJaWQ9ZGVmYXVsdCByZXNwb25zZT0gcGFyYW0yPSJ2YWx1ZTIiCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIKCWlkPWRlZmF1bHQgcmVzcG9uc2U9IHA9MQoJaWQ9ZGVmYXVsdCByZXNwb25zZT0gcT0wCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJZ2l0IGxzLXJlbW90ZSAiJEhUVFBEX1VSTC9jdXN0b21fYXV0aC9yZXBvLmdpdCIgJiYKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPUZvb0JhciBwYXJhbTE9InZhbHVlMSIgcGFyYW0yPSJ2YWx1ZTIiCgl3d3dhdXRoW109QmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCgl3d3dhdXRoW109QmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgc3RvcmUgPDwtRU9GCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FjY2VzcyB1c2luZyBiYXNpYyBhdXRoIHdpdGggd3d3YXV0aCBoZWFkZXIgZW1wdHkgY29udGludWF0aW9ucycgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJwZXJfdGVzdF9jbGVhbnVwIiAmJgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCA8PC1FT0YgJiYKCXVzZXJuYW1lPWFsaWNlCglwYXNzd29yZD1zZWNyZXQtcGFzc3dkCglFT0YKCgkjIEJhc2ljIGJhc2U2NChhbGljZTpzZWNyZXQtcGFzc3dkKQoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC52YWxpZCIgPDwtRU9GICYmCglpZD0xIGNyZWRzPUJhc2ljIFlXeHBZMlU2YzJWamNtVjBMWEJoYzNOM1pBPT0KCUVPRgoKCUNIQUxMRU5HRT0iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiICYmCgoJIyBOb3RlIHRoYXQgbGVhZGluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZSBpcyBpbXBvcnRhbnQgdG8gY29ycmVjdGx5CgkjIHNpbXVsYXRlIGEgY29udGludWF0aW9uL2ZvbGRlZCBoZWFkZXIuCglwcmludGYgImlkPTEgc3RhdHVzPTIwMFxuIiA+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogRm9vQmFyIHBhcmFtMT1cInZhbHVlMVwiXHJcbiIgPj4iJENIQUxMRU5HRSIgJiYKCXByaW50ZiAiaWQ9ZGVmYXVsdCByZXNwb25zZT0gXHJcbiIgPj4iJENIQUxMRU5HRSIgJiYKCXByaW50ZiAiaWQ9ZGVmYXVsdCByZXNwb25zZT0gcGFyYW0yPVwidmFsdWUyXCJcclxuIiA+PiIkQ0hBTExFTkdFIiAmJgoJcHJpbnRmICJpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPVwiaWQuZXhhbXBsZS5jb21cIlxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9IHA9MVxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9IFxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9IHE9MFxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmFzaWMgcmVhbG09XCJleGFtcGxlLmNvbVwiXHJcbiIgPj4iJENIQUxMRU5HRSIgJiYKCgl0ZXN0X2NvbmZpZ19nbG9iYWwgY3JlZGVudGlhbC5oZWxwZXIgdGVzdC1oZWxwZXIgJiYKCWdpdCBscy1yZW1vdGUgIiRIVFRQRF9VUkwvY3VzdG9tX2F1dGgvcmVwby5naXQiICYmCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgZ2V0IDw8LUVPRiAmJgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCgljYXBhYmlsaXR5W109c3RhdGUKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXd3d2F1dGhbXT1Gb29CYXIgcGFyYW0xPSJ2YWx1ZTEiIHBhcmFtMj0idmFsdWUyIgoJd3d3YXV0aFtdPUJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIgcD0xIHE9MAoJd3d3YXV0aFtdPUJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IHN0b3JlIDw8LUVPRgoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJdXNlcm5hbWU9YWxpY2UKCXBhc3N3b3JkPXNlY3JldC1wYXNzd2QKCUVPRgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhY2Nlc3MgdXNpbmcgYmFzaWMgYXV0aCB3aXRoIHd3d2F1dGggaGVhZGVyIG1peGVkIGNvbnRpbnVhdGlvbnMnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicGVyX3Rlc3RfY2xlYW51cCIgJiYKCglzZXRfY3JlZGVudGlhbF9yZXBseSBnZXQgPDwtRU9GICYmCgl1c2VybmFtZT1hbGljZQoJcGFzc3dvcmQ9c2VjcmV0LXBhc3N3ZAoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYWxpY2U6c2VjcmV0LXBhc3N3ZCkKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CYXNpYyBZV3hwWTJVNmMyVmpjbVYwTFhCaGMzTjNaQT09CglFT0YKCglDSEFMTEVOR0U9IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGguY2hhbGxlbmdlIiAmJgoKCSMgTm90ZSB0aGF0IGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UgaXMgaW1wb3J0YW50IHRvIGNvcnJlY3RseQoJIyBzaW11bGF0ZSBhIGNvbnRpbnVhdGlvbi9mb2xkZWQgaGVhZGVyLgoJcHJpbnRmICJpZD0xIHN0YXR1cz0yMDBcbiIgPiIkQ0hBTExFTkdFIiAmJgoJcHJpbnRmICJpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEZvb0JhciBwYXJhbTE9XCJ2YWx1ZTFcIlxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9IFxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9XHRwYXJhbTI9XCJ2YWx1ZTJcIlxyXG4iID4+IiRDSEFMTEVOR0UiICYmCglwcmludGYgImlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmFzaWMgcmVhbG09XCJleGFtcGxlLmNvbVwiXHJcbiIgPj4iJENIQUxMRU5HRSIgJiYKCgl0ZXN0X2NvbmZpZ19nbG9iYWwgY3JlZGVudGlhbC5oZWxwZXIgdGVzdC1oZWxwZXIgJiYKCWdpdCBscy1yZW1vdGUgIiRIVFRQRF9VUkwvY3VzdG9tX2F1dGgvcmVwby5naXQiICYmCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgZ2V0IDw8LUVPRiAmJgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCgljYXBhYmlsaXR5W109c3RhdGUKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXd3d2F1dGhbXT1Gb29CYXIgcGFyYW0xPSJ2YWx1ZTEiIHBhcmFtMj0idmFsdWUyIgoJd3d3YXV0aFtdPUJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IHN0b3JlIDw8LUVPRgoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJdXNlcm5hbWU9YWxpY2UKCXBhc3N3b3JkPXNlY3JldC1wYXNzd2QKCUVPRgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhY2Nlc3MgdXNpbmcgYmVhcmVyIGF1dGgnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicGVyX3Rlc3RfY2xlYW51cCIgJiYKCglzZXRfY3JlZGVudGlhbF9yZXBseSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWF1dGh0eXBlPUJlYXJlcgoJY3JlZGVudGlhbD1ZUzFuYVhRdGRHOXJaVzQ9CglFT0YKCgkjIEJhc2ljIGJhc2U2NChhLWdpdC10b2tlbikKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CZWFyZXIgWVMxbmFYUXRkRzlyWlc0PQoJRU9GCgoJQ0hBTExFTkdFPSIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgJiYKCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLmNoYWxsZW5nZSIgPDwtRU9GICYmCglpZD0xIHN0YXR1cz0yMDAKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogRm9vQmFyIHBhcmFtMT0idmFsdWUxIiBwYXJhbTI9InZhbHVlMiIKCWlkPWRlZmF1bHQgcmVzcG9uc2U9V1dXLUF1dGhlbnRpY2F0ZTogQmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCXRlc3RfY29uZmlnX2dsb2JhbCBjcmVkZW50aWFsLmhlbHBlciB0ZXN0LWhlbHBlciAmJgoJZ2l0IGxzLXJlbW90ZSAiJEhUVFBEX1VSTC9jdXN0b21fYXV0aC9yZXBvLmdpdCIgJiYKCglleHBlY3RfY3JlZGVudGlhbF9xdWVyeSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPUZvb0JhciBwYXJhbTE9InZhbHVlMSIgcGFyYW0yPSJ2YWx1ZTIiCgl3d3dhdXRoW109QmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCgl3d3dhdXRoW109QmFzaWMgcmVhbG09ImV4YW1wbGUuY29tIgoJRU9GCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgc3RvcmUgPDwtRU9GCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWF1dGh0eXBlPUJlYXJlcgoJY3JlZGVudGlhbD1ZUzFuYVhRdGRHOXJaVzQ9Cglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnYWNjZXNzIHVzaW5nIGJlYXJlciBhdXRoIHdpdGggaW52YWxpZCBjcmVkZW50aWFscycgJwoJdGVzdF93aGVuX2ZpbmlzaGVkICJwZXJfdGVzdF9jbGVhbnVwIiAmJgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJYXV0aHR5cGU9QmVhcmVyCgljcmVkZW50aWFsPWluY29ycmVjdC10b2tlbgoJRU9GCgoJIyBCYXNpYyBiYXNlNjQoYS1naXQtdG9rZW4pCgljYXQgPiIkSFRUUERfUk9PVF9QQVRIL2N1c3RvbS1hdXRoLnZhbGlkIiA8PC1FT0YgJiYKCWlkPTEgY3JlZHM9QmVhcmVyIFlTMW5hWFF0ZEc5clpXND0KCUVPRgoKCUNIQUxMRU5HRT0iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiICYmCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiIDw8LUVPRiAmJgoJaWQ9MSBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEZvb0JhciBwYXJhbTE9InZhbHVlMSIgcGFyYW0yPSJ2YWx1ZTIiCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIgcD0xIHE9MAoJaWQ9ZGVmYXVsdCByZXNwb25zZT1XV1ctQXV0aGVudGljYXRlOiBCYXNpYyByZWFsbT0iZXhhbXBsZS5jb20iCglFT0YKCgl0ZXN0X2NvbmZpZ19nbG9iYWwgY3JlZGVudGlhbC5oZWxwZXIgdGVzdC1oZWxwZXIgJiYKCXRlc3RfbXVzdF9mYWlsIGdpdCBscy1yZW1vdGUgIiRIVFRQRF9VUkwvY3VzdG9tX2F1dGgvcmVwby5naXQiICYmCgoJZXhwZWN0X2NyZWRlbnRpYWxfcXVlcnkgZ2V0IDw8LUVPRiAmJgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCgljYXBhYmlsaXR5W109c3RhdGUKCXByb3RvY29sPWh0dHAKCWhvc3Q9JEhUVFBEX0RFU1QKCXd3d2F1dGhbXT1Gb29CYXIgcGFyYW0xPSJ2YWx1ZTEiIHBhcmFtMj0idmFsdWUyIgoJd3d3YXV0aFtdPUJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIgcD0xIHE9MAoJd3d3YXV0aFtdPUJhc2ljIHJlYWxtPSJleGFtcGxlLmNvbSIKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGVyYXNlIDw8LUVPRgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCglhdXRodHlwZT1CZWFyZXIKCWNyZWRlbnRpYWw9aW5jb3JyZWN0LXRva2VuCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl3d3dhdXRoW109Rm9vQmFyIHBhcmFtMT0idmFsdWUxIiBwYXJhbTI9InZhbHVlMiIKCXd3d2F1dGhbXT1CZWFyZXIgYXV0aG9yaXplX3VyaT0iaWQuZXhhbXBsZS5jb20iIHA9MSBxPTAKCXd3d2F1dGhbXT1CYXNpYyByZWFsbT0iZXhhbXBsZS5jb20iCglFT0YKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnY2xvbmUgd2l0aCBiZWFyZXIgYXV0aCBhbmQgcHJvYmVfcnBjJyAnCgl0ZXN0X3doZW5fZmluaXNoZWQgInBlcl90ZXN0X2NsZWFudXAiICYmCgl0ZXN0X3doZW5fZmluaXNoZWQgInJtIC1yZiBsYXJnZS5naXQiICYmCgoJIyBTZXQgdXAgYSByZXBvc2l0b3J5IGxhcmdlIGVub3VnaCB0byB0cmlnZ2VyIHByb2JlX3JwYwoJZ2l0IGluaXQgbGFyZ2UuZ2l0ICYmCgkoCgkJY2QgbGFyZ2UuZ2l0ICYmCgkJZ2l0IGNvbmZpZyBzZXQgbWFpbnRlbmFuY2UuYXV0byBmYWxzZSAmJgoJCWdpdCBjb21taXQgLS1hbGxvdy1lbXB0eSAtLW1lc3NhZ2UgImluaXRpYWwiICYmCgkJIyBDcmVhdGUgbWFueSByZWZzIHRvIHRyaWdnZXIgcHJvYmVfcnBjLCB3aGljaCBpcyBjYWxsZWQgd2hlbgoJCSMgdGhlIHJlcXVlc3QgYm9keSBpcyBsYXJnZXIgdGhhbiBodHRwLnBvc3RCdWZmZXIuCgkJIwoJCSMgSW4gdGhlIHRlc3QgbGF0ZXIsIGh0dHAucG9zdEJ1ZmZlciBpcyBzZXQgdG8gNzAwMDAuIEVhY2gKCQkjICJ3YW50IiBsaW5lIGlzIH40NSBieXRlcywgc28gd2UgbmVlZCBhdCBsZWFzdCA3MDAwMC80NSA9IH4xNjAwCgkJIyByZWZzCgkJdGVzdF9zZXEgLWYgImNyZWF0ZSByZWZzL2hlYWRzL2JyYW5jaC0lZCBAIiAyMDAwIHwKCQlnaXQgdXBkYXRlLXJlZiAtLXN0ZGluCgkpICYmCglnaXQgY2xvbmUgLS1iYXJlIGxhcmdlLmdpdCAiJEhUVFBEX0RPQ1VNRU5UX1JPT1RfUEFUSC9sYXJnZS5naXQiICYmCgoJIyBDbG9uZSBpdCB0aHJvdWdoIEhUVFAgd2l0aCBhIEJlYXJlciB0b2tlbgoJc2V0X2NyZWRlbnRpYWxfcmVwbHkgZ2V0IDw8LUVPRiAmJgoJY2FwYWJpbGl0eVtdPWF1dGh0eXBlCglhdXRodHlwZT1CZWFyZXIKCWNyZWRlbnRpYWw9WVMxbmFYUXRkRzlyWlc0PQoJRU9GCgoJIyBCZWFyZXIgdG9rZW4KCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGgudmFsaWQiIDw8LUVPRiAmJgoJaWQ9MSBjcmVkcz1CZWFyZXIgWVMxbmFYUXRkRzlyWlc0PQoJRU9GCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC5jaGFsbGVuZ2UiIDw8LUVPRiAmJgoJaWQ9MSBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIKCUVPRgoKCSMgU2V0IGEgc21hbGwgYnVmZmVyIHRvIGZvcmNlIHByb2JlX3JwYyB0byBiZSBjYWxsZWQKCSMgTXVzdCBiZSA+IExBUkdFX1BBQ0tFVF9NQVggKDY1NTIwKQoJdGVzdF9jb25maWdfZ2xvYmFsIGh0dHAucG9zdEJ1ZmZlciA3MDAwMCAmJgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCglnaXQgY2xvbmUgIiRIVFRQRF9VUkwvY3VzdG9tX2F1dGgvbGFyZ2UuZ2l0IiBwYXJ0aWFsLWF1dGgtY2xvbmUgMj5jbG9uZS1lcnJvcgonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdhY2Nlc3MgdXNpbmcgdGhyZWUtbGVnZ2VkIGF1dGgnICcKCXRlc3Rfd2hlbl9maW5pc2hlZCAicGVyX3Rlc3RfY2xlYW51cCIgJiYKCglzZXRfY3JlZGVudGlhbF9yZXBseSBnZXQgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJYXV0aHR5cGU9TXVsdGlzdGFnZQoJY3JlZGVudGlhbD1ZUzFuYVhRdGRHOXJaVzQ9CglzdGF0ZVtdPWhlbHBlcjpmb29iYXIKCWNvbnRpbnVlPTEKCUVPRgoKCXNldF9jcmVkZW50aWFsX3JlcGx5IGdldCBmb29iYXIgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJYXV0aHR5cGU9TXVsdGlzdGFnZQoJY3JlZGVudGlhbD1ZVzV2ZEdobGNpMTBiMnRsYmc9PQoJc3RhdGVbXT1oZWxwZXI6YmF6cXV1eAoJRU9GCgoJY2F0ID4iJEhUVFBEX1JPT1RfUEFUSC9jdXN0b20tYXV0aC52YWxpZCIgPDwtRU9GICYmCglpZD0xIGNyZWRzPU11bHRpc3RhZ2UgWVMxbmFYUXRkRzlyWlc0PQoJaWQ9MiBjcmVkcz1NdWx0aXN0YWdlIFlXNXZkR2hsY2kxMGIydGxiZz09CglFT0YKCglDSEFMTEVOR0U9IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGguY2hhbGxlbmdlIiAmJgoKCWNhdCA+IiRIVFRQRF9ST09UX1BBVEgvY3VzdG9tLWF1dGguY2hhbGxlbmdlIiA8PC1FT0YgJiYKCWlkPTEgc3RhdHVzPTQwMSByZXNwb25zZT1XV1ctQXV0aGVudGljYXRlOiBNdWx0aXN0YWdlIGNoYWxsZW5nZT0iNDU2IgoJaWQ9MSBzdGF0dXM9NDAxIHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIgcD0xIHE9MAoJaWQ9MiBzdGF0dXM9MjAwCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IE11bHRpc3RhZ2UgY2hhbGxlbmdlPSIxMjMiCglpZD1kZWZhdWx0IHJlc3BvbnNlPVdXVy1BdXRoZW50aWNhdGU6IEJlYXJlciBhdXRob3JpemVfdXJpPSJpZC5leGFtcGxlLmNvbSIgcD0xIHE9MAoJRU9GCgoJdGVzdF9jb25maWdfZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHRlc3QtaGVscGVyICYmCglnaXQgbHMtcmVtb3RlICIkSFRUUERfVVJML2N1c3RvbV9hdXRoL3JlcG8uZ2l0IiAmJgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCA8PC1FT0YgJiYKCWNhcGFiaWxpdHlbXT1hdXRodHlwZQoJY2FwYWJpbGl0eVtdPXN0YXRlCglwcm90b2NvbD1odHRwCglob3N0PSRIVFRQRF9ERVNUCgl3d3dhdXRoW109TXVsdGlzdGFnZSBjaGFsbGVuZ2U9IjEyMyIKCXd3d2F1dGhbXT1CZWFyZXIgYXV0aG9yaXplX3VyaT0iaWQuZXhhbXBsZS5jb20iIHA9MSBxPTAKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IGdldCBmb29iYXIgPDwtRU9GICYmCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJYXV0aHR5cGU9TXVsdGlzdGFnZQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJd3d3YXV0aFtdPU11bHRpc3RhZ2UgY2hhbGxlbmdlPSI0NTYiCgl3d3dhdXRoW109QmVhcmVyIGF1dGhvcml6ZV91cmk9ImlkLmV4YW1wbGUuY29tIiBwPTEgcT0wCglzdGF0ZVtdPWhlbHBlcjpmb29iYXIKCUVPRgoKCWV4cGVjdF9jcmVkZW50aWFsX3F1ZXJ5IHN0b3JlIGJhenF1dXggPDwtRU9GCgljYXBhYmlsaXR5W109YXV0aHR5cGUKCWNhcGFiaWxpdHlbXT1zdGF0ZQoJYXV0aHR5cGU9TXVsdGlzdGFnZQoJY3JlZGVudGlhbD1ZVzV2ZEdobGNpMTBiMnRsYmc9PQoJcHJvdG9jb2w9aHR0cAoJaG9zdD0kSFRUUERfREVTVAoJc3RhdGVbXT1oZWxwZXI6YmF6cXV1eAoJRU9GCicKCnRlc3RfZG9uZQo=",
    "text": "#!/bin/sh\n\ntest_description='test http auth header and credential helper interop'\n\n. ./test-lib.sh\n. \"$TEST_DIRECTORY\"/lib-httpd.sh\n\nenable_cgipassauth\nif ! test_have_prereq CGIPASSAUTH\nthen\n\tskip_all=\"no CGIPassAuth support\"\n\ttest_done\nfi\nstart_httpd\n\ntest_expect_success 'setup_credential_helper' '\n\tmkdir \"$TRASH_DIRECTORY/bin\" &&\n\tPATH=$PATH:\"$TRASH_DIRECTORY/bin\" &&\n\texport PATH &&\n\n\tCREDENTIAL_HELPER=\"$TRASH_DIRECTORY/bin/git-credential-test-helper\" &&\n\twrite_script \"$CREDENTIAL_HELPER\" <<-\\EOF\n\tcmd=$1\n\tteefile=$cmd-query-temp.cred\n\tcatfile=$cmd-reply.cred\n\tsed -n -e \"/^$/q\" -e \"p\" >>$teefile\n\tstate=$(sed -ne \"s/^state\\[\\]=helper://p\" \"$teefile\")\n\tif test -z \"$state\"\n\tthen\n\t\tmv \"$teefile\" \"$cmd-query.cred\"\n\telse\n\t\tmv \"$teefile\" \"$cmd-query-$state.cred\"\n\t\tcatfile=\"$cmd-reply-$state.cred\"\n\tfi\n\tif test \"$cmd\" = \"get\"\n\tthen\n\t\tcat $catfile\n\tfi\n\tEOF\n'\n\nset_credential_reply () {\n\tlocal suffix=\"$(test -n \"$2\" && echo \"-$2\")\"\n\tcat >\"$TRASH_DIRECTORY/$1-reply$suffix.cred\"\n}\n\nexpect_credential_query () {\n\tlocal suffix=\"$(test -n \"$2\" && echo \"-$2\")\"\n\tcat >\"$TRASH_DIRECTORY/$1-expect$suffix.cred\" &&\n\ttest_cmp \"$TRASH_DIRECTORY/$1-expect$suffix.cred\" \\\n\t\t \"$TRASH_DIRECTORY/$1-query$suffix.cred\"\n}\n\nper_test_cleanup () {\n\trm -f *.cred &&\n\trm -f \"$HTTPD_ROOT_PATH\"/custom-auth.valid \\\n\t      \"$HTTPD_ROOT_PATH\"/custom-auth.challenge\n}\n\ntest_expect_success 'setup repository' '\n\ttest_commit foo &&\n\tgit init --bare \"$HTTPD_DOCUMENT_ROOT_PATH/repo.git\" &&\n\tgit push --mirror \"$HTTPD_DOCUMENT_ROOT_PATH/repo.git\"\n'\n\ntest_expect_success 'access using basic auth' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using basic auth via authtype' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tauthtype=Basic\n\tcredential=YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tGIT_CURL_VERBOSE=1 git ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tcapability[]=authtype\n\tauthtype=Basic\n\tcredential=YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tEOF\n'\n\ntest_expect_success 'access using basic auth invalid credentials' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=baduser\n\tpassword=wrong-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\ttest_must_fail git ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query erase <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=baduser\n\tpassword=wrong-passwd\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n'\n\ntest_expect_success 'access using basic proactive auth' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default status=403\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\ttest_config_global http.proactiveAuth basic &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Basic\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using auto proactive auth with basic default' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default status=403\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\ttest_config_global http.proactiveAuth auto &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using auto proactive auth with authtype from credential helper' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=YS1naXQtdG9rZW4=\n\tEOF\n\n\t# Basic base64(a-git-token)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Bearer YS1naXQtdG9rZW4=\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default status=403\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\ttest_config_global http.proactiveAuth auto &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=YS1naXQtdG9rZW4=\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tEOF\n'\n\ntest_expect_success 'access using basic auth with extra challenges' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: FooBar param1=\"value1\" param2=\"value2\"\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using basic auth mixed-case wwwauth header name' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=www-authenticate: foobar param1=\"value1\" param2=\"value2\"\n\tid=default response=WWW-AUTHENTICATE: BEARER authorize_uri=\"id.example.com\" p=1 q=0\n\tid=default response=WwW-aUtHeNtIcAtE: baSiC realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=foobar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=BEARER authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=baSiC realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using basic auth with wwwauth header continuations' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\t# Note that leading and trailing whitespace is important to correctly\n\t# simulate a continuation/folded header.\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: FooBar param1=\"value1\"\n\tid=default response= param2=\"value2\"\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\"\n\tid=default response= p=1\n\tid=default response= q=0\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using basic auth with wwwauth header empty continuations' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\t# Note that leading and trailing whitespace is important to correctly\n\t# simulate a continuation/folded header.\n\tprintf \"id=1 status=200\\n\" >\"$CHALLENGE\" &&\n\tprintf \"id=default response=WWW-Authenticate: FooBar param1=\\\"value1\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= \\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= param2=\\\"value2\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response=WWW-Authenticate: Bearer authorize_uri=\\\"id.example.com\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= p=1\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= \\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= q=0\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response=WWW-Authenticate: Basic realm=\\\"example.com\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using basic auth with wwwauth header mixed continuations' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n\n\t# Basic base64(alice:secret-passwd)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Basic YWxpY2U6c2VjcmV0LXBhc3N3ZA==\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\t# Note that leading and trailing whitespace is important to correctly\n\t# simulate a continuation/folded header.\n\tprintf \"id=1 status=200\\n\" >\"$CHALLENGE\" &&\n\tprintf \"id=default response=WWW-Authenticate: FooBar param1=\\\"value1\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response= \\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response=\\tparam2=\\\"value2\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\tprintf \"id=default response=WWW-Authenticate: Basic realm=\\\"example.com\\\"\\r\\n\" >>\"$CHALLENGE\" &&\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tusername=alice\n\tpassword=secret-passwd\n\tEOF\n'\n\ntest_expect_success 'access using bearer auth' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=YS1naXQtdG9rZW4=\n\tEOF\n\n\t# Basic base64(a-git-token)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Bearer YS1naXQtdG9rZW4=\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: FooBar param1=\"value1\" param2=\"value2\"\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query store <<-EOF\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=YS1naXQtdG9rZW4=\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tEOF\n'\n\ntest_expect_success 'access using bearer auth with invalid credentials' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=incorrect-token\n\tEOF\n\n\t# Basic base64(a-git-token)\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Bearer YS1naXQtdG9rZW4=\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: FooBar param1=\"value1\" param2=\"value2\"\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tid=default response=WWW-Authenticate: Basic realm=\"example.com\"\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\ttest_must_fail git ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n\n\texpect_credential_query erase <<-EOF\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=incorrect-token\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=FooBar param1=\"value1\" param2=\"value2\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\twwwauth[]=Basic realm=\"example.com\"\n\tEOF\n'\n\ntest_expect_success 'clone with bearer auth and probe_rpc' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\ttest_when_finished \"rm -rf large.git\" &&\n\n\t# Set up a repository large enough to trigger probe_rpc\n\tgit init large.git &&\n\t(\n\t\tcd large.git &&\n\t\tgit config set maintenance.auto false &&\n\t\tgit commit --allow-empty --message \"initial\" &&\n\t\t# Create many refs to trigger probe_rpc, which is called when\n\t\t# the request body is larger than http.postBuffer.\n\t\t#\n\t\t# In the test later, http.postBuffer is set to 70000. Each\n\t\t# \"want\" line is ~45 bytes, so we need at least 70000/45 = ~1600\n\t\t# refs\n\t\ttest_seq -f \"create refs/heads/branch-%d @\" 2000 |\n\t\tgit update-ref --stdin\n\t) &&\n\tgit clone --bare large.git \"$HTTPD_DOCUMENT_ROOT_PATH/large.git\" &&\n\n\t# Clone it through HTTP with a Bearer token\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tauthtype=Bearer\n\tcredential=YS1naXQtdG9rZW4=\n\tEOF\n\n\t# Bearer token\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Bearer YS1naXQtdG9rZW4=\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=200\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\"\n\tEOF\n\n\t# Set a small buffer to force probe_rpc to be called\n\t# Must be > LARGE_PACKET_MAX (65520)\n\ttest_config_global http.postBuffer 70000 &&\n\ttest_config_global credential.helper test-helper &&\n\tgit clone \"$HTTPD_URL/custom_auth/large.git\" partial-auth-clone 2>clone-error\n'\n\ntest_expect_success 'access using three-legged auth' '\n\ttest_when_finished \"per_test_cleanup\" &&\n\n\tset_credential_reply get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tauthtype=Multistage\n\tcredential=YS1naXQtdG9rZW4=\n\tstate[]=helper:foobar\n\tcontinue=1\n\tEOF\n\n\tset_credential_reply get foobar <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tauthtype=Multistage\n\tcredential=YW5vdGhlci10b2tlbg==\n\tstate[]=helper:bazquux\n\tEOF\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.valid\" <<-EOF &&\n\tid=1 creds=Multistage YS1naXQtdG9rZW4=\n\tid=2 creds=Multistage YW5vdGhlci10b2tlbg==\n\tEOF\n\n\tCHALLENGE=\"$HTTPD_ROOT_PATH/custom-auth.challenge\" &&\n\n\tcat >\"$HTTPD_ROOT_PATH/custom-auth.challenge\" <<-EOF &&\n\tid=1 status=401 response=WWW-Authenticate: Multistage challenge=\"456\"\n\tid=1 status=401 response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tid=2 status=200\n\tid=default response=WWW-Authenticate: Multistage challenge=\"123\"\n\tid=default response=WWW-Authenticate: Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tEOF\n\n\ttest_config_global credential.helper test-helper &&\n\tgit ls-remote \"$HTTPD_URL/custom_auth/repo.git\" &&\n\n\texpect_credential_query get <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Multistage challenge=\"123\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tEOF\n\n\texpect_credential_query get foobar <<-EOF &&\n\tcapability[]=authtype\n\tcapability[]=state\n\tauthtype=Multistage\n\tprotocol=http\n\thost=$HTTPD_DEST\n\twwwauth[]=Multistage challenge=\"456\"\n\twwwauth[]=Bearer authorize_uri=\"id.example.com\" p=1 q=0\n\tstate[]=helper:foobar\n\tEOF\n\n\texpect_credential_query store bazquux <<-EOF\n\tcapability[]=authtype\n\tcapability[]=state\n\tauthtype=Multistage\n\tcredential=YW5vdGhlci10b2tlbg==\n\tprotocol=http\n\thost=$HTTPD_DEST\n\tstate[]=helper:bazquux\n\tEOF\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00635816156ba35feea882b48bfc79d93ff9338a",
  "sha1_ok": true,
  "size": 19346
}
