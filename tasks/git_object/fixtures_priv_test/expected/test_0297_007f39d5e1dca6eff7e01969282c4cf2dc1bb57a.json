{
  "content": {
    "base64": "IyEvYmluL3NoCiMKIyBDb3B5cmlnaHQgKGMpIDIwMDcgSm9oYW5uZXMgU2NoaW5kZWxpbgojCgp0ZXN0X2Rlc2NyaXB0aW9uPSdvdXIgb3duIG9wdGlvbiBwYXJzZXInCgouIC4vdGVzdC1saWIuc2gKCmNhdCA+IGV4cGVjdCA8PCBFT0YKdXNhZ2U6IHRlc3QtcGFyc2Utb3B0aW9ucyA8b3B0aW9ucz4KCiAgICAtYiwgLS1ib29sZWFuICAgICAgICAgZ2V0IGEgYm9vbGVhbgogICAgLTQsIC0tb3I0ICAgICAgICAgICAgIGJpdHdpc2Utb3IgYm9vbGVhbiB3aXRoIC4uLjAxMDAKICAgIC0tbmVnLW9yNCAgICAgICAgICAgICBzYW1lIGFzIC0tbm8tb3I0CgogICAgLWksIC0taW50ZWdlciA8bj4gICAgIGdldCBhIGludGVnZXIKICAgIC1qIDxuPiAgICAgICAgICAgICAgICBnZXQgYSBpbnRlZ2VyLCB0b28KICAgIC0tc2V0MjMgICAgICAgICAgICAgICBzZXQgaW50ZWdlciB0byAyMwogICAgLXQgPHRpbWU+ICAgICAgICAgICAgIGdldCB0aW1lc3RhbXAgb2YgPHRpbWU+CiAgICAtTCwgLS1sZW5ndGggPHN0cj4gICAgZ2V0IGxlbmd0aCBvZiA8c3RyPgogICAgLUYsIC0tZmlsZSA8ZmlsZT4gICAgIHNldCBmaWxlIHRvIDxmaWxlPgoKU3RyaW5nIG9wdGlvbnMKICAgIC1zLCAtLXN0cmluZyA8c3RyaW5nPgogICAgICAgICAgICAgICAgICAgICAgICAgIGdldCBhIHN0cmluZwogICAgLS1zdHJpbmcyIDxzdHI+ICAgICAgIGdldCBhbm90aGVyIHN0cmluZwogICAgLS1zdCA8c3Q+ICAgICAgICAgICAgIGdldCBhbm90aGVyIHN0cmluZyAocGVydmVydCBvcmRlcmluZykKICAgIC1vIDxzdHI+ICAgICAgICAgICAgICBnZXQgYW5vdGhlciBzdHJpbmcKICAgIC0tZGVmYXVsdC1zdHJpbmcgICAgICBzZXQgc3RyaW5nIHRvIGRlZmF1bHQKICAgIC0tbGlzdCA8c3RyPiAgICAgICAgICBhZGQgc3RyIHRvIGxpc3QKCk1hZ2ljIGFyZ3VtZW50cwogICAgLS1xdXV4ICAgICAgICAgICAgICAgIG1lYW5zIC0tcXV1eAogICAgLU5VTSAgICAgICAgICAgICAgICAgIHNldCBpbnRlZ2VyIHRvIE5VTQogICAgKyAgICAgICAgICAgICAgICAgICAgIHNhbWUgYXMgLWIKICAgIC0tYW1iaWd1b3VzICAgICAgICAgICBwb3NpdGl2ZSBhbWJpZ3VpdHkKICAgIC0tbm8tYW1iaWd1b3VzICAgICAgICBuZWdhdGl2ZSBhbWJpZ3VpdHkKClN0YW5kYXJkIG9wdGlvbnMKICAgIC0tYWJicmV2Wz08bj5dICAgICAgICB1c2UgPG4+IGRpZ2l0cyB0byBkaXNwbGF5IFNIQS0xcwogICAgLXYsIC0tdmVyYm9zZSAgICAgICAgIGJlIHZlcmJvc2UKICAgIC1uLCAtLWRyeS1ydW4gICAgICAgICBkcnkgcnVuCiAgICAtcSwgLS1xdWlldCAgICAgICAgICAgYmUgcXVpZXQKCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndGVzdCBoZWxwJyAnCgl0ZXN0X211c3RfZmFpbCB0ZXN0LXBhcnNlLW9wdGlvbnMgLWggPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKbXYgZXhwZWN0IGV4cGVjdC5lcnIKCmNhdCA+IGV4cGVjdCA8PCBFT0YKYm9vbGVhbjogMgppbnRlZ2VyOiAxNzI5CnRpbWVzdGFtcDogMApzdHJpbmc6IDEyMwphYmJyZXY6IDcKdmVyYm9zZTogMgpxdWlldDogbm8KZHJ5IHJ1bjogeWVzCmZpbGU6IHByZWZpeC9teS5maWxlCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2hvcnQgb3B0aW9ucycgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC1zMTIzIC1iIC1pIDE3MjkgLWIgLXZ2IC1uIC1GIG15LmZpbGUgXAoJPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdF9jbXAgZXhwZWN0IG91dHB1dCAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIKJwoKY2F0ID4gZXhwZWN0IDw8IEVPRgpib29sZWFuOiAyCmludGVnZXI6IDE3MjkKdGltZXN0YW1wOiAwCnN0cmluZzogMzIxCmFiYnJldjogMTAKdmVyYm9zZTogMgpxdWlldDogbm8KZHJ5IHJ1bjogbm8KZmlsZTogcHJlZml4L2ZpLmxlCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbG9uZyBvcHRpb25zJyAnCgl0ZXN0LXBhcnNlLW9wdGlvbnMgLS1ib29sZWFuIC0taW50ZWdlciAxNzI5IC0tYm9vbGVhbiAtLXN0cmluZzI9MzIxIFwKCQktLXZlcmJvc2UgLS12ZXJib3NlIC0tbm8tZHJ5LXJ1biAtLWFiYnJldj0xMCAtLWZpbGUgZmkubGVcCgkJPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnbWlzc2luZyByZXF1aXJlZCB2YWx1ZScgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC1zOwoJdGVzdCAkPyA9IDEyOSAmJgoJdGVzdC1wYXJzZS1vcHRpb25zIC0tc3RyaW5nOwoJdGVzdCAkPyA9IDEyOSAmJgoJdGVzdC1wYXJzZS1vcHRpb25zIC0tZmlsZTsKCXRlc3QgJD8gPSAxMjkKJwoKY2F0ID4gZXhwZWN0IDw8IEVPRgpib29sZWFuOiAxCmludGVnZXI6IDEzCnRpbWVzdGFtcDogMApzdHJpbmc6IDEyMwphYmJyZXY6IDcKdmVyYm9zZTogMApxdWlldDogbm8KZHJ5IHJ1bjogbm8KZmlsZTogKG5vdCBzZXQpCmFyZyAwMDogYTEKYXJnIDAxOiBiMQphcmcgMDI6IC0tYm9vbGVhbgpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2ludGVybWluZ2xlZCBhcmd1bWVudHMnICcKCXRlc3QtcGFyc2Utb3B0aW9ucyBhMSAtLXN0cmluZyAxMjMgYjEgLS1ib29sZWFuIC1qIDEzIC0tIC0tYm9vbGVhbiBcCgkJPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKY2F0ID4gZXhwZWN0IDw8IEVPRgpib29sZWFuOiAwCmludGVnZXI6IDIKdGltZXN0YW1wOiAwCnN0cmluZzogKG5vdCBzZXQpCmFiYnJldjogNwp2ZXJib3NlOiAwCnF1aWV0OiBubwpkcnkgcnVuOiBubwpmaWxlOiAobm90IHNldCkKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICd1bmFtYmlndW91c2x5IGFiYnJldmlhdGVkIG9wdGlvbicgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC0taW50IDIgLS1ib29sZWFuIC0tbm8tYm8gPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAndW5hbWJpZ3VvdXNseSBhYmJyZXZpYXRlZCBvcHRpb24gd2l0aCAiPSInICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtLWludD0yID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ2FtYmlndW91c2x5IGFiYnJldmlhdGVkIG9wdGlvbicgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC0tc3RyaW4gMTIzOwoJdGVzdCAkPyA9IDEyOQonCgpjYXQgPiBleHBlY3QgPDwgRU9GCmJvb2xlYW46IDAKaW50ZWdlcjogMAp0aW1lc3RhbXA6IDAKc3RyaW5nOiAxMjMKYWJicmV2OiA3CnZlcmJvc2U6IDAKcXVpZXQ6IG5vCmRyeSBydW46IG5vCmZpbGU6IChub3Qgc2V0KQpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ25vbiBhbWJpZ3VvdXMgb3B0aW9uIChhZnRlciB0d28gb3B0aW9ucyBpdCBhYmJyZXZpYXRlcyknICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtLXN0IDEyMyA+IG91dHB1dCAyPiBvdXRwdXQuZXJyICYmCgl0ZXN0ICEgLXMgb3V0cHV0LmVyciAmJgoJdGVzdF9jbXAgZXhwZWN0IG91dHB1dAonCgpjYXQgPiB0eXBvLmVyciA8PCBFT0YKZXJyb3I6IGRpZCB5b3UgbWVhbiBcYC0tYm9vbGVhblxgICh3aXRoIHR3byBkYXNoZXMgPykKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdkZXRlY3QgcG9zc2libGUgdHlwb3MnICcKCXRlc3RfbXVzdF9mYWlsIHRlc3QtcGFyc2Utb3B0aW9ucyAtYm9vbGVhbiA+IG91dHB1dCAyPiBvdXRwdXQuZXJyICYmCgl0ZXN0ICEgLXMgb3V0cHV0ICYmCgl0ZXN0X2NtcCB0eXBvLmVyciBvdXRwdXQuZXJyCicKCmNhdCA+IGV4cGVjdCA8PEVPRgpib29sZWFuOiAwCmludGVnZXI6IDAKdGltZXN0YW1wOiAwCnN0cmluZzogKG5vdCBzZXQpCmFiYnJldjogNwp2ZXJib3NlOiAwCnF1aWV0OiBubwpkcnkgcnVuOiBubwpmaWxlOiAobm90IHNldCkKYXJnIDAwOiAtLXF1dXgKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdrZWVwIHNvbWUgb3B0aW9ucyBhcyBhcmd1bWVudHMnICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtLXF1dXggPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgogICAgICAgIHRlc3QgISAtcyBvdXRwdXQuZXJyICYmCiAgICAgICAgdGVzdF9jbXAgZXhwZWN0IG91dHB1dAonCgpjYXQgPiBleHBlY3QgPDxFT0YKYm9vbGVhbjogMAppbnRlZ2VyOiAwCnRpbWVzdGFtcDogMQpzdHJpbmc6IGRlZmF1bHQKYWJicmV2OiA3CnZlcmJvc2U6IDAKcXVpZXQ6IHllcwpkcnkgcnVuOiBubwpmaWxlOiAobm90IHNldCkKYXJnIDAwOiBmb28KRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdPUFRfREFURSgpIGFuZCBPUFRfU0VUX1BUUigpIHdvcmsnICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtdCAiMTk3MC0wMS0wMSAwMDowMDowMSArMDAwMCIgLS1kZWZhdWx0LXN0cmluZyBcCgkJZm9vIC1xID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCmNhdCA+IGV4cGVjdCA8PEVPRgpDYWxsYmFjazogImZvdXIiLCAwCmJvb2xlYW46IDUKaW50ZWdlcjogNAp0aW1lc3RhbXA6IDAKc3RyaW5nOiAobm90IHNldCkKYWJicmV2OiA3CnZlcmJvc2U6IDAKcXVpZXQ6IG5vCmRyeSBydW46IG5vCmZpbGU6IChub3Qgc2V0KQpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ09QVF9DQUxMQkFDSygpIGFuZCBPUFRfQklUKCkgd29yaycgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC0tbGVuZ3RoPWZvdXIgLWIgLTQgPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKY2F0ID4gZXhwZWN0IDw8RU9GCkNhbGxiYWNrOiAibm90IHNldCIsIDEKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdPUFRfQ0FMTEJBQ0soKSBhbmQgY2FsbGJhY2sgZXJyb3JzIHdvcmsnICcKCXRlc3RfbXVzdF9mYWlsIHRlc3QtcGFyc2Utb3B0aW9ucyAtLW5vLWxlbmd0aCA+IG91dHB1dCAyPiBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0ICYmCgl0ZXN0X2NtcCBleHBlY3QuZXJyIG91dHB1dC5lcnIKJwoKY2F0ID4gZXhwZWN0IDw8RU9GCmJvb2xlYW46IDEKaW50ZWdlcjogMjMKdGltZXN0YW1wOiAwCnN0cmluZzogKG5vdCBzZXQpCmFiYnJldjogNwp2ZXJib3NlOiAwCnF1aWV0OiBubwpkcnkgcnVuOiBubwpmaWxlOiAobm90IHNldCkKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdPUFRfQklUKCkgYW5kIE9QVF9TRVRfSU5UKCkgd29yaycgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC0tc2V0MjMgLWJiYmJiIC0tbm8tb3I0ID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ09QVF9ORUdCSVQoKSBhbmQgT1BUX1NFVF9JTlQoKSB3b3JrJyAnCgl0ZXN0LXBhcnNlLW9wdGlvbnMgLS1zZXQyMyAtYmJiYmIgLS1uZWctb3I0ID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCmNhdCA+IGV4cGVjdCA8PEVPRgpib29sZWFuOiA2CmludGVnZXI6IDAKdGltZXN0YW1wOiAwCnN0cmluZzogKG5vdCBzZXQpCmFiYnJldjogNwp2ZXJib3NlOiAwCnF1aWV0OiBubwpkcnkgcnVuOiBubwpmaWxlOiAobm90IHNldCkKRU9GCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdPUFRfQklUKCkgd29ya3MnICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtYmIgLS1vcjQgPiBvdXRwdXQgMj4gb3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnT1BUX05FR0JJVCgpIHdvcmtzJyAnCgl0ZXN0LXBhcnNlLW9wdGlvbnMgLWJiIC0tbm8tbmVnLW9yNCA+IG91dHB1dCAyPiBvdXRwdXQuZXJyICYmCgl0ZXN0ICEgLXMgb3V0cHV0LmVyciAmJgoJdGVzdF9jbXAgZXhwZWN0IG91dHB1dAonCgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdPUFRfQk9PTEVBTigpIHdpdGggUEFSU0VfT1BUX05PREFTSCB3b3JrcycgJwoJdGVzdC1wYXJzZS1vcHRpb25zICsgKyArICsgKyArID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCmNhdCA+IGV4cGVjdCA8PEVPRgpib29sZWFuOiAwCmludGVnZXI6IDEyMzQ1CnRpbWVzdGFtcDogMApzdHJpbmc6IChub3Qgc2V0KQphYmJyZXY6IDcKdmVyYm9zZTogMApxdWlldDogbm8KZHJ5IHJ1bjogbm8KZmlsZTogKG5vdCBzZXQpCkVPRgoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnT1BUX05VTUJFUl9DQUxMQkFDSygpIHdvcmtzJyAnCgl0ZXN0LXBhcnNlLW9wdGlvbnMgLTEyMzQ1ID4gb3V0cHV0IDI+IG91dHB1dC5lcnIgJiYKCXRlc3QgISAtcyBvdXRwdXQuZXJyICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCmNhdCA+ZXhwZWN0IDw8RU9GCmJvb2xlYW46IDAKaW50ZWdlcjogMAp0aW1lc3RhbXA6IDAKc3RyaW5nOiAobm90IHNldCkKYWJicmV2OiA3CnZlcmJvc2U6IDAKcXVpZXQ6IG5vCmRyeSBydW46IG5vCmZpbGU6IChub3Qgc2V0KQpFT0YKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ25lZ2F0aW9uIG9mIE9QVF9OT05FRyBmbGFncyBpcyBub3QgYW1iaWd1b3VzJyAnCgl0ZXN0LXBhcnNlLW9wdGlvbnMgLS1uby1hbWJpZyA+b3V0cHV0IDI+b3V0cHV0LmVyciAmJgoJdGVzdCAhIC1zIG91dHB1dC5lcnIgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKY2F0ID4+ZXhwZWN0IDw8J0VPRicKbGlzdDogZm9vCmxpc3Q6IGJhcgpsaXN0OiBiYXoKRU9GCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJy0tbGlzdCBrZWVwcyBsaXN0IG9mIHN0cmluZ3MnICcKCXRlc3QtcGFyc2Utb3B0aW9ucyAtLWxpc3QgZm9vIC0tbGlzdD1iYXIgLS1saXN0PWJheiA+b3V0cHV0ICYmCgl0ZXN0X2NtcCBleHBlY3Qgb3V0cHV0CicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJy0tbm8tbGlzdCByZXNldHMgbGlzdCcgJwoJdGVzdC1wYXJzZS1vcHRpb25zIC0tbGlzdD1vdGhlciAtLWxpc3Q9aXJyZWxldmFudCAtLWxpc3Q9b3B0aW9ucyBcCgkJLS1uby1saXN0IC0tbGlzdD1mb28gLS1saXN0PWJhciAtLWxpc3Q9YmF6ID5vdXRwdXQgJiYKCXRlc3RfY21wIGV4cGVjdCBvdXRwdXQKJwoKdGVzdF9kb25lCg==",
    "text": "#!/bin/sh\n#\n# Copyright (c) 2007 Johannes Schindelin\n#\n\ntest_description='our own option parser'\n\n. ./test-lib.sh\n\ncat > expect << EOF\nusage: test-parse-options <options>\n\n    -b, --boolean         get a boolean\n    -4, --or4             bitwise-or boolean with ...0100\n    --neg-or4             same as --no-or4\n\n    -i, --integer <n>     get a integer\n    -j <n>                get a integer, too\n    --set23               set integer to 23\n    -t <time>             get timestamp of <time>\n    -L, --length <str>    get length of <str>\n    -F, --file <file>     set file to <file>\n\nString options\n    -s, --string <string>\n                          get a string\n    --string2 <str>       get another string\n    --st <st>             get another string (pervert ordering)\n    -o <str>              get another string\n    --default-string      set string to default\n    --list <str>          add str to list\n\nMagic arguments\n    --quux                means --quux\n    -NUM                  set integer to NUM\n    +                     same as -b\n    --ambiguous           positive ambiguity\n    --no-ambiguous        negative ambiguity\n\nStandard options\n    --abbrev[=<n>]        use <n> digits to display SHA-1s\n    -v, --verbose         be verbose\n    -n, --dry-run         dry run\n    -q, --quiet           be quiet\n\nEOF\n\ntest_expect_success 'test help' '\n\ttest_must_fail test-parse-options -h > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\nmv expect expect.err\n\ncat > expect << EOF\nboolean: 2\ninteger: 1729\ntimestamp: 0\nstring: 123\nabbrev: 7\nverbose: 2\nquiet: no\ndry run: yes\nfile: prefix/my.file\nEOF\n\ntest_expect_success 'short options' '\n\ttest-parse-options -s123 -b -i 1729 -b -vv -n -F my.file \\\n\t> output 2> output.err &&\n\ttest_cmp expect output &&\n\ttest ! -s output.err\n'\n\ncat > expect << EOF\nboolean: 2\ninteger: 1729\ntimestamp: 0\nstring: 321\nabbrev: 10\nverbose: 2\nquiet: no\ndry run: no\nfile: prefix/fi.le\nEOF\n\ntest_expect_success 'long options' '\n\ttest-parse-options --boolean --integer 1729 --boolean --string2=321 \\\n\t\t--verbose --verbose --no-dry-run --abbrev=10 --file fi.le\\\n\t\t> output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'missing required value' '\n\ttest-parse-options -s;\n\ttest $? = 129 &&\n\ttest-parse-options --string;\n\ttest $? = 129 &&\n\ttest-parse-options --file;\n\ttest $? = 129\n'\n\ncat > expect << EOF\nboolean: 1\ninteger: 13\ntimestamp: 0\nstring: 123\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\narg 00: a1\narg 01: b1\narg 02: --boolean\nEOF\n\ntest_expect_success 'intermingled arguments' '\n\ttest-parse-options a1 --string 123 b1 --boolean -j 13 -- --boolean \\\n\t\t> output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > expect << EOF\nboolean: 0\ninteger: 2\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'unambiguously abbreviated option' '\n\ttest-parse-options --int 2 --boolean --no-bo > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'unambiguously abbreviated option with \"=\"' '\n\ttest-parse-options --int=2 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'ambiguously abbreviated option' '\n\ttest-parse-options --strin 123;\n\ttest $? = 129\n'\n\ncat > expect << EOF\nboolean: 0\ninteger: 0\ntimestamp: 0\nstring: 123\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'non ambiguous option (after two options it abbreviates)' '\n\ttest-parse-options --st 123 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > typo.err << EOF\nerror: did you mean \\`--boolean\\` (with two dashes ?)\nEOF\n\ntest_expect_success 'detect possible typos' '\n\ttest_must_fail test-parse-options -boolean > output 2> output.err &&\n\ttest ! -s output &&\n\ttest_cmp typo.err output.err\n'\n\ncat > expect <<EOF\nboolean: 0\ninteger: 0\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\narg 00: --quux\nEOF\n\ntest_expect_success 'keep some options as arguments' '\n\ttest-parse-options --quux > output 2> output.err &&\n        test ! -s output.err &&\n        test_cmp expect output\n'\n\ncat > expect <<EOF\nboolean: 0\ninteger: 0\ntimestamp: 1\nstring: default\nabbrev: 7\nverbose: 0\nquiet: yes\ndry run: no\nfile: (not set)\narg 00: foo\nEOF\n\ntest_expect_success 'OPT_DATE() and OPT_SET_PTR() work' '\n\ttest-parse-options -t \"1970-01-01 00:00:01 +0000\" --default-string \\\n\t\tfoo -q > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > expect <<EOF\nCallback: \"four\", 0\nboolean: 5\ninteger: 4\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'OPT_CALLBACK() and OPT_BIT() work' '\n\ttest-parse-options --length=four -b -4 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > expect <<EOF\nCallback: \"not set\", 1\nEOF\n\ntest_expect_success 'OPT_CALLBACK() and callback errors work' '\n\ttest_must_fail test-parse-options --no-length > output 2> output.err &&\n\ttest_cmp expect output &&\n\ttest_cmp expect.err output.err\n'\n\ncat > expect <<EOF\nboolean: 1\ninteger: 23\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'OPT_BIT() and OPT_SET_INT() work' '\n\ttest-parse-options --set23 -bbbbb --no-or4 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'OPT_NEGBIT() and OPT_SET_INT() work' '\n\ttest-parse-options --set23 -bbbbb --neg-or4 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > expect <<EOF\nboolean: 6\ninteger: 0\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'OPT_BIT() works' '\n\ttest-parse-options -bb --or4 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'OPT_NEGBIT() works' '\n\ttest-parse-options -bb --no-neg-or4 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ntest_expect_success 'OPT_BOOLEAN() with PARSE_OPT_NODASH works' '\n\ttest-parse-options + + + + + + > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat > expect <<EOF\nboolean: 0\ninteger: 12345\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'OPT_NUMBER_CALLBACK() works' '\n\ttest-parse-options -12345 > output 2> output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat >expect <<EOF\nboolean: 0\ninteger: 0\ntimestamp: 0\nstring: (not set)\nabbrev: 7\nverbose: 0\nquiet: no\ndry run: no\nfile: (not set)\nEOF\n\ntest_expect_success 'negation of OPT_NONEG flags is not ambiguous' '\n\ttest-parse-options --no-ambig >output 2>output.err &&\n\ttest ! -s output.err &&\n\ttest_cmp expect output\n'\n\ncat >>expect <<'EOF'\nlist: foo\nlist: bar\nlist: baz\nEOF\ntest_expect_success '--list keeps list of strings' '\n\ttest-parse-options --list foo --list=bar --list=baz >output &&\n\ttest_cmp expect output\n'\n\ntest_expect_success '--no-list resets list' '\n\ttest-parse-options --list=other --list=irrelevant --list=options \\\n\t\t--no-list --list=foo --list=bar --list=baz >output &&\n\ttest_cmp expect output\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "007f39d5e1dca6eff7e01969282c4cf2dc1bb57a",
  "sha1_ok": true,
  "size": 7315
}
