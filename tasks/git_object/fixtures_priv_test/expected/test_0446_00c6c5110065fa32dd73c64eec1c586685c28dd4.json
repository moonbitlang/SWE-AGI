{
  "content": {
    "base64": "IyEvYmluL3NoCgp0ZXN0X2Rlc2NyaXB0aW9uPSd2ZXJpZnkgc2FmZS5kaXJlY3RvcnkgY2hlY2tzJwoKLiAuL3Rlc3QtbGliLnNoCgpHSVRfVEVTVF9BU1NVTUVfRElGRkVSRU5UX09XTkVSPTEKZXhwb3J0IEdJVF9URVNUX0FTU1VNRV9ESUZGRVJFTlRfT1dORVIKCmV4cGVjdF9yZWplY3RlZF9kaXIgKCkgewoJdGVzdF9tdXN0X2ZhaWwgZ2l0IHN0YXR1cyAyPmVyciAmJgoJdGVzdF9pMThuZ3JlcCAic2FmZS5kaXJlY3RvcnkiIGVycgp9Cgp0ZXN0X2V4cGVjdF9zdWNjZXNzICdzYWZlLmRpcmVjdG9yeSBpcyBub3Qgc2V0JyAnCglleHBlY3RfcmVqZWN0ZWRfZGlyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NhZmUuZGlyZWN0b3J5IGRvZXMgbm90IG1hdGNoJyAnCglnaXQgY29uZmlnIC0tZ2xvYmFsIHNhZmUuZGlyZWN0b3J5IGJvZ3VzICYmCglleHBlY3RfcmVqZWN0ZWRfZGlyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3BhdGggZXhpc3QgYXMgZGlmZmVyZW50IGtleScgJwoJZ2l0IGNvbmZpZyAtLWdsb2JhbCBmb28uYmFyICIkKHB3ZCkiICYmCglleHBlY3RfcmVqZWN0ZWRfZGlyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NhZmUuZGlyZWN0b3J5IG1hdGNoZXMnICcKCWdpdCBjb25maWcgLS1nbG9iYWwgLS1hZGQgc2FmZS5kaXJlY3RvcnkgIiQocHdkKSIgJiYKCWdpdCBzdGF0dXMKJwoKdGVzdF9leHBlY3Rfc3VjY2VzcyAnc2FmZS5kaXJlY3RvcnkgbWF0Y2hlcywgYnV0IGlzIHJlc2V0JyAnCglnaXQgY29uZmlnIC0tZ2xvYmFsIC0tYWRkIHNhZmUuZGlyZWN0b3J5ICIiICYmCglleHBlY3RfcmVqZWN0ZWRfZGlyCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NhZmUuZGlyZWN0b3J5PSonICcKCWdpdCBjb25maWcgLS1nbG9iYWwgLS1hZGQgc2FmZS5kaXJlY3RvcnkgIioiICYmCglnaXQgc3RhdHVzCicKCnRlc3RfZXhwZWN0X3N1Y2Nlc3MgJ3NhZmUuZGlyZWN0b3J5PSosIGJ1dCBpcyByZXNldCcgJwoJZ2l0IGNvbmZpZyAtLWdsb2JhbCAtLWFkZCBzYWZlLmRpcmVjdG9yeSAiIiAmJgoJZXhwZWN0X3JlamVjdGVkX2RpcgonCgp0ZXN0X2RvbmUK",
    "text": "#!/bin/sh\n\ntest_description='verify safe.directory checks'\n\n. ./test-lib.sh\n\nGIT_TEST_ASSUME_DIFFERENT_OWNER=1\nexport GIT_TEST_ASSUME_DIFFERENT_OWNER\n\nexpect_rejected_dir () {\n\ttest_must_fail git status 2>err &&\n\ttest_i18ngrep \"safe.directory\" err\n}\n\ntest_expect_success 'safe.directory is not set' '\n\texpect_rejected_dir\n'\n\ntest_expect_success 'safe.directory does not match' '\n\tgit config --global safe.directory bogus &&\n\texpect_rejected_dir\n'\n\ntest_expect_success 'path exist as different key' '\n\tgit config --global foo.bar \"$(pwd)\" &&\n\texpect_rejected_dir\n'\n\ntest_expect_success 'safe.directory matches' '\n\tgit config --global --add safe.directory \"$(pwd)\" &&\n\tgit status\n'\n\ntest_expect_success 'safe.directory matches, but is reset' '\n\tgit config --global --add safe.directory \"\" &&\n\texpect_rejected_dir\n'\n\ntest_expect_success 'safe.directory=*' '\n\tgit config --global --add safe.directory \"*\" &&\n\tgit status\n'\n\ntest_expect_success 'safe.directory=*, but is reset' '\n\tgit config --global --add safe.directory \"\" &&\n\texpect_rejected_dir\n'\n\ntest_done\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "00c6c5110065fa32dd73c64eec1c586685c28dd4",
  "sha1_ok": true,
  "size": 1056
}
