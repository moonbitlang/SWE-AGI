{
  "content": {
    "base64": "LyoKICogR0lUIC0gVGhlIGluZm9ybWF0aW9uIG1hbmFnZXIgZnJvbSBoZWxsCiAqCiAqIENvcHlyaWdodCAoQykgTGludXMgVG9ydmFsZHMsIDIwMDUKICovCiNpbmNsdWRlICJjYWNoZS5oIgoKaW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQp7Cgl1bnNpZ25lZCBjaGFyIHNoYTFbMjBdOwoJY2hhciB0eXBlWzIwXTsKCXZvaWQgKmJ1ZjsKCXVuc2lnbmVkIGxvbmcgc2l6ZTsKCglpZiAoYXJnYyAhPSAzIHx8IGdldF9zaGExKGFyZ3ZbMl0sIHNoYTEpKQoJCXVzYWdlKCJnaXQtY2F0LWZpbGUgWy10IHwgdGFnbmFtZV0gPHNoYTE+Iik7CgoJaWYgKCFzdHJjbXAoIi10IiwgYXJndlsxXSkpIHsKCQlpZiAoIXNoYTFfb2JqZWN0X2luZm8oc2hhMSwgdHlwZSwgJnNpemUpKSB7CgkJCXByaW50ZigiJXNcbiIsIHR5cGUpOwoJCQlyZXR1cm4gMDsKCQl9CgkJYnVmID0gTlVMTDsKCX0gZWxzZSB7CgkJYnVmID0gcmVhZF9vYmplY3Rfd2l0aF9yZWZlcmVuY2Uoc2hhMSwgYXJndlsxXSwgJnNpemUsIE5VTEwpOwoJfQoKCWlmICghYnVmKQoJCWRpZSgiZ2l0LWNhdC1maWxlICVzOiBiYWQgZmlsZSIsIGFyZ3ZbMl0pOwoKCXdoaWxlIChzaXplID4gMCkgewoJCWxvbmcgcmV0ID0gd3JpdGUoMSwgYnVmLCBzaXplKTsKCQlpZiAocmV0IDwgMCkgewoJCQlpZiAoZXJybm8gPT0gRUFHQUlOKQoJCQkJY29udGludWU7CgkJCS8qIElnbm9yZSBlcGlwZSAqLwoJCQlpZiAoZXJybm8gPT0gRVBJUEUpCgkJCQlicmVhazsKCQkJZGllKCJnaXQtY2F0LWZpbGU6ICVzIiwgc3RyZXJyb3IoZXJybm8pKTsKCQl9IGVsc2UgaWYgKCFyZXQpIHsKCQkJZGllKCJnaXQtY2F0LWZpbGU6IGRpc2sgZnVsbD8iKTsKCQl9CgkJc2l6ZSAtPSByZXQ7CgkJYnVmICs9IHJldDsKCX0KCXJldHVybiAwOwp9Cg==",
    "text": "/*\n * GIT - The information manager from hell\n *\n * Copyright (C) Linus Torvalds, 2005\n */\n#include \"cache.h\"\n\nint main(int argc, char **argv)\n{\n\tunsigned char sha1[20];\n\tchar type[20];\n\tvoid *buf;\n\tunsigned long size;\n\n\tif (argc != 3 || get_sha1(argv[2], sha1))\n\t\tusage(\"git-cat-file [-t | tagname] <sha1>\");\n\n\tif (!strcmp(\"-t\", argv[1])) {\n\t\tif (!sha1_object_info(sha1, type, &size)) {\n\t\t\tprintf(\"%s\\n\", type);\n\t\t\treturn 0;\n\t\t}\n\t\tbuf = NULL;\n\t} else {\n\t\tbuf = read_object_with_reference(sha1, argv[1], &size, NULL);\n\t}\n\n\tif (!buf)\n\t\tdie(\"git-cat-file %s: bad file\", argv[2]);\n\n\twhile (size > 0) {\n\t\tlong ret = write(1, buf, size);\n\t\tif (ret < 0) {\n\t\t\tif (errno == EAGAIN)\n\t\t\t\tcontinue;\n\t\t\t/* Ignore epipe */\n\t\t\tif (errno == EPIPE)\n\t\t\t\tbreak;\n\t\t\tdie(\"git-cat-file: %s\", strerror(errno));\n\t\t} else if (!ret) {\n\t\t\tdie(\"git-cat-file: disk full?\");\n\t\t}\n\t\tsize -= ret;\n\t\tbuf += ret;\n\t}\n\treturn 0;\n}\n",
    "type": "blob"
  },
  "kind": "blob",
  "oid": "0076fc5b20a71b4d32add42b8dcb76a22eea4ef6",
  "sha1_ok": true,
  "size": 895
}
